(function webpackUniversalModuleDefinition(root,factory){if(typeof exports==="object"&&typeof module==="object")module.exports=factory(require("jQuery"));else if(typeof define==="function"&&define.amd)define(["jQuery"],factory);else if(typeof exports==="object")exports["grapesjs"]=factory(require("jQuery"));else root["grapesjs"]=factory(root["jQuery"])})(this,function(__WEBPACK_EXTERNAL_MODULE_30__){return function(modules){var installedModules={};function __webpack_require__(moduleId){if(installedModules[moduleId]){return installedModules[moduleId].exports}var module=installedModules[moduleId]={i:moduleId,l:false,exports:{}};modules[moduleId].call(module.exports,module,module.exports,__webpack_require__);module.l=true;return module.exports}__webpack_require__.m=modules;__webpack_require__.c=installedModules;__webpack_require__.i=function(value){return value};__webpack_require__.d=function(exports,name,getter){if(!__webpack_require__.o(exports,name)){Object.defineProperty(exports,name,{configurable:false,enumerable:true,get:getter})}};__webpack_require__.n=function(module){var getter=module&&module.__esModule?function getDefault(){return module["default"]}:function getModuleExports(){return module};__webpack_require__.d(getter,"a",getter);return getter};__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property)};__webpack_require__.p="";return __webpack_require__(__webpack_require__.s=311)}([function(module,exports,__webpack_require__){(function(global){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;(function(factory){var root=typeof self=="object"&&self.self===self&&self||typeof global=="object"&&global.global===global&&global;if(true){!(__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__(1),__webpack_require__(30),exports],__WEBPACK_AMD_DEFINE_RESULT__=function(_,$,exports){root.Backbone=factory(root,exports,_,$)}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),__WEBPACK_AMD_DEFINE_RESULT__!==undefined&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))}else if(typeof exports!=="undefined"){var _=require("underscore"),$;try{$=require("jquery")}catch(e){}factory(root,exports,_,$)}else{root.Backbone=factory(root,{},root._,root.jQuery||root.Zepto||root.ender||root.$)}})(function(root,Backbone,_,$){var previousBackbone=root.Backbone;var slice=Array.prototype.slice;Backbone.VERSION="1.3.3";Backbone.$=$;Backbone.noConflict=function(){root.Backbone=previousBackbone;return this};Backbone.emulateHTTP=false;Backbone.emulateJSON=false;var addMethod=function(length,method,attribute){switch(length){case 1:return function(){return _[method](this[attribute])};case 2:return function(value){return _[method](this[attribute],value)};case 3:return function(iteratee,context){return _[method](this[attribute],cb(iteratee,this),context)};case 4:return function(iteratee,defaultVal,context){return _[method](this[attribute],cb(iteratee,this),defaultVal,context)};default:return function(){var args=slice.call(arguments);args.unshift(this[attribute]);return _[method].apply(_,args)}}};var addUnderscoreMethods=function(Class,methods,attribute){_.each(methods,function(length,method){if(_[method])Class.prototype[method]=addMethod(length,method,attribute)})};var cb=function(iteratee,instance){if(_.isFunction(iteratee))return iteratee;if(_.isObject(iteratee)&&!instance._isModel(iteratee))return modelMatcher(iteratee);if(_.isString(iteratee))return function(model){return model.get(iteratee)};return iteratee};var modelMatcher=function(attrs){var matcher=_.matches(attrs);return function(model){return matcher(model.attributes)}};var Events=Backbone.Events={};var eventSplitter=/\s+/;var eventsApi=function(iteratee,events,name,callback,opts){var i=0,names;if(name&&typeof name==="object"){if(callback!==void 0&&"context"in opts&&opts.context===void 0)opts.context=callback;for(names=_.keys(name);i<names.length;i++){events=eventsApi(iteratee,events,names[i],name[names[i]],opts)}}else if(name&&eventSplitter.test(name)){for(names=name.split(eventSplitter);i<names.length;i++){events=iteratee(events,names[i],callback,opts)}}else{events=iteratee(events,name,callback,opts)}return events};Events.on=function(name,callback,context){return internalOn(this,name,callback,context)};var internalOn=function(obj,name,callback,context,listening){obj._events=eventsApi(onApi,obj._events||{},name,callback,{context:context,ctx:obj,listening:listening});if(listening){var listeners=obj._listeners||(obj._listeners={});listeners[listening.id]=listening}return obj};Events.listenTo=function(obj,name,callback){if(!obj)return this;var id=obj._listenId||(obj._listenId=_.uniqueId("l"));var listeningTo=this._listeningTo||(this._listeningTo={});var listening=listeningTo[id];if(!listening){var thisId=this._listenId||(this._listenId=_.uniqueId("l"));listening=listeningTo[id]={obj:obj,objId:id,id:thisId,listeningTo:listeningTo,count:0}}internalOn(obj,name,callback,this,listening);return this};var onApi=function(events,name,callback,options){if(callback){var handlers=events[name]||(events[name]=[]);var context=options.context,ctx=options.ctx,listening=options.listening;if(listening)listening.count++;handlers.push({callback:callback,context:context,ctx:context||ctx,listening:listening})}return events};Events.off=function(name,callback,context){if(!this._events)return this;this._events=eventsApi(offApi,this._events,name,callback,{context:context,listeners:this._listeners});return this};Events.stopListening=function(obj,name,callback){var listeningTo=this._listeningTo;if(!listeningTo)return this;var ids=obj?[obj._listenId]:_.keys(listeningTo);for(var i=0;i<ids.length;i++){var listening=listeningTo[ids[i]];if(!listening)break;listening.obj.off(name,callback,this)}return this};var offApi=function(events,name,callback,options){if(!events)return;var i=0,listening;var context=options.context,listeners=options.listeners;if(!name&&!callback&&!context){var ids=_.keys(listeners);for(;i<ids.length;i++){listening=listeners[ids[i]];delete listeners[listening.id];delete listening.listeningTo[listening.objId]}return}var names=name?[name]:_.keys(events);for(;i<names.length;i++){name=names[i];var handlers=events[name];if(!handlers)break;var remaining=[];for(var j=0;j<handlers.length;j++){var handler=handlers[j];if(callback&&callback!==handler.callback&&callback!==handler.callback._callback||context&&context!==handler.context){remaining.push(handler)}else{listening=handler.listening;if(listening&&--listening.count===0){delete listeners[listening.id];delete listening.listeningTo[listening.objId]}}}if(remaining.length){events[name]=remaining}else{delete events[name]}}return events};Events.once=function(name,callback,context){var events=eventsApi(onceMap,{},name,callback,_.bind(this.off,this));if(typeof name==="string"&&context==null)callback=void 0;return this.on(events,callback,context)};Events.listenToOnce=function(obj,name,callback){var events=eventsApi(onceMap,{},name,callback,_.bind(this.stopListening,this,obj));return this.listenTo(obj,events)};var onceMap=function(map,name,callback,offer){if(callback){var once=map[name]=_.once(function(){offer(name,once);callback.apply(this,arguments)});once._callback=callback}return map};Events.trigger=function(name){if(!this._events)return this;var length=Math.max(0,arguments.length-1);var args=Array(length);for(var i=0;i<length;i++)args[i]=arguments[i+1];eventsApi(triggerApi,this._events,name,void 0,args);return this};var triggerApi=function(objEvents,name,callback,args){if(objEvents){var events=objEvents[name];var allEvents=objEvents.all;if(events&&allEvents)allEvents=allEvents.slice();if(events)triggerEvents(events,args);if(allEvents)triggerEvents(allEvents,[name].concat(args))}return objEvents};var triggerEvents=function(events,args){var ev,i=-1,l=events.length,a1=args[0],a2=args[1],a3=args[2];switch(args.length){case 0:while(++i<l)(ev=events[i]).callback.call(ev.ctx);return;case 1:while(++i<l)(ev=events[i]).callback.call(ev.ctx,a1);return;case 2:while(++i<l)(ev=events[i]).callback.call(ev.ctx,a1,a2);return;case 3:while(++i<l)(ev=events[i]).callback.call(ev.ctx,a1,a2,a3);return;default:while(++i<l)(ev=events[i]).callback.apply(ev.ctx,args);return}};Events.bind=Events.on;Events.unbind=Events.off;_.extend(Backbone,Events);var Model=Backbone.Model=function(attributes,options){var attrs=attributes||{};options||(options={});this.cid=_.uniqueId(this.cidPrefix);this.attributes={};if(options.collection)this.collection=options.collection;if(options.parse)attrs=this.parse(attrs,options)||{};var defaults=_.result(this,"defaults");attrs=_.defaults(_.extend({},defaults,attrs),defaults);this.set(attrs,options);this.changed={};this.initialize.apply(this,arguments)};_.extend(Model.prototype,Events,{changed:null,validationError:null,idAttribute:"id",cidPrefix:"c",initialize:function(){},toJSON:function(options){return _.clone(this.attributes)},sync:function(){return Backbone.sync.apply(this,arguments)},get:function(attr){return this.attributes[attr]},escape:function(attr){return _.escape(this.get(attr))},has:function(attr){return this.get(attr)!=null},matches:function(attrs){return!!_.iteratee(attrs,this)(this.attributes)},set:function(key,val,options){if(key==null)return this;var attrs;if(typeof key==="object"){attrs=key;options=val}else{(attrs={})[key]=val}options||(options={});if(!this._validate(attrs,options))return false;var unset=options.unset;var silent=options.silent;var changes=[];var changing=this._changing;this._changing=true;if(!changing){this._previousAttributes=_.clone(this.attributes);this.changed={}}var current=this.attributes;var changed=this.changed;var prev=this._previousAttributes;for(var attr in attrs){val=attrs[attr];if(!_.isEqual(current[attr],val))changes.push(attr);if(!_.isEqual(prev[attr],val)){changed[attr]=val}else{delete changed[attr]}unset?delete current[attr]:current[attr]=val}if(this.idAttribute in attrs)this.id=this.get(this.idAttribute);if(!silent){if(changes.length)this._pending=options;for(var i=0;i<changes.length;i++){this.trigger("change:"+changes[i],this,current[changes[i]],options)}}if(changing)return this;if(!silent){while(this._pending){options=this._pending;this._pending=false;this.trigger("change",this,options)}}this._pending=false;this._changing=false;return this},unset:function(attr,options){return this.set(attr,void 0,_.extend({},options,{unset:true}))},clear:function(options){var attrs={};for(var key in this.attributes)attrs[key]=void 0;return this.set(attrs,_.extend({},options,{unset:true}))},hasChanged:function(attr){if(attr==null)return!_.isEmpty(this.changed);return _.has(this.changed,attr)},changedAttributes:function(diff){if(!diff)return this.hasChanged()?_.clone(this.changed):false;var old=this._changing?this._previousAttributes:this.attributes;var changed={};for(var attr in diff){var val=diff[attr];if(_.isEqual(old[attr],val))continue;changed[attr]=val}return _.size(changed)?changed:false},previous:function(attr){if(attr==null||!this._previousAttributes)return null;return this._previousAttributes[attr]},previousAttributes:function(){return _.clone(this._previousAttributes)},fetch:function(options){options=_.extend({parse:true},options);var model=this;var success=options.success;options.success=function(resp){var serverAttrs=options.parse?model.parse(resp,options):resp;if(!model.set(serverAttrs,options))return false;if(success)success.call(options.context,model,resp,options);model.trigger("sync",model,resp,options)};wrapError(this,options);return this.sync("read",this,options)},save:function(key,val,options){var attrs;if(key==null||typeof key==="object"){attrs=key;options=val}else{(attrs={})[key]=val}options=_.extend({validate:true,parse:true},options);var wait=options.wait;if(attrs&&!wait){if(!this.set(attrs,options))return false}else if(!this._validate(attrs,options)){return false}var model=this;var success=options.success;var attributes=this.attributes;options.success=function(resp){model.attributes=attributes;var serverAttrs=options.parse?model.parse(resp,options):resp;if(wait)serverAttrs=_.extend({},attrs,serverAttrs);if(serverAttrs&&!model.set(serverAttrs,options))return false;if(success)success.call(options.context,model,resp,options);model.trigger("sync",model,resp,options)};wrapError(this,options);if(attrs&&wait)this.attributes=_.extend({},attributes,attrs);var method=this.isNew()?"create":options.patch?"patch":"update";if(method==="patch"&&!options.attrs)options.attrs=attrs;var xhr=this.sync(method,this,options);this.attributes=attributes;return xhr},destroy:function(options){options=options?_.clone(options):{};var model=this;var success=options.success;var wait=options.wait;var destroy=function(){model.stopListening();model.trigger("destroy",model,model.collection,options)};options.success=function(resp){if(wait)destroy();if(success)success.call(options.context,model,resp,options);if(!model.isNew())model.trigger("sync",model,resp,options)};var xhr=false;if(this.isNew()){_.defer(options.success)}else{wrapError(this,options);xhr=this.sync("delete",this,options)}if(!wait)destroy();return xhr},url:function(){var base=_.result(this,"urlRoot")||_.result(this.collection,"url")||urlError();if(this.isNew())return base;var id=this.get(this.idAttribute);return base.replace(/[^\/]$/,"$&/")+encodeURIComponent(id)},parse:function(resp,options){return resp},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(options){return this._validate({},_.extend({},options,{validate:true}))},_validate:function(attrs,options){if(!options.validate||!this.validate)return true;attrs=_.extend({},this.attributes,attrs);var error=this.validationError=this.validate(attrs,options)||null;if(!error)return true;this.trigger("invalid",this,error,_.extend(options,{validationError:error}));return false}});var modelMethods={keys:1,values:1,pairs:1,invert:1,pick:0,omit:0,chain:1,isEmpty:1};addUnderscoreMethods(Model,modelMethods,"attributes");var Collection=Backbone.Collection=function(models,options){options||(options={});if(options.model)this.model=options.model;if(options.comparator!==void 0)this.comparator=options.comparator;this._reset();this.initialize.apply(this,arguments);if(models)this.reset(models,_.extend({silent:true},options))};var setOptions={add:true,remove:true,merge:true};var addOptions={add:true,remove:false};var splice=function(array,insert,at){at=Math.min(Math.max(at,0),array.length);var tail=Array(array.length-at);var length=insert.length;var i;for(i=0;i<tail.length;i++)tail[i]=array[i+at];for(i=0;i<length;i++)array[i+at]=insert[i];for(i=0;i<tail.length;i++)array[i+length+at]=tail[i]};_.extend(Collection.prototype,Events,{model:Model,initialize:function(){},toJSON:function(options){return this.map(function(model){return model.toJSON(options)})},sync:function(){return Backbone.sync.apply(this,arguments)},add:function(models,options){return this.set(models,_.extend({merge:false},options,addOptions))},remove:function(models,options){options=_.extend({},options);var singular=!_.isArray(models);models=singular?[models]:models.slice();var removed=this._removeModels(models,options);if(!options.silent&&removed.length){options.changes={added:[],merged:[],removed:removed};this.trigger("update",this,options)}return singular?removed[0]:removed},set:function(models,options){if(models==null)return;options=_.extend({},setOptions,options);if(options.parse&&!this._isModel(models)){models=this.parse(models,options)||[]}var singular=!_.isArray(models);models=singular?[models]:models.slice();var at=options.at;if(at!=null)at=+at;if(at>this.length)at=this.length;if(at<0)at+=this.length+1;var set=[];var toAdd=[];var toMerge=[];var toRemove=[];var modelMap={};var add=options.add;var merge=options.merge;var remove=options.remove;var sort=false;var sortable=this.comparator&&at==null&&options.sort!==false;var sortAttr=_.isString(this.comparator)?this.comparator:null;var model,i;for(i=0;i<models.length;i++){model=models[i];var existing=this.get(model);if(existing){if(merge&&model!==existing){var attrs=this._isModel(model)?model.attributes:model;if(options.parse)attrs=existing.parse(attrs,options);existing.set(attrs,options);toMerge.push(existing);if(sortable&&!sort)sort=existing.hasChanged(sortAttr)}if(!modelMap[existing.cid]){modelMap[existing.cid]=true;set.push(existing)}models[i]=existing}else if(add){model=models[i]=this._prepareModel(model,options);if(model){toAdd.push(model);this._addReference(model,options);modelMap[model.cid]=true;set.push(model)}}}if(remove){for(i=0;i<this.length;i++){model=this.models[i];if(!modelMap[model.cid])toRemove.push(model)}if(toRemove.length)this._removeModels(toRemove,options)}var orderChanged=false;var replace=!sortable&&add&&remove;if(set.length&&replace){orderChanged=this.length!==set.length||_.some(this.models,function(m,index){return m!==set[index]});this.models.length=0;splice(this.models,set,0);this.length=this.models.length}else if(toAdd.length){if(sortable)sort=true;splice(this.models,toAdd,at==null?this.length:at);this.length=this.models.length}if(sort)this.sort({silent:true});if(!options.silent){for(i=0;i<toAdd.length;i++){if(at!=null)options.index=at+i;model=toAdd[i];model.trigger("add",model,this,options)}if(sort||orderChanged)this.trigger("sort",this,options);if(toAdd.length||toRemove.length||toMerge.length){options.changes={added:toAdd,removed:toRemove,merged:toMerge};this.trigger("update",this,options)}}return singular?models[0]:models},reset:function(models,options){options=options?_.clone(options):{};for(var i=0;i<this.models.length;i++){this._removeReference(this.models[i],options)}options.previousModels=this.models;this._reset();models=this.add(models,_.extend({silent:true},options));if(!options.silent)this.trigger("reset",this,options);return models},push:function(model,options){return this.add(model,_.extend({at:this.length},options))},pop:function(options){var model=this.at(this.length-1);return this.remove(model,options)},unshift:function(model,options){return this.add(model,_.extend({at:0},options))},shift:function(options){var model=this.at(0);return this.remove(model,options)},slice:function(){return slice.apply(this.models,arguments)},get:function(obj){if(obj==null)return void 0;return this._byId[obj]||this._byId[this.modelId(obj.attributes||obj)]||obj.cid&&this._byId[obj.cid]},has:function(obj){return this.get(obj)!=null},at:function(index){if(index<0)index+=this.length;return this.models[index]},where:function(attrs,first){return this[first?"find":"filter"](attrs)},findWhere:function(attrs){return this.where(attrs,true)},sort:function(options){var comparator=this.comparator;if(!comparator)throw new Error("Cannot sort a set without a comparator");options||(options={});var length=comparator.length;if(_.isFunction(comparator))comparator=_.bind(comparator,this);if(length===1||_.isString(comparator)){this.models=this.sortBy(comparator)}else{this.models.sort(comparator)}if(!options.silent)this.trigger("sort",this,options);return this},pluck:function(attr){return this.map(attr+"")},fetch:function(options){options=_.extend({parse:true},options);var success=options.success;var collection=this;options.success=function(resp){var method=options.reset?"reset":"set";collection[method](resp,options);if(success)success.call(options.context,collection,resp,options);collection.trigger("sync",collection,resp,options)};wrapError(this,options);return this.sync("read",this,options)},create:function(model,options){options=options?_.clone(options):{};var wait=options.wait;model=this._prepareModel(model,options);if(!model)return false;if(!wait)this.add(model,options);var collection=this;var success=options.success;options.success=function(m,resp,callbackOpts){if(wait)collection.add(m,callbackOpts);if(success)success.call(callbackOpts.context,m,resp,callbackOpts)};model.save(null,options);return model},parse:function(resp,options){return resp},clone:function(){return new this.constructor(this.models,{model:this.model,comparator:this.comparator})},modelId:function(attrs){return attrs[this.model.prototype.idAttribute||"id"]},_reset:function(){this.length=0;this.models=[];this._byId={}},_prepareModel:function(attrs,options){if(this._isModel(attrs)){if(!attrs.collection)attrs.collection=this;return attrs}options=options?_.clone(options):{};options.collection=this;var model=new this.model(attrs,options);if(!model.validationError)return model;this.trigger("invalid",this,model.validationError,options);return false},_removeModels:function(models,options){var removed=[];for(var i=0;i<models.length;i++){var model=this.get(models[i]);if(!model)continue;var index=this.indexOf(model);this.models.splice(index,1);this.length--;delete this._byId[model.cid];var id=this.modelId(model.attributes);if(id!=null)delete this._byId[id];if(!options.silent){options.index=index;model.trigger("remove",model,this,options)}removed.push(model);this._removeReference(model,options)}return removed},_isModel:function(model){return model instanceof Model},_addReference:function(model,options){this._byId[model.cid]=model;var id=this.modelId(model.attributes);if(id!=null)this._byId[id]=model;model.on("all",this._onModelEvent,this)},_removeReference:function(model,options){delete this._byId[model.cid];var id=this.modelId(model.attributes);if(id!=null)delete this._byId[id];if(this===model.collection)delete model.collection;model.off("all",this._onModelEvent,this)},_onModelEvent:function(event,model,collection,options){if(model){if((event==="add"||event==="remove")&&collection!==this)return;if(event==="destroy")this.remove(model,options);if(event==="change"){var prevId=this.modelId(model.previousAttributes());var id=this.modelId(model.attributes);if(prevId!==id){if(prevId!=null)delete this._byId[prevId];if(id!=null)this._byId[id]=model}}}this.trigger.apply(this,arguments)}});var collectionMethods={forEach:3,each:3,map:3,collect:3,reduce:0,foldl:0,inject:0,reduceRight:0,foldr:0,find:3,detect:3,filter:3,select:3,reject:3,every:3,all:3,some:3,any:3,include:3,includes:3,contains:3,invoke:0,max:3,min:3,toArray:1,size:1,first:3,head:3,take:3,initial:3,rest:3,tail:3,drop:3,last:3,without:0,difference:0,indexOf:3,shuffle:1,lastIndexOf:3,isEmpty:1,chain:1,sample:3,partition:3,groupBy:3,countBy:3,sortBy:3,indexBy:3,findIndex:3,findLastIndex:3};addUnderscoreMethods(Collection,collectionMethods,"models");var View=Backbone.View=function(options){this.cid=_.uniqueId("view");_.extend(this,_.pick(options,viewOptions));this._ensureElement();this.initialize.apply(this,arguments)};var delegateEventSplitter=/^(\S+)\s*(.*)$/;var viewOptions=["model","collection","el","id","attributes","className","tagName","events"];_.extend(View.prototype,Events,{tagName:"div",$:function(selector){return this.$el.find(selector)},initialize:function(){},render:function(){return this},remove:function(){this._removeElement();this.stopListening();return this},_removeElement:function(){this.$el.remove()},setElement:function(element){this.undelegateEvents();this._setElement(element);this.delegateEvents();return this},_setElement:function(el){this.$el=el instanceof Backbone.$?el:Backbone.$(el);this.el=this.$el[0]},delegateEvents:function(events){events||(events=_.result(this,"events"));if(!events)return this;this.undelegateEvents();for(var key in events){var method=events[key];if(!_.isFunction(method))method=this[method];if(!method)continue;var match=key.match(delegateEventSplitter);this.delegate(match[1],match[2],_.bind(method,this))}return this},delegate:function(eventName,selector,listener){this.$el.on(eventName+".delegateEvents"+this.cid,selector,listener);return this},undelegateEvents:function(){if(this.$el)this.$el.off(".delegateEvents"+this.cid);return this},undelegate:function(eventName,selector,listener){this.$el.off(eventName+".delegateEvents"+this.cid,selector,listener);return this},_createElement:function(tagName){return document.createElement(tagName)},_ensureElement:function(){if(!this.el){var attrs=_.extend({},_.result(this,"attributes"));if(this.id)attrs.id=_.result(this,"id");if(this.className)attrs["class"]=_.result(this,"className");this.setElement(this._createElement(_.result(this,"tagName")));this._setAttributes(attrs)}else{this.setElement(_.result(this,"el"))}},_setAttributes:function(attributes){this.$el.attr(attributes)}});Backbone.sync=function(method,model,options){var type=methodMap[method];_.defaults(options||(options={}),{emulateHTTP:Backbone.emulateHTTP,emulateJSON:Backbone.emulateJSON});var params={type:type,dataType:"json"};if(!options.url){params.url=_.result(model,"url")||urlError()}if(options.data==null&&model&&(method==="create"||method==="update"||method==="patch")){params.contentType="application/json";params.data=JSON.stringify(options.attrs||model.toJSON(options))}if(options.emulateJSON){params.contentType="application/x-www-form-urlencoded";params.data=params.data?{model:params.data}:{}}if(options.emulateHTTP&&(type==="PUT"||type==="DELETE"||type==="PATCH")){params.type="POST";if(options.emulateJSON)params.data._method=type;var beforeSend=options.beforeSend;options.beforeSend=function(xhr){xhr.setRequestHeader("X-HTTP-Method-Override",type);if(beforeSend)return beforeSend.apply(this,arguments)}}if(params.type!=="GET"&&!options.emulateJSON){params.processData=false}var error=options.error;options.error=function(xhr,textStatus,errorThrown){options.textStatus=textStatus;options.errorThrown=errorThrown;if(error)error.call(options.context,xhr,textStatus,errorThrown)};var xhr=options.xhr=Backbone.ajax(_.extend(params,options));model.trigger("request",model,xhr,options);return xhr};var methodMap={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};Backbone.ajax=function(){return Backbone.$.ajax.apply(Backbone.$,arguments)};var Router=Backbone.Router=function(options){options||(options={});if(options.routes)this.routes=options.routes;this._bindRoutes();this.initialize.apply(this,arguments)};var optionalParam=/\((.*?)\)/g;var namedParam=/(\(\?)?:\w+/g;var splatParam=/\*\w+/g;var escapeRegExp=/[\-{}\[\]+?.,\\\^$|#\s]/g;_.extend(Router.prototype,Events,{initialize:function(){},route:function(route,name,callback){if(!_.isRegExp(route))route=this._routeToRegExp(route);if(_.isFunction(name)){callback=name;name=""}if(!callback)callback=this[name];var router=this;Backbone.history.route(route,function(fragment){var args=router._extractParameters(route,fragment);if(router.execute(callback,args,name)!==false){router.trigger.apply(router,["route:"+name].concat(args));router.trigger("route",name,args);Backbone.history.trigger("route",router,name,args)}});return this},execute:function(callback,args,name){if(callback)callback.apply(this,args)},navigate:function(fragment,options){Backbone.history.navigate(fragment,options);return this},_bindRoutes:function(){if(!this.routes)return;this.routes=_.result(this,"routes");var route,routes=_.keys(this.routes);while((route=routes.pop())!=null){this.route(route,this.routes[route])}},_routeToRegExp:function(route){route=route.replace(escapeRegExp,"\\$&").replace(optionalParam,"(?:$1)?").replace(namedParam,function(match,optional){return optional?match:"([^/?]+)"}).replace(splatParam,"([^?]*?)");return new RegExp("^"+route+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(route,fragment){var params=route.exec(fragment).slice(1);return _.map(params,function(param,i){if(i===params.length-1)return param||null;return param?decodeURIComponent(param):null})}});var History=Backbone.History=function(){this.handlers=[];this.checkUrl=_.bind(this.checkUrl,this);if(typeof window!=="undefined"){this.location=window.location;this.history=window.history}};var routeStripper=/^[#\/]|\s+$/g;var rootStripper=/^\/+|\/+$/g;var pathStripper=/#.*$/;History.started=false;_.extend(History.prototype,Events,{interval:50,atRoot:function(){var path=this.location.pathname.replace(/[^\/]$/,"$&/");return path===this.root&&!this.getSearch()},matchRoot:function(){var path=this.decodeFragment(this.location.pathname);var rootPath=path.slice(0,this.root.length-1)+"/";return rootPath===this.root},decodeFragment:function(fragment){return decodeURI(fragment.replace(/%25/g,"%2525"))},getSearch:function(){var match=this.location.href.replace(/#.*/,"").match(/\?.+/);return match?match[0]:""},getHash:function(window){var match=(window||this).location.href.match(/#(.*)$/);return match?match[1]:""},getPath:function(){var path=this.decodeFragment(this.location.pathname+this.getSearch()).slice(this.root.length-1);return path.charAt(0)==="/"?path.slice(1):path},getFragment:function(fragment){if(fragment==null){if(this._usePushState||!this._wantsHashChange){fragment=this.getPath()}else{fragment=this.getHash()}}return fragment.replace(routeStripper,"")},start:function(options){if(History.started)throw new Error("Backbone.history has already been started");History.started=true;this.options=_.extend({root:"/"},this.options,options);this.root=this.options.root;this._wantsHashChange=this.options.hashChange!==false;this._hasHashChange="onhashchange"in window&&(document.documentMode===void 0||document.documentMode>7);this._useHashChange=this._wantsHashChange&&this._hasHashChange;this._wantsPushState=!!this.options.pushState;this._hasPushState=!!(this.history&&this.history.pushState);this._usePushState=this._wantsPushState&&this._hasPushState;this.fragment=this.getFragment();this.root=("/"+this.root+"/").replace(rootStripper,"/");if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot()){var rootPath=this.root.slice(0,-1)||"/";this.location.replace(rootPath+"#"+this.getPath());return true}else if(this._hasPushState&&this.atRoot()){this.navigate(this.getHash(),{replace:true})}}if(!this._hasHashChange&&this._wantsHashChange&&!this._usePushState){this.iframe=document.createElement("iframe");this.iframe.src="javascript:0";this.iframe.style.display="none";this.iframe.tabIndex=-1;var body=document.body;var iWindow=body.insertBefore(this.iframe,body.firstChild).contentWindow;iWindow.document.open();iWindow.document.close();iWindow.location.hash="#"+this.fragment}var addEventListener=window.addEventListener||function(eventName,listener){return attachEvent("on"+eventName,listener)};if(this._usePushState){addEventListener("popstate",this.checkUrl,false)}else if(this._useHashChange&&!this.iframe){addEventListener("hashchange",this.checkUrl,false)}else if(this._wantsHashChange){this._checkUrlInterval=setInterval(this.checkUrl,this.interval)}if(!this.options.silent)return this.loadUrl()},stop:function(){var removeEventListener=window.removeEventListener||function(eventName,listener){return detachEvent("on"+eventName,listener)};if(this._usePushState){removeEventListener("popstate",this.checkUrl,false)}else if(this._useHashChange&&!this.iframe){removeEventListener("hashchange",this.checkUrl,false)}if(this.iframe){document.body.removeChild(this.iframe);this.iframe=null}if(this._checkUrlInterval)clearInterval(this._checkUrlInterval);History.started=false},route:function(route,callback){this.handlers.unshift({route:route,callback:callback})},checkUrl:function(e){var current=this.getFragment();if(current===this.fragment&&this.iframe){current=this.getHash(this.iframe.contentWindow)}if(current===this.fragment)return false;if(this.iframe)this.navigate(current);this.loadUrl()},loadUrl:function(fragment){if(!this.matchRoot())return false;fragment=this.fragment=this.getFragment(fragment);return _.some(this.handlers,function(handler){if(handler.route.test(fragment)){handler.callback(fragment);return true}})},navigate:function(fragment,options){if(!History.started)return false;if(!options||options===true)options={trigger:!!options};fragment=this.getFragment(fragment||"");var rootPath=this.root;if(fragment===""||fragment.charAt(0)==="?"){rootPath=rootPath.slice(0,-1)||"/"}var url=rootPath+fragment;fragment=this.decodeFragment(fragment.replace(pathStripper,""));if(this.fragment===fragment)return;this.fragment=fragment;if(this._usePushState){this.history[options.replace?"replaceState":"pushState"]({},document.title,url)
}else if(this._wantsHashChange){this._updateHash(this.location,fragment,options.replace);if(this.iframe&&fragment!==this.getHash(this.iframe.contentWindow)){var iWindow=this.iframe.contentWindow;if(!options.replace){iWindow.document.open();iWindow.document.close()}this._updateHash(iWindow.location,fragment,options.replace)}}else{return this.location.assign(url)}if(options.trigger)return this.loadUrl(fragment)},_updateHash:function(location,fragment,replace){if(replace){var href=location.href.replace(/(javascript:|#).*$/,"");location.replace(href+"#"+fragment)}else{location.hash="#"+fragment}}});Backbone.history=new History;var extend=function(protoProps,staticProps){var parent=this;var child;if(protoProps&&_.has(protoProps,"constructor")){child=protoProps.constructor}else{child=function(){return parent.apply(this,arguments)}}_.extend(child,parent,staticProps);child.prototype=_.create(parent.prototype,protoProps);child.prototype.constructor=child;child.__super__=parent.prototype;return child};Model.extend=Collection.extend=Router.extend=View.extend=History.extend=extend;var urlError=function(){throw new Error('A "url" property or function must be specified')};var wrapError=function(model,options){var error=options.error;options.error=function(resp){if(error)error.call(options.context,model,resp,options);model.trigger("error",model,resp,options)}};return Backbone})}).call(exports,__webpack_require__(3))},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;(function(){var root=this;var previousUnderscore=root._;var ArrayProto=Array.prototype,ObjProto=Object.prototype,FuncProto=Function.prototype;var push=ArrayProto.push,slice=ArrayProto.slice,toString=ObjProto.toString,hasOwnProperty=ObjProto.hasOwnProperty;var nativeIsArray=Array.isArray,nativeKeys=Object.keys,nativeBind=FuncProto.bind,nativeCreate=Object.create;var Ctor=function(){};var _=function(obj){if(obj instanceof _)return obj;if(!(this instanceof _))return new _(obj);this._wrapped=obj};if(true){if(typeof module!=="undefined"&&module.exports){exports=module.exports=_}exports._=_}else{root._=_}_.VERSION="1.8.3";var optimizeCb=function(func,context,argCount){if(context===void 0)return func;switch(argCount==null?3:argCount){case 1:return function(value){return func.call(context,value)};case 2:return function(value,other){return func.call(context,value,other)};case 3:return function(value,index,collection){return func.call(context,value,index,collection)};case 4:return function(accumulator,value,index,collection){return func.call(context,accumulator,value,index,collection)}}return function(){return func.apply(context,arguments)}};var cb=function(value,context,argCount){if(value==null)return _.identity;if(_.isFunction(value))return optimizeCb(value,context,argCount);if(_.isObject(value))return _.matcher(value);return _.property(value)};_.iteratee=function(value,context){return cb(value,context,Infinity)};var createAssigner=function(keysFunc,undefinedOnly){return function(obj){var length=arguments.length;if(length<2||obj==null)return obj;for(var index=1;index<length;index++){var source=arguments[index],keys=keysFunc(source),l=keys.length;for(var i=0;i<l;i++){var key=keys[i];if(!undefinedOnly||obj[key]===void 0)obj[key]=source[key]}}return obj}};var baseCreate=function(prototype){if(!_.isObject(prototype))return{};if(nativeCreate)return nativeCreate(prototype);Ctor.prototype=prototype;var result=new Ctor;Ctor.prototype=null;return result};var property=function(key){return function(obj){return obj==null?void 0:obj[key]}};var MAX_ARRAY_INDEX=Math.pow(2,53)-1;var getLength=property("length");var isArrayLike=function(collection){var length=getLength(collection);return typeof length=="number"&&length>=0&&length<=MAX_ARRAY_INDEX};_.each=_.forEach=function(obj,iteratee,context){iteratee=optimizeCb(iteratee,context);var i,length;if(isArrayLike(obj)){for(i=0,length=obj.length;i<length;i++){iteratee(obj[i],i,obj)}}else{var keys=_.keys(obj);for(i=0,length=keys.length;i<length;i++){iteratee(obj[keys[i]],keys[i],obj)}}return obj};_.map=_.collect=function(obj,iteratee,context){iteratee=cb(iteratee,context);var keys=!isArrayLike(obj)&&_.keys(obj),length=(keys||obj).length,results=Array(length);for(var index=0;index<length;index++){var currentKey=keys?keys[index]:index;results[index]=iteratee(obj[currentKey],currentKey,obj)}return results};function createReduce(dir){function iterator(obj,iteratee,memo,keys,index,length){for(;index>=0&&index<length;index+=dir){var currentKey=keys?keys[index]:index;memo=iteratee(memo,obj[currentKey],currentKey,obj)}return memo}return function(obj,iteratee,memo,context){iteratee=optimizeCb(iteratee,context,4);var keys=!isArrayLike(obj)&&_.keys(obj),length=(keys||obj).length,index=dir>0?0:length-1;if(arguments.length<3){memo=obj[keys?keys[index]:index];index+=dir}return iterator(obj,iteratee,memo,keys,index,length)}}_.reduce=_.foldl=_.inject=createReduce(1);_.reduceRight=_.foldr=createReduce(-1);_.find=_.detect=function(obj,predicate,context){var key;if(isArrayLike(obj)){key=_.findIndex(obj,predicate,context)}else{key=_.findKey(obj,predicate,context)}if(key!==void 0&&key!==-1)return obj[key]};_.filter=_.select=function(obj,predicate,context){var results=[];predicate=cb(predicate,context);_.each(obj,function(value,index,list){if(predicate(value,index,list))results.push(value)});return results};_.reject=function(obj,predicate,context){return _.filter(obj,_.negate(cb(predicate)),context)};_.every=_.all=function(obj,predicate,context){predicate=cb(predicate,context);var keys=!isArrayLike(obj)&&_.keys(obj),length=(keys||obj).length;for(var index=0;index<length;index++){var currentKey=keys?keys[index]:index;if(!predicate(obj[currentKey],currentKey,obj))return false}return true};_.some=_.any=function(obj,predicate,context){predicate=cb(predicate,context);var keys=!isArrayLike(obj)&&_.keys(obj),length=(keys||obj).length;for(var index=0;index<length;index++){var currentKey=keys?keys[index]:index;if(predicate(obj[currentKey],currentKey,obj))return true}return false};_.contains=_.includes=_.include=function(obj,item,fromIndex,guard){if(!isArrayLike(obj))obj=_.values(obj);if(typeof fromIndex!="number"||guard)fromIndex=0;return _.indexOf(obj,item,fromIndex)>=0};_.invoke=function(obj,method){var args=slice.call(arguments,2);var isFunc=_.isFunction(method);return _.map(obj,function(value){var func=isFunc?method:value[method];return func==null?func:func.apply(value,args)})};_.pluck=function(obj,key){return _.map(obj,_.property(key))};_.where=function(obj,attrs){return _.filter(obj,_.matcher(attrs))};_.findWhere=function(obj,attrs){return _.find(obj,_.matcher(attrs))};_.max=function(obj,iteratee,context){var result=-Infinity,lastComputed=-Infinity,value,computed;if(iteratee==null&&obj!=null){obj=isArrayLike(obj)?obj:_.values(obj);for(var i=0,length=obj.length;i<length;i++){value=obj[i];if(value>result){result=value}}}else{iteratee=cb(iteratee,context);_.each(obj,function(value,index,list){computed=iteratee(value,index,list);if(computed>lastComputed||computed===-Infinity&&result===-Infinity){result=value;lastComputed=computed}})}return result};_.min=function(obj,iteratee,context){var result=Infinity,lastComputed=Infinity,value,computed;if(iteratee==null&&obj!=null){obj=isArrayLike(obj)?obj:_.values(obj);for(var i=0,length=obj.length;i<length;i++){value=obj[i];if(value<result){result=value}}}else{iteratee=cb(iteratee,context);_.each(obj,function(value,index,list){computed=iteratee(value,index,list);if(computed<lastComputed||computed===Infinity&&result===Infinity){result=value;lastComputed=computed}})}return result};_.shuffle=function(obj){var set=isArrayLike(obj)?obj:_.values(obj);var length=set.length;var shuffled=Array(length);for(var index=0,rand;index<length;index++){rand=_.random(0,index);if(rand!==index)shuffled[index]=shuffled[rand];shuffled[rand]=set[index]}return shuffled};_.sample=function(obj,n,guard){if(n==null||guard){if(!isArrayLike(obj))obj=_.values(obj);return obj[_.random(obj.length-1)]}return _.shuffle(obj).slice(0,Math.max(0,n))};_.sortBy=function(obj,iteratee,context){iteratee=cb(iteratee,context);return _.pluck(_.map(obj,function(value,index,list){return{value:value,index:index,criteria:iteratee(value,index,list)}}).sort(function(left,right){var a=left.criteria;var b=right.criteria;if(a!==b){if(a>b||a===void 0)return 1;if(a<b||b===void 0)return-1}return left.index-right.index}),"value")};var group=function(behavior){return function(obj,iteratee,context){var result={};iteratee=cb(iteratee,context);_.each(obj,function(value,index){var key=iteratee(value,index,obj);behavior(result,value,key)});return result}};_.groupBy=group(function(result,value,key){if(_.has(result,key))result[key].push(value);else result[key]=[value]});_.indexBy=group(function(result,value,key){result[key]=value});_.countBy=group(function(result,value,key){if(_.has(result,key))result[key]++;else result[key]=1});_.toArray=function(obj){if(!obj)return[];if(_.isArray(obj))return slice.call(obj);if(isArrayLike(obj))return _.map(obj,_.identity);return _.values(obj)};_.size=function(obj){if(obj==null)return 0;return isArrayLike(obj)?obj.length:_.keys(obj).length};_.partition=function(obj,predicate,context){predicate=cb(predicate,context);var pass=[],fail=[];_.each(obj,function(value,key,obj){(predicate(value,key,obj)?pass:fail).push(value)});return[pass,fail]};_.first=_.head=_.take=function(array,n,guard){if(array==null)return void 0;if(n==null||guard)return array[0];return _.initial(array,array.length-n)};_.initial=function(array,n,guard){return slice.call(array,0,Math.max(0,array.length-(n==null||guard?1:n)))};_.last=function(array,n,guard){if(array==null)return void 0;if(n==null||guard)return array[array.length-1];return _.rest(array,Math.max(0,array.length-n))};_.rest=_.tail=_.drop=function(array,n,guard){return slice.call(array,n==null||guard?1:n)};_.compact=function(array){return _.filter(array,_.identity)};var flatten=function(input,shallow,strict,startIndex){var output=[],idx=0;for(var i=startIndex||0,length=getLength(input);i<length;i++){var value=input[i];if(isArrayLike(value)&&(_.isArray(value)||_.isArguments(value))){if(!shallow)value=flatten(value,shallow,strict);var j=0,len=value.length;output.length+=len;while(j<len){output[idx++]=value[j++]}}else if(!strict){output[idx++]=value}}return output};_.flatten=function(array,shallow){return flatten(array,shallow,false)};_.without=function(array){return _.difference(array,slice.call(arguments,1))};_.uniq=_.unique=function(array,isSorted,iteratee,context){if(!_.isBoolean(isSorted)){context=iteratee;iteratee=isSorted;isSorted=false}if(iteratee!=null)iteratee=cb(iteratee,context);var result=[];var seen=[];for(var i=0,length=getLength(array);i<length;i++){var value=array[i],computed=iteratee?iteratee(value,i,array):value;if(isSorted){if(!i||seen!==computed)result.push(value);seen=computed}else if(iteratee){if(!_.contains(seen,computed)){seen.push(computed);result.push(value)}}else if(!_.contains(result,value)){result.push(value)}}return result};_.union=function(){return _.uniq(flatten(arguments,true,true))};_.intersection=function(array){var result=[];var argsLength=arguments.length;for(var i=0,length=getLength(array);i<length;i++){var item=array[i];if(_.contains(result,item))continue;for(var j=1;j<argsLength;j++){if(!_.contains(arguments[j],item))break}if(j===argsLength)result.push(item)}return result};_.difference=function(array){var rest=flatten(arguments,true,true,1);return _.filter(array,function(value){return!_.contains(rest,value)})};_.zip=function(){return _.unzip(arguments)};_.unzip=function(array){var length=array&&_.max(array,getLength).length||0;var result=Array(length);for(var index=0;index<length;index++){result[index]=_.pluck(array,index)}return result};_.object=function(list,values){var result={};for(var i=0,length=getLength(list);i<length;i++){if(values){result[list[i]]=values[i]}else{result[list[i][0]]=list[i][1]}}return result};function createPredicateIndexFinder(dir){return function(array,predicate,context){predicate=cb(predicate,context);var length=getLength(array);var index=dir>0?0:length-1;for(;index>=0&&index<length;index+=dir){if(predicate(array[index],index,array))return index}return-1}}_.findIndex=createPredicateIndexFinder(1);_.findLastIndex=createPredicateIndexFinder(-1);_.sortedIndex=function(array,obj,iteratee,context){iteratee=cb(iteratee,context,1);var value=iteratee(obj);var low=0,high=getLength(array);while(low<high){var mid=Math.floor((low+high)/2);if(iteratee(array[mid])<value)low=mid+1;else high=mid}return low};function createIndexFinder(dir,predicateFind,sortedIndex){return function(array,item,idx){var i=0,length=getLength(array);if(typeof idx=="number"){if(dir>0){i=idx>=0?idx:Math.max(idx+length,i)}else{length=idx>=0?Math.min(idx+1,length):idx+length+1}}else if(sortedIndex&&idx&&length){idx=sortedIndex(array,item);return array[idx]===item?idx:-1}if(item!==item){idx=predicateFind(slice.call(array,i,length),_.isNaN);return idx>=0?idx+i:-1}for(idx=dir>0?i:length-1;idx>=0&&idx<length;idx+=dir){if(array[idx]===item)return idx}return-1}}_.indexOf=createIndexFinder(1,_.findIndex,_.sortedIndex);_.lastIndexOf=createIndexFinder(-1,_.findLastIndex);_.range=function(start,stop,step){if(stop==null){stop=start||0;start=0}step=step||1;var length=Math.max(Math.ceil((stop-start)/step),0);var range=Array(length);for(var idx=0;idx<length;idx++,start+=step){range[idx]=start}return range};var executeBound=function(sourceFunc,boundFunc,context,callingContext,args){if(!(callingContext instanceof boundFunc))return sourceFunc.apply(context,args);var self=baseCreate(sourceFunc.prototype);var result=sourceFunc.apply(self,args);if(_.isObject(result))return result;return self};_.bind=function(func,context){if(nativeBind&&func.bind===nativeBind)return nativeBind.apply(func,slice.call(arguments,1));if(!_.isFunction(func))throw new TypeError("Bind must be called on a function");var args=slice.call(arguments,2);var bound=function(){return executeBound(func,bound,context,this,args.concat(slice.call(arguments)))};return bound};_.partial=function(func){var boundArgs=slice.call(arguments,1);var bound=function(){var position=0,length=boundArgs.length;var args=Array(length);for(var i=0;i<length;i++){args[i]=boundArgs[i]===_?arguments[position++]:boundArgs[i]}while(position<arguments.length)args.push(arguments[position++]);return executeBound(func,bound,this,this,args)};return bound};_.bindAll=function(obj){var i,length=arguments.length,key;if(length<=1)throw new Error("bindAll must be passed function names");for(i=1;i<length;i++){key=arguments[i];obj[key]=_.bind(obj[key],obj)}return obj};_.memoize=function(func,hasher){var memoize=function(key){var cache=memoize.cache;var address=""+(hasher?hasher.apply(this,arguments):key);if(!_.has(cache,address))cache[address]=func.apply(this,arguments);return cache[address]};memoize.cache={};return memoize};_.delay=function(func,wait){var args=slice.call(arguments,2);return setTimeout(function(){return func.apply(null,args)},wait)};_.defer=_.partial(_.delay,_,1);_.throttle=function(func,wait,options){var context,args,result;var timeout=null;var previous=0;if(!options)options={};var later=function(){previous=options.leading===false?0:_.now();timeout=null;result=func.apply(context,args);if(!timeout)context=args=null};return function(){var now=_.now();if(!previous&&options.leading===false)previous=now;var remaining=wait-(now-previous);context=this;args=arguments;if(remaining<=0||remaining>wait){if(timeout){clearTimeout(timeout);timeout=null}previous=now;result=func.apply(context,args);if(!timeout)context=args=null}else if(!timeout&&options.trailing!==false){timeout=setTimeout(later,remaining)}return result}};_.debounce=function(func,wait,immediate){var timeout,args,context,timestamp,result;var later=function(){var last=_.now()-timestamp;if(last<wait&&last>=0){timeout=setTimeout(later,wait-last)}else{timeout=null;if(!immediate){result=func.apply(context,args);if(!timeout)context=args=null}}};return function(){context=this;args=arguments;timestamp=_.now();var callNow=immediate&&!timeout;if(!timeout)timeout=setTimeout(later,wait);if(callNow){result=func.apply(context,args);context=args=null}return result}};_.wrap=function(func,wrapper){return _.partial(wrapper,func)};_.negate=function(predicate){return function(){return!predicate.apply(this,arguments)}};_.compose=function(){var args=arguments;var start=args.length-1;return function(){var i=start;var result=args[start].apply(this,arguments);while(i--)result=args[i].call(this,result);return result}};_.after=function(times,func){return function(){if(--times<1){return func.apply(this,arguments)}}};_.before=function(times,func){var memo;return function(){if(--times>0){memo=func.apply(this,arguments)}if(times<=1)func=null;return memo}};_.once=_.partial(_.before,2);var hasEnumBug=!{toString:null}.propertyIsEnumerable("toString");var nonEnumerableProps=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];function collectNonEnumProps(obj,keys){var nonEnumIdx=nonEnumerableProps.length;var constructor=obj.constructor;var proto=_.isFunction(constructor)&&constructor.prototype||ObjProto;var prop="constructor";if(_.has(obj,prop)&&!_.contains(keys,prop))keys.push(prop);while(nonEnumIdx--){prop=nonEnumerableProps[nonEnumIdx];if(prop in obj&&obj[prop]!==proto[prop]&&!_.contains(keys,prop)){keys.push(prop)}}}_.keys=function(obj){if(!_.isObject(obj))return[];if(nativeKeys)return nativeKeys(obj);var keys=[];for(var key in obj)if(_.has(obj,key))keys.push(key);if(hasEnumBug)collectNonEnumProps(obj,keys);return keys};_.allKeys=function(obj){if(!_.isObject(obj))return[];var keys=[];for(var key in obj)keys.push(key);if(hasEnumBug)collectNonEnumProps(obj,keys);return keys};_.values=function(obj){var keys=_.keys(obj);var length=keys.length;var values=Array(length);for(var i=0;i<length;i++){values[i]=obj[keys[i]]}return values};_.mapObject=function(obj,iteratee,context){iteratee=cb(iteratee,context);var keys=_.keys(obj),length=keys.length,results={},currentKey;for(var index=0;index<length;index++){currentKey=keys[index];results[currentKey]=iteratee(obj[currentKey],currentKey,obj)}return results};_.pairs=function(obj){var keys=_.keys(obj);var length=keys.length;var pairs=Array(length);for(var i=0;i<length;i++){pairs[i]=[keys[i],obj[keys[i]]]}return pairs};_.invert=function(obj){var result={};var keys=_.keys(obj);for(var i=0,length=keys.length;i<length;i++){result[obj[keys[i]]]=keys[i]}return result};_.functions=_.methods=function(obj){var names=[];for(var key in obj){if(_.isFunction(obj[key]))names.push(key)}return names.sort()};_.extend=createAssigner(_.allKeys);_.extendOwn=_.assign=createAssigner(_.keys);_.findKey=function(obj,predicate,context){predicate=cb(predicate,context);var keys=_.keys(obj),key;for(var i=0,length=keys.length;i<length;i++){key=keys[i];if(predicate(obj[key],key,obj))return key}};_.pick=function(object,oiteratee,context){var result={},obj=object,iteratee,keys;if(obj==null)return result;if(_.isFunction(oiteratee)){keys=_.allKeys(obj);iteratee=optimizeCb(oiteratee,context)}else{keys=flatten(arguments,false,false,1);iteratee=function(value,key,obj){return key in obj};obj=Object(obj)}for(var i=0,length=keys.length;i<length;i++){var key=keys[i];var value=obj[key];if(iteratee(value,key,obj))result[key]=value}return result};_.omit=function(obj,iteratee,context){if(_.isFunction(iteratee)){iteratee=_.negate(iteratee)}else{var keys=_.map(flatten(arguments,false,false,1),String);iteratee=function(value,key){return!_.contains(keys,key)}}return _.pick(obj,iteratee,context)};_.defaults=createAssigner(_.allKeys,true);_.create=function(prototype,props){var result=baseCreate(prototype);if(props)_.extendOwn(result,props);return result};_.clone=function(obj){if(!_.isObject(obj))return obj;return _.isArray(obj)?obj.slice():_.extend({},obj)};_.tap=function(obj,interceptor){interceptor(obj);return obj};_.isMatch=function(object,attrs){var keys=_.keys(attrs),length=keys.length;if(object==null)return!length;var obj=Object(object);for(var i=0;i<length;i++){var key=keys[i];if(attrs[key]!==obj[key]||!(key in obj))return false}return true};var eq=function(a,b,aStack,bStack){if(a===b)return a!==0||1/a===1/b;if(a==null||b==null)return a===b;if(a instanceof _)a=a._wrapped;if(b instanceof _)b=b._wrapped;var className=toString.call(a);if(className!==toString.call(b))return false;switch(className){case"[object RegExp]":case"[object String]":return""+a===""+b;case"[object Number]":if(+a!==+a)return+b!==+b;return+a===0?1/+a===1/b:+a===+b;case"[object Date]":case"[object Boolean]":return+a===+b}var areArrays=className==="[object Array]";if(!areArrays){if(typeof a!="object"||typeof b!="object")return false;var aCtor=a.constructor,bCtor=b.constructor;if(aCtor!==bCtor&&!(_.isFunction(aCtor)&&aCtor instanceof aCtor&&_.isFunction(bCtor)&&bCtor instanceof bCtor)&&("constructor"in a&&"constructor"in b)){return false}}aStack=aStack||[];bStack=bStack||[];var length=aStack.length;while(length--){if(aStack[length]===a)return bStack[length]===b}aStack.push(a);bStack.push(b);if(areArrays){length=a.length;if(length!==b.length)return false;while(length--){if(!eq(a[length],b[length],aStack,bStack))return false}}else{var keys=_.keys(a),key;length=keys.length;if(_.keys(b).length!==length)return false;while(length--){key=keys[length];if(!(_.has(b,key)&&eq(a[key],b[key],aStack,bStack)))return false}}aStack.pop();bStack.pop();return true};_.isEqual=function(a,b){return eq(a,b)};_.isEmpty=function(obj){if(obj==null)return true;if(isArrayLike(obj)&&(_.isArray(obj)||_.isString(obj)||_.isArguments(obj)))return obj.length===0;return _.keys(obj).length===0};_.isElement=function(obj){return!!(obj&&obj.nodeType===1)};_.isArray=nativeIsArray||function(obj){return toString.call(obj)==="[object Array]"};_.isObject=function(obj){var type=typeof obj;return type==="function"||type==="object"&&!!obj};_.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(name){_["is"+name]=function(obj){return toString.call(obj)==="[object "+name+"]"}});if(!_.isArguments(arguments)){_.isArguments=function(obj){return _.has(obj,"callee")}}if(typeof/./!="function"&&typeof Int8Array!="object"){_.isFunction=function(obj){return typeof obj=="function"||false}}_.isFinite=function(obj){return isFinite(obj)&&!isNaN(parseFloat(obj))};_.isNaN=function(obj){return _.isNumber(obj)&&obj!==+obj};_.isBoolean=function(obj){return obj===true||obj===false||toString.call(obj)==="[object Boolean]"};_.isNull=function(obj){return obj===null};_.isUndefined=function(obj){return obj===void 0};_.has=function(obj,key){return obj!=null&&hasOwnProperty.call(obj,key)};_.noConflict=function(){root._=previousUnderscore;return this};_.identity=function(value){return value};_.constant=function(value){return function(){return value}};_.noop=function(){};_.property=property;_.propertyOf=function(obj){return obj==null?function(){}:function(key){return obj[key]}};_.matcher=_.matches=function(attrs){attrs=_.extendOwn({},attrs);return function(obj){return _.isMatch(obj,attrs)}};_.times=function(n,iteratee,context){var accum=Array(Math.max(0,n));iteratee=optimizeCb(iteratee,context,1);for(var i=0;i<n;i++)accum[i]=iteratee(i);return accum};_.random=function(min,max){if(max==null){max=min;min=0}return min+Math.floor(Math.random()*(max-min+1))};_.now=Date.now||function(){return(new Date).getTime()};var escapeMap={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"};var unescapeMap=_.invert(escapeMap);var createEscaper=function(map){var escaper=function(match){return map[match]};var source="(?:"+_.keys(map).join("|")+")";var testRegexp=RegExp(source);var replaceRegexp=RegExp(source,"g");return function(string){string=string==null?"":""+string;return testRegexp.test(string)?string.replace(replaceRegexp,escaper):string}};_.escape=createEscaper(escapeMap);_.unescape=createEscaper(unescapeMap);_.result=function(object,property,fallback){var value=object==null?void 0:object[property];if(value===void 0){value=fallback}return _.isFunction(value)?value.call(object):value};var idCounter=0;_.uniqueId=function(prefix){var id=++idCounter+"";return prefix?prefix+id:id};_.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var noMatch=/(.)^/;var escapes={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"};var escaper=/\\|'|\r|\n|\u2028|\u2029/g;var escapeChar=function(match){return"\\"+escapes[match]};_.template=function(text,settings,oldSettings){if(!settings&&oldSettings)settings=oldSettings;settings=_.defaults({},settings,_.templateSettings);var matcher=RegExp([(settings.escape||noMatch).source,(settings.interpolate||noMatch).source,(settings.evaluate||noMatch).source].join("|")+"|$","g");var index=0;var source="__p+='";text.replace(matcher,function(match,escape,interpolate,evaluate,offset){source+=text.slice(index,offset).replace(escaper,escapeChar);index=offset+match.length;if(escape){source+="'+\n((__t=("+escape+"))==null?'':_.escape(__t))+\n'"}else if(interpolate){source+="'+\n((__t=("+interpolate+"))==null?'':__t)+\n'"}else if(evaluate){source+="';\n"+evaluate+"\n__p+='"}return match});source+="';\n";if(!settings.variable)source="with(obj||{}){\n"+source+"}\n";source="var __t,__p='',__j=Array.prototype.join,"+"print=function(){__p+=__j.call(arguments,'');};\n"+source+"return __p;\n";try{var render=new Function(settings.variable||"obj","_",source)}catch(e){e.source=source;throw e}var template=function(data){return render.call(this,data,_)};var argument=settings.variable||"obj";template.source="function("+argument+"){\n"+source+"}";return template};_.chain=function(obj){var instance=_(obj);instance._chain=true;return instance};var result=function(instance,obj){return instance._chain?_(obj).chain():obj};_.mixin=function(obj){_.each(_.functions(obj),function(name){var func=_[name]=obj[name];_.prototype[name]=function(){var args=[this._wrapped];push.apply(args,arguments);return result(this,func.apply(_,args))}})};_.mixin(_);_.each(["pop","push","reverse","shift","sort","splice","unshift"],function(name){var method=ArrayProto[name];_.prototype[name]=function(){var obj=this._wrapped;method.apply(obj,arguments);if((name==="shift"||name==="splice")&&obj.length===0)delete obj[0];return result(this,obj)}});_.each(["concat","join","slice"],function(name){var method=ArrayProto[name];_.prototype[name]=function(){return result(this,method.apply(this._wrapped,arguments))}});_.prototype.value=function(){return this._wrapped};_.prototype.valueOf=_.prototype.toJSON=_.prototype.value;_.prototype.toString=function(){return""+this._wrapped};if(true){!(__WEBPACK_AMD_DEFINE_ARRAY__=[],__WEBPACK_AMD_DEFINE_RESULT__=function(){return _}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),__WEBPACK_AMD_DEFINE_RESULT__!==undefined&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))}}).call(this)},function(module,exports){if(typeof Object.create==="function"){module.exports=function inherits(ctor,superCtor){ctor.super_=superCtor;ctor.prototype=Object.create(superCtor.prototype,{constructor:{value:ctor,enumerable:false,writable:true,configurable:true}})}}else{module.exports=function inherits(ctor,superCtor){ctor.super_=superCtor;var TempCtor=function(){};TempCtor.prototype=superCtor.prototype;ctor.prototype=new TempCtor;ctor.prototype.constructor=ctor}}},function(module,exports){var g;g=function(){return this}();try{g=g||Function("return this")()||(1,eval)("this")}catch(e){if(typeof window==="object")g=window}module.exports=g},function(module,exports){var process=module.exports={};var cachedSetTimeout;var cachedClearTimeout;function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}(function(){try{if(typeof setTimeout==="function"){cachedSetTimeout=setTimeout}else{cachedSetTimeout=defaultSetTimout}}catch(e){cachedSetTimeout=defaultSetTimout}try{if(typeof clearTimeout==="function"){cachedClearTimeout=clearTimeout}else{cachedClearTimeout=defaultClearTimeout}}catch(e){cachedClearTimeout=defaultClearTimeout}})();function runTimeout(fun){if(cachedSetTimeout===setTimeout){return setTimeout(fun,0)}if((cachedSetTimeout===defaultSetTimout||!cachedSetTimeout)&&setTimeout){cachedSetTimeout=setTimeout;return setTimeout(fun,0)}try{return cachedSetTimeout(fun,0)}catch(e){try{return cachedSetTimeout.call(null,fun,0)}catch(e){return cachedSetTimeout.call(this,fun,0)}}}function runClearTimeout(marker){if(cachedClearTimeout===clearTimeout){return clearTimeout(marker)}if((cachedClearTimeout===defaultClearTimeout||!cachedClearTimeout)&&clearTimeout){cachedClearTimeout=clearTimeout;return clearTimeout(marker)}try{return cachedClearTimeout(marker)}catch(e){try{return cachedClearTimeout.call(null,marker)}catch(e){return cachedClearTimeout.call(this,marker)}}}var queue=[];var draining=false;var currentQueue;var queueIndex=-1;function cleanUpNextTick(){if(!draining||!currentQueue){return}draining=false;if(currentQueue.length){queue=currentQueue.concat(queue)}else{queueIndex=-1}if(queue.length){drainQueue()}}function drainQueue(){if(draining){return}var timeout=runTimeout(cleanUpNextTick);draining=true;var len=queue.length;while(len){currentQueue=queue;queue=[];while(++queueIndex<len){if(currentQueue){currentQueue[queueIndex].run()}}queueIndex=-1;len=queue.length}currentQueue=null;draining=false;runClearTimeout(timeout)}process.nextTick=function(fun){var args=new Array(arguments.length-1);if(arguments.length>1){for(var i=1;i<arguments.length;i++){args[i-1]=arguments[i]}}queue.push(new Item(fun,args));if(queue.length===1&&!draining){runTimeout(drainQueue)}};function Item(fun,array){this.fun=fun;this.array=array}Item.prototype.run=function(){this.fun.apply(null,this.array)};process.title="browser";process.browser=true;process.env={};process.argv=[];process.version="";process.versions={};function noop(){}process.on=noop;process.addListener=noop;process.once=noop;process.off=noop;process.removeListener=noop;process.removeAllListeners=noop;process.emit=noop;process.prependListener=noop;process.prependOnceListener=noop;process.listeners=function(name){return[]};process.binding=function(name){throw new Error("process.binding is not supported")};process.cwd=function(){return"/"};process.chdir=function(dir){throw new Error("process.chdir is not supported")};process.umask=function(){return 0}},function(module,exports,__webpack_require__){(function(process){exports=module.exports=__webpack_require__(265);exports.log=log;exports.formatArgs=formatArgs;exports.save=save;exports.load=load;exports.useColors=useColors;exports.storage="undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage?chrome.storage.local:localstorage();exports.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"];function useColors(){if(typeof window!=="undefined"&&window.process&&window.process.type==="renderer"){return true}return typeof document!=="undefined"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window!=="undefined"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator!=="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator!=="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}exports.formatters.j=function(v){try{return JSON.stringify(v)}catch(err){return"[UnexpectedJSONParseError]: "+err.message}};function formatArgs(args){var useColors=this.useColors;args[0]=(useColors?"%c":"")+this.namespace+(useColors?" %c":" ")+args[0]+(useColors?"%c ":" ")+"+"+exports.humanize(this.diff);if(!useColors)return;var c="color: "+this.color;args.splice(1,0,c,"color: inherit");
var index=0;var lastC=0;args[0].replace(/%[a-zA-Z%]/g,function(match){if("%%"===match)return;index++;if("%c"===match){lastC=index}});args.splice(lastC,0,c)}function log(){return"object"===typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function save(namespaces){try{if(null==namespaces){exports.storage.removeItem("debug")}else{exports.storage.debug=namespaces}}catch(e){}}function load(){var r;try{r=exports.storage.debug}catch(e){}if(!r&&typeof process!=="undefined"&&"env"in process){r=process.env.DEBUG}return r}exports.enable(load());function localstorage(){try{return window.localStorage}catch(e){}}}).call(exports,__webpack_require__(4))},function(module,exports,__webpack_require__){"use strict";var inherits=__webpack_require__(2),EventTarget=__webpack_require__(64);function EventEmitter(){EventTarget.call(this)}inherits(EventEmitter,EventTarget);EventEmitter.prototype.removeAllListeners=function(type){if(type){delete this._listeners[type]}else{this._listeners={}}};EventEmitter.prototype.once=function(type,listener){var self=this,fired=false;function g(){self.removeListener(type,g);if(!fired){fired=true;listener.apply(this,arguments)}}this.on(type,g)};EventEmitter.prototype.emit=function(){var type=arguments[0];var listeners=this._listeners[type];if(!listeners){return}var l=arguments.length;var args=new Array(l-1);for(var ai=1;ai<l;ai++){args[ai-1]=arguments[ai]}for(var i=0;i<listeners.length;i++){listeners[i].apply(this,args)}};EventEmitter.prototype.on=EventEmitter.prototype.addListener=EventTarget.prototype.addEventListener;EventEmitter.prototype.removeListener=EventTarget.prototype.removeEventListener;module.exports.EventEmitter=EventEmitter},function(module,exports,__webpack_require__){"use strict";(function(process){var URL=__webpack_require__(77);var debug=function(){};if(process.env.NODE_ENV!=="production"){debug=__webpack_require__(5)("sockjs-client:utils:url")}module.exports={getOrigin:function(url){if(!url){return null}var p=new URL(url);if(p.protocol==="file:"){return null}var port=p.port;if(!port){port=p.protocol==="https:"?"443":"80"}return p.protocol+"//"+p.hostname+":"+port},isOriginEqual:function(a,b){var res=this.getOrigin(a)===this.getOrigin(b);debug("same",a,b,res);return res},isSchemeEqual:function(a,b){return a.split(":")[0]===b.split(":")[0]},addPath:function(url,path){var qs=url.split("?");return qs[0]+path+(qs[1]?"?"+qs[1]:"")},addQuery:function(url,q){return url+(url.indexOf("?")===-1?"?"+q:"&"+q)}}}).call(exports,__webpack_require__(4))},function(module,exports,__webpack_require__){"use strict";(function(_){var _typeof=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(obj){return typeof obj}:function(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj};var Backbone=__webpack_require__(0);var Components=__webpack_require__(154);var Selectors=__webpack_require__(54);var Traits=__webpack_require__(60);module.exports=Backbone.Model.extend({defaults:{tagName:"div",type:"",removable:true,draggable:true,droppable:true,badgable:true,stylable:true,highlightable:true,copyable:true,resizable:false,editable:false,hiddenLayer:false,"void":false,state:"",status:"",content:"",style:{},attributes:"",classes:"",script:"",created:0,traits:["id","title"],toolbar:null,previousModel:"",mirror:""},initialize:function initialize(o,opt){if(opt&&opt.config&&opt.config.voidElements.indexOf(this.get("tagName"))>=0)this.set("void",true);this.opt=opt;this.sm=opt?opt.sm||{}:{};this.config=o||{};this.defaultC=this.config.components||[];this.defaultH=this.config.heads||[];this.defaultCl=this.normalizeClasses(this.get("classes")||this.config.classes||[]);this.components=new Components(this.defaultC,opt);this.components.parent=this;this.heads=new Components(this.defaultH,opt);this.heads.parent=this;this.listenTo(this,"change:script",this.scriptUpdated);this.set("attributes",this.get("attributes")||{});this.set("components",this.components);this.set("heads",this.heads);this.set("classes",new Selectors(this.defaultCl));var traits=new Traits;traits.setTarget(this);traits.add(this.get("traits"));this.set("traits",traits);this.initToolbar();var toNormalize=["stylable"];toNormalize.forEach(function(name){var value=this.get(name);if(typeof value=="string"){var newValue=value.split(",").map(function(prop){return prop.trim()});this.set(name,newValue)}},this);this.init()},init:function init(){},scriptUpdated:function scriptUpdated(){this.set("scriptUpdated",1)},initToolbar:function initToolbar(){var model=this;if(!model.get("toolbar")){var tb=[];if(model.get("draggable")){tb.push({attributes:{"class":"fa fa-arrows"},command:"tlb-move"})}if(model.get("copyable")){tb.push({attributes:{"class":"fa fa-clone"},command:"tlb-clone"})}if(model.get("removable")){tb.push({attributes:{"class":"fa fa-trash-o"},command:"tlb-delete"})}model.set("toolbar",tb)}},loadTraits:function loadTraits(traits){var trt=new Traits;trt.setTarget(this);trt.add(traits);this.set("traits",trt)},normalizeClasses:function normalizeClasses(arr){var res=[];if(!this.sm.get)return;var clm=this.sm.get("SelectorManager");if(!clm)return;arr.forEach(function(val){var name="";if(typeof val==="string")name=val;else name=val.name;var model=clm.add(name);res.push(model)});return res},clone:function clone(reset){var attr=_.clone(this.attributes),comp=this.get("components"),traits=this.get("traits"),cls=this.get("classes");attr.components=[];attr.classes=[];attr.traits=[];comp.each(function(md,i){attr.components[i]=md.clone(1)});traits.each(function(md,i){attr.traits[i]=md.clone()});cls.each(function(md,i){attr.classes[i]=md.get("name")});attr.status="";attr.view="";if(reset){this.opt.collection=null}return new this.constructor(attr,this.opt)},getName:function getName(){if(!this.name){var id=this.cid.replace(/\D/g,""),type=this.get("type");var tag=this.get("tagName");tag=tag=="div"?"box":tag;tag=type?type:tag;this.name=tag.charAt(0).toUpperCase()+tag.slice(1)}return this.name},toHTML:function toHTML(opts){var code="";var m=this;var tag=m.get("tagName"),sTag=m.get("void"),attrId="";var strAttr="";var attr=this.getAttrToHTML();for(var prop in attr){var val=attr[prop];strAttr+=(typeof val==="undefined"?"undefined":_typeof(val))!==undefined&&val!==""?" "+prop+'="'+val+'"':""}var strCls="";var isFound=false;m.get("classes").each(function(m){console.error("TEST WINDOW EDITOR");console.error(window.editorInitialized);console.error("TNAMEMEMEME");console.error("TNAMEMEMEME");console.error("TNAMEMEMEME");console.error("TNAMEMEMEME");console.error("TNAMEMEMEME"+m.get("name"));strCls+=" "+m.get("name");if(window.editor!==undefined){if(window.preventUpdates===undefined){if(m.get("name")=="gen_"+window.editor.md5prefix+"_"+m.id){isFound=true}}else{if(m.get("name")=="g_"+window.editor.md5prefix+"_"+m.id){isFound=true}}}});if(!isFound){if(window.preventUpdates===undefined){if(window.editor!==undefined){}}else{if(window.preventUpdates===undefined){if(window.editor!==undefined){}}}}if(!_.isEmpty(m.get("style"))){strCls+=" gId_"+window.editor.md5prefix+"-"+m.cid}strCls=strCls!==""?' class="'+strCls.trim()+'"':"";if(_.isEmpty(m.get("attributes")["custom-name"])){if(window.preventUpdates===undefined){if(window.editor!==undefined){attrId+=' custom-name="'+m.getName()+"_"+window.editor.md5prefix+"-"+m.cid+'" '}}}code+="<"+tag+strCls+attrId+strAttr+(sTag?"/":"")+">"+m.get("content");m.get("components").each(function(m){code+=m.toHTML()});if(!sTag)code+="</"+tag+">";return code},getAttrToHTML:function getAttrToHTML(){var attr=this.get("attributes")||{};delete attr.style;return attr},toJSON:function toJSON(){for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}var obj=Backbone.Model.prototype.toJSON.apply(this,args);var scriptStr=this.getScriptString();if(scriptStr){obj.script=scriptStr}return obj},getScriptString:function getScriptString(script){var scr=script||this.get("script");if(typeof scr=="function"){var scrStr=scr.toString().trim();scrStr=scrStr.replace(/^function\s?\(\)\s?\{/,"");scrStr=scrStr.replace(/\}$/,"");scr=scrStr}return scr}},{isComponent:function isComponent(el){return{tagName:el.tagName?el.tagName.toLowerCase():""}}})}).call(exports,__webpack_require__(1))},function(module,exports,__webpack_require__){(function(module,global){var __WEBPACK_AMD_DEFINE_RESULT__;(function(){var isLoader="function"==="function"&&__webpack_require__(309);var objectTypes={"function":true,object:true};var freeExports=objectTypes[typeof exports]&&exports&&!exports.nodeType&&exports;var root=objectTypes[typeof window]&&window||this,freeGlobal=freeExports&&objectTypes[typeof module]&&module&&!module.nodeType&&typeof global=="object"&&global;if(freeGlobal&&(freeGlobal["global"]===freeGlobal||freeGlobal["window"]===freeGlobal||freeGlobal["self"]===freeGlobal)){root=freeGlobal}function runInContext(context,exports){context||(context=root["Object"]());exports||(exports=root["Object"]());var Number=context["Number"]||root["Number"],String=context["String"]||root["String"],Object=context["Object"]||root["Object"],Date=context["Date"]||root["Date"],SyntaxError=context["SyntaxError"]||root["SyntaxError"],TypeError=context["TypeError"]||root["TypeError"],Math=context["Math"]||root["Math"],nativeJSON=context["JSON"]||root["JSON"];if(typeof nativeJSON=="object"&&nativeJSON){exports.stringify=nativeJSON.stringify;exports.parse=nativeJSON.parse}var objectProto=Object.prototype,getClass=objectProto.toString,isProperty,forEach,undef;var isExtended=new Date(-0xc782b5b800cec);try{isExtended=isExtended.getUTCFullYear()==-109252&&isExtended.getUTCMonth()===0&&isExtended.getUTCDate()===1&&isExtended.getUTCHours()==10&&isExtended.getUTCMinutes()==37&&isExtended.getUTCSeconds()==6&&isExtended.getUTCMilliseconds()==708}catch(exception){}function has(name){if(has[name]!==undef){return has[name]}var isSupported;if(name=="bug-string-char-index"){isSupported="a"[0]!="a"}else if(name=="json"){isSupported=has("json-stringify")&&has("json-parse")}else{var value,serialized='{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}';if(name=="json-stringify"){var stringify=exports.stringify,stringifySupported=typeof stringify=="function"&&isExtended;if(stringifySupported){(value=function(){return 1}).toJSON=value;try{stringifySupported=stringify(0)==="0"&&stringify(new Number)==="0"&&stringify(new String)=='""'&&stringify(getClass)===undef&&stringify(undef)===undef&&stringify()===undef&&stringify(value)==="1"&&stringify([value])=="[1]"&&stringify([undef])=="[null]"&&stringify(null)=="null"&&stringify([undef,getClass,null])=="[null,null,null]"&&stringify({a:[value,true,false,null,"\x00\b\n\f\r	"]})==serialized&&stringify(null,value)==="1"&&stringify([1,2],null,1)=="[\n 1,\n 2\n]"&&stringify(new Date(-864e13))=='"-271821-04-20T00:00:00.000Z"'&&stringify(new Date(864e13))=='"+275760-09-13T00:00:00.000Z"'&&stringify(new Date(-621987552e5))=='"-000001-01-01T00:00:00.000Z"'&&stringify(new Date(-1))=='"1969-12-31T23:59:59.999Z"'}catch(exception){stringifySupported=false}}isSupported=stringifySupported}if(name=="json-parse"){var parse=exports.parse;if(typeof parse=="function"){try{if(parse("0")===0&&!parse(false)){value=parse(serialized);var parseSupported=value["a"].length==5&&value["a"][0]===1;if(parseSupported){try{parseSupported=!parse('"	"')}catch(exception){}if(parseSupported){try{parseSupported=parse("01")!==1}catch(exception){}}if(parseSupported){try{parseSupported=parse("1.")!==1}catch(exception){}}}}}catch(exception){parseSupported=false}}isSupported=parseSupported}}return has[name]=!!isSupported}if(!has("json")){var functionClass="[object Function]",dateClass="[object Date]",numberClass="[object Number]",stringClass="[object String]",arrayClass="[object Array]",booleanClass="[object Boolean]";var charIndexBuggy=has("bug-string-char-index");if(!isExtended){var floor=Math.floor;var Months=[0,31,59,90,120,151,181,212,243,273,304,334];var getDay=function(year,month){return Months[month]+365*(year-1970)+floor((year-1969+(month=+(month>1)))/4)-floor((year-1901+month)/100)+floor((year-1601+month)/400)}}if(!(isProperty=objectProto.hasOwnProperty)){isProperty=function(property){var members={},constructor;if((members.__proto__=null,members.__proto__={toString:1},members).toString!=getClass){isProperty=function(property){var original=this.__proto__,result=property in(this.__proto__=null,this);this.__proto__=original;return result}}else{constructor=members.constructor;isProperty=function(property){var parent=(this.constructor||constructor).prototype;return property in this&&!(property in parent&&this[property]===parent[property])}}members=null;return isProperty.call(this,property)}}forEach=function(object,callback){var size=0,Properties,members,property;(Properties=function(){this.valueOf=0}).prototype.valueOf=0;members=new Properties;for(property in members){if(isProperty.call(members,property)){size++}}Properties=members=null;if(!size){members=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"];forEach=function(object,callback){var isFunction=getClass.call(object)==functionClass,property,length;var hasProperty=!isFunction&&typeof object.constructor!="function"&&objectTypes[typeof object.hasOwnProperty]&&object.hasOwnProperty||isProperty;for(property in object){if(!(isFunction&&property=="prototype")&&hasProperty.call(object,property)){callback(property)}}for(length=members.length;property=members[--length];hasProperty.call(object,property)&&callback(property));}}else if(size==2){forEach=function(object,callback){var members={},isFunction=getClass.call(object)==functionClass,property;for(property in object){if(!(isFunction&&property=="prototype")&&!isProperty.call(members,property)&&(members[property]=1)&&isProperty.call(object,property)){callback(property)}}}}else{forEach=function(object,callback){var isFunction=getClass.call(object)==functionClass,property,isConstructor;for(property in object){if(!(isFunction&&property=="prototype")&&isProperty.call(object,property)&&!(isConstructor=property==="constructor")){callback(property)}}if(isConstructor||isProperty.call(object,property="constructor")){callback(property)}}}return forEach(object,callback)};if(!has("json-stringify")){var Escapes={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"};var leadingZeroes="000000";var toPaddedString=function(width,value){return(leadingZeroes+(value||0)).slice(-width)};var unicodePrefix="\\u00";var quote=function(value){var result='"',index=0,length=value.length,useCharIndex=!charIndexBuggy||length>10;var symbols=useCharIndex&&(charIndexBuggy?value.split(""):value);for(;index<length;index++){var charCode=value.charCodeAt(index);switch(charCode){case 8:case 9:case 10:case 12:case 13:case 34:case 92:result+=Escapes[charCode];break;default:if(charCode<32){result+=unicodePrefix+toPaddedString(2,charCode.toString(16));break}result+=useCharIndex?symbols[index]:value.charAt(index)}}return result+'"'};var serialize=function(property,object,callback,properties,whitespace,indentation,stack){var value,className,year,month,date,time,hours,minutes,seconds,milliseconds,results,element,index,length,prefix,result;try{value=object[property]}catch(exception){}if(typeof value=="object"&&value){className=getClass.call(value);if(className==dateClass&&!isProperty.call(value,"toJSON")){if(value>-1/0&&value<1/0){if(getDay){date=floor(value/864e5);for(year=floor(date/365.2425)+1970-1;getDay(year+1,0)<=date;year++);for(month=floor((date-getDay(year,0))/30.42);getDay(year,month+1)<=date;month++);date=1+date-getDay(year,month);time=(value%864e5+864e5)%864e5;hours=floor(time/36e5)%24;minutes=floor(time/6e4)%60;seconds=floor(time/1e3)%60;milliseconds=time%1e3}else{year=value.getUTCFullYear();month=value.getUTCMonth();date=value.getUTCDate();hours=value.getUTCHours();minutes=value.getUTCMinutes();seconds=value.getUTCSeconds();milliseconds=value.getUTCMilliseconds()}value=(year<=0||year>=1e4?(year<0?"-":"+")+toPaddedString(6,year<0?-year:year):toPaddedString(4,year))+"-"+toPaddedString(2,month+1)+"-"+toPaddedString(2,date)+"T"+toPaddedString(2,hours)+":"+toPaddedString(2,minutes)+":"+toPaddedString(2,seconds)+"."+toPaddedString(3,milliseconds)+"Z"}else{value=null}}else if(typeof value.toJSON=="function"&&(className!=numberClass&&className!=stringClass&&className!=arrayClass||isProperty.call(value,"toJSON"))){value=value.toJSON(property)}}if(callback){value=callback.call(object,property,value)}if(value===null){return"null"}className=getClass.call(value);if(className==booleanClass){return""+value}else if(className==numberClass){return value>-1/0&&value<1/0?""+value:"null"}else if(className==stringClass){return quote(""+value)}if(typeof value=="object"){for(length=stack.length;length--;){if(stack[length]===value){throw TypeError()}}stack.push(value);results=[];prefix=indentation;indentation+=whitespace;if(className==arrayClass){for(index=0,length=value.length;index<length;index++){element=serialize(index,value,callback,properties,whitespace,indentation,stack);results.push(element===undef?"null":element)}result=results.length?whitespace?"[\n"+indentation+results.join(",\n"+indentation)+"\n"+prefix+"]":"["+results.join(",")+"]":"[]"}else{forEach(properties||value,function(property){var element=serialize(property,value,callback,properties,whitespace,indentation,stack);if(element!==undef){results.push(quote(property)+":"+(whitespace?" ":"")+element)}});result=results.length?whitespace?"{\n"+indentation+results.join(",\n"+indentation)+"\n"+prefix+"}":"{"+results.join(",")+"}":"{}"}stack.pop();return result}};exports.stringify=function(source,filter,width){var whitespace,callback,properties,className;if(objectTypes[typeof filter]&&filter){if((className=getClass.call(filter))==functionClass){callback=filter}else if(className==arrayClass){properties={};for(var index=0,length=filter.length,value;index<length;value=filter[index++],(className=getClass.call(value),className==stringClass||className==numberClass)&&(properties[value]=1));}}if(width){if((className=getClass.call(width))==numberClass){if((width-=width%1)>0){for(whitespace="",width>10&&(width=10);whitespace.length<width;whitespace+=" ");}}else if(className==stringClass){whitespace=width.length<=10?width:width.slice(0,10)}}return serialize("",(value={},value[""]=source,value),callback,properties,whitespace,"",[])}}if(!has("json-parse")){var fromCharCode=String.fromCharCode;var Unescapes={92:"\\",34:'"',47:"/",98:"\b",116:"	",110:"\n",102:"\f",114:"\r"};var Index,Source;var abort=function(){Index=Source=null;throw SyntaxError()};var lex=function(){var source=Source,length=source.length,value,begin,position,isSigned,charCode;while(Index<length){charCode=source.charCodeAt(Index);switch(charCode){case 9:case 10:case 13:case 32:Index++;break;case 123:case 125:case 91:case 93:case 58:case 44:value=charIndexBuggy?source.charAt(Index):source[Index];Index++;return value;case 34:for(value="@",Index++;Index<length;){charCode=source.charCodeAt(Index);if(charCode<32){abort()}else if(charCode==92){charCode=source.charCodeAt(++Index);switch(charCode){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:value+=Unescapes[charCode];Index++;break;case 117:begin=++Index;for(position=Index+4;Index<position;Index++){charCode=source.charCodeAt(Index);if(!(charCode>=48&&charCode<=57||charCode>=97&&charCode<=102||charCode>=65&&charCode<=70)){abort()}}value+=fromCharCode("0x"+source.slice(begin,Index));break;default:abort()}}else{if(charCode==34){break}charCode=source.charCodeAt(Index);begin=Index;while(charCode>=32&&charCode!=92&&charCode!=34){charCode=source.charCodeAt(++Index)}value+=source.slice(begin,Index)}}if(source.charCodeAt(Index)==34){Index++;return value}abort();default:begin=Index;if(charCode==45){isSigned=true;charCode=source.charCodeAt(++Index)}if(charCode>=48&&charCode<=57){if(charCode==48&&(charCode=source.charCodeAt(Index+1),charCode>=48&&charCode<=57)){abort()}isSigned=false;for(;Index<length&&(charCode=source.charCodeAt(Index),charCode>=48&&charCode<=57);Index++);if(source.charCodeAt(Index)==46){position=++Index;for(;position<length&&(charCode=source.charCodeAt(position),charCode>=48&&charCode<=57);position++);if(position==Index){abort()}Index=position}charCode=source.charCodeAt(Index);if(charCode==101||charCode==69){charCode=source.charCodeAt(++Index);if(charCode==43||charCode==45){Index++}for(position=Index;position<length&&(charCode=source.charCodeAt(position),charCode>=48&&charCode<=57);position++);if(position==Index){abort()}Index=position}return+source.slice(begin,Index)}if(isSigned){abort()}if(source.slice(Index,Index+4)=="true"){Index+=4;return true}else if(source.slice(Index,Index+5)=="false"){Index+=5;return false}else if(source.slice(Index,Index+4)=="null"){Index+=4;return null}abort()}}return"$"};var get=function(value){var results,hasMembers;if(value=="$"){abort()}if(typeof value=="string"){if((charIndexBuggy?value.charAt(0):value[0])=="@"){return value.slice(1)}if(value=="["){results=[];for(;;hasMembers||(hasMembers=true)){value=lex();if(value=="]"){break}if(hasMembers){if(value==","){value=lex();if(value=="]"){abort()}}else{abort()}}if(value==","){abort()}results.push(get(value))}return results}else if(value=="{"){results={};for(;;hasMembers||(hasMembers=true)){value=lex();if(value=="}"){break}if(hasMembers){if(value==","){value=lex();if(value=="}"){abort()}}else{abort()}}if(value==","||typeof value!="string"||(charIndexBuggy?value.charAt(0):value[0])!="@"||lex()!=":"){abort()}results[value.slice(1)]=get(lex())}return results}abort()}return value};var update=function(source,property,callback){var element=walk(source,property,callback);if(element===undef){delete source[property]}else{source[property]=element}};var walk=function(source,property,callback){var value=source[property],length;if(typeof value=="object"&&value){if(getClass.call(value)==arrayClass){for(length=value.length;length--;){update(value,length,callback)}}else{forEach(value,function(property){update(value,property,callback)})}}return callback.call(source,property,value)};exports.parse=function(source,callback){var result,value;Index=0;Source=""+source;result=get(lex());if(lex()!="$"){abort()}Index=Source=null;return callback&&getClass.call(callback)==functionClass?walk((value={},value[""]=result,value),"",callback):result}}}exports["runInContext"]=runInContext;return exports}if(freeExports&&!isLoader){runInContext(root,freeExports)}else{var nativeJSON=root.JSON,previousJSON=root["JSON3"],isRestored=false;var JSON3=runInContext(root,root["JSON3"]={noConflict:function(){if(!isRestored){isRestored=true;root.JSON=nativeJSON;root["JSON3"]=previousJSON;nativeJSON=previousJSON=null}return JSON3}});root.JSON={parse:JSON3.parse,stringify:JSON3.stringify}}if(isLoader){!(__WEBPACK_AMD_DEFINE_RESULT__=function(){return JSON3}.call(exports,__webpack_require__,exports,module),__WEBPACK_AMD_DEFINE_RESULT__!==undefined&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))}}).call(this)}).call(exports,__webpack_require__(78)(module),__webpack_require__(3))},function(module,exports,__webpack_require__){"use strict";(function(_){var Backbone=__webpack_require__(0);var ComponentsView=__webpack_require__(166);module.exports=Backbone.View.extend({events:{click:"initResize"},className:function className(){return this.getClasses()},tagName:function tagName(){return this.model.get("tagName")},initialize:function initialize(opt){var model=this.model;this.opts=opt||{};this.config=this.opts.config||{};this.em=this.config.em||"";this.pfx=this.config.stylePrefix||"";this.ppfx=this.config.pStylePrefix||"";this.components=model.get("components");this.attr=model.get("attributes");this.classe=this.attr.class||[];this.listenTo(model,"destroy remove",this.removeTmp);this.listenTo(model,"change:style",this.updateStyle);this.listenTo(model,"change:attributes",this.updateAttributes);this.listenTo(model,"change:status",this.updateStatus);this.listenTo(model,"change:state",this.updateState);this.listenTo(model,"change:script",this.render);this.listenTo(model,"change",this.handleChange);this.listenTo(model.get("classes"),"add remove change",this.updateClasses);this.$el.data("model",model);model.view=this;this.$el.data("collection",this.components);if(model.get("classes").length)this.importClasses();this.init()},removeTmp:function removeTmp(){this.remove()},init:function init(){},handleChange:function handleChange(){var em=this.em;if(em){var model=this.model;em.trigger("component:update",model);for(var prop in model.changed){em.trigger("component:update:"+prop,model)}}},importClasses:function importClasses(){var clm=this.config.em.get("SelectorManager");if(clm){this.model.get("classes").each(function(m){clm.add(m.get("name"))})}},updateState:function updateState(e){var cl="hc-state";var state=this.model.get("state");if(state){this.$el.addClass(cl)}else{this.$el.removeClass(cl)}},updateStatus:function updateStatus(e){var s=this.model.get("status"),pfx=this.pfx;switch(s){case"selected":this.$el.addClass(pfx+"selected");break;case"moving":break;default:this.$el.removeClass(pfx+"selected")}},getClasses:function getClasses(){var attr=this.model.get("attributes"),classes=attr["class"]||[];if(classes.length){return classes.join(" ")}else return null},updateAttributes:function updateAttributes(){var model=this.model;var attributes={},attr=model.get("attributes");for(var key in attr){if(attr.hasOwnProperty(key))attributes[key]=attr[key]}if(model.get("src"))attributes.src=model.get("src");if(model.get("highlightable"))attributes["data-highlightable"]=1;var styleStr=this.getStyleString();if(styleStr)attributes.style=styleStr;this.$el.attr(attributes)},updateStyle:function updateStyle(){this.$el.attr("style",this.getStyleString())},getStyleString:function getStyleString(){var style="";this.style=this.model.get("style");for(var key in this.style){if(this.style.hasOwnProperty(key))style+=key+":"+this.style[key]+";"}return style},updateClasses:function updateClasses(){var str="";this.model.get("classes").each(function(model){str+=model.get("name")+" "});str=str.trim();if(str)this.$el.attr("class",str);else this.$el.removeAttr("class");this.updateStatus()},eventCall:function eventCall(event){event.viewResponse=this},initResize:function initResize(){var em=this.opts.config.em;var editor=em?em.get("Editor"):"";var config=em?em.get("Config"):"";var pfx=config.stylePrefix||"";var attrName="data-"+pfx+"handler";var resizeClass=pfx+"resizing";var model=this.model;var modelToStyle;var toggleBodyClass=function toggleBodyClass(method,e,opts){var handlerAttr=e.target.getAttribute(attrName);var resizeHndClass=pfx+"resizing-"+handlerAttr;var classToAdd=resizeClass;if(opts.docs){opts.docs.find("body")[method](classToAdd)}};if(editor&&this.model.get("resizable")){editor.runCommand("resize",{el:this.el,options:{onStart:function onStart(e,opts){toggleBodyClass("addClass",e,opts);modelToStyle=em.get("StyleManager").getModelToStyle(model)},onMove:function onMove(){editor.trigger("change:canvasOffset")},onEnd:function onEnd(e,opts){toggleBodyClass("removeClass",e,opts);editor.trigger("change:canvasOffset")},updateTarget:function updateTarget(el,rect,store){if(!modelToStyle){return}var unit="px";var style=_.clone(modelToStyle.get("style"));var width=rect.w+(store?1:0);style.width=width+unit;style.height=rect.h+unit;modelToStyle.set("style",style,{avoidStore:1});em.trigger("targetStyleUpdated");if(store){var style3=_.clone(style);style3.width=width-1+unit;modelToStyle.set("style",style3)}}}})}},prevDef:function prevDef(e){e.preventDefault()},updateScript:function updateScript(){var em=this.em;if(em){var canvas=em.get("Canvas");canvas.getCanvasView().updateScript(this)}},getChildrenContainer:function getChildrenContainer(){var container=this.el;if(typeof this.getChildrenSelector=="function"){container=this.el.querySelector(this.getChildrenSelector())}else if(typeof this.getTemplate=="function"){}return container},renderChildren:function renderChildren(){var view=new ComponentsView({collection:this.model.get("components"),config:this.config,defaultTypes:this.opts.defaultTypes,componentTypes:this.opts.componentTypes});var container=this.getChildrenContainer();var childNodes=view.render($(container)).el.childNodes;childNodes=Array.prototype.slice.call(childNodes);for(var i=0,len=childNodes.length;i<len;i++){container.appendChild(childNodes.shift())}if(container!==this.el){var disableNode=function disableNode(el){var children=Array.prototype.slice.call(el.children);children.forEach(function(el){el.style["pointer-events"]="none";if(container!==el){disableNode(el)}})};disableNode(this.el)}},renderAttributes:function renderAttributes(){this.updateAttributes();this.updateClasses()},render:function render(){this.renderAttributes();var model=this.model;var container=this.getChildrenContainer();container.innerHTML=model.get("content");this.renderChildren();if(model.get("script")){this.updateScript()}return this}})}).call(exports,__webpack_require__(1))},function(module,exports,__webpack_require__){"use strict";(function(global){var random=__webpack_require__(15);var onUnload={},afterUnload=false,isChromePackagedApp=global.chrome&&global.chrome.app&&global.chrome.app.runtime;module.exports={attachEvent:function(event,listener){if(typeof global.addEventListener!=="undefined"){global.addEventListener(event,listener,false)}else if(global.document&&global.attachEvent){global.document.attachEvent("on"+event,listener);global.attachEvent("on"+event,listener)}},detachEvent:function(event,listener){if(typeof global.addEventListener!=="undefined"){global.removeEventListener(event,listener,false)}else if(global.document&&global.detachEvent){global.document.detachEvent("on"+event,listener);global.detachEvent("on"+event,listener)}},unloadAdd:function(listener){if(isChromePackagedApp){return null}var ref=random.string(8);onUnload[ref]=listener;if(afterUnload){setTimeout(this.triggerUnloadCallbacks,0)}return ref},unloadDel:function(ref){if(ref in onUnload){delete onUnload[ref]}},triggerUnloadCallbacks:function(){for(var ref in onUnload){onUnload[ref]();delete onUnload[ref]}}};var unloadTriggered=function(){if(afterUnload){return}afterUnload=true;module.exports.triggerUnloadCallbacks()};if(!isChromePackagedApp){module.exports.attachEvent("unload",unloadTriggered)}}).call(exports,__webpack_require__(3))},function(module,exports,__webpack_require__){"use strict";(function(_){var Backbone=__webpack_require__(0);module.exports=Backbone.View.extend({template:_.template('\n  <div class="<%= ppfx %>field">\n    <span id=\'<%= pfx %>input-holder\'></span>\n  </div>\n  <div style="clear:both"></div>'),templateLabel:_.template('\n  <div class="<%= pfx %>label">\n    <div class="<%= pfx %>icon <%= icon %>" title="<%= info %>">\n      <%= label %>\n    </div>\n  </div>'),events:{change:"valueUpdated"},initialize:function initialize(o){this.config=o.config||{};this.em=this.config.em;this.pfx=this.config.stylePrefix||"";this.ppfx=this.config.pStylePrefix||"";this.target=o.target||{};this.propTarget=o.propTarget||{};this.onChange=o.onChange||{};this.onInputRender=o.onInputRender||{};this.customValue=o.customValue||{};this.defaultValue=this.model.get("defaults");this.property=this.model.get("property");this.input=this.$input=null;this.className=this.pfx+"property";this.inputHolderId="#"+this.pfx+"input-holder";this.sector=this.model.collection&&this.model.collection.sector;if(!this.model.get("value"))this.model.set("value",this.model.get("defaults"));this.listenTo(this.propTarget,"update",this.targetUpdated);this.listenTo(this.model,"destroy remove",this.remove);this.listenTo(this.model,"change:value",this.valueChanged);this.listenTo(this.model,"targetUpdated",this.targetUpdated);this.listenTo(this.model,"change:visible",this.updateVisibility)},getTarget:function getTarget(){if(this.selectedComponent)return this.selectedComponent;
return this.propTarget?this.propTarget.model:null},valueUpdated:function valueUpdated(){if(this.$input)this.model.set("value",this.getInputValue())},targetUpdated:function targetUpdated(){this.selectedComponent=this.propTarget.model;this.helperComponent=this.propTarget.helper;this.checkVisibility();if(this.getTarget()){if(!this.sameValue()){this.renderInputRequest()}}},checkVisibility:function checkVisibility(){if(this.config.hideNotStylable){if(!this.isTargetStylable()||!this.isComponentStylable()){this.hide()}else{this.show()}if(this.sector){this.sector.trigger("updateVisibility")}}},sameValue:function sameValue(){return this.getComponentValue()==this.getValueForTarget()},getComponentValue:function getComponentValue(){var propModel=this.model;var target=this.getTarget();if(!target)return;var targetProp=target.get("style")[this.property];if(targetProp)this.componentValue=targetProp;else this.componentValue=this.defaultValue+(this.unit||"");if(propModel.get("functionName")){var v=this.fetchFromFunction(this.componentValue);if(v)this.componentValue=v}if(this.customValue&&typeof this.customValue==="function"){var index=propModel.collection.indexOf(propModel);var t=this.customValue(this,index);if(t)this.componentValue=t}return this.componentValue},getTargetValue:function getTargetValue(opts){var result;var opt=opts||{};var model=this.model;var target=this.getTarget();if(!target){return result}result=target.get("style")[model.get("property")];if(!result&&!opt.ignoreDefault){result=this.getDefaultValue()}return result},getDefaultValue:function getDefaultValue(){return this.model.get("defaults")},fetchFromFunction:function fetchFromFunction(v){return v.substring(v.indexOf("(")+1,v.lastIndexOf(")"))},tryFetchFromFunction:function tryFetchFromFunction(value){if(!this.model.get("functionName")){return value}var start=value.indexOf("(")+1;var end=value.lastIndexOf(")");return value.substring(start,end)},getValueForTarget:function getValueForTarget(){return this.model.get("value")},getInputValue:function getInputValue(){return this.$input?this.$input.val():""},valueChanged:function valueChanged(e,val,opt){var mVal=this.getValueForTarget();var em=this.config.em;var model=this.model;if(this.$input)this.setValue(mVal);if(!this.getTarget())return;if(!this.isTargetStylable()||!this.isComponentStylable()){return}var value=this.getValueForTarget();var func=model.get("functionName");if(func)value=func+"("+value+")";var target=this.getTarget();var onChange=this.onChange;if(onChange&&typeof onChange==="function"){onChange(target,this,opt)}else this.updateTargetStyle(value,null,opt);if(em){em.trigger("component:update",model);em.trigger("component:styleUpdate",model);em.trigger("component:styleUpdate:"+model.get("property"),model)}},updateTargetStyle:function updateTargetStyle(propertyValue,propertyName,opts){var propName=propertyName||this.property;var value=propertyValue||"";var avSt=opts?opts.avoidStore:0;var target=this.getTarget();var targetStyle=_.clone(target.get("style"));if(value)targetStyle[propName]=value;else delete targetStyle[propName];target.set("style",targetStyle,{avoidStore:avSt});if(this.helperComponent)this.helperComponent.set("style",targetStyle,{avoidStore:avSt})},isTargetStylable:function isTargetStylable(){var stylable=this.getTarget().get("stylable");if(stylable instanceof Array)stylable=_.indexOf(stylable,this.property)>=0;return stylable},isComponentStylable:function isComponentStylable(){var em=this.em;var component=em&&em.get("selectedComponent");if(!component){return true}var stylable=component.get("stylable");if(stylable instanceof Array){stylable=_.indexOf(stylable,this.property)>=0}return stylable},setValue:function setValue(value,force){var f=force===0?0:1;var def=this.model.get("defaults");var v=this.model.get("value")||def;if(value||f){v=value}if(this.$input)this.$input.val(v);this.model.set({value:v},{silent:true})},updateVisibility:function updateVisibility(){this.el.style.display=this.model.get("visible")?"block":"none"},show:function show(){this.model.set("visible",1)},hide:function hide(){this.model.set("visible",0)},renderLabel:function renderLabel(){this.$el.html(this.templateLabel({pfx:this.pfx,ppfx:this.ppfx,icon:this.model.get("icon"),info:this.model.get("info"),label:this.model.get("name")}))},renderField:function renderField(){this.renderTemplate();this.renderInput();delete this.componentValue},renderTemplate:function renderTemplate(){this.$el.append(this.template({pfx:this.pfx,ppfx:this.ppfx,icon:this.model.get("icon"),info:this.model.get("info"),label:this.model.get("name")}))},renderInput:function renderInput(){if(!this.$input){this.$input=$("<input>",{placeholder:this.model.get("defaults"),type:"text"});this.$el.find(this.inputHolderId).html(this.$input)}this.setValue(this.componentValue,0)},renderInputRequest:function renderInputRequest(){this.renderInput()},cleanValue:function cleanValue(){this.setValue("")},render:function render(){this.renderLabel();this.renderField();this.$el.attr("class",this.className);return this}})}).call(exports,__webpack_require__(1))},function(module,exports,__webpack_require__){(function(global,factory){true?module.exports=factory():typeof define==="function"&&define.amd?define(factory):global.CodeMirror=factory()})(this,function(){"use strict";var userAgent=navigator.userAgent;var platform=navigator.platform;var gecko=/gecko\/\d/i.test(userAgent);var ie_upto10=/MSIE \d/.test(userAgent);var ie_11up=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(userAgent);var edge=/Edge\/(\d+)/.exec(userAgent);var ie=ie_upto10||ie_11up||edge;var ie_version=ie&&(ie_upto10?document.documentMode||6:+(edge||ie_11up)[1]);var webkit=!edge&&/WebKit\//.test(userAgent);var qtwebkit=webkit&&/Qt\/\d+\.\d+/.test(userAgent);var chrome=!edge&&/Chrome\//.test(userAgent);var presto=/Opera\//.test(userAgent);var safari=/Apple Computer/.test(navigator.vendor);var mac_geMountainLion=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(userAgent);var phantom=/PhantomJS/.test(userAgent);var ios=!edge&&/AppleWebKit/.test(userAgent)&&/Mobile\/\w+/.test(userAgent);var android=/Android/.test(userAgent);var mobile=ios||android||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(userAgent);var mac=ios||/Mac/.test(platform);var chromeOS=/\bCrOS\b/.test(userAgent);var windows=/win/i.test(platform);var presto_version=presto&&userAgent.match(/Version\/(\d*\.\d*)/);if(presto_version){presto_version=Number(presto_version[1])}if(presto_version&&presto_version>=15){presto=false;webkit=true}var flipCtrlCmd=mac&&(qtwebkit||presto&&(presto_version==null||presto_version<12.11));var captureRightClick=gecko||ie&&ie_version>=9;function classTest(cls){return new RegExp("(^|\\s)"+cls+"(?:$|\\s)\\s*")}var rmClass=function(node,cls){var current=node.className;var match=classTest(cls).exec(current);if(match){var after=current.slice(match.index+match[0].length);node.className=current.slice(0,match.index)+(after?match[1]+after:"")}};function removeChildren(e){for(var count=e.childNodes.length;count>0;--count){e.removeChild(e.firstChild)}return e}function removeChildrenAndAdd(parent,e){return removeChildren(parent).appendChild(e)}function elt(tag,content,className,style){var e=document.createElement(tag);if(className){e.className=className}if(style){e.style.cssText=style}if(typeof content=="string"){e.appendChild(document.createTextNode(content))}else if(content){for(var i=0;i<content.length;++i){e.appendChild(content[i])}}return e}function eltP(tag,content,className,style){var e=elt(tag,content,className,style);e.setAttribute("role","presentation");return e}var range;if(document.createRange){range=function(node,start,end,endNode){var r=document.createRange();r.setEnd(endNode||node,end);r.setStart(node,start);return r}}else{range=function(node,start,end){var r=document.body.createTextRange();try{r.moveToElementText(node.parentNode)}catch(e){return r}r.collapse(true);r.moveEnd("character",end);r.moveStart("character",start);return r}}function contains(parent,child){if(child.nodeType==3){child=child.parentNode}if(parent.contains){return parent.contains(child)}do{if(child.nodeType==11){child=child.host}if(child==parent){return true}}while(child=child.parentNode)}function activeElt(){var activeElement;try{activeElement=document.activeElement}catch(e){activeElement=document.body||null}while(activeElement&&activeElement.shadowRoot&&activeElement.shadowRoot.activeElement){activeElement=activeElement.shadowRoot.activeElement}return activeElement}function addClass(node,cls){var current=node.className;if(!classTest(cls).test(current)){node.className+=(current?" ":"")+cls}}function joinClasses(a,b){var as=a.split(" ");for(var i=0;i<as.length;i++){if(as[i]&&!classTest(as[i]).test(b)){b+=" "+as[i]}}return b}var selectInput=function(node){node.select()};if(ios){selectInput=function(node){node.selectionStart=0;node.selectionEnd=node.value.length}}else if(ie){selectInput=function(node){try{node.select()}catch(_e){}}}function bind(f){var args=Array.prototype.slice.call(arguments,1);return function(){return f.apply(null,args)}}function copyObj(obj,target,overwrite){if(!target){target={}}for(var prop in obj){if(obj.hasOwnProperty(prop)&&(overwrite!==false||!target.hasOwnProperty(prop))){target[prop]=obj[prop]}}return target}function countColumn(string,end,tabSize,startIndex,startValue){if(end==null){end=string.search(/[^\s\u00a0]/);if(end==-1){end=string.length}}for(var i=startIndex||0,n=startValue||0;;){var nextTab=string.indexOf("	",i);if(nextTab<0||nextTab>=end){return n+(end-i)}n+=nextTab-i;n+=tabSize-n%tabSize;i=nextTab+1}}var Delayed=function(){this.id=null};Delayed.prototype.set=function(ms,f){clearTimeout(this.id);this.id=setTimeout(f,ms)};function indexOf(array,elt){for(var i=0;i<array.length;++i){if(array[i]==elt){return i}}return-1}var scrollerGap=30;var Pass={toString:function(){return"CodeMirror.Pass"}};var sel_dontScroll={scroll:false};var sel_mouse={origin:"*mouse"};var sel_move={origin:"+move"};function findColumn(string,goal,tabSize){for(var pos=0,col=0;;){var nextTab=string.indexOf("	",pos);if(nextTab==-1){nextTab=string.length}var skipped=nextTab-pos;if(nextTab==string.length||col+skipped>=goal){return pos+Math.min(skipped,goal-col)}col+=nextTab-pos;col+=tabSize-col%tabSize;pos=nextTab+1;if(col>=goal){return pos}}}var spaceStrs=[""];function spaceStr(n){while(spaceStrs.length<=n){spaceStrs.push(lst(spaceStrs)+" ")}return spaceStrs[n]}function lst(arr){return arr[arr.length-1]}function map(array,f){var out=[];for(var i=0;i<array.length;i++){out[i]=f(array[i],i)}return out}function insertSorted(array,value,score){var pos=0,priority=score(value);while(pos<array.length&&score(array[pos])<=priority){pos++}array.splice(pos,0,value)}function nothing(){}function createObj(base,props){var inst;if(Object.create){inst=Object.create(base)}else{nothing.prototype=base;inst=new nothing}if(props){copyObj(props,inst)}return inst}var nonASCIISingleCaseWordChar=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;function isWordCharBasic(ch){return/\w/.test(ch)||ch>""&&(ch.toUpperCase()!=ch.toLowerCase()||nonASCIISingleCaseWordChar.test(ch))}function isWordChar(ch,helper){if(!helper){return isWordCharBasic(ch)}if(helper.source.indexOf("\\w")>-1&&isWordCharBasic(ch)){return true}return helper.test(ch)}function isEmpty(obj){for(var n in obj){if(obj.hasOwnProperty(n)&&obj[n]){return false}}return true}var extendingChars=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function isExtendingChar(ch){return ch.charCodeAt(0)>=768&&extendingChars.test(ch)}function skipExtendingChars(str,pos,dir){while((dir<0?pos>0:pos<str.length)&&isExtendingChar(str.charAt(pos))){pos+=dir}return pos}function findFirst(pred,from,to){for(;;){if(Math.abs(from-to)<=1){return pred(from)?from:to}var mid=Math.floor((from+to)/2);if(pred(mid)){to=mid}else{from=mid}}}function Display(place,doc,input){var d=this;this.input=input;d.scrollbarFiller=elt("div",null,"CodeMirror-scrollbar-filler");d.scrollbarFiller.setAttribute("cm-not-content","true");d.gutterFiller=elt("div",null,"CodeMirror-gutter-filler");d.gutterFiller.setAttribute("cm-not-content","true");d.lineDiv=eltP("div",null,"CodeMirror-code");d.selectionDiv=elt("div",null,null,"position: relative; z-index: 1");d.cursorDiv=elt("div",null,"CodeMirror-cursors");d.measure=elt("div",null,"CodeMirror-measure");d.lineMeasure=elt("div",null,"CodeMirror-measure");d.lineSpace=eltP("div",[d.measure,d.lineMeasure,d.selectionDiv,d.cursorDiv,d.lineDiv],null,"position: relative; outline: none");var lines=eltP("div",[d.lineSpace],"CodeMirror-lines");d.mover=elt("div",[lines],null,"position: relative");d.sizer=elt("div",[d.mover],"CodeMirror-sizer");d.sizerWidth=null;d.heightForcer=elt("div",null,null,"position: absolute; height: "+scrollerGap+"px; width: 1px;");d.gutters=elt("div",null,"CodeMirror-gutters");d.lineGutter=null;d.scroller=elt("div",[d.sizer,d.heightForcer,d.gutters],"CodeMirror-scroll");d.scroller.setAttribute("tabIndex","-1");d.wrapper=elt("div",[d.scrollbarFiller,d.gutterFiller,d.scroller],"CodeMirror");if(ie&&ie_version<8){d.gutters.style.zIndex=-1;d.scroller.style.paddingRight=0}if(!webkit&&!(gecko&&mobile)){d.scroller.draggable=true}if(place){if(place.appendChild){place.appendChild(d.wrapper)}else{place(d.wrapper)}}d.viewFrom=d.viewTo=doc.first;d.reportedViewFrom=d.reportedViewTo=doc.first;d.view=[];d.renderedView=null;d.externalMeasured=null;d.viewOffset=0;d.lastWrapHeight=d.lastWrapWidth=0;d.updateLineNumbers=null;d.nativeBarWidth=d.barHeight=d.barWidth=0;d.scrollbarsClipped=false;d.lineNumWidth=d.lineNumInnerWidth=d.lineNumChars=null;d.alignWidgets=false;d.cachedCharWidth=d.cachedTextHeight=d.cachedPaddingH=null;d.maxLine=null;d.maxLineLength=0;d.maxLineChanged=false;d.wheelDX=d.wheelDY=d.wheelStartX=d.wheelStartY=null;d.shift=false;d.selForContextMenu=null;d.activeTouch=null;input.init(d)}function getLine(doc,n){n-=doc.first;if(n<0||n>=doc.size){throw new Error("There is no line "+(n+doc.first)+" in the document.")}var chunk=doc;while(!chunk.lines){for(var i=0;;++i){var child=chunk.children[i],sz=child.chunkSize();if(n<sz){chunk=child;break}n-=sz}}return chunk.lines[n]}function getBetween(doc,start,end){var out=[],n=start.line;doc.iter(start.line,end.line+1,function(line){var text=line.text;if(n==end.line){text=text.slice(0,end.ch)}if(n==start.line){text=text.slice(start.ch)}out.push(text);++n});return out}function getLines(doc,from,to){var out=[];doc.iter(from,to,function(line){out.push(line.text)});return out}function updateLineHeight(line,height){var diff=height-line.height;if(diff){for(var n=line;n;n=n.parent){n.height+=diff}}}function lineNo(line){if(line.parent==null){return null}var cur=line.parent,no=indexOf(cur.lines,line);for(var chunk=cur.parent;chunk;cur=chunk,chunk=chunk.parent){for(var i=0;;++i){if(chunk.children[i]==cur){break}no+=chunk.children[i].chunkSize()}}return no+cur.first}function lineAtHeight(chunk,h){var n=chunk.first;outer:do{for(var i$1=0;i$1<chunk.children.length;++i$1){var child=chunk.children[i$1],ch=child.height;if(h<ch){chunk=child;continue outer}h-=ch;n+=child.chunkSize()}return n}while(!chunk.lines);var i=0;for(;i<chunk.lines.length;++i){var line=chunk.lines[i],lh=line.height;if(h<lh){break}h-=lh}return n+i}function isLine(doc,l){return l>=doc.first&&l<doc.first+doc.size}function lineNumberFor(options,i){return String(options.lineNumberFormatter(i+options.firstLineNumber))}function Pos(line,ch,sticky){if(sticky===void 0)sticky=null;if(!(this instanceof Pos)){return new Pos(line,ch,sticky)}this.line=line;this.ch=ch;this.sticky=sticky}function cmp(a,b){return a.line-b.line||a.ch-b.ch}function equalCursorPos(a,b){return a.sticky==b.sticky&&cmp(a,b)==0}function copyPos(x){return Pos(x.line,x.ch)}function maxPos(a,b){return cmp(a,b)<0?b:a}function minPos(a,b){return cmp(a,b)<0?a:b}function clipLine(doc,n){return Math.max(doc.first,Math.min(n,doc.first+doc.size-1))}function clipPos(doc,pos){if(pos.line<doc.first){return Pos(doc.first,0)}var last=doc.first+doc.size-1;if(pos.line>last){return Pos(last,getLine(doc,last).text.length)}return clipToLen(pos,getLine(doc,pos.line).text.length)}function clipToLen(pos,linelen){var ch=pos.ch;if(ch==null||ch>linelen){return Pos(pos.line,linelen)}else if(ch<0){return Pos(pos.line,0)}else{return pos}}function clipPosArray(doc,array){var out=[];for(var i=0;i<array.length;i++){out[i]=clipPos(doc,array[i])}return out}var sawReadOnlySpans=false;var sawCollapsedSpans=false;function seeReadOnlySpans(){sawReadOnlySpans=true}function seeCollapsedSpans(){sawCollapsedSpans=true}function MarkedSpan(marker,from,to){this.marker=marker;this.from=from;this.to=to}function getMarkedSpanFor(spans,marker){if(spans){for(var i=0;i<spans.length;++i){var span=spans[i];if(span.marker==marker){return span}}}}function removeMarkedSpan(spans,span){var r;for(var i=0;i<spans.length;++i){if(spans[i]!=span){(r||(r=[])).push(spans[i])}}return r}function addMarkedSpan(line,span){line.markedSpans=line.markedSpans?line.markedSpans.concat([span]):[span];span.marker.attachLine(line)}function markedSpansBefore(old,startCh,isInsert){var nw;if(old){for(var i=0;i<old.length;++i){var span=old[i],marker=span.marker;var startsBefore=span.from==null||(marker.inclusiveLeft?span.from<=startCh:span.from<startCh);if(startsBefore||span.from==startCh&&marker.type=="bookmark"&&(!isInsert||!span.marker.insertLeft)){var endsAfter=span.to==null||(marker.inclusiveRight?span.to>=startCh:span.to>startCh);(nw||(nw=[])).push(new MarkedSpan(marker,span.from,endsAfter?null:span.to))}}}return nw}function markedSpansAfter(old,endCh,isInsert){var nw;if(old){for(var i=0;i<old.length;++i){var span=old[i],marker=span.marker;var endsAfter=span.to==null||(marker.inclusiveRight?span.to>=endCh:span.to>endCh);if(endsAfter||span.from==endCh&&marker.type=="bookmark"&&(!isInsert||span.marker.insertLeft)){var startsBefore=span.from==null||(marker.inclusiveLeft?span.from<=endCh:span.from<endCh);(nw||(nw=[])).push(new MarkedSpan(marker,startsBefore?null:span.from-endCh,span.to==null?null:span.to-endCh))}}}return nw}function stretchSpansOverChange(doc,change){if(change.full){return null}var oldFirst=isLine(doc,change.from.line)&&getLine(doc,change.from.line).markedSpans;var oldLast=isLine(doc,change.to.line)&&getLine(doc,change.to.line).markedSpans;if(!oldFirst&&!oldLast){return null}var startCh=change.from.ch,endCh=change.to.ch,isInsert=cmp(change.from,change.to)==0;var first=markedSpansBefore(oldFirst,startCh,isInsert);var last=markedSpansAfter(oldLast,endCh,isInsert);var sameLine=change.text.length==1,offset=lst(change.text).length+(sameLine?startCh:0);if(first){for(var i=0;i<first.length;++i){var span=first[i];if(span.to==null){var found=getMarkedSpanFor(last,span.marker);if(!found){span.to=startCh}else if(sameLine){span.to=found.to==null?null:found.to+offset}}}}if(last){for(var i$1=0;i$1<last.length;++i$1){var span$1=last[i$1];if(span$1.to!=null){span$1.to+=offset}if(span$1.from==null){var found$1=getMarkedSpanFor(first,span$1.marker);if(!found$1){span$1.from=offset;if(sameLine){(first||(first=[])).push(span$1)}}}else{span$1.from+=offset;if(sameLine){(first||(first=[])).push(span$1)}}}}if(first){first=clearEmptySpans(first)}if(last&&last!=first){last=clearEmptySpans(last)}var newMarkers=[first];if(!sameLine){var gap=change.text.length-2,gapMarkers;if(gap>0&&first){for(var i$2=0;i$2<first.length;++i$2){if(first[i$2].to==null){(gapMarkers||(gapMarkers=[])).push(new MarkedSpan(first[i$2].marker,null,null))}}}for(var i$3=0;i$3<gap;++i$3){newMarkers.push(gapMarkers)}newMarkers.push(last)}return newMarkers}function clearEmptySpans(spans){for(var i=0;i<spans.length;++i){var span=spans[i];if(span.from!=null&&span.from==span.to&&span.marker.clearWhenEmpty!==false){spans.splice(i--,1)}}if(!spans.length){return null}return spans}function removeReadOnlyRanges(doc,from,to){var markers=null;doc.iter(from.line,to.line+1,function(line){if(line.markedSpans){for(var i=0;i<line.markedSpans.length;++i){var mark=line.markedSpans[i].marker;if(mark.readOnly&&(!markers||indexOf(markers,mark)==-1)){(markers||(markers=[])).push(mark)}}}});if(!markers){return null}var parts=[{from:from,to:to}];for(var i=0;i<markers.length;++i){var mk=markers[i],m=mk.find(0);for(var j=0;j<parts.length;++j){var p=parts[j];if(cmp(p.to,m.from)<0||cmp(p.from,m.to)>0){continue}var newParts=[j,1],dfrom=cmp(p.from,m.from),dto=cmp(p.to,m.to);if(dfrom<0||!mk.inclusiveLeft&&!dfrom){newParts.push({from:p.from,to:m.from})}if(dto>0||!mk.inclusiveRight&&!dto){newParts.push({from:m.to,to:p.to})}parts.splice.apply(parts,newParts);j+=newParts.length-3}}return parts}function detachMarkedSpans(line){var spans=line.markedSpans;if(!spans){return}for(var i=0;i<spans.length;++i){spans[i].marker.detachLine(line)}line.markedSpans=null}function attachMarkedSpans(line,spans){if(!spans){return}for(var i=0;i<spans.length;++i){spans[i].marker.attachLine(line)}line.markedSpans=spans}function extraLeft(marker){return marker.inclusiveLeft?-1:0}function extraRight(marker){return marker.inclusiveRight?1:0}function compareCollapsedMarkers(a,b){var lenDiff=a.lines.length-b.lines.length;if(lenDiff!=0){return lenDiff}var aPos=a.find(),bPos=b.find();var fromCmp=cmp(aPos.from,bPos.from)||extraLeft(a)-extraLeft(b);if(fromCmp){return-fromCmp}var toCmp=cmp(aPos.to,bPos.to)||extraRight(a)-extraRight(b);if(toCmp){return toCmp}return b.id-a.id}function collapsedSpanAtSide(line,start){var sps=sawCollapsedSpans&&line.markedSpans,found;if(sps){for(var sp=void 0,i=0;i<sps.length;++i){sp=sps[i];if(sp.marker.collapsed&&(start?sp.from:sp.to)==null&&(!found||compareCollapsedMarkers(found,sp.marker)<0)){found=sp.marker}}}return found}function collapsedSpanAtStart(line){return collapsedSpanAtSide(line,true)}function collapsedSpanAtEnd(line){return collapsedSpanAtSide(line,false)}function conflictingCollapsedRange(doc,lineNo$$1,from,to,marker){var line=getLine(doc,lineNo$$1);var sps=sawCollapsedSpans&&line.markedSpans;if(sps){for(var i=0;i<sps.length;++i){var sp=sps[i];if(!sp.marker.collapsed){continue}var found=sp.marker.find(0);var fromCmp=cmp(found.from,from)||extraLeft(sp.marker)-extraLeft(marker);var toCmp=cmp(found.to,to)||extraRight(sp.marker)-extraRight(marker);if(fromCmp>=0&&toCmp<=0||fromCmp<=0&&toCmp>=0){continue}if(fromCmp<=0&&(sp.marker.inclusiveRight&&marker.inclusiveLeft?cmp(found.to,from)>=0:cmp(found.to,from)>0)||fromCmp>=0&&(sp.marker.inclusiveRight&&marker.inclusiveLeft?cmp(found.from,to)<=0:cmp(found.from,to)<0)){return true}}}}function visualLine(line){var merged;while(merged=collapsedSpanAtStart(line)){line=merged.find(-1,true).line}return line}function visualLineEnd(line){var merged;while(merged=collapsedSpanAtEnd(line)){line=merged.find(1,true).line}return line}function visualLineContinued(line){var merged,lines;while(merged=collapsedSpanAtEnd(line)){line=merged.find(1,true).line;(lines||(lines=[])).push(line)}return lines}function visualLineNo(doc,lineN){var line=getLine(doc,lineN),vis=visualLine(line);if(line==vis){return lineN}return lineNo(vis)}function visualLineEndNo(doc,lineN){if(lineN>doc.lastLine()){return lineN}var line=getLine(doc,lineN),merged;if(!lineIsHidden(doc,line)){return lineN}while(merged=collapsedSpanAtEnd(line)){line=merged.find(1,true).line}return lineNo(line)+1}function lineIsHidden(doc,line){var sps=sawCollapsedSpans&&line.markedSpans;if(sps){for(var sp=void 0,i=0;i<sps.length;++i){sp=sps[i];if(!sp.marker.collapsed){continue}if(sp.from==null){return true}if(sp.marker.widgetNode){continue}if(sp.from==0&&sp.marker.inclusiveLeft&&lineIsHiddenInner(doc,line,sp)){return true}}}}function lineIsHiddenInner(doc,line,span){if(span.to==null){var end=span.marker.find(1,true);return lineIsHiddenInner(doc,end.line,getMarkedSpanFor(end.line.markedSpans,span.marker))}if(span.marker.inclusiveRight&&span.to==line.text.length){return true}for(var sp=void 0,i=0;i<line.markedSpans.length;++i){sp=line.markedSpans[i];if(sp.marker.collapsed&&!sp.marker.widgetNode&&sp.from==span.to&&(sp.to==null||sp.to!=span.from)&&(sp.marker.inclusiveLeft||span.marker.inclusiveRight)&&lineIsHiddenInner(doc,line,sp)){return true}}}function heightAtLine(lineObj){lineObj=visualLine(lineObj);var h=0,chunk=lineObj.parent;for(var i=0;i<chunk.lines.length;++i){var line=chunk.lines[i];if(line==lineObj){break}else{h+=line.height}}for(var p=chunk.parent;p;chunk=p,p=chunk.parent){for(var i$1=0;i$1<p.children.length;++i$1){var cur=p.children[i$1];if(cur==chunk){break}else{h+=cur.height}}}return h}function lineLength(line){if(line.height==0){return 0}var len=line.text.length,merged,cur=line;while(merged=collapsedSpanAtStart(cur)){var found=merged.find(0,true);cur=found.from.line;len+=found.from.ch-found.to.ch}cur=line;while(merged=collapsedSpanAtEnd(cur)){var found$1=merged.find(0,true);len-=cur.text.length-found$1.from.ch;cur=found$1.to.line;len+=cur.text.length-found$1.to.ch}return len}function findMaxLine(cm){var d=cm.display,doc=cm.doc;d.maxLine=getLine(doc,doc.first);d.maxLineLength=lineLength(d.maxLine);d.maxLineChanged=true;doc.iter(function(line){var len=lineLength(line);if(len>d.maxLineLength){d.maxLineLength=len;d.maxLine=line}})}function iterateBidiSections(order,from,to,f){if(!order){return f(from,to,"ltr")}var found=false;for(var i=0;i<order.length;++i){var part=order[i];if(part.from<to&&part.to>from||from==to&&part.to==from){f(Math.max(part.from,from),Math.min(part.to,to),part.level==1?"rtl":"ltr");found=true}}if(!found){f(from,to,"ltr")}}var bidiOther=null;function getBidiPartAt(order,ch,sticky){var found;bidiOther=null;for(var i=0;i<order.length;++i){var cur=order[i];if(cur.from<ch&&cur.to>ch){return i}if(cur.to==ch){if(cur.from!=cur.to&&sticky=="before"){found=i}else{bidiOther=i}}if(cur.from==ch){if(cur.from!=cur.to&&sticky!="before"){found=i}else{bidiOther=i}}}return found!=null?found:bidiOther}var bidiOrdering=function(){var lowTypes="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN";var arabicTypes="nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111";function charType(code){if(code<=247){return lowTypes.charAt(code)}else if(1424<=code&&code<=1524){return"R"}else if(1536<=code&&code<=1785){return arabicTypes.charAt(code-1536)}else if(1774<=code&&code<=2220){return"r"}else if(8192<=code&&code<=8203){return"w"}else if(code==8204){return"b"}else{return"L"}}var bidiRE=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;var isNeutral=/[stwN]/,isStrong=/[LRr]/,countsAsLeft=/[Lb1n]/,countsAsNum=/[1n]/;function BidiSpan(level,from,to){this.level=level;this.from=from;this.to=to}return function(str,direction){var outerType=direction=="ltr"?"L":"R";if(str.length==0||direction=="ltr"&&!bidiRE.test(str)){return false}var len=str.length,types=[];for(var i=0;i<len;++i){types.push(charType(str.charCodeAt(i)))}for(var i$1=0,prev=outerType;i$1<len;++i$1){var type=types[i$1];if(type=="m"){types[i$1]=prev}else{prev=type}}for(var i$2=0,cur=outerType;i$2<len;++i$2){var type$1=types[i$2];if(type$1=="1"&&cur=="r"){types[i$2]="n"}else if(isStrong.test(type$1)){cur=type$1;if(type$1=="r"){types[i$2]="R"}}}for(var i$3=1,prev$1=types[0];i$3<len-1;++i$3){var type$2=types[i$3];if(type$2=="+"&&prev$1=="1"&&types[i$3+1]=="1"){types[i$3]="1"}else if(type$2==","&&prev$1==types[i$3+1]&&(prev$1=="1"||prev$1=="n")){types[i$3]=prev$1}prev$1=type$2}for(var i$4=0;i$4<len;++i$4){var type$3=types[i$4];if(type$3==","){types[i$4]="N"}else if(type$3=="%"){var end=void 0;for(end=i$4+1;end<len&&types[end]=="%";++end){}var replace=i$4&&types[i$4-1]=="!"||end<len&&types[end]=="1"?"1":"N";for(var j=i$4;j<end;++j){types[j]=replace}i$4=end-1}}for(var i$5=0,cur$1=outerType;i$5<len;++i$5){var type$4=types[i$5];if(cur$1=="L"&&type$4=="1"){types[i$5]="L"}else if(isStrong.test(type$4)){cur$1=type$4}}for(var i$6=0;i$6<len;++i$6){if(isNeutral.test(types[i$6])){var end$1=void 0;for(end$1=i$6+1;end$1<len&&isNeutral.test(types[end$1]);++end$1){}var before=(i$6?types[i$6-1]:outerType)=="L";var after=(end$1<len?types[end$1]:outerType)=="L";var replace$1=before==after?before?"L":"R":outerType;for(var j$1=i$6;j$1<end$1;++j$1){types[j$1]=replace$1}i$6=end$1-1}}var order=[],m;for(var i$7=0;i$7<len;){if(countsAsLeft.test(types[i$7])){var start=i$7;for(++i$7;i$7<len&&countsAsLeft.test(types[i$7]);++i$7){}order.push(new BidiSpan(0,start,i$7))}else{var pos=i$7,at=order.length;for(++i$7;i$7<len&&types[i$7]!="L";++i$7){}for(var j$2=pos;j$2<i$7;){if(countsAsNum.test(types[j$2])){if(pos<j$2){order.splice(at,0,new BidiSpan(1,pos,j$2))}var nstart=j$2;for(++j$2;j$2<i$7&&countsAsNum.test(types[j$2]);++j$2){}order.splice(at,0,new BidiSpan(2,nstart,j$2));pos=j$2}else{++j$2}}if(pos<i$7){order.splice(at,0,new BidiSpan(1,pos,i$7))}}}if(order[0].level==1&&(m=str.match(/^\s+/))){order[0].from=m[0].length;order.unshift(new BidiSpan(0,0,m[0].length))}if(lst(order).level==1&&(m=str.match(/\s+$/))){lst(order).to-=m[0].length;order.push(new BidiSpan(0,len-m[0].length,len))}return direction=="rtl"?order.reverse():order}}();function getOrder(line,direction){var order=line.order;if(order==null){order=line.order=bidiOrdering(line.text,direction)}return order}function moveCharLogically(line,ch,dir){var target=skipExtendingChars(line.text,ch+dir,dir);return target<0||target>line.text.length?null:target}function moveLogically(line,start,dir){var ch=moveCharLogically(line,start.ch,dir);return ch==null?null:new Pos(start.line,ch,dir<0?"after":"before")}function endOfLine(visually,cm,lineObj,lineNo,dir){if(visually){var order=getOrder(lineObj,cm.doc.direction);if(order){var part=dir<0?lst(order):order[0];var moveInStorageOrder=dir<0==(part.level==1);var sticky=moveInStorageOrder?"after":"before";var ch;if(part.level>0){var prep=prepareMeasureForLine(cm,lineObj);ch=dir<0?lineObj.text.length-1:0;var targetTop=measureCharPrepared(cm,prep,ch).top;
ch=findFirst(function(ch){return measureCharPrepared(cm,prep,ch).top==targetTop},dir<0==(part.level==1)?part.from:part.to-1,ch);if(sticky=="before"){ch=moveCharLogically(lineObj,ch,1)}}else{ch=dir<0?part.to:part.from}return new Pos(lineNo,ch,sticky)}}return new Pos(lineNo,dir<0?lineObj.text.length:0,dir<0?"before":"after")}function moveVisually(cm,line,start,dir){var bidi=getOrder(line,cm.doc.direction);if(!bidi){return moveLogically(line,start,dir)}if(start.ch>=line.text.length){start.ch=line.text.length;start.sticky="before"}else if(start.ch<=0){start.ch=0;start.sticky="after"}var partPos=getBidiPartAt(bidi,start.ch,start.sticky),part=bidi[partPos];if(cm.doc.direction=="ltr"&&part.level%2==0&&(dir>0?part.to>start.ch:part.from<start.ch)){return moveLogically(line,start,dir)}var mv=function(pos,dir){return moveCharLogically(line,pos instanceof Pos?pos.ch:pos,dir)};var prep;var getWrappedLineExtent=function(ch){if(!cm.options.lineWrapping){return{begin:0,end:line.text.length}}prep=prep||prepareMeasureForLine(cm,line);return wrappedLineExtentChar(cm,line,prep,ch)};var wrappedLineExtent=getWrappedLineExtent(start.sticky=="before"?mv(start,-1):start.ch);if(cm.doc.direction=="rtl"||part.level==1){var moveInStorageOrder=part.level==1==dir<0;var ch=mv(start,moveInStorageOrder?1:-1);if(ch!=null&&(!moveInStorageOrder?ch>=part.from&&ch>=wrappedLineExtent.begin:ch<=part.to&&ch<=wrappedLineExtent.end)){var sticky=moveInStorageOrder?"before":"after";return new Pos(start.line,ch,sticky)}}var searchInVisualLine=function(partPos,dir,wrappedLineExtent){var getRes=function(ch,moveInStorageOrder){return moveInStorageOrder?new Pos(start.line,mv(ch,1),"before"):new Pos(start.line,ch,"after")};for(;partPos>=0&&partPos<bidi.length;partPos+=dir){var part=bidi[partPos];var moveInStorageOrder=dir>0==(part.level!=1);var ch=moveInStorageOrder?wrappedLineExtent.begin:mv(wrappedLineExtent.end,-1);if(part.from<=ch&&ch<part.to){return getRes(ch,moveInStorageOrder)}ch=moveInStorageOrder?part.from:mv(part.to,-1);if(wrappedLineExtent.begin<=ch&&ch<wrappedLineExtent.end){return getRes(ch,moveInStorageOrder)}}};var res=searchInVisualLine(partPos+dir,dir,wrappedLineExtent);if(res){return res}var nextCh=dir>0?wrappedLineExtent.end:mv(wrappedLineExtent.begin,-1);if(nextCh!=null&&!(dir>0&&nextCh==line.text.length)){res=searchInVisualLine(dir>0?0:bidi.length-1,dir,getWrappedLineExtent(nextCh));if(res){return res}}return null}var noHandlers=[];var on=function(emitter,type,f){if(emitter.addEventListener){emitter.addEventListener(type,f,false)}else if(emitter.attachEvent){emitter.attachEvent("on"+type,f)}else{var map$$1=emitter._handlers||(emitter._handlers={});map$$1[type]=(map$$1[type]||noHandlers).concat(f)}};function getHandlers(emitter,type){return emitter._handlers&&emitter._handlers[type]||noHandlers}function off(emitter,type,f){if(emitter.removeEventListener){emitter.removeEventListener(type,f,false)}else if(emitter.detachEvent){emitter.detachEvent("on"+type,f)}else{var map$$1=emitter._handlers,arr=map$$1&&map$$1[type];if(arr){var index=indexOf(arr,f);if(index>-1){map$$1[type]=arr.slice(0,index).concat(arr.slice(index+1))}}}}function signal(emitter,type){var handlers=getHandlers(emitter,type);if(!handlers.length){return}var args=Array.prototype.slice.call(arguments,2);for(var i=0;i<handlers.length;++i){handlers[i].apply(null,args)}}function signalDOMEvent(cm,e,override){if(typeof e=="string"){e={type:e,preventDefault:function(){this.defaultPrevented=true}}}signal(cm,override||e.type,cm,e);return e_defaultPrevented(e)||e.codemirrorIgnore}function signalCursorActivity(cm){var arr=cm._handlers&&cm._handlers.cursorActivity;if(!arr){return}var set=cm.curOp.cursorActivityHandlers||(cm.curOp.cursorActivityHandlers=[]);for(var i=0;i<arr.length;++i){if(indexOf(set,arr[i])==-1){set.push(arr[i])}}}function hasHandler(emitter,type){return getHandlers(emitter,type).length>0}function eventMixin(ctor){ctor.prototype.on=function(type,f){on(this,type,f)};ctor.prototype.off=function(type,f){off(this,type,f)}}function e_preventDefault(e){if(e.preventDefault){e.preventDefault()}else{e.returnValue=false}}function e_stopPropagation(e){if(e.stopPropagation){e.stopPropagation()}else{e.cancelBubble=true}}function e_defaultPrevented(e){return e.defaultPrevented!=null?e.defaultPrevented:e.returnValue==false}function e_stop(e){e_preventDefault(e);e_stopPropagation(e)}function e_target(e){return e.target||e.srcElement}function e_button(e){var b=e.which;if(b==null){if(e.button&1){b=1}else if(e.button&2){b=3}else if(e.button&4){b=2}}if(mac&&e.ctrlKey&&b==1){b=3}return b}var dragAndDrop=function(){if(ie&&ie_version<9){return false}var div=elt("div");return"draggable"in div||"dragDrop"in div}();var zwspSupported;function zeroWidthElement(measure){if(zwspSupported==null){var test=elt("span","​");removeChildrenAndAdd(measure,elt("span",[test,document.createTextNode("x")]));if(measure.firstChild.offsetHeight!=0){zwspSupported=test.offsetWidth<=1&&test.offsetHeight>2&&!(ie&&ie_version<8)}}var node=zwspSupported?elt("span","​"):elt("span"," ",null,"display: inline-block; width: 1px; margin-right: -1px");node.setAttribute("cm-text","");return node}var badBidiRects;function hasBadBidiRects(measure){if(badBidiRects!=null){return badBidiRects}var txt=removeChildrenAndAdd(measure,document.createTextNode("AخA"));var r0=range(txt,0,1).getBoundingClientRect();var r1=range(txt,1,2).getBoundingClientRect();removeChildren(measure);if(!r0||r0.left==r0.right){return false}return badBidiRects=r1.right-r0.right<3}var splitLinesAuto="\n\nb".split(/\n/).length!=3?function(string){var pos=0,result=[],l=string.length;while(pos<=l){var nl=string.indexOf("\n",pos);if(nl==-1){nl=string.length}var line=string.slice(pos,string.charAt(nl-1)=="\r"?nl-1:nl);var rt=line.indexOf("\r");if(rt!=-1){result.push(line.slice(0,rt));pos+=rt+1}else{result.push(line);pos=nl+1}}return result}:function(string){return string.split(/\r\n?|\n/)};var hasSelection=window.getSelection?function(te){try{return te.selectionStart!=te.selectionEnd}catch(e){return false}}:function(te){var range$$1;try{range$$1=te.ownerDocument.selection.createRange()}catch(e){}if(!range$$1||range$$1.parentElement()!=te){return false}return range$$1.compareEndPoints("StartToEnd",range$$1)!=0};var hasCopyEvent=function(){var e=elt("div");if("oncopy"in e){return true}e.setAttribute("oncopy","return;");return typeof e.oncopy=="function"}();var badZoomedRects=null;function hasBadZoomedRects(measure){if(badZoomedRects!=null){return badZoomedRects}var node=removeChildrenAndAdd(measure,elt("span","x"));var normal=node.getBoundingClientRect();var fromRange=range(node,0,1).getBoundingClientRect();return badZoomedRects=Math.abs(normal.left-fromRange.left)>1}var modes={};var mimeModes={};function defineMode(name,mode){if(arguments.length>2){mode.dependencies=Array.prototype.slice.call(arguments,2)}modes[name]=mode}function defineMIME(mime,spec){mimeModes[mime]=spec}function resolveMode(spec){if(typeof spec=="string"&&mimeModes.hasOwnProperty(spec)){spec=mimeModes[spec]}else if(spec&&typeof spec.name=="string"&&mimeModes.hasOwnProperty(spec.name)){var found=mimeModes[spec.name];if(typeof found=="string"){found={name:found}}spec=createObj(found,spec);spec.name=found.name}else if(typeof spec=="string"&&/^[\w\-]+\/[\w\-]+\+xml$/.test(spec)){return resolveMode("application/xml")}else if(typeof spec=="string"&&/^[\w\-]+\/[\w\-]+\+json$/.test(spec)){return resolveMode("application/json")}if(typeof spec=="string"){return{name:spec}}else{return spec||{name:"null"}}}function getMode(options,spec){spec=resolveMode(spec);var mfactory=modes[spec.name];if(!mfactory){return getMode(options,"text/plain")}var modeObj=mfactory(options,spec);if(modeExtensions.hasOwnProperty(spec.name)){var exts=modeExtensions[spec.name];for(var prop in exts){if(!exts.hasOwnProperty(prop)){continue}if(modeObj.hasOwnProperty(prop)){modeObj["_"+prop]=modeObj[prop]}modeObj[prop]=exts[prop]}}modeObj.name=spec.name;if(spec.helperType){modeObj.helperType=spec.helperType}if(spec.modeProps){for(var prop$1 in spec.modeProps){modeObj[prop$1]=spec.modeProps[prop$1]}}return modeObj}var modeExtensions={};function extendMode(mode,properties){var exts=modeExtensions.hasOwnProperty(mode)?modeExtensions[mode]:modeExtensions[mode]={};copyObj(properties,exts)}function copyState(mode,state){if(state===true){return state}if(mode.copyState){return mode.copyState(state)}var nstate={};for(var n in state){var val=state[n];if(val instanceof Array){val=val.concat([])}nstate[n]=val}return nstate}function innerMode(mode,state){var info;while(mode.innerMode){info=mode.innerMode(state);if(!info||info.mode==mode){break}state=info.state;mode=info.mode}return info||{mode:mode,state:state}}function startState(mode,a1,a2){return mode.startState?mode.startState(a1,a2):true}var StringStream=function(string,tabSize){this.pos=this.start=0;this.string=string;this.tabSize=tabSize||8;this.lastColumnPos=this.lastColumnValue=0;this.lineStart=0};StringStream.prototype.eol=function(){return this.pos>=this.string.length};StringStream.prototype.sol=function(){return this.pos==this.lineStart};StringStream.prototype.peek=function(){return this.string.charAt(this.pos)||undefined};StringStream.prototype.next=function(){if(this.pos<this.string.length){return this.string.charAt(this.pos++)}};StringStream.prototype.eat=function(match){var ch=this.string.charAt(this.pos);var ok;if(typeof match=="string"){ok=ch==match}else{ok=ch&&(match.test?match.test(ch):match(ch))}if(ok){++this.pos;return ch}};StringStream.prototype.eatWhile=function(match){var start=this.pos;while(this.eat(match)){}return this.pos>start};StringStream.prototype.eatSpace=function(){var this$1=this;var start=this.pos;while(/[\s\u00a0]/.test(this.string.charAt(this.pos))){++this$1.pos}return this.pos>start};StringStream.prototype.skipToEnd=function(){this.pos=this.string.length};StringStream.prototype.skipTo=function(ch){var found=this.string.indexOf(ch,this.pos);if(found>-1){this.pos=found;return true}};StringStream.prototype.backUp=function(n){this.pos-=n};StringStream.prototype.column=function(){if(this.lastColumnPos<this.start){this.lastColumnValue=countColumn(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue);this.lastColumnPos=this.start}return this.lastColumnValue-(this.lineStart?countColumn(this.string,this.lineStart,this.tabSize):0)};StringStream.prototype.indentation=function(){return countColumn(this.string,null,this.tabSize)-(this.lineStart?countColumn(this.string,this.lineStart,this.tabSize):0)};StringStream.prototype.match=function(pattern,consume,caseInsensitive){if(typeof pattern=="string"){var cased=function(str){return caseInsensitive?str.toLowerCase():str};var substr=this.string.substr(this.pos,pattern.length);if(cased(substr)==cased(pattern)){if(consume!==false){this.pos+=pattern.length}return true}}else{var match=this.string.slice(this.pos).match(pattern);if(match&&match.index>0){return null}if(match&&consume!==false){this.pos+=match[0].length}return match}};StringStream.prototype.current=function(){return this.string.slice(this.start,this.pos)};StringStream.prototype.hideFirstChars=function(n,inner){this.lineStart+=n;try{return inner()}finally{this.lineStart-=n}};function highlightLine(cm,line,state,forceToEnd){var st=[cm.state.modeGen],lineClasses={};runMode(cm,line.text,cm.doc.mode,state,function(end,style){return st.push(end,style)},lineClasses,forceToEnd);var loop=function(o){var overlay=cm.state.overlays[o],i=1,at=0;runMode(cm,line.text,overlay.mode,true,function(end,style){var start=i;while(at<end){var i_end=st[i];if(i_end>end){st.splice(i,1,end,st[i+1],i_end)}i+=2;at=Math.min(end,i_end)}if(!style){return}if(overlay.opaque){st.splice(start,i-start,end,"overlay "+style);i=start+2}else{for(;start<i;start+=2){var cur=st[start+1];st[start+1]=(cur?cur+" ":"")+"overlay "+style}}},lineClasses)};for(var o=0;o<cm.state.overlays.length;++o)loop(o);return{styles:st,classes:lineClasses.bgClass||lineClasses.textClass?lineClasses:null}}function getLineStyles(cm,line,updateFrontier){if(!line.styles||line.styles[0]!=cm.state.modeGen){var state=getStateBefore(cm,lineNo(line));var result=highlightLine(cm,line,line.text.length>cm.options.maxHighlightLength?copyState(cm.doc.mode,state):state);line.stateAfter=state;line.styles=result.styles;if(result.classes){line.styleClasses=result.classes}else if(line.styleClasses){line.styleClasses=null}if(updateFrontier===cm.doc.frontier){cm.doc.frontier++}}return line.styles}function getStateBefore(cm,n,precise){var doc=cm.doc,display=cm.display;if(!doc.mode.startState){return true}var pos=findStartLine(cm,n,precise),state=pos>doc.first&&getLine(doc,pos-1).stateAfter;if(!state){state=startState(doc.mode)}else{state=copyState(doc.mode,state)}doc.iter(pos,n,function(line){processLine(cm,line.text,state);var save=pos==n-1||pos%5==0||pos>=display.viewFrom&&pos<display.viewTo;line.stateAfter=save?copyState(doc.mode,state):null;++pos});if(precise){doc.frontier=pos}return state}function processLine(cm,text,state,startAt){var mode=cm.doc.mode;var stream=new StringStream(text,cm.options.tabSize);stream.start=stream.pos=startAt||0;if(text==""){callBlankLine(mode,state)}while(!stream.eol()){readToken(mode,stream,state);stream.start=stream.pos}}function callBlankLine(mode,state){if(mode.blankLine){return mode.blankLine(state)}if(!mode.innerMode){return}var inner=innerMode(mode,state);if(inner.mode.blankLine){return inner.mode.blankLine(inner.state)}}function readToken(mode,stream,state,inner){for(var i=0;i<10;i++){if(inner){inner[0]=innerMode(mode,state).mode}var style=mode.token(stream,state);if(stream.pos>stream.start){return style}}throw new Error("Mode "+mode.name+" failed to advance stream.")}function takeToken(cm,pos,precise,asArray){var getObj=function(copy){return{start:stream.start,end:stream.pos,string:stream.current(),type:style||null,state:copy?copyState(doc.mode,state):state}};var doc=cm.doc,mode=doc.mode,style;pos=clipPos(doc,pos);var line=getLine(doc,pos.line),state=getStateBefore(cm,pos.line,precise);var stream=new StringStream(line.text,cm.options.tabSize),tokens;if(asArray){tokens=[]}while((asArray||stream.pos<pos.ch)&&!stream.eol()){stream.start=stream.pos;style=readToken(mode,stream,state);if(asArray){tokens.push(getObj(true))}}return asArray?tokens:getObj()}function extractLineClasses(type,output){if(type){for(;;){var lineClass=type.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!lineClass){break}type=type.slice(0,lineClass.index)+type.slice(lineClass.index+lineClass[0].length);var prop=lineClass[1]?"bgClass":"textClass";if(output[prop]==null){output[prop]=lineClass[2]}else if(!new RegExp("(?:^|s)"+lineClass[2]+"(?:$|s)").test(output[prop])){output[prop]+=" "+lineClass[2]}}}return type}function runMode(cm,text,mode,state,f,lineClasses,forceToEnd){var flattenSpans=mode.flattenSpans;if(flattenSpans==null){flattenSpans=cm.options.flattenSpans}var curStart=0,curStyle=null;var stream=new StringStream(text,cm.options.tabSize),style;var inner=cm.options.addModeClass&&[null];if(text==""){extractLineClasses(callBlankLine(mode,state),lineClasses)}while(!stream.eol()){if(stream.pos>cm.options.maxHighlightLength){flattenSpans=false;if(forceToEnd){processLine(cm,text,state,stream.pos)}stream.pos=text.length;style=null}else{style=extractLineClasses(readToken(mode,stream,state,inner),lineClasses)}if(inner){var mName=inner[0].name;if(mName){style="m-"+(style?mName+" "+style:mName)}}if(!flattenSpans||curStyle!=style){while(curStart<stream.start){curStart=Math.min(stream.start,curStart+5e3);f(curStart,curStyle)}curStyle=style}stream.start=stream.pos}while(curStart<stream.pos){var pos=Math.min(stream.pos,curStart+5e3);f(pos,curStyle);curStart=pos}}function findStartLine(cm,n,precise){var minindent,minline,doc=cm.doc;var lim=precise?-1:n-(cm.doc.mode.innerMode?1e3:100);for(var search=n;search>lim;--search){if(search<=doc.first){return doc.first}var line=getLine(doc,search-1);if(line.stateAfter&&(!precise||search<=doc.frontier)){return search}var indented=countColumn(line.text,null,cm.options.tabSize);if(minline==null||minindent>indented){minline=search-1;minindent=indented}}return minline}var Line=function(text,markedSpans,estimateHeight){this.text=text;attachMarkedSpans(this,markedSpans);this.height=estimateHeight?estimateHeight(this):1};Line.prototype.lineNo=function(){return lineNo(this)};eventMixin(Line);function updateLine(line,text,markedSpans,estimateHeight){line.text=text;if(line.stateAfter){line.stateAfter=null}if(line.styles){line.styles=null}if(line.order!=null){line.order=null}detachMarkedSpans(line);attachMarkedSpans(line,markedSpans);var estHeight=estimateHeight?estimateHeight(line):1;if(estHeight!=line.height){updateLineHeight(line,estHeight)}}function cleanUpLine(line){line.parent=null;detachMarkedSpans(line)}var styleToClassCache={};var styleToClassCacheWithMode={};function interpretTokenStyle(style,options){if(!style||/^\s*$/.test(style)){return null}var cache=options.addModeClass?styleToClassCacheWithMode:styleToClassCache;return cache[style]||(cache[style]=style.replace(/\S+/g,"cm-$&"))}function buildLineContent(cm,lineView){var content=eltP("span",null,null,webkit?"padding-right: .1px":null);var builder={pre:eltP("pre",[content],"CodeMirror-line"),content:content,col:0,pos:0,cm:cm,trailingSpace:false,splitSpaces:(ie||webkit)&&cm.getOption("lineWrapping")};lineView.measure={};for(var i=0;i<=(lineView.rest?lineView.rest.length:0);i++){var line=i?lineView.rest[i-1]:lineView.line,order=void 0;builder.pos=0;builder.addToken=buildToken;if(hasBadBidiRects(cm.display.measure)&&(order=getOrder(line,cm.doc.direction))){builder.addToken=buildTokenBadBidi(builder.addToken,order)}builder.map=[];var allowFrontierUpdate=lineView!=cm.display.externalMeasured&&lineNo(line);insertLineContent(line,builder,getLineStyles(cm,line,allowFrontierUpdate));if(line.styleClasses){if(line.styleClasses.bgClass){builder.bgClass=joinClasses(line.styleClasses.bgClass,builder.bgClass||"")}if(line.styleClasses.textClass){builder.textClass=joinClasses(line.styleClasses.textClass,builder.textClass||"")}}if(builder.map.length==0){builder.map.push(0,0,builder.content.appendChild(zeroWidthElement(cm.display.measure)))}if(i==0){lineView.measure.map=builder.map;lineView.measure.cache={}}else{(lineView.measure.maps||(lineView.measure.maps=[])).push(builder.map);(lineView.measure.caches||(lineView.measure.caches=[])).push({})}}if(webkit){var last=builder.content.lastChild;if(/\bcm-tab\b/.test(last.className)||last.querySelector&&last.querySelector(".cm-tab")){builder.content.className="cm-tab-wrap-hack"}}signal(cm,"renderLine",cm,lineView.line,builder.pre);if(builder.pre.className){builder.textClass=joinClasses(builder.pre.className,builder.textClass||"")}return builder}function defaultSpecialCharPlaceholder(ch){var token=elt("span","•","cm-invalidchar");token.title="\\u"+ch.charCodeAt(0).toString(16);token.setAttribute("aria-label",token.title);return token}function buildToken(builder,text,style,startStyle,endStyle,title,css){if(!text){return}var displayText=builder.splitSpaces?splitSpaces(text,builder.trailingSpace):text;var special=builder.cm.state.specialChars,mustWrap=false;var content;if(!special.test(text)){builder.col+=text.length;content=document.createTextNode(displayText);builder.map.push(builder.pos,builder.pos+text.length,content);if(ie&&ie_version<9){mustWrap=true}builder.pos+=text.length}else{content=document.createDocumentFragment();var pos=0;while(true){special.lastIndex=pos;var m=special.exec(text);var skipped=m?m.index-pos:text.length-pos;if(skipped){var txt=document.createTextNode(displayText.slice(pos,pos+skipped));if(ie&&ie_version<9){content.appendChild(elt("span",[txt]))}else{content.appendChild(txt)}builder.map.push(builder.pos,builder.pos+skipped,txt);builder.col+=skipped;builder.pos+=skipped}if(!m){break}pos+=skipped+1;var txt$1=void 0;if(m[0]=="	"){var tabSize=builder.cm.options.tabSize,tabWidth=tabSize-builder.col%tabSize;txt$1=content.appendChild(elt("span",spaceStr(tabWidth),"cm-tab"));txt$1.setAttribute("role","presentation");txt$1.setAttribute("cm-text","	");builder.col+=tabWidth}else if(m[0]=="\r"||m[0]=="\n"){txt$1=content.appendChild(elt("span",m[0]=="\r"?"␍":"␤","cm-invalidchar"));txt$1.setAttribute("cm-text",m[0]);builder.col+=1}else{txt$1=builder.cm.options.specialCharPlaceholder(m[0]);txt$1.setAttribute("cm-text",m[0]);if(ie&&ie_version<9){content.appendChild(elt("span",[txt$1]))}else{content.appendChild(txt$1)}builder.col+=1}builder.map.push(builder.pos,builder.pos+1,txt$1);builder.pos++}}builder.trailingSpace=displayText.charCodeAt(text.length-1)==32;if(style||startStyle||endStyle||mustWrap||css){var fullStyle=style||"";if(startStyle){fullStyle+=startStyle}if(endStyle){fullStyle+=endStyle}var token=elt("span",[content],fullStyle,css);if(title){token.title=title}return builder.content.appendChild(token)}builder.content.appendChild(content)}function splitSpaces(text,trailingBefore){if(text.length>1&&!/  /.test(text)){return text}var spaceBefore=trailingBefore,result="";for(var i=0;i<text.length;i++){var ch=text.charAt(i);if(ch==" "&&spaceBefore&&(i==text.length-1||text.charCodeAt(i+1)==32)){ch=" "}result+=ch;spaceBefore=ch==" "}return result}function buildTokenBadBidi(inner,order){return function(builder,text,style,startStyle,endStyle,title,css){style=style?style+" cm-force-border":"cm-force-border";var start=builder.pos,end=start+text.length;for(;;){var part=void 0;for(var i=0;i<order.length;i++){part=order[i];if(part.to>start&&part.from<=start){break}}if(part.to>=end){return inner(builder,text,style,startStyle,endStyle,title,css)}inner(builder,text.slice(0,part.to-start),style,startStyle,null,title,css);startStyle=null;text=text.slice(part.to-start);start=part.to}}}function buildCollapsedSpan(builder,size,marker,ignoreWidget){var widget=!ignoreWidget&&marker.widgetNode;if(widget){builder.map.push(builder.pos,builder.pos+size,widget)}if(!ignoreWidget&&builder.cm.display.input.needsContentAttribute){if(!widget){widget=builder.content.appendChild(document.createElement("span"))}widget.setAttribute("cm-marker",marker.id)}if(widget){builder.cm.display.input.setUneditable(widget);builder.content.appendChild(widget)}builder.pos+=size;builder.trailingSpace=false}function insertLineContent(line,builder,styles){var spans=line.markedSpans,allText=line.text,at=0;if(!spans){for(var i$1=1;i$1<styles.length;i$1+=2){builder.addToken(builder,allText.slice(at,at=styles[i$1]),interpretTokenStyle(styles[i$1+1],builder.cm.options))}return}var len=allText.length,pos=0,i=1,text="",style,css;var nextChange=0,spanStyle,spanEndStyle,spanStartStyle,title,collapsed;for(;;){if(nextChange==pos){spanStyle=spanEndStyle=spanStartStyle=title=css="";collapsed=null;nextChange=Infinity;var foundBookmarks=[],endStyles=void 0;for(var j=0;j<spans.length;++j){var sp=spans[j],m=sp.marker;if(m.type=="bookmark"&&sp.from==pos&&m.widgetNode){foundBookmarks.push(m)}else if(sp.from<=pos&&(sp.to==null||sp.to>pos||m.collapsed&&sp.to==pos&&sp.from==pos)){if(sp.to!=null&&sp.to!=pos&&nextChange>sp.to){nextChange=sp.to;spanEndStyle=""}if(m.className){spanStyle+=" "+m.className}if(m.css){css=(css?css+";":"")+m.css}if(m.startStyle&&sp.from==pos){spanStartStyle+=" "+m.startStyle}if(m.endStyle&&sp.to==nextChange){(endStyles||(endStyles=[])).push(m.endStyle,sp.to)}if(m.title&&!title){title=m.title}if(m.collapsed&&(!collapsed||compareCollapsedMarkers(collapsed.marker,m)<0)){collapsed=sp}}else if(sp.from>pos&&nextChange>sp.from){nextChange=sp.from}}if(endStyles){for(var j$1=0;j$1<endStyles.length;j$1+=2){if(endStyles[j$1+1]==nextChange){spanEndStyle+=" "+endStyles[j$1]}}}if(!collapsed||collapsed.from==pos){for(var j$2=0;j$2<foundBookmarks.length;++j$2){buildCollapsedSpan(builder,0,foundBookmarks[j$2])}}if(collapsed&&(collapsed.from||0)==pos){buildCollapsedSpan(builder,(collapsed.to==null?len+1:collapsed.to)-pos,collapsed.marker,collapsed.from==null);if(collapsed.to==null){return}if(collapsed.to==pos){collapsed=false}}}if(pos>=len){break}var upto=Math.min(len,nextChange);while(true){if(text){var end=pos+text.length;if(!collapsed){var tokenText=end>upto?text.slice(0,upto-pos):text;builder.addToken(builder,tokenText,style?style+spanStyle:spanStyle,spanStartStyle,pos+tokenText.length==nextChange?spanEndStyle:"",title,css)}if(end>=upto){text=text.slice(upto-pos);pos=upto;break}pos=end;spanStartStyle=""}text=allText.slice(at,at=styles[i++]);style=interpretTokenStyle(styles[i++],builder.cm.options)}}}function LineView(doc,line,lineN){this.line=line;this.rest=visualLineContinued(line);this.size=this.rest?lineNo(lst(this.rest))-lineN+1:1;this.node=this.text=null;this.hidden=lineIsHidden(doc,line)}function buildViewArray(cm,from,to){var array=[],nextPos;for(var pos=from;pos<to;pos=nextPos){var view=new LineView(cm.doc,getLine(cm.doc,pos),pos);nextPos=pos+view.size;array.push(view)}return array}var operationGroup=null;function pushOperation(op){if(operationGroup){operationGroup.ops.push(op)}else{op.ownsGroup=operationGroup={ops:[op],delayedCallbacks:[]}}}function fireCallbacksForOps(group){var callbacks=group.delayedCallbacks,i=0;do{for(;i<callbacks.length;i++){callbacks[i].call(null)}for(var j=0;j<group.ops.length;j++){var op=group.ops[j];if(op.cursorActivityHandlers){while(op.cursorActivityCalled<op.cursorActivityHandlers.length){op.cursorActivityHandlers[op.cursorActivityCalled++].call(null,op.cm)}}}}while(i<callbacks.length)}function finishOperation(op,endCb){var group=op.ownsGroup;if(!group){return}try{fireCallbacksForOps(group)}finally{operationGroup=null;endCb(group)}}var orphanDelayedCallbacks=null;function signalLater(emitter,type){var arr=getHandlers(emitter,type);if(!arr.length){return}var args=Array.prototype.slice.call(arguments,2),list;if(operationGroup){list=operationGroup.delayedCallbacks}else if(orphanDelayedCallbacks){list=orphanDelayedCallbacks}else{list=orphanDelayedCallbacks=[];setTimeout(fireOrphanDelayed,0)}var loop=function(i){list.push(function(){return arr[i].apply(null,args)})};for(var i=0;i<arr.length;++i)loop(i)}function fireOrphanDelayed(){var delayed=orphanDelayedCallbacks;orphanDelayedCallbacks=null;for(var i=0;i<delayed.length;++i){delayed[i]()}}function updateLineForChanges(cm,lineView,lineN,dims){for(var j=0;j<lineView.changes.length;j++){var type=lineView.changes[j];if(type=="text"){updateLineText(cm,lineView)}else if(type=="gutter"){updateLineGutter(cm,lineView,lineN,dims)}else if(type=="class"){updateLineClasses(cm,lineView)}else if(type=="widget"){updateLineWidgets(cm,lineView,dims)}}lineView.changes=null}function ensureLineWrapped(lineView){if(lineView.node==lineView.text){lineView.node=elt("div",null,null,"position: relative");if(lineView.text.parentNode){lineView.text.parentNode.replaceChild(lineView.node,lineView.text)}lineView.node.appendChild(lineView.text);if(ie&&ie_version<8){lineView.node.style.zIndex=2}}return lineView.node}function updateLineBackground(cm,lineView){var cls=lineView.bgClass?lineView.bgClass+" "+(lineView.line.bgClass||""):lineView.line.bgClass;if(cls){cls+=" CodeMirror-linebackground"}if(lineView.background){if(cls){lineView.background.className=cls}else{lineView.background.parentNode.removeChild(lineView.background);lineView.background=null}}else if(cls){var wrap=ensureLineWrapped(lineView);lineView.background=wrap.insertBefore(elt("div",null,cls),wrap.firstChild);cm.display.input.setUneditable(lineView.background)}}function getLineContent(cm,lineView){var ext=cm.display.externalMeasured;if(ext&&ext.line==lineView.line){cm.display.externalMeasured=null;lineView.measure=ext.measure;return ext.built}return buildLineContent(cm,lineView)}function updateLineText(cm,lineView){var cls=lineView.text.className;var built=getLineContent(cm,lineView);if(lineView.text==lineView.node){lineView.node=built.pre}lineView.text.parentNode.replaceChild(built.pre,lineView.text);lineView.text=built.pre;if(built.bgClass!=lineView.bgClass||built.textClass!=lineView.textClass){lineView.bgClass=built.bgClass;lineView.textClass=built.textClass;updateLineClasses(cm,lineView)}else if(cls){lineView.text.className=cls}}function updateLineClasses(cm,lineView){updateLineBackground(cm,lineView);if(lineView.line.wrapClass){ensureLineWrapped(lineView).className=lineView.line.wrapClass}else if(lineView.node!=lineView.text){lineView.node.className=""}var textClass=lineView.textClass?lineView.textClass+" "+(lineView.line.textClass||""):lineView.line.textClass;lineView.text.className=textClass||""}function updateLineGutter(cm,lineView,lineN,dims){if(lineView.gutter){lineView.node.removeChild(lineView.gutter);lineView.gutter=null}if(lineView.gutterBackground){lineView.node.removeChild(lineView.gutterBackground);lineView.gutterBackground=null}if(lineView.line.gutterClass){var wrap=ensureLineWrapped(lineView);lineView.gutterBackground=elt("div",null,"CodeMirror-gutter-background "+lineView.line.gutterClass,"left: "+(cm.options.fixedGutter?dims.fixedPos:-dims.gutterTotalWidth)+"px; width: "+dims.gutterTotalWidth+"px");cm.display.input.setUneditable(lineView.gutterBackground);wrap.insertBefore(lineView.gutterBackground,lineView.text)}var markers=lineView.line.gutterMarkers;if(cm.options.lineNumbers||markers){var wrap$1=ensureLineWrapped(lineView);var gutterWrap=lineView.gutter=elt("div",null,"CodeMirror-gutter-wrapper","left: "+(cm.options.fixedGutter?dims.fixedPos:-dims.gutterTotalWidth)+"px");cm.display.input.setUneditable(gutterWrap);wrap$1.insertBefore(gutterWrap,lineView.text);if(lineView.line.gutterClass){gutterWrap.className+=" "+lineView.line.gutterClass}if(cm.options.lineNumbers&&(!markers||!markers["CodeMirror-linenumbers"])){lineView.lineNumber=gutterWrap.appendChild(elt("div",lineNumberFor(cm.options,lineN),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+dims.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+cm.display.lineNumInnerWidth+"px"))}if(markers){for(var k=0;k<cm.options.gutters.length;++k){var id=cm.options.gutters[k],found=markers.hasOwnProperty(id)&&markers[id];if(found){gutterWrap.appendChild(elt("div",[found],"CodeMirror-gutter-elt","left: "+dims.gutterLeft[id]+"px; width: "+dims.gutterWidth[id]+"px"))}}}}}function updateLineWidgets(cm,lineView,dims){if(lineView.alignable){lineView.alignable=null}for(var node=lineView.node.firstChild,next=void 0;node;node=next){next=node.nextSibling;if(node.className=="CodeMirror-linewidget"){lineView.node.removeChild(node)}}insertLineWidgets(cm,lineView,dims)}function buildLineElement(cm,lineView,lineN,dims){var built=getLineContent(cm,lineView);lineView.text=lineView.node=built.pre;if(built.bgClass){lineView.bgClass=built.bgClass}if(built.textClass){lineView.textClass=built.textClass}updateLineClasses(cm,lineView);updateLineGutter(cm,lineView,lineN,dims);insertLineWidgets(cm,lineView,dims);return lineView.node}function insertLineWidgets(cm,lineView,dims){insertLineWidgetsFor(cm,lineView.line,lineView,dims,true);if(lineView.rest){for(var i=0;i<lineView.rest.length;i++){insertLineWidgetsFor(cm,lineView.rest[i],lineView,dims,false)}}}function insertLineWidgetsFor(cm,line,lineView,dims,allowAbove){if(!line.widgets){return}var wrap=ensureLineWrapped(lineView);for(var i=0,ws=line.widgets;i<ws.length;++i){var widget=ws[i],node=elt("div",[widget.node],"CodeMirror-linewidget");if(!widget.handleMouseEvents){node.setAttribute("cm-ignore-events","true")}positionLineWidget(widget,node,lineView,dims);cm.display.input.setUneditable(node);if(allowAbove&&widget.above){wrap.insertBefore(node,lineView.gutter||lineView.text)}else{wrap.appendChild(node)}signalLater(widget,"redraw")}}function positionLineWidget(widget,node,lineView,dims){if(widget.noHScroll){(lineView.alignable||(lineView.alignable=[])).push(node);var width=dims.wrapperWidth;node.style.left=dims.fixedPos+"px";if(!widget.coverGutter){width-=dims.gutterTotalWidth;node.style.paddingLeft=dims.gutterTotalWidth+"px"}node.style.width=width+"px"}if(widget.coverGutter){node.style.zIndex=5;node.style.position="relative";if(!widget.noHScroll){node.style.marginLeft=-dims.gutterTotalWidth+"px"
}}}function widgetHeight(widget){if(widget.height!=null){return widget.height}var cm=widget.doc.cm;if(!cm){return 0}if(!contains(document.body,widget.node)){var parentStyle="position: relative;";if(widget.coverGutter){parentStyle+="margin-left: -"+cm.display.gutters.offsetWidth+"px;"}if(widget.noHScroll){parentStyle+="width: "+cm.display.wrapper.clientWidth+"px;"}removeChildrenAndAdd(cm.display.measure,elt("div",[widget.node],null,parentStyle))}return widget.height=widget.node.parentNode.offsetHeight}function eventInWidget(display,e){for(var n=e_target(e);n!=display.wrapper;n=n.parentNode){if(!n||n.nodeType==1&&n.getAttribute("cm-ignore-events")=="true"||n.parentNode==display.sizer&&n!=display.mover){return true}}}function paddingTop(display){return display.lineSpace.offsetTop}function paddingVert(display){return display.mover.offsetHeight-display.lineSpace.offsetHeight}function paddingH(display){if(display.cachedPaddingH){return display.cachedPaddingH}var e=removeChildrenAndAdd(display.measure,elt("pre","x"));var style=window.getComputedStyle?window.getComputedStyle(e):e.currentStyle;var data={left:parseInt(style.paddingLeft),right:parseInt(style.paddingRight)};if(!isNaN(data.left)&&!isNaN(data.right)){display.cachedPaddingH=data}return data}function scrollGap(cm){return scrollerGap-cm.display.nativeBarWidth}function displayWidth(cm){return cm.display.scroller.clientWidth-scrollGap(cm)-cm.display.barWidth}function displayHeight(cm){return cm.display.scroller.clientHeight-scrollGap(cm)-cm.display.barHeight}function ensureLineHeights(cm,lineView,rect){var wrapping=cm.options.lineWrapping;var curWidth=wrapping&&displayWidth(cm);if(!lineView.measure.heights||wrapping&&lineView.measure.width!=curWidth){var heights=lineView.measure.heights=[];if(wrapping){lineView.measure.width=curWidth;var rects=lineView.text.firstChild.getClientRects();for(var i=0;i<rects.length-1;i++){var cur=rects[i],next=rects[i+1];if(Math.abs(cur.bottom-next.bottom)>2){heights.push((cur.bottom+next.top)/2-rect.top)}}}heights.push(rect.bottom-rect.top)}}function mapFromLineView(lineView,line,lineN){if(lineView.line==line){return{map:lineView.measure.map,cache:lineView.measure.cache}}for(var i=0;i<lineView.rest.length;i++){if(lineView.rest[i]==line){return{map:lineView.measure.maps[i],cache:lineView.measure.caches[i]}}}for(var i$1=0;i$1<lineView.rest.length;i$1++){if(lineNo(lineView.rest[i$1])>lineN){return{map:lineView.measure.maps[i$1],cache:lineView.measure.caches[i$1],before:true}}}}function updateExternalMeasurement(cm,line){line=visualLine(line);var lineN=lineNo(line);var view=cm.display.externalMeasured=new LineView(cm.doc,line,lineN);view.lineN=lineN;var built=view.built=buildLineContent(cm,view);view.text=built.pre;removeChildrenAndAdd(cm.display.lineMeasure,built.pre);return view}function measureChar(cm,line,ch,bias){return measureCharPrepared(cm,prepareMeasureForLine(cm,line),ch,bias)}function findViewForLine(cm,lineN){if(lineN>=cm.display.viewFrom&&lineN<cm.display.viewTo){return cm.display.view[findViewIndex(cm,lineN)]}var ext=cm.display.externalMeasured;if(ext&&lineN>=ext.lineN&&lineN<ext.lineN+ext.size){return ext}}function prepareMeasureForLine(cm,line){var lineN=lineNo(line);var view=findViewForLine(cm,lineN);if(view&&!view.text){view=null}else if(view&&view.changes){updateLineForChanges(cm,view,lineN,getDimensions(cm));cm.curOp.forceUpdate=true}if(!view){view=updateExternalMeasurement(cm,line)}var info=mapFromLineView(view,line,lineN);return{line:line,view:view,rect:null,map:info.map,cache:info.cache,before:info.before,hasHeights:false}}function measureCharPrepared(cm,prepared,ch,bias,varHeight){if(prepared.before){ch=-1}var key=ch+(bias||""),found;if(prepared.cache.hasOwnProperty(key)){found=prepared.cache[key]}else{if(!prepared.rect){prepared.rect=prepared.view.text.getBoundingClientRect()}if(!prepared.hasHeights){ensureLineHeights(cm,prepared.view,prepared.rect);prepared.hasHeights=true}found=measureCharInner(cm,prepared,ch,bias);if(!found.bogus){prepared.cache[key]=found}}return{left:found.left,right:found.right,top:varHeight?found.rtop:found.top,bottom:varHeight?found.rbottom:found.bottom}}var nullRect={left:0,right:0,top:0,bottom:0};function nodeAndOffsetInLineMap(map$$1,ch,bias){var node,start,end,collapse,mStart,mEnd;for(var i=0;i<map$$1.length;i+=3){mStart=map$$1[i];mEnd=map$$1[i+1];if(ch<mStart){start=0;end=1;collapse="left"}else if(ch<mEnd){start=ch-mStart;end=start+1}else if(i==map$$1.length-3||ch==mEnd&&map$$1[i+3]>ch){end=mEnd-mStart;start=end-1;if(ch>=mEnd){collapse="right"}}if(start!=null){node=map$$1[i+2];if(mStart==mEnd&&bias==(node.insertLeft?"left":"right")){collapse=bias}if(bias=="left"&&start==0){while(i&&map$$1[i-2]==map$$1[i-3]&&map$$1[i-1].insertLeft){node=map$$1[(i-=3)+2];collapse="left"}}if(bias=="right"&&start==mEnd-mStart){while(i<map$$1.length-3&&map$$1[i+3]==map$$1[i+4]&&!map$$1[i+5].insertLeft){node=map$$1[(i+=3)+2];collapse="right"}}break}}return{node:node,start:start,end:end,collapse:collapse,coverStart:mStart,coverEnd:mEnd}}function getUsefulRect(rects,bias){var rect=nullRect;if(bias=="left"){for(var i=0;i<rects.length;i++){if((rect=rects[i]).left!=rect.right){break}}}else{for(var i$1=rects.length-1;i$1>=0;i$1--){if((rect=rects[i$1]).left!=rect.right){break}}}return rect}function measureCharInner(cm,prepared,ch,bias){var place=nodeAndOffsetInLineMap(prepared.map,ch,bias);var node=place.node,start=place.start,end=place.end,collapse=place.collapse;var rect;if(node.nodeType==3){for(var i$1=0;i$1<4;i$1++){while(start&&isExtendingChar(prepared.line.text.charAt(place.coverStart+start))){--start}while(place.coverStart+end<place.coverEnd&&isExtendingChar(prepared.line.text.charAt(place.coverStart+end))){++end}if(ie&&ie_version<9&&start==0&&end==place.coverEnd-place.coverStart){rect=node.parentNode.getBoundingClientRect()}else{rect=getUsefulRect(range(node,start,end).getClientRects(),bias)}if(rect.left||rect.right||start==0){break}end=start;start=start-1;collapse="right"}if(ie&&ie_version<11){rect=maybeUpdateRectForZooming(cm.display.measure,rect)}}else{if(start>0){collapse=bias="right"}var rects;if(cm.options.lineWrapping&&(rects=node.getClientRects()).length>1){rect=rects[bias=="right"?rects.length-1:0]}else{rect=node.getBoundingClientRect()}}if(ie&&ie_version<9&&!start&&(!rect||!rect.left&&!rect.right)){var rSpan=node.parentNode.getClientRects()[0];if(rSpan){rect={left:rSpan.left,right:rSpan.left+charWidth(cm.display),top:rSpan.top,bottom:rSpan.bottom}}else{rect=nullRect}}var rtop=rect.top-prepared.rect.top,rbot=rect.bottom-prepared.rect.top;var mid=(rtop+rbot)/2;var heights=prepared.view.measure.heights;var i=0;for(;i<heights.length-1;i++){if(mid<heights[i]){break}}var top=i?heights[i-1]:0,bot=heights[i];var result={left:(collapse=="right"?rect.right:rect.left)-prepared.rect.left,right:(collapse=="left"?rect.left:rect.right)-prepared.rect.left,top:top,bottom:bot};if(!rect.left&&!rect.right){result.bogus=true}if(!cm.options.singleCursorHeightPerLine){result.rtop=rtop;result.rbottom=rbot}return result}function maybeUpdateRectForZooming(measure,rect){if(!window.screen||screen.logicalXDPI==null||screen.logicalXDPI==screen.deviceXDPI||!hasBadZoomedRects(measure)){return rect}var scaleX=screen.logicalXDPI/screen.deviceXDPI;var scaleY=screen.logicalYDPI/screen.deviceYDPI;return{left:rect.left*scaleX,right:rect.right*scaleX,top:rect.top*scaleY,bottom:rect.bottom*scaleY}}function clearLineMeasurementCacheFor(lineView){if(lineView.measure){lineView.measure.cache={};lineView.measure.heights=null;if(lineView.rest){for(var i=0;i<lineView.rest.length;i++){lineView.measure.caches[i]={}}}}}function clearLineMeasurementCache(cm){cm.display.externalMeasure=null;removeChildren(cm.display.lineMeasure);for(var i=0;i<cm.display.view.length;i++){clearLineMeasurementCacheFor(cm.display.view[i])}}function clearCaches(cm){clearLineMeasurementCache(cm);cm.display.cachedCharWidth=cm.display.cachedTextHeight=cm.display.cachedPaddingH=null;if(!cm.options.lineWrapping){cm.display.maxLineChanged=true}cm.display.lineNumChars=null}function pageScrollX(){if(chrome&&android){return-(document.body.getBoundingClientRect().left-parseInt(getComputedStyle(document.body).marginLeft))}return window.pageXOffset||(document.documentElement||document.body).scrollLeft}function pageScrollY(){if(chrome&&android){return-(document.body.getBoundingClientRect().top-parseInt(getComputedStyle(document.body).marginTop))}return window.pageYOffset||(document.documentElement||document.body).scrollTop}function intoCoordSystem(cm,lineObj,rect,context,includeWidgets){if(!includeWidgets&&lineObj.widgets){for(var i=0;i<lineObj.widgets.length;++i){if(lineObj.widgets[i].above){var size=widgetHeight(lineObj.widgets[i]);rect.top+=size;rect.bottom+=size}}}if(context=="line"){return rect}if(!context){context="local"}var yOff=heightAtLine(lineObj);if(context=="local"){yOff+=paddingTop(cm.display)}else{yOff-=cm.display.viewOffset}if(context=="page"||context=="window"){var lOff=cm.display.lineSpace.getBoundingClientRect();yOff+=lOff.top+(context=="window"?0:pageScrollY());var xOff=lOff.left+(context=="window"?0:pageScrollX());rect.left+=xOff;rect.right+=xOff}rect.top+=yOff;rect.bottom+=yOff;return rect}function fromCoordSystem(cm,coords,context){if(context=="div"){return coords}var left=coords.left,top=coords.top;if(context=="page"){left-=pageScrollX();top-=pageScrollY()}else if(context=="local"||!context){var localBox=cm.display.sizer.getBoundingClientRect();left+=localBox.left;top+=localBox.top}var lineSpaceBox=cm.display.lineSpace.getBoundingClientRect();return{left:left-lineSpaceBox.left,top:top-lineSpaceBox.top}}function charCoords(cm,pos,context,lineObj,bias){if(!lineObj){lineObj=getLine(cm.doc,pos.line)}return intoCoordSystem(cm,lineObj,measureChar(cm,lineObj,pos.ch,bias),context)}function cursorCoords(cm,pos,context,lineObj,preparedMeasure,varHeight){lineObj=lineObj||getLine(cm.doc,pos.line);if(!preparedMeasure){preparedMeasure=prepareMeasureForLine(cm,lineObj)}function get(ch,right){var m=measureCharPrepared(cm,preparedMeasure,ch,right?"right":"left",varHeight);if(right){m.left=m.right}else{m.right=m.left}return intoCoordSystem(cm,lineObj,m,context)}var order=getOrder(lineObj,cm.doc.direction),ch=pos.ch,sticky=pos.sticky;if(ch>=lineObj.text.length){ch=lineObj.text.length;sticky="before"}else if(ch<=0){ch=0;sticky="after"}if(!order){return get(sticky=="before"?ch-1:ch,sticky=="before")}function getBidi(ch,partPos,invert){var part=order[partPos],right=part.level%2!=0;return get(invert?ch-1:ch,right!=invert)}var partPos=getBidiPartAt(order,ch,sticky);var other=bidiOther;var val=getBidi(ch,partPos,sticky=="before");if(other!=null){val.other=getBidi(ch,other,sticky!="before")}return val}function estimateCoords(cm,pos){var left=0;pos=clipPos(cm.doc,pos);if(!cm.options.lineWrapping){left=charWidth(cm.display)*pos.ch}var lineObj=getLine(cm.doc,pos.line);var top=heightAtLine(lineObj)+paddingTop(cm.display);return{left:left,right:left,top:top,bottom:top+lineObj.height}}function PosWithInfo(line,ch,sticky,outside,xRel){var pos=Pos(line,ch,sticky);pos.xRel=xRel;if(outside){pos.outside=true}return pos}function coordsChar(cm,x,y){var doc=cm.doc;y+=cm.display.viewOffset;if(y<0){return PosWithInfo(doc.first,0,null,true,-1)}var lineN=lineAtHeight(doc,y),last=doc.first+doc.size-1;if(lineN>last){return PosWithInfo(doc.first+doc.size-1,getLine(doc,last).text.length,null,true,1)}if(x<0){x=0}var lineObj=getLine(doc,lineN);for(;;){var found=coordsCharInner(cm,lineObj,lineN,x,y);var merged=collapsedSpanAtEnd(lineObj);var mergedPos=merged&&merged.find(0,true);if(merged&&(found.ch>mergedPos.from.ch||found.ch==mergedPos.from.ch&&found.xRel>0)){lineN=lineNo(lineObj=mergedPos.to.line)}else{return found}}}function wrappedLineExtent(cm,lineObj,preparedMeasure,y){var measure=function(ch){return intoCoordSystem(cm,lineObj,measureCharPrepared(cm,preparedMeasure,ch),"line")};var end=lineObj.text.length;var begin=findFirst(function(ch){return measure(ch-1).bottom<=y},end,0);end=findFirst(function(ch){return measure(ch).top>y},begin,end);return{begin:begin,end:end}}function wrappedLineExtentChar(cm,lineObj,preparedMeasure,target){var targetTop=intoCoordSystem(cm,lineObj,measureCharPrepared(cm,preparedMeasure,target),"line").top;return wrappedLineExtent(cm,lineObj,preparedMeasure,targetTop)}function coordsCharInner(cm,lineObj,lineNo$$1,x,y){y-=heightAtLine(lineObj);var begin=0,end=lineObj.text.length;var preparedMeasure=prepareMeasureForLine(cm,lineObj);var pos;var order=getOrder(lineObj,cm.doc.direction);if(order){if(cm.options.lineWrapping){var assign;assign=wrappedLineExtent(cm,lineObj,preparedMeasure,y),begin=assign.begin,end=assign.end,assign}pos=new Pos(lineNo$$1,begin);var beginLeft=cursorCoords(cm,pos,"line",lineObj,preparedMeasure).left;var dir=beginLeft<x?1:-1;var prevDiff,diff=beginLeft-x,prevPos;do{prevDiff=diff;prevPos=pos;pos=moveVisually(cm,lineObj,pos,dir);if(pos==null||pos.ch<begin||end<=(pos.sticky=="before"?pos.ch-1:pos.ch)){pos=prevPos;break}diff=cursorCoords(cm,pos,"line",lineObj,preparedMeasure).left-x}while(dir<0!=diff<0&&Math.abs(diff)<=Math.abs(prevDiff));if(Math.abs(diff)>Math.abs(prevDiff)){if(diff<0==prevDiff<0){throw new Error("Broke out of infinite loop in coordsCharInner")}pos=prevPos}}else{var ch=findFirst(function(ch){var box=intoCoordSystem(cm,lineObj,measureCharPrepared(cm,preparedMeasure,ch),"line");if(box.top>y){end=Math.min(ch,end);return true}else if(box.bottom<=y){return false}else if(box.left>x){return true}else if(box.right<x){return false}else{return x-box.left<box.right-x}},begin,end);ch=skipExtendingChars(lineObj.text,ch,1);pos=new Pos(lineNo$$1,ch,ch==end?"before":"after")}var coords=cursorCoords(cm,pos,"line",lineObj,preparedMeasure);if(y<coords.top||coords.bottom<y){pos.outside=true}pos.xRel=x<coords.left?-1:x>coords.right?1:0;return pos}var measureText;function textHeight(display){if(display.cachedTextHeight!=null){return display.cachedTextHeight}if(measureText==null){measureText=elt("pre");for(var i=0;i<49;++i){measureText.appendChild(document.createTextNode("x"));measureText.appendChild(elt("br"))}measureText.appendChild(document.createTextNode("x"))}removeChildrenAndAdd(display.measure,measureText);var height=measureText.offsetHeight/50;if(height>3){display.cachedTextHeight=height}removeChildren(display.measure);return height||1}function charWidth(display){if(display.cachedCharWidth!=null){return display.cachedCharWidth}var anchor=elt("span","xxxxxxxxxx");var pre=elt("pre",[anchor]);removeChildrenAndAdd(display.measure,pre);var rect=anchor.getBoundingClientRect(),width=(rect.right-rect.left)/10;if(width>2){display.cachedCharWidth=width}return width||10}function getDimensions(cm){var d=cm.display,left={},width={};var gutterLeft=d.gutters.clientLeft;for(var n=d.gutters.firstChild,i=0;n;n=n.nextSibling,++i){left[cm.options.gutters[i]]=n.offsetLeft+n.clientLeft+gutterLeft;width[cm.options.gutters[i]]=n.clientWidth}return{fixedPos:compensateForHScroll(d),gutterTotalWidth:d.gutters.offsetWidth,gutterLeft:left,gutterWidth:width,wrapperWidth:d.wrapper.clientWidth}}function compensateForHScroll(display){return display.scroller.getBoundingClientRect().left-display.sizer.getBoundingClientRect().left}function estimateHeight(cm){var th=textHeight(cm.display),wrapping=cm.options.lineWrapping;var perLine=wrapping&&Math.max(5,cm.display.scroller.clientWidth/charWidth(cm.display)-3);return function(line){if(lineIsHidden(cm.doc,line)){return 0}var widgetsHeight=0;if(line.widgets){for(var i=0;i<line.widgets.length;i++){if(line.widgets[i].height){widgetsHeight+=line.widgets[i].height}}}if(wrapping){return widgetsHeight+(Math.ceil(line.text.length/perLine)||1)*th}else{return widgetsHeight+th}}}function estimateLineHeights(cm){var doc=cm.doc,est=estimateHeight(cm);doc.iter(function(line){var estHeight=est(line);if(estHeight!=line.height){updateLineHeight(line,estHeight)}})}function posFromMouse(cm,e,liberal,forRect){var display=cm.display;if(!liberal&&e_target(e).getAttribute("cm-not-content")=="true"){return null}var x,y,space=display.lineSpace.getBoundingClientRect();try{x=e.clientX-space.left;y=e.clientY-space.top}catch(e){return null}var coords=coordsChar(cm,x,y),line;if(forRect&&coords.xRel==1&&(line=getLine(cm.doc,coords.line).text).length==coords.ch){var colDiff=countColumn(line,line.length,cm.options.tabSize)-line.length;coords=Pos(coords.line,Math.max(0,Math.round((x-paddingH(cm.display).left)/charWidth(cm.display))-colDiff))}return coords}function findViewIndex(cm,n){if(n>=cm.display.viewTo){return null}n-=cm.display.viewFrom;if(n<0){return null}var view=cm.display.view;for(var i=0;i<view.length;i++){n-=view[i].size;if(n<0){return i}}}function updateSelection(cm){cm.display.input.showSelection(cm.display.input.prepareSelection())}function prepareSelection(cm,primary){var doc=cm.doc,result={};var curFragment=result.cursors=document.createDocumentFragment();var selFragment=result.selection=document.createDocumentFragment();for(var i=0;i<doc.sel.ranges.length;i++){if(primary===false&&i==doc.sel.primIndex){continue}var range$$1=doc.sel.ranges[i];if(range$$1.from().line>=cm.display.viewTo||range$$1.to().line<cm.display.viewFrom){continue}var collapsed=range$$1.empty();if(collapsed||cm.options.showCursorWhenSelecting){drawSelectionCursor(cm,range$$1.head,curFragment)}if(!collapsed){drawSelectionRange(cm,range$$1,selFragment)}}return result}function drawSelectionCursor(cm,head,output){var pos=cursorCoords(cm,head,"div",null,null,!cm.options.singleCursorHeightPerLine);var cursor=output.appendChild(elt("div"," ","CodeMirror-cursor"));cursor.style.left=pos.left+"px";cursor.style.top=pos.top+"px";cursor.style.height=Math.max(0,pos.bottom-pos.top)*cm.options.cursorHeight+"px";if(pos.other){var otherCursor=output.appendChild(elt("div"," ","CodeMirror-cursor CodeMirror-secondarycursor"));otherCursor.style.display="";otherCursor.style.left=pos.other.left+"px";otherCursor.style.top=pos.other.top+"px";otherCursor.style.height=(pos.other.bottom-pos.other.top)*.85+"px"}}function drawSelectionRange(cm,range$$1,output){var display=cm.display,doc=cm.doc;var fragment=document.createDocumentFragment();var padding=paddingH(cm.display),leftSide=padding.left;var rightSide=Math.max(display.sizerWidth,displayWidth(cm)-display.sizer.offsetLeft)-padding.right;function add(left,top,width,bottom){if(top<0){top=0}top=Math.round(top);bottom=Math.round(bottom);fragment.appendChild(elt("div",null,"CodeMirror-selected","position: absolute; left: "+left+"px;\n                             top: "+top+"px; width: "+(width==null?rightSide-left:width)+"px;\n                             height: "+(bottom-top)+"px"))}function drawForLine(line,fromArg,toArg){var lineObj=getLine(doc,line);var lineLen=lineObj.text.length;var start,end;function coords(ch,bias){return charCoords(cm,Pos(line,ch),"div",lineObj,bias)}iterateBidiSections(getOrder(lineObj,doc.direction),fromArg||0,toArg==null?lineLen:toArg,function(from,to,dir){var leftPos=coords(from,"left"),rightPos,left,right;if(from==to){rightPos=leftPos;left=right=leftPos.left}else{rightPos=coords(to-1,"right");if(dir=="rtl"){var tmp=leftPos;leftPos=rightPos;rightPos=tmp}left=leftPos.left;right=rightPos.right}if(fromArg==null&&from==0){left=leftSide}if(rightPos.top-leftPos.top>3){add(left,leftPos.top,null,leftPos.bottom);left=leftSide;if(leftPos.bottom<rightPos.top){add(left,leftPos.bottom,null,rightPos.top)}}if(toArg==null&&to==lineLen){right=rightSide}if(!start||leftPos.top<start.top||leftPos.top==start.top&&leftPos.left<start.left){start=leftPos}if(!end||rightPos.bottom>end.bottom||rightPos.bottom==end.bottom&&rightPos.right>end.right){end=rightPos}if(left<leftSide+1){left=leftSide}add(left,rightPos.top,right-left,rightPos.bottom)});return{start:start,end:end}}var sFrom=range$$1.from(),sTo=range$$1.to();if(sFrom.line==sTo.line){drawForLine(sFrom.line,sFrom.ch,sTo.ch)}else{var fromLine=getLine(doc,sFrom.line),toLine=getLine(doc,sTo.line);var singleVLine=visualLine(fromLine)==visualLine(toLine);var leftEnd=drawForLine(sFrom.line,sFrom.ch,singleVLine?fromLine.text.length+1:null).end;var rightStart=drawForLine(sTo.line,singleVLine?0:null,sTo.ch).start;if(singleVLine){if(leftEnd.top<rightStart.top-2){add(leftEnd.right,leftEnd.top,null,leftEnd.bottom);add(leftSide,rightStart.top,rightStart.left,rightStart.bottom)}else{add(leftEnd.right,leftEnd.top,rightStart.left-leftEnd.right,leftEnd.bottom)}}if(leftEnd.bottom<rightStart.top){add(leftSide,leftEnd.bottom,null,rightStart.top)}}output.appendChild(fragment)}function restartBlink(cm){if(!cm.state.focused){return}var display=cm.display;clearInterval(display.blinker);var on=true;display.cursorDiv.style.visibility="";if(cm.options.cursorBlinkRate>0){display.blinker=setInterval(function(){return display.cursorDiv.style.visibility=(on=!on)?"":"hidden"},cm.options.cursorBlinkRate)}else if(cm.options.cursorBlinkRate<0){display.cursorDiv.style.visibility="hidden"}}function ensureFocus(cm){if(!cm.state.focused){cm.display.input.focus();onFocus(cm)}}function delayBlurEvent(cm){cm.state.delayingBlurEvent=true;setTimeout(function(){if(cm.state.delayingBlurEvent){cm.state.delayingBlurEvent=false;onBlur(cm)}},100)}function onFocus(cm,e){if(cm.state.delayingBlurEvent){cm.state.delayingBlurEvent=false}if(cm.options.readOnly=="nocursor"){return}if(!cm.state.focused){signal(cm,"focus",cm,e);cm.state.focused=true;addClass(cm.display.wrapper,"CodeMirror-focused");if(!cm.curOp&&cm.display.selForContextMenu!=cm.doc.sel){cm.display.input.reset();if(webkit){setTimeout(function(){return cm.display.input.reset(true)},20)}}cm.display.input.receivedFocus()}restartBlink(cm)}function onBlur(cm,e){if(cm.state.delayingBlurEvent){return}if(cm.state.focused){signal(cm,"blur",cm,e);cm.state.focused=false;rmClass(cm.display.wrapper,"CodeMirror-focused")}clearInterval(cm.display.blinker);setTimeout(function(){if(!cm.state.focused){cm.display.shift=false}},150)}function updateHeightsInViewport(cm){var display=cm.display;var prevBottom=display.lineDiv.offsetTop;for(var i=0;i<display.view.length;i++){var cur=display.view[i],height=void 0;if(cur.hidden){continue}if(ie&&ie_version<8){var bot=cur.node.offsetTop+cur.node.offsetHeight;height=bot-prevBottom;prevBottom=bot}else{var box=cur.node.getBoundingClientRect();height=box.bottom-box.top}var diff=cur.line.height-height;if(height<2){height=textHeight(display)}if(diff>.001||diff<-.001){updateLineHeight(cur.line,height);updateWidgetHeight(cur.line);if(cur.rest){for(var j=0;j<cur.rest.length;j++){updateWidgetHeight(cur.rest[j])}}}}}function updateWidgetHeight(line){if(line.widgets){for(var i=0;i<line.widgets.length;++i){line.widgets[i].height=line.widgets[i].node.parentNode.offsetHeight}}}function visibleLines(display,doc,viewport){var top=viewport&&viewport.top!=null?Math.max(0,viewport.top):display.scroller.scrollTop;top=Math.floor(top-paddingTop(display));var bottom=viewport&&viewport.bottom!=null?viewport.bottom:top+display.wrapper.clientHeight;var from=lineAtHeight(doc,top),to=lineAtHeight(doc,bottom);if(viewport&&viewport.ensure){var ensureFrom=viewport.ensure.from.line,ensureTo=viewport.ensure.to.line;if(ensureFrom<from){from=ensureFrom;to=lineAtHeight(doc,heightAtLine(getLine(doc,ensureFrom))+display.wrapper.clientHeight)}else if(Math.min(ensureTo,doc.lastLine())>=to){from=lineAtHeight(doc,heightAtLine(getLine(doc,ensureTo))-display.wrapper.clientHeight);to=ensureTo}}return{from:from,to:Math.max(to,from+1)}}function alignHorizontally(cm){var display=cm.display,view=display.view;if(!display.alignWidgets&&(!display.gutters.firstChild||!cm.options.fixedGutter)){return}var comp=compensateForHScroll(display)-display.scroller.scrollLeft+cm.doc.scrollLeft;var gutterW=display.gutters.offsetWidth,left=comp+"px";for(var i=0;i<view.length;i++){if(!view[i].hidden){if(cm.options.fixedGutter){if(view[i].gutter){view[i].gutter.style.left=left}if(view[i].gutterBackground){view[i].gutterBackground.style.left=left}}var align=view[i].alignable;if(align){for(var j=0;j<align.length;j++){align[j].style.left=left}}}}if(cm.options.fixedGutter){display.gutters.style.left=comp+gutterW+"px"}}function maybeUpdateLineNumberWidth(cm){if(!cm.options.lineNumbers){return false}var doc=cm.doc,last=lineNumberFor(cm.options,doc.first+doc.size-1),display=cm.display;if(last.length!=display.lineNumChars){var test=display.measure.appendChild(elt("div",[elt("div",last)],"CodeMirror-linenumber CodeMirror-gutter-elt"));var innerW=test.firstChild.offsetWidth,padding=test.offsetWidth-innerW;display.lineGutter.style.width="";display.lineNumInnerWidth=Math.max(innerW,display.lineGutter.offsetWidth-padding)+1;display.lineNumWidth=display.lineNumInnerWidth+padding;display.lineNumChars=display.lineNumInnerWidth?last.length:-1;display.lineGutter.style.width=display.lineNumWidth+"px";updateGutterSpace(cm);return true}return false}function maybeScrollWindow(cm,rect){if(signalDOMEvent(cm,"scrollCursorIntoView")){return}var display=cm.display,box=display.sizer.getBoundingClientRect(),doScroll=null;if(rect.top+box.top<0){doScroll=true}else if(rect.bottom+box.top>(window.innerHeight||document.documentElement.clientHeight)){doScroll=false}if(doScroll!=null&&!phantom){var scrollNode=elt("div","​",null,"position: absolute;\n                         top: "+(rect.top-display.viewOffset-paddingTop(cm.display))+"px;\n                         height: "+(rect.bottom-rect.top+scrollGap(cm)+display.barHeight)+"px;\n                         left: "+rect.left+"px; width: "+Math.max(2,rect.right-rect.left)+"px;");cm.display.lineSpace.appendChild(scrollNode);scrollNode.scrollIntoView(doScroll);cm.display.lineSpace.removeChild(scrollNode)}}function scrollPosIntoView(cm,pos,end,margin){if(margin==null){margin=0}var rect;for(var limit=0;limit<5;limit++){var changed=false;var coords=cursorCoords(cm,pos);var endCoords=!end||end==pos?coords:cursorCoords(cm,end);rect={left:Math.min(coords.left,endCoords.left),top:Math.min(coords.top,endCoords.top)-margin,right:Math.max(coords.left,endCoords.left),bottom:Math.max(coords.bottom,endCoords.bottom)+margin};var scrollPos=calculateScrollPos(cm,rect);var startTop=cm.doc.scrollTop,startLeft=cm.doc.scrollLeft;if(scrollPos.scrollTop!=null){updateScrollTop(cm,scrollPos.scrollTop);if(Math.abs(cm.doc.scrollTop-startTop)>1){changed=true}}if(scrollPos.scrollLeft!=null){setScrollLeft(cm,scrollPos.scrollLeft);if(Math.abs(cm.doc.scrollLeft-startLeft)>1){changed=true}}if(!changed){break}}return rect}function scrollIntoView(cm,rect){var scrollPos=calculateScrollPos(cm,rect);if(scrollPos.scrollTop!=null){updateScrollTop(cm,scrollPos.scrollTop)}if(scrollPos.scrollLeft!=null){setScrollLeft(cm,scrollPos.scrollLeft)}}function calculateScrollPos(cm,rect){var display=cm.display,snapMargin=textHeight(cm.display);if(rect.top<0){rect.top=0}var screentop=cm.curOp&&cm.curOp.scrollTop!=null?cm.curOp.scrollTop:display.scroller.scrollTop;var screen=displayHeight(cm),result={};if(rect.bottom-rect.top>screen){rect.bottom=rect.top+screen}var docBottom=cm.doc.height+paddingVert(display);var atTop=rect.top<snapMargin,atBottom=rect.bottom>docBottom-snapMargin;if(rect.top<screentop){result.scrollTop=atTop?0:rect.top}else if(rect.bottom>screentop+screen){var newTop=Math.min(rect.top,(atBottom?docBottom:rect.bottom)-screen);if(newTop!=screentop){result.scrollTop=newTop}}var screenleft=cm.curOp&&cm.curOp.scrollLeft!=null?cm.curOp.scrollLeft:display.scroller.scrollLeft;var screenw=displayWidth(cm)-(cm.options.fixedGutter?display.gutters.offsetWidth:0);var tooWide=rect.right-rect.left>screenw;if(tooWide){rect.right=rect.left+screenw}if(rect.left<10){result.scrollLeft=0}else if(rect.left<screenleft){result.scrollLeft=Math.max(0,rect.left-(tooWide?0:10))}else if(rect.right>screenw+screenleft-3){result.scrollLeft=rect.right+(tooWide?0:10)-screenw}return result}function addToScrollTop(cm,top){if(top==null){return}resolveScrollToPos(cm);cm.curOp.scrollTop=(cm.curOp.scrollTop==null?cm.doc.scrollTop:cm.curOp.scrollTop)+top}function ensureCursorVisible(cm){resolveScrollToPos(cm);var cur=cm.getCursor(),from=cur,to=cur;if(!cm.options.lineWrapping){from=cur.ch?Pos(cur.line,cur.ch-1):cur;to=Pos(cur.line,cur.ch+1)}cm.curOp.scrollToPos={from:from,to:to,margin:cm.options.cursorScrollMargin}}function scrollToCoords(cm,x,y){if(x!=null||y!=null){resolveScrollToPos(cm)}if(x!=null){cm.curOp.scrollLeft=x}if(y!=null){cm.curOp.scrollTop=y}}function scrollToRange(cm,range$$1){resolveScrollToPos(cm);cm.curOp.scrollToPos=range$$1}function resolveScrollToPos(cm){var range$$1=cm.curOp.scrollToPos;if(range$$1){cm.curOp.scrollToPos=null;var from=estimateCoords(cm,range$$1.from),to=estimateCoords(cm,range$$1.to);scrollToCoordsRange(cm,from,to,range$$1.margin)}}function scrollToCoordsRange(cm,from,to,margin){var sPos=calculateScrollPos(cm,{left:Math.min(from.left,to.left),top:Math.min(from.top,to.top)-margin,right:Math.max(from.right,to.right),bottom:Math.max(from.bottom,to.bottom)+margin});scrollToCoords(cm,sPos.scrollLeft,sPos.scrollTop)}function updateScrollTop(cm,val){if(Math.abs(cm.doc.scrollTop-val)<2){return}if(!gecko){updateDisplaySimple(cm,{top:val})}setScrollTop(cm,val,true);if(gecko){updateDisplaySimple(cm)}startWorker(cm,100)}function setScrollTop(cm,val,forceScroll){val=Math.min(cm.display.scroller.scrollHeight-cm.display.scroller.clientHeight,val);if(cm.display.scroller.scrollTop==val&&!forceScroll){return}cm.doc.scrollTop=val;cm.display.scrollbars.setScrollTop(val);if(cm.display.scroller.scrollTop!=val){cm.display.scroller.scrollTop=val}}function setScrollLeft(cm,val,isScroller,forceScroll){val=Math.min(val,cm.display.scroller.scrollWidth-cm.display.scroller.clientWidth);if((isScroller?val==cm.doc.scrollLeft:Math.abs(cm.doc.scrollLeft-val)<2)&&!forceScroll){return}cm.doc.scrollLeft=val;alignHorizontally(cm);if(cm.display.scroller.scrollLeft!=val){cm.display.scroller.scrollLeft=val}cm.display.scrollbars.setScrollLeft(val)}function measureForScrollbars(cm){var d=cm.display,gutterW=d.gutters.offsetWidth;var docH=Math.round(cm.doc.height+paddingVert(cm.display));return{clientHeight:d.scroller.clientHeight,viewHeight:d.wrapper.clientHeight,scrollWidth:d.scroller.scrollWidth,clientWidth:d.scroller.clientWidth,viewWidth:d.wrapper.clientWidth,barLeft:cm.options.fixedGutter?gutterW:0,docHeight:docH,scrollHeight:docH+scrollGap(cm)+d.barHeight,nativeBarWidth:d.nativeBarWidth,gutterWidth:gutterW}}var NativeScrollbars=function(place,scroll,cm){this.cm=cm;var vert=this.vert=elt("div",[elt("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar");var horiz=this.horiz=elt("div",[elt("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");place(vert);place(horiz);on(vert,"scroll",function(){if(vert.clientHeight){scroll(vert.scrollTop,"vertical")}});on(horiz,"scroll",function(){if(horiz.clientWidth){scroll(horiz.scrollLeft,"horizontal")}});this.checkedZeroWidth=false;if(ie&&ie_version<8){this.horiz.style.minHeight=this.vert.style.minWidth="18px"}};NativeScrollbars.prototype.update=function(measure){var needsH=measure.scrollWidth>measure.clientWidth+1;var needsV=measure.scrollHeight>measure.clientHeight+1;var sWidth=measure.nativeBarWidth;if(needsV){this.vert.style.display="block";this.vert.style.bottom=needsH?sWidth+"px":"0";var totalHeight=measure.viewHeight-(needsH?sWidth:0);this.vert.firstChild.style.height=Math.max(0,measure.scrollHeight-measure.clientHeight+totalHeight)+"px"}else{this.vert.style.display="";this.vert.firstChild.style.height="0"}if(needsH){this.horiz.style.display="block";this.horiz.style.right=needsV?sWidth+"px":"0";this.horiz.style.left=measure.barLeft+"px";var totalWidth=measure.viewWidth-measure.barLeft-(needsV?sWidth:0);this.horiz.firstChild.style.width=Math.max(0,measure.scrollWidth-measure.clientWidth+totalWidth)+"px"}else{this.horiz.style.display="";this.horiz.firstChild.style.width="0"}if(!this.checkedZeroWidth&&measure.clientHeight>0){if(sWidth==0){this.zeroWidthHack()}this.checkedZeroWidth=true}return{right:needsV?sWidth:0,bottom:needsH?sWidth:0}
};NativeScrollbars.prototype.setScrollLeft=function(pos){if(this.horiz.scrollLeft!=pos){this.horiz.scrollLeft=pos}if(this.disableHoriz){this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")}};NativeScrollbars.prototype.setScrollTop=function(pos){if(this.vert.scrollTop!=pos){this.vert.scrollTop=pos}if(this.disableVert){this.enableZeroWidthBar(this.vert,this.disableVert,"vert")}};NativeScrollbars.prototype.zeroWidthHack=function(){var w=mac&&!mac_geMountainLion?"12px":"18px";this.horiz.style.height=this.vert.style.width=w;this.horiz.style.pointerEvents=this.vert.style.pointerEvents="none";this.disableHoriz=new Delayed;this.disableVert=new Delayed};NativeScrollbars.prototype.enableZeroWidthBar=function(bar,delay,type){bar.style.pointerEvents="auto";function maybeDisable(){var box=bar.getBoundingClientRect();var elt$$1=type=="vert"?document.elementFromPoint(box.right-1,(box.top+box.bottom)/2):document.elementFromPoint((box.right+box.left)/2,box.bottom-1);if(elt$$1!=bar){bar.style.pointerEvents="none"}else{delay.set(1e3,maybeDisable)}}delay.set(1e3,maybeDisable)};NativeScrollbars.prototype.clear=function(){var parent=this.horiz.parentNode;parent.removeChild(this.horiz);parent.removeChild(this.vert)};var NullScrollbars=function(){};NullScrollbars.prototype.update=function(){return{bottom:0,right:0}};NullScrollbars.prototype.setScrollLeft=function(){};NullScrollbars.prototype.setScrollTop=function(){};NullScrollbars.prototype.clear=function(){};function updateScrollbars(cm,measure){if(!measure){measure=measureForScrollbars(cm)}var startWidth=cm.display.barWidth,startHeight=cm.display.barHeight;updateScrollbarsInner(cm,measure);for(var i=0;i<4&&startWidth!=cm.display.barWidth||startHeight!=cm.display.barHeight;i++){if(startWidth!=cm.display.barWidth&&cm.options.lineWrapping){updateHeightsInViewport(cm)}updateScrollbarsInner(cm,measureForScrollbars(cm));startWidth=cm.display.barWidth;startHeight=cm.display.barHeight}}function updateScrollbarsInner(cm,measure){var d=cm.display;var sizes=d.scrollbars.update(measure);d.sizer.style.paddingRight=(d.barWidth=sizes.right)+"px";d.sizer.style.paddingBottom=(d.barHeight=sizes.bottom)+"px";d.heightForcer.style.borderBottom=sizes.bottom+"px solid transparent";if(sizes.right&&sizes.bottom){d.scrollbarFiller.style.display="block";d.scrollbarFiller.style.height=sizes.bottom+"px";d.scrollbarFiller.style.width=sizes.right+"px"}else{d.scrollbarFiller.style.display=""}if(sizes.bottom&&cm.options.coverGutterNextToScrollbar&&cm.options.fixedGutter){d.gutterFiller.style.display="block";d.gutterFiller.style.height=sizes.bottom+"px";d.gutterFiller.style.width=measure.gutterWidth+"px"}else{d.gutterFiller.style.display=""}}var scrollbarModel={"native":NativeScrollbars,"null":NullScrollbars};function initScrollbars(cm){if(cm.display.scrollbars){cm.display.scrollbars.clear();if(cm.display.scrollbars.addClass){rmClass(cm.display.wrapper,cm.display.scrollbars.addClass)}}cm.display.scrollbars=new scrollbarModel[cm.options.scrollbarStyle](function(node){cm.display.wrapper.insertBefore(node,cm.display.scrollbarFiller);on(node,"mousedown",function(){if(cm.state.focused){setTimeout(function(){return cm.display.input.focus()},0)}});node.setAttribute("cm-not-content","true")},function(pos,axis){if(axis=="horizontal"){setScrollLeft(cm,pos)}else{updateScrollTop(cm,pos)}},cm);if(cm.display.scrollbars.addClass){addClass(cm.display.wrapper,cm.display.scrollbars.addClass)}}var nextOpId=0;function startOperation(cm){cm.curOp={cm:cm,viewChanged:false,startHeight:cm.doc.height,forceUpdate:false,updateInput:null,typing:false,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:false,updateMaxLine:false,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:false,id:++nextOpId};pushOperation(cm.curOp)}function endOperation(cm){var op=cm.curOp;finishOperation(op,function(group){for(var i=0;i<group.ops.length;i++){group.ops[i].cm.curOp=null}endOperations(group)})}function endOperations(group){var ops=group.ops;for(var i=0;i<ops.length;i++){endOperation_R1(ops[i])}for(var i$1=0;i$1<ops.length;i$1++){endOperation_W1(ops[i$1])}for(var i$2=0;i$2<ops.length;i$2++){endOperation_R2(ops[i$2])}for(var i$3=0;i$3<ops.length;i$3++){endOperation_W2(ops[i$3])}for(var i$4=0;i$4<ops.length;i$4++){endOperation_finish(ops[i$4])}}function endOperation_R1(op){var cm=op.cm,display=cm.display;maybeClipScrollbars(cm);if(op.updateMaxLine){findMaxLine(cm)}op.mustUpdate=op.viewChanged||op.forceUpdate||op.scrollTop!=null||op.scrollToPos&&(op.scrollToPos.from.line<display.viewFrom||op.scrollToPos.to.line>=display.viewTo)||display.maxLineChanged&&cm.options.lineWrapping;op.update=op.mustUpdate&&new DisplayUpdate(cm,op.mustUpdate&&{top:op.scrollTop,ensure:op.scrollToPos},op.forceUpdate)}function endOperation_W1(op){op.updatedDisplay=op.mustUpdate&&updateDisplayIfNeeded(op.cm,op.update)}function endOperation_R2(op){var cm=op.cm,display=cm.display;if(op.updatedDisplay){updateHeightsInViewport(cm)}op.barMeasure=measureForScrollbars(cm);if(display.maxLineChanged&&!cm.options.lineWrapping){op.adjustWidthTo=measureChar(cm,display.maxLine,display.maxLine.text.length).left+3;cm.display.sizerWidth=op.adjustWidthTo;op.barMeasure.scrollWidth=Math.max(display.scroller.clientWidth,display.sizer.offsetLeft+op.adjustWidthTo+scrollGap(cm)+cm.display.barWidth);op.maxScrollLeft=Math.max(0,display.sizer.offsetLeft+op.adjustWidthTo-displayWidth(cm))}if(op.updatedDisplay||op.selectionChanged){op.preparedSelection=display.input.prepareSelection(op.focus)}}function endOperation_W2(op){var cm=op.cm;if(op.adjustWidthTo!=null){cm.display.sizer.style.minWidth=op.adjustWidthTo+"px";if(op.maxScrollLeft<cm.doc.scrollLeft){setScrollLeft(cm,Math.min(cm.display.scroller.scrollLeft,op.maxScrollLeft),true)}cm.display.maxLineChanged=false}var takeFocus=op.focus&&op.focus==activeElt()&&(!document.hasFocus||document.hasFocus());if(op.preparedSelection){cm.display.input.showSelection(op.preparedSelection,takeFocus)}if(op.updatedDisplay||op.startHeight!=cm.doc.height){updateScrollbars(cm,op.barMeasure)}if(op.updatedDisplay){setDocumentHeight(cm,op.barMeasure)}if(op.selectionChanged){restartBlink(cm)}if(cm.state.focused&&op.updateInput){cm.display.input.reset(op.typing)}if(takeFocus){ensureFocus(op.cm)}}function endOperation_finish(op){var cm=op.cm,display=cm.display,doc=cm.doc;if(op.updatedDisplay){postUpdateDisplay(cm,op.update)}if(display.wheelStartX!=null&&(op.scrollTop!=null||op.scrollLeft!=null||op.scrollToPos)){display.wheelStartX=display.wheelStartY=null}if(op.scrollTop!=null){setScrollTop(cm,op.scrollTop,op.forceScroll)}if(op.scrollLeft!=null){setScrollLeft(cm,op.scrollLeft,true,true)}if(op.scrollToPos){var rect=scrollPosIntoView(cm,clipPos(doc,op.scrollToPos.from),clipPos(doc,op.scrollToPos.to),op.scrollToPos.margin);maybeScrollWindow(cm,rect)}var hidden=op.maybeHiddenMarkers,unhidden=op.maybeUnhiddenMarkers;if(hidden){for(var i=0;i<hidden.length;++i){if(!hidden[i].lines.length){signal(hidden[i],"hide")}}}if(unhidden){for(var i$1=0;i$1<unhidden.length;++i$1){if(unhidden[i$1].lines.length){signal(unhidden[i$1],"unhide")}}}if(display.wrapper.offsetHeight){doc.scrollTop=cm.display.scroller.scrollTop}if(op.changeObjs){signal(cm,"changes",cm,op.changeObjs)}if(op.update){op.update.finish()}}function runInOp(cm,f){if(cm.curOp){return f()}startOperation(cm);try{return f()}finally{endOperation(cm)}}function operation(cm,f){return function(){if(cm.curOp){return f.apply(cm,arguments)}startOperation(cm);try{return f.apply(cm,arguments)}finally{endOperation(cm)}}}function methodOp(f){return function(){if(this.curOp){return f.apply(this,arguments)}startOperation(this);try{return f.apply(this,arguments)}finally{endOperation(this)}}}function docMethodOp(f){return function(){var cm=this.cm;if(!cm||cm.curOp){return f.apply(this,arguments)}startOperation(cm);try{return f.apply(this,arguments)}finally{endOperation(cm)}}}function regChange(cm,from,to,lendiff){if(from==null){from=cm.doc.first}if(to==null){to=cm.doc.first+cm.doc.size}if(!lendiff){lendiff=0}var display=cm.display;if(lendiff&&to<display.viewTo&&(display.updateLineNumbers==null||display.updateLineNumbers>from)){display.updateLineNumbers=from}cm.curOp.viewChanged=true;if(from>=display.viewTo){if(sawCollapsedSpans&&visualLineNo(cm.doc,from)<display.viewTo){resetView(cm)}}else if(to<=display.viewFrom){if(sawCollapsedSpans&&visualLineEndNo(cm.doc,to+lendiff)>display.viewFrom){resetView(cm)}else{display.viewFrom+=lendiff;display.viewTo+=lendiff}}else if(from<=display.viewFrom&&to>=display.viewTo){resetView(cm)}else if(from<=display.viewFrom){var cut=viewCuttingPoint(cm,to,to+lendiff,1);if(cut){display.view=display.view.slice(cut.index);display.viewFrom=cut.lineN;display.viewTo+=lendiff}else{resetView(cm)}}else if(to>=display.viewTo){var cut$1=viewCuttingPoint(cm,from,from,-1);if(cut$1){display.view=display.view.slice(0,cut$1.index);display.viewTo=cut$1.lineN}else{resetView(cm)}}else{var cutTop=viewCuttingPoint(cm,from,from,-1);var cutBot=viewCuttingPoint(cm,to,to+lendiff,1);if(cutTop&&cutBot){display.view=display.view.slice(0,cutTop.index).concat(buildViewArray(cm,cutTop.lineN,cutBot.lineN)).concat(display.view.slice(cutBot.index));display.viewTo+=lendiff}else{resetView(cm)}}var ext=display.externalMeasured;if(ext){if(to<ext.lineN){ext.lineN+=lendiff}else if(from<ext.lineN+ext.size){display.externalMeasured=null}}}function regLineChange(cm,line,type){cm.curOp.viewChanged=true;var display=cm.display,ext=cm.display.externalMeasured;if(ext&&line>=ext.lineN&&line<ext.lineN+ext.size){display.externalMeasured=null}if(line<display.viewFrom||line>=display.viewTo){return}var lineView=display.view[findViewIndex(cm,line)];if(lineView.node==null){return}var arr=lineView.changes||(lineView.changes=[]);if(indexOf(arr,type)==-1){arr.push(type)}}function resetView(cm){cm.display.viewFrom=cm.display.viewTo=cm.doc.first;cm.display.view=[];cm.display.viewOffset=0}function viewCuttingPoint(cm,oldN,newN,dir){var index=findViewIndex(cm,oldN),diff,view=cm.display.view;if(!sawCollapsedSpans||newN==cm.doc.first+cm.doc.size){return{index:index,lineN:newN}}var n=cm.display.viewFrom;for(var i=0;i<index;i++){n+=view[i].size}if(n!=oldN){if(dir>0){if(index==view.length-1){return null}diff=n+view[index].size-oldN;index++}else{diff=n-oldN}oldN+=diff;newN+=diff}while(visualLineNo(cm.doc,newN)!=newN){if(index==(dir<0?0:view.length-1)){return null}newN+=dir*view[index-(dir<0?1:0)].size;index+=dir}return{index:index,lineN:newN}}function adjustView(cm,from,to){var display=cm.display,view=display.view;if(view.length==0||from>=display.viewTo||to<=display.viewFrom){display.view=buildViewArray(cm,from,to);display.viewFrom=from}else{if(display.viewFrom>from){display.view=buildViewArray(cm,from,display.viewFrom).concat(display.view)}else if(display.viewFrom<from){display.view=display.view.slice(findViewIndex(cm,from))}display.viewFrom=from;if(display.viewTo<to){display.view=display.view.concat(buildViewArray(cm,display.viewTo,to))}else if(display.viewTo>to){display.view=display.view.slice(0,findViewIndex(cm,to))}}display.viewTo=to}function countDirtyView(cm){var view=cm.display.view,dirty=0;for(var i=0;i<view.length;i++){var lineView=view[i];if(!lineView.hidden&&(!lineView.node||lineView.changes)){++dirty}}return dirty}function startWorker(cm,time){if(cm.doc.mode.startState&&cm.doc.frontier<cm.display.viewTo){cm.state.highlight.set(time,bind(highlightWorker,cm))}}function highlightWorker(cm){var doc=cm.doc;if(doc.frontier<doc.first){doc.frontier=doc.first}if(doc.frontier>=cm.display.viewTo){return}var end=+new Date+cm.options.workTime;var state=copyState(doc.mode,getStateBefore(cm,doc.frontier));var changedLines=[];doc.iter(doc.frontier,Math.min(doc.first+doc.size,cm.display.viewTo+500),function(line){if(doc.frontier>=cm.display.viewFrom){var oldStyles=line.styles,tooLong=line.text.length>cm.options.maxHighlightLength;var highlighted=highlightLine(cm,line,tooLong?copyState(doc.mode,state):state,true);line.styles=highlighted.styles;var oldCls=line.styleClasses,newCls=highlighted.classes;if(newCls){line.styleClasses=newCls}else if(oldCls){line.styleClasses=null}var ischange=!oldStyles||oldStyles.length!=line.styles.length||oldCls!=newCls&&(!oldCls||!newCls||oldCls.bgClass!=newCls.bgClass||oldCls.textClass!=newCls.textClass);for(var i=0;!ischange&&i<oldStyles.length;++i){ischange=oldStyles[i]!=line.styles[i]}if(ischange){changedLines.push(doc.frontier)}line.stateAfter=tooLong?state:copyState(doc.mode,state)}else{if(line.text.length<=cm.options.maxHighlightLength){processLine(cm,line.text,state)}line.stateAfter=doc.frontier%5==0?copyState(doc.mode,state):null}++doc.frontier;if(+new Date>end){startWorker(cm,cm.options.workDelay);return true}});if(changedLines.length){runInOp(cm,function(){for(var i=0;i<changedLines.length;i++){regLineChange(cm,changedLines[i],"text")}})}}var DisplayUpdate=function(cm,viewport,force){var display=cm.display;this.viewport=viewport;this.visible=visibleLines(display,cm.doc,viewport);this.editorIsHidden=!display.wrapper.offsetWidth;this.wrapperHeight=display.wrapper.clientHeight;this.wrapperWidth=display.wrapper.clientWidth;this.oldDisplayWidth=displayWidth(cm);this.force=force;this.dims=getDimensions(cm);this.events=[]};DisplayUpdate.prototype.signal=function(emitter,type){if(hasHandler(emitter,type)){this.events.push(arguments)}};DisplayUpdate.prototype.finish=function(){var this$1=this;for(var i=0;i<this.events.length;i++){signal.apply(null,this$1.events[i])}};function maybeClipScrollbars(cm){var display=cm.display;if(!display.scrollbarsClipped&&display.scroller.offsetWidth){display.nativeBarWidth=display.scroller.offsetWidth-display.scroller.clientWidth;display.heightForcer.style.height=scrollGap(cm)+"px";display.sizer.style.marginBottom=-display.nativeBarWidth+"px";display.sizer.style.borderRightWidth=scrollGap(cm)+"px";display.scrollbarsClipped=true}}function selectionSnapshot(cm){if(cm.hasFocus()){return null}var active=activeElt();if(!active||!contains(cm.display.lineDiv,active)){return null}var result={activeElt:active};if(window.getSelection){var sel=window.getSelection();if(sel.anchorNode&&sel.extend&&contains(cm.display.lineDiv,sel.anchorNode)){result.anchorNode=sel.anchorNode;result.anchorOffset=sel.anchorOffset;result.focusNode=sel.focusNode;result.focusOffset=sel.focusOffset}}return result}function restoreSelection(snapshot){if(!snapshot||!snapshot.activeElt||snapshot.activeElt==activeElt()){return}snapshot.activeElt.focus();if(snapshot.anchorNode&&contains(document.body,snapshot.anchorNode)&&contains(document.body,snapshot.focusNode)){var sel=window.getSelection(),range$$1=document.createRange();range$$1.setEnd(snapshot.anchorNode,snapshot.anchorOffset);range$$1.collapse(false);sel.removeAllRanges();sel.addRange(range$$1);sel.extend(snapshot.focusNode,snapshot.focusOffset)}}function updateDisplayIfNeeded(cm,update){var display=cm.display,doc=cm.doc;if(update.editorIsHidden){resetView(cm);return false}if(!update.force&&update.visible.from>=display.viewFrom&&update.visible.to<=display.viewTo&&(display.updateLineNumbers==null||display.updateLineNumbers>=display.viewTo)&&display.renderedView==display.view&&countDirtyView(cm)==0){return false}if(maybeUpdateLineNumberWidth(cm)){resetView(cm);update.dims=getDimensions(cm)}var end=doc.first+doc.size;var from=Math.max(update.visible.from-cm.options.viewportMargin,doc.first);var to=Math.min(end,update.visible.to+cm.options.viewportMargin);if(display.viewFrom<from&&from-display.viewFrom<20){from=Math.max(doc.first,display.viewFrom)}if(display.viewTo>to&&display.viewTo-to<20){to=Math.min(end,display.viewTo)}if(sawCollapsedSpans){from=visualLineNo(cm.doc,from);to=visualLineEndNo(cm.doc,to)}var different=from!=display.viewFrom||to!=display.viewTo||display.lastWrapHeight!=update.wrapperHeight||display.lastWrapWidth!=update.wrapperWidth;adjustView(cm,from,to);display.viewOffset=heightAtLine(getLine(cm.doc,display.viewFrom));cm.display.mover.style.top=display.viewOffset+"px";var toUpdate=countDirtyView(cm);if(!different&&toUpdate==0&&!update.force&&display.renderedView==display.view&&(display.updateLineNumbers==null||display.updateLineNumbers>=display.viewTo)){return false}var selSnapshot=selectionSnapshot(cm);if(toUpdate>4){display.lineDiv.style.display="none"}patchDisplay(cm,display.updateLineNumbers,update.dims);if(toUpdate>4){display.lineDiv.style.display=""}display.renderedView=display.view;restoreSelection(selSnapshot);removeChildren(display.cursorDiv);removeChildren(display.selectionDiv);display.gutters.style.height=display.sizer.style.minHeight=0;if(different){display.lastWrapHeight=update.wrapperHeight;display.lastWrapWidth=update.wrapperWidth;startWorker(cm,400)}display.updateLineNumbers=null;return true}function postUpdateDisplay(cm,update){var viewport=update.viewport;for(var first=true;;first=false){if(!first||!cm.options.lineWrapping||update.oldDisplayWidth==displayWidth(cm)){if(viewport&&viewport.top!=null){viewport={top:Math.min(cm.doc.height+paddingVert(cm.display)-displayHeight(cm),viewport.top)}}update.visible=visibleLines(cm.display,cm.doc,viewport);if(update.visible.from>=cm.display.viewFrom&&update.visible.to<=cm.display.viewTo){break}}if(!updateDisplayIfNeeded(cm,update)){break}updateHeightsInViewport(cm);var barMeasure=measureForScrollbars(cm);updateSelection(cm);updateScrollbars(cm,barMeasure);setDocumentHeight(cm,barMeasure)}update.signal(cm,"update",cm);if(cm.display.viewFrom!=cm.display.reportedViewFrom||cm.display.viewTo!=cm.display.reportedViewTo){update.signal(cm,"viewportChange",cm,cm.display.viewFrom,cm.display.viewTo);cm.display.reportedViewFrom=cm.display.viewFrom;cm.display.reportedViewTo=cm.display.viewTo}}function updateDisplaySimple(cm,viewport){var update=new DisplayUpdate(cm,viewport);if(updateDisplayIfNeeded(cm,update)){updateHeightsInViewport(cm);postUpdateDisplay(cm,update);var barMeasure=measureForScrollbars(cm);updateSelection(cm);updateScrollbars(cm,barMeasure);setDocumentHeight(cm,barMeasure);update.finish()}}function patchDisplay(cm,updateNumbersFrom,dims){var display=cm.display,lineNumbers=cm.options.lineNumbers;var container=display.lineDiv,cur=container.firstChild;function rm(node){var next=node.nextSibling;if(webkit&&mac&&cm.display.currentWheelTarget==node){node.style.display="none"}else{node.parentNode.removeChild(node)}return next}var view=display.view,lineN=display.viewFrom;for(var i=0;i<view.length;i++){var lineView=view[i];if(lineView.hidden){}else if(!lineView.node||lineView.node.parentNode!=container){var node=buildLineElement(cm,lineView,lineN,dims);container.insertBefore(node,cur)}else{while(cur!=lineView.node){cur=rm(cur)}var updateNumber=lineNumbers&&updateNumbersFrom!=null&&updateNumbersFrom<=lineN&&lineView.lineNumber;if(lineView.changes){if(indexOf(lineView.changes,"gutter")>-1){updateNumber=false}updateLineForChanges(cm,lineView,lineN,dims)}if(updateNumber){removeChildren(lineView.lineNumber);lineView.lineNumber.appendChild(document.createTextNode(lineNumberFor(cm.options,lineN)))}cur=lineView.node.nextSibling}lineN+=lineView.size}while(cur){cur=rm(cur)}}function updateGutterSpace(cm){var width=cm.display.gutters.offsetWidth;cm.display.sizer.style.marginLeft=width+"px"}function setDocumentHeight(cm,measure){cm.display.sizer.style.minHeight=measure.docHeight+"px";cm.display.heightForcer.style.top=measure.docHeight+"px";cm.display.gutters.style.height=measure.docHeight+cm.display.barHeight+scrollGap(cm)+"px"}function updateGutters(cm){var gutters=cm.display.gutters,specs=cm.options.gutters;removeChildren(gutters);var i=0;for(;i<specs.length;++i){var gutterClass=specs[i];var gElt=gutters.appendChild(elt("div",null,"CodeMirror-gutter "+gutterClass));if(gutterClass=="CodeMirror-linenumbers"){cm.display.lineGutter=gElt;gElt.style.width=(cm.display.lineNumWidth||1)+"px"}}gutters.style.display=i?"":"none";updateGutterSpace(cm)}function setGuttersForLineNumbers(options){var found=indexOf(options.gutters,"CodeMirror-linenumbers");if(found==-1&&options.lineNumbers){options.gutters=options.gutters.concat(["CodeMirror-linenumbers"])}else if(found>-1&&!options.lineNumbers){options.gutters=options.gutters.slice(0);options.gutters.splice(found,1)}}var wheelSamples=0;var wheelPixelsPerUnit=null;if(ie){wheelPixelsPerUnit=-.53}else if(gecko){wheelPixelsPerUnit=15}else if(chrome){wheelPixelsPerUnit=-.7}else if(safari){wheelPixelsPerUnit=-1/3}function wheelEventDelta(e){var dx=e.wheelDeltaX,dy=e.wheelDeltaY;if(dx==null&&e.detail&&e.axis==e.HORIZONTAL_AXIS){dx=e.detail}if(dy==null&&e.detail&&e.axis==e.VERTICAL_AXIS){dy=e.detail}else if(dy==null){dy=e.wheelDelta}return{x:dx,y:dy}}function wheelEventPixels(e){var delta=wheelEventDelta(e);delta.x*=wheelPixelsPerUnit;delta.y*=wheelPixelsPerUnit;return delta}function onScrollWheel(cm,e){var delta=wheelEventDelta(e),dx=delta.x,dy=delta.y;var display=cm.display,scroll=display.scroller;var canScrollX=scroll.scrollWidth>scroll.clientWidth;var canScrollY=scroll.scrollHeight>scroll.clientHeight;if(!(dx&&canScrollX||dy&&canScrollY)){return}if(dy&&mac&&webkit){outer:for(var cur=e.target,view=display.view;cur!=scroll;cur=cur.parentNode){for(var i=0;i<view.length;i++){if(view[i].node==cur){cm.display.currentWheelTarget=cur;break outer}}}}if(dx&&!gecko&&!presto&&wheelPixelsPerUnit!=null){if(dy&&canScrollY){updateScrollTop(cm,Math.max(0,scroll.scrollTop+dy*wheelPixelsPerUnit))}setScrollLeft(cm,Math.max(0,scroll.scrollLeft+dx*wheelPixelsPerUnit));if(!dy||dy&&canScrollY){e_preventDefault(e)}display.wheelStartX=null;return}if(dy&&wheelPixelsPerUnit!=null){var pixels=dy*wheelPixelsPerUnit;var top=cm.doc.scrollTop,bot=top+display.wrapper.clientHeight;if(pixels<0){top=Math.max(0,top+pixels-50)}else{bot=Math.min(cm.doc.height,bot+pixels+50)}updateDisplaySimple(cm,{top:top,bottom:bot})}if(wheelSamples<20){if(display.wheelStartX==null){display.wheelStartX=scroll.scrollLeft;display.wheelStartY=scroll.scrollTop;display.wheelDX=dx;display.wheelDY=dy;setTimeout(function(){if(display.wheelStartX==null){return}var movedX=scroll.scrollLeft-display.wheelStartX;var movedY=scroll.scrollTop-display.wheelStartY;var sample=movedY&&display.wheelDY&&movedY/display.wheelDY||movedX&&display.wheelDX&&movedX/display.wheelDX;display.wheelStartX=display.wheelStartY=null;if(!sample){return}wheelPixelsPerUnit=(wheelPixelsPerUnit*wheelSamples+sample)/(wheelSamples+1);++wheelSamples},200)}else{display.wheelDX+=dx;display.wheelDY+=dy}}}var Selection=function(ranges,primIndex){this.ranges=ranges;this.primIndex=primIndex};Selection.prototype.primary=function(){return this.ranges[this.primIndex]};Selection.prototype.equals=function(other){var this$1=this;if(other==this){return true}if(other.primIndex!=this.primIndex||other.ranges.length!=this.ranges.length){return false}for(var i=0;i<this.ranges.length;i++){var here=this$1.ranges[i],there=other.ranges[i];if(!equalCursorPos(here.anchor,there.anchor)||!equalCursorPos(here.head,there.head)){return false}}return true};Selection.prototype.deepCopy=function(){var this$1=this;var out=[];for(var i=0;i<this.ranges.length;i++){out[i]=new Range(copyPos(this$1.ranges[i].anchor),copyPos(this$1.ranges[i].head))}return new Selection(out,this.primIndex)};Selection.prototype.somethingSelected=function(){var this$1=this;for(var i=0;i<this.ranges.length;i++){if(!this$1.ranges[i].empty()){return true}}return false};Selection.prototype.contains=function(pos,end){var this$1=this;if(!end){end=pos}for(var i=0;i<this.ranges.length;i++){var range=this$1.ranges[i];if(cmp(end,range.from())>=0&&cmp(pos,range.to())<=0){return i}}return-1};var Range=function(anchor,head){this.anchor=anchor;this.head=head};Range.prototype.from=function(){return minPos(this.anchor,this.head)};Range.prototype.to=function(){return maxPos(this.anchor,this.head)};Range.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch};function normalizeSelection(ranges,primIndex){var prim=ranges[primIndex];ranges.sort(function(a,b){return cmp(a.from(),b.from())});primIndex=indexOf(ranges,prim);for(var i=1;i<ranges.length;i++){var cur=ranges[i],prev=ranges[i-1];if(cmp(prev.to(),cur.from())>=0){var from=minPos(prev.from(),cur.from()),to=maxPos(prev.to(),cur.to());var inv=prev.empty()?cur.from()==cur.head:prev.from()==prev.head;if(i<=primIndex){--primIndex}ranges.splice(--i,2,new Range(inv?to:from,inv?from:to))}}return new Selection(ranges,primIndex)}function simpleSelection(anchor,head){return new Selection([new Range(anchor,head||anchor)],0)}function changeEnd(change){if(!change.text){return change.to}return Pos(change.from.line+change.text.length-1,lst(change.text).length+(change.text.length==1?change.from.ch:0))}function adjustForChange(pos,change){if(cmp(pos,change.from)<0){return pos}if(cmp(pos,change.to)<=0){return changeEnd(change)}var line=pos.line+change.text.length-(change.to.line-change.from.line)-1,ch=pos.ch;if(pos.line==change.to.line){ch+=changeEnd(change).ch-change.to.ch}return Pos(line,ch)}function computeSelAfterChange(doc,change){var out=[];for(var i=0;i<doc.sel.ranges.length;i++){var range=doc.sel.ranges[i];out.push(new Range(adjustForChange(range.anchor,change),adjustForChange(range.head,change)))}return normalizeSelection(out,doc.sel.primIndex)}function offsetPos(pos,old,nw){if(pos.line==old.line){return Pos(nw.line,pos.ch-old.ch+nw.ch)}else{return Pos(nw.line+(pos.line-old.line),pos.ch)}}function computeReplacedSel(doc,changes,hint){var out=[];var oldPrev=Pos(doc.first,0),newPrev=oldPrev;for(var i=0;i<changes.length;i++){var change=changes[i];var from=offsetPos(change.from,oldPrev,newPrev);var to=offsetPos(changeEnd(change),oldPrev,newPrev);oldPrev=change.to;newPrev=to;if(hint=="around"){var range=doc.sel.ranges[i],inv=cmp(range.head,range.anchor)<0;out[i]=new Range(inv?to:from,inv?from:to)}else{out[i]=new Range(from,from)}}return new Selection(out,doc.sel.primIndex)}function loadMode(cm){cm.doc.mode=getMode(cm.options,cm.doc.modeOption);resetModeState(cm)}function resetModeState(cm){cm.doc.iter(function(line){if(line.stateAfter){line.stateAfter=null}if(line.styles){line.styles=null}});cm.doc.frontier=cm.doc.first;startWorker(cm,100);cm.state.modeGen++;if(cm.curOp){regChange(cm)}}function isWholeLineUpdate(doc,change){return change.from.ch==0&&change.to.ch==0&&lst(change.text)==""&&(!doc.cm||doc.cm.options.wholeLineUpdateBefore)}function updateDoc(doc,change,markedSpans,estimateHeight$$1){function spansFor(n){return markedSpans?markedSpans[n]:null}function update(line,text,spans){updateLine(line,text,spans,estimateHeight$$1);signalLater(line,"change",line,change)}function linesFor(start,end){var result=[];for(var i=start;i<end;++i){result.push(new Line(text[i],spansFor(i),estimateHeight$$1))}return result}var from=change.from,to=change.to,text=change.text;var firstLine=getLine(doc,from.line),lastLine=getLine(doc,to.line);var lastText=lst(text),lastSpans=spansFor(text.length-1),nlines=to.line-from.line;if(change.full){doc.insert(0,linesFor(0,text.length));doc.remove(text.length,doc.size-text.length)}else if(isWholeLineUpdate(doc,change)){var added=linesFor(0,text.length-1);update(lastLine,lastLine.text,lastSpans);if(nlines){doc.remove(from.line,nlines)}if(added.length){doc.insert(from.line,added)}}else if(firstLine==lastLine){if(text.length==1){update(firstLine,firstLine.text.slice(0,from.ch)+lastText+firstLine.text.slice(to.ch),lastSpans)}else{var added$1=linesFor(1,text.length-1);added$1.push(new Line(lastText+firstLine.text.slice(to.ch),lastSpans,estimateHeight$$1));update(firstLine,firstLine.text.slice(0,from.ch)+text[0],spansFor(0));doc.insert(from.line+1,added$1)}}else if(text.length==1){update(firstLine,firstLine.text.slice(0,from.ch)+text[0]+lastLine.text.slice(to.ch),spansFor(0));doc.remove(from.line+1,nlines)}else{update(firstLine,firstLine.text.slice(0,from.ch)+text[0],spansFor(0));update(lastLine,lastText+lastLine.text.slice(to.ch),lastSpans);var added$2=linesFor(1,text.length-1);if(nlines>1){doc.remove(from.line+1,nlines-1)}doc.insert(from.line+1,added$2)}signalLater(doc,"change",doc,change)}function linkedDocs(doc,f,sharedHistOnly){function propagate(doc,skip,sharedHist){if(doc.linked){for(var i=0;i<doc.linked.length;++i){var rel=doc.linked[i];if(rel.doc==skip){continue}var shared=sharedHist&&rel.sharedHist;if(sharedHistOnly&&!shared){continue}f(rel.doc,shared);propagate(rel.doc,doc,shared)}}}propagate(doc,null,true)}function attachDoc(cm,doc){if(doc.cm){throw new Error("This document is already in use.")}cm.doc=doc;doc.cm=cm;estimateLineHeights(cm);loadMode(cm);setDirectionClass(cm);if(!cm.options.lineWrapping){findMaxLine(cm)}cm.options.mode=doc.modeOption;regChange(cm)}function setDirectionClass(cm){(cm.doc.direction=="rtl"?addClass:rmClass)(cm.display.lineDiv,"CodeMirror-rtl")}function directionChanged(cm){runInOp(cm,function(){setDirectionClass(cm);regChange(cm)})}function History(startGen){this.done=[];this.undone=[];this.undoDepth=Infinity;this.lastModTime=this.lastSelTime=0;this.lastOp=this.lastSelOp=null;this.lastOrigin=this.lastSelOrigin=null;this.generation=this.maxGeneration=startGen||1}function historyChangeFromChange(doc,change){var histChange={from:copyPos(change.from),to:changeEnd(change),text:getBetween(doc,change.from,change.to)};attachLocalSpans(doc,histChange,change.from.line,change.to.line+1);linkedDocs(doc,function(doc){return attachLocalSpans(doc,histChange,change.from.line,change.to.line+1)},true);return histChange}function clearSelectionEvents(array){while(array.length){var last=lst(array);if(last.ranges){array.pop()}else{break}}}function lastChangeEvent(hist,force){if(force){clearSelectionEvents(hist.done);return lst(hist.done)}else if(hist.done.length&&!lst(hist.done).ranges){return lst(hist.done)}else if(hist.done.length>1&&!hist.done[hist.done.length-2].ranges){hist.done.pop();return lst(hist.done)}}function addChangeToHistory(doc,change,selAfter,opId){var hist=doc.history;hist.undone.length=0;var time=+new Date,cur;var last;if((hist.lastOp==opId||hist.lastOrigin==change.origin&&change.origin&&(change.origin.charAt(0)=="+"&&doc.cm&&hist.lastModTime>time-doc.cm.options.historyEventDelay||change.origin.charAt(0)=="*"))&&(cur=lastChangeEvent(hist,hist.lastOp==opId))){last=lst(cur.changes);if(cmp(change.from,change.to)==0&&cmp(change.from,last.to)==0){last.to=changeEnd(change)}else{cur.changes.push(historyChangeFromChange(doc,change))}}else{var before=lst(hist.done);if(!before||!before.ranges){pushSelectionToHistory(doc.sel,hist.done)}cur={changes:[historyChangeFromChange(doc,change)],generation:hist.generation};hist.done.push(cur);while(hist.done.length>hist.undoDepth){hist.done.shift();if(!hist.done[0].ranges){hist.done.shift()}}}hist.done.push(selAfter);hist.generation=++hist.maxGeneration;hist.lastModTime=hist.lastSelTime=time;hist.lastOp=hist.lastSelOp=opId;hist.lastOrigin=hist.lastSelOrigin=change.origin;if(!last){signal(doc,"historyAdded")}}function selectionEventCanBeMerged(doc,origin,prev,sel){var ch=origin.charAt(0);return ch=="*"||ch=="+"&&prev.ranges.length==sel.ranges.length&&prev.somethingSelected()==sel.somethingSelected()&&new Date-doc.history.lastSelTime<=(doc.cm?doc.cm.options.historyEventDelay:500)}function addSelectionToHistory(doc,sel,opId,options){var hist=doc.history,origin=options&&options.origin;if(opId==hist.lastSelOp||origin&&hist.lastSelOrigin==origin&&(hist.lastModTime==hist.lastSelTime&&hist.lastOrigin==origin||selectionEventCanBeMerged(doc,origin,lst(hist.done),sel))){hist.done[hist.done.length-1]=sel}else{pushSelectionToHistory(sel,hist.done)}hist.lastSelTime=+new Date;hist.lastSelOrigin=origin;hist.lastSelOp=opId;if(options&&options.clearRedo!==false){clearSelectionEvents(hist.undone)}}function pushSelectionToHistory(sel,dest){var top=lst(dest);if(!(top&&top.ranges&&top.equals(sel))){dest.push(sel)}}function attachLocalSpans(doc,change,from,to){var existing=change["spans_"+doc.id],n=0;doc.iter(Math.max(doc.first,from),Math.min(doc.first+doc.size,to),function(line){if(line.markedSpans){(existing||(existing=change["spans_"+doc.id]={}))[n]=line.markedSpans
}++n})}function removeClearedSpans(spans){if(!spans){return null}var out;for(var i=0;i<spans.length;++i){if(spans[i].marker.explicitlyCleared){if(!out){out=spans.slice(0,i)}}else if(out){out.push(spans[i])}}return!out?spans:out.length?out:null}function getOldSpans(doc,change){var found=change["spans_"+doc.id];if(!found){return null}var nw=[];for(var i=0;i<change.text.length;++i){nw.push(removeClearedSpans(found[i]))}return nw}function mergeOldSpans(doc,change){var old=getOldSpans(doc,change);var stretched=stretchSpansOverChange(doc,change);if(!old){return stretched}if(!stretched){return old}for(var i=0;i<old.length;++i){var oldCur=old[i],stretchCur=stretched[i];if(oldCur&&stretchCur){spans:for(var j=0;j<stretchCur.length;++j){var span=stretchCur[j];for(var k=0;k<oldCur.length;++k){if(oldCur[k].marker==span.marker){continue spans}}oldCur.push(span)}}else if(stretchCur){old[i]=stretchCur}}return old}function copyHistoryArray(events,newGroup,instantiateSel){var copy=[];for(var i=0;i<events.length;++i){var event=events[i];if(event.ranges){copy.push(instantiateSel?Selection.prototype.deepCopy.call(event):event);continue}var changes=event.changes,newChanges=[];copy.push({changes:newChanges});for(var j=0;j<changes.length;++j){var change=changes[j],m=void 0;newChanges.push({from:change.from,to:change.to,text:change.text});if(newGroup){for(var prop in change){if(m=prop.match(/^spans_(\d+)$/)){if(indexOf(newGroup,Number(m[1]))>-1){lst(newChanges)[prop]=change[prop];delete change[prop]}}}}}}return copy}function extendRange(doc,range,head,other){if(doc.cm&&doc.cm.display.shift||doc.extend){var anchor=range.anchor;if(other){var posBefore=cmp(head,anchor)<0;if(posBefore!=cmp(other,anchor)<0){anchor=head;head=other}else if(posBefore!=cmp(head,other)<0){head=other}}return new Range(anchor,head)}else{return new Range(other||head,head)}}function extendSelection(doc,head,other,options){setSelection(doc,new Selection([extendRange(doc,doc.sel.primary(),head,other)],0),options)}function extendSelections(doc,heads,options){var out=[];for(var i=0;i<doc.sel.ranges.length;i++){out[i]=extendRange(doc,doc.sel.ranges[i],heads[i],null)}var newSel=normalizeSelection(out,doc.sel.primIndex);setSelection(doc,newSel,options)}function replaceOneSelection(doc,i,range,options){var ranges=doc.sel.ranges.slice(0);ranges[i]=range;setSelection(doc,normalizeSelection(ranges,doc.sel.primIndex),options)}function setSimpleSelection(doc,anchor,head,options){setSelection(doc,simpleSelection(anchor,head),options)}function filterSelectionChange(doc,sel,options){var obj={ranges:sel.ranges,update:function(ranges){var this$1=this;this.ranges=[];for(var i=0;i<ranges.length;i++){this$1.ranges[i]=new Range(clipPos(doc,ranges[i].anchor),clipPos(doc,ranges[i].head))}},origin:options&&options.origin};signal(doc,"beforeSelectionChange",doc,obj);if(doc.cm){signal(doc.cm,"beforeSelectionChange",doc.cm,obj)}if(obj.ranges!=sel.ranges){return normalizeSelection(obj.ranges,obj.ranges.length-1)}else{return sel}}function setSelectionReplaceHistory(doc,sel,options){var done=doc.history.done,last=lst(done);if(last&&last.ranges){done[done.length-1]=sel;setSelectionNoUndo(doc,sel,options)}else{setSelection(doc,sel,options)}}function setSelection(doc,sel,options){setSelectionNoUndo(doc,sel,options);addSelectionToHistory(doc,doc.sel,doc.cm?doc.cm.curOp.id:NaN,options)}function setSelectionNoUndo(doc,sel,options){if(hasHandler(doc,"beforeSelectionChange")||doc.cm&&hasHandler(doc.cm,"beforeSelectionChange")){sel=filterSelectionChange(doc,sel,options)}var bias=options&&options.bias||(cmp(sel.primary().head,doc.sel.primary().head)<0?-1:1);setSelectionInner(doc,skipAtomicInSelection(doc,sel,bias,true));if(!(options&&options.scroll===false)&&doc.cm){ensureCursorVisible(doc.cm)}}function setSelectionInner(doc,sel){if(sel.equals(doc.sel)){return}doc.sel=sel;if(doc.cm){doc.cm.curOp.updateInput=doc.cm.curOp.selectionChanged=true;signalCursorActivity(doc.cm)}signalLater(doc,"cursorActivity",doc)}function reCheckSelection(doc){setSelectionInner(doc,skipAtomicInSelection(doc,doc.sel,null,false))}function skipAtomicInSelection(doc,sel,bias,mayClear){var out;for(var i=0;i<sel.ranges.length;i++){var range=sel.ranges[i];var old=sel.ranges.length==doc.sel.ranges.length&&doc.sel.ranges[i];var newAnchor=skipAtomic(doc,range.anchor,old&&old.anchor,bias,mayClear);var newHead=skipAtomic(doc,range.head,old&&old.head,bias,mayClear);if(out||newAnchor!=range.anchor||newHead!=range.head){if(!out){out=sel.ranges.slice(0,i)}out[i]=new Range(newAnchor,newHead)}}return out?normalizeSelection(out,sel.primIndex):sel}function skipAtomicInner(doc,pos,oldPos,dir,mayClear){var line=getLine(doc,pos.line);if(line.markedSpans){for(var i=0;i<line.markedSpans.length;++i){var sp=line.markedSpans[i],m=sp.marker;if((sp.from==null||(m.inclusiveLeft?sp.from<=pos.ch:sp.from<pos.ch))&&(sp.to==null||(m.inclusiveRight?sp.to>=pos.ch:sp.to>pos.ch))){if(mayClear){signal(m,"beforeCursorEnter");if(m.explicitlyCleared){if(!line.markedSpans){break}else{--i;continue}}}if(!m.atomic){continue}if(oldPos){var near=m.find(dir<0?1:-1),diff=void 0;if(dir<0?m.inclusiveRight:m.inclusiveLeft){near=movePos(doc,near,-dir,near&&near.line==pos.line?line:null)}if(near&&near.line==pos.line&&(diff=cmp(near,oldPos))&&(dir<0?diff<0:diff>0)){return skipAtomicInner(doc,near,pos,dir,mayClear)}}var far=m.find(dir<0?-1:1);if(dir<0?m.inclusiveLeft:m.inclusiveRight){far=movePos(doc,far,dir,far.line==pos.line?line:null)}return far?skipAtomicInner(doc,far,pos,dir,mayClear):null}}}return pos}function skipAtomic(doc,pos,oldPos,bias,mayClear){var dir=bias||1;var found=skipAtomicInner(doc,pos,oldPos,dir,mayClear)||!mayClear&&skipAtomicInner(doc,pos,oldPos,dir,true)||skipAtomicInner(doc,pos,oldPos,-dir,mayClear)||!mayClear&&skipAtomicInner(doc,pos,oldPos,-dir,true);if(!found){doc.cantEdit=true;return Pos(doc.first,0)}return found}function movePos(doc,pos,dir,line){if(dir<0&&pos.ch==0){if(pos.line>doc.first){return clipPos(doc,Pos(pos.line-1))}else{return null}}else if(dir>0&&pos.ch==(line||getLine(doc,pos.line)).text.length){if(pos.line<doc.first+doc.size-1){return Pos(pos.line+1,0)}else{return null}}else{return new Pos(pos.line,pos.ch+dir)}}function selectAll(cm){cm.setSelection(Pos(cm.firstLine(),0),Pos(cm.lastLine()),sel_dontScroll)}function filterChange(doc,change,update){var obj={canceled:false,from:change.from,to:change.to,text:change.text,origin:change.origin,cancel:function(){return obj.canceled=true}};if(update){obj.update=function(from,to,text,origin){if(from){obj.from=clipPos(doc,from)}if(to){obj.to=clipPos(doc,to)}if(text){obj.text=text}if(origin!==undefined){obj.origin=origin}}}signal(doc,"beforeChange",doc,obj);if(doc.cm){signal(doc.cm,"beforeChange",doc.cm,obj)}if(obj.canceled){return null}return{from:obj.from,to:obj.to,text:obj.text,origin:obj.origin}}function makeChange(doc,change,ignoreReadOnly){if(doc.cm){if(!doc.cm.curOp){return operation(doc.cm,makeChange)(doc,change,ignoreReadOnly)}if(doc.cm.state.suppressEdits){return}}if(hasHandler(doc,"beforeChange")||doc.cm&&hasHandler(doc.cm,"beforeChange")){change=filterChange(doc,change,true);if(!change){return}}var split=sawReadOnlySpans&&!ignoreReadOnly&&removeReadOnlyRanges(doc,change.from,change.to);if(split){for(var i=split.length-1;i>=0;--i){makeChangeInner(doc,{from:split[i].from,to:split[i].to,text:i?[""]:change.text})}}else{makeChangeInner(doc,change)}}function makeChangeInner(doc,change){if(change.text.length==1&&change.text[0]==""&&cmp(change.from,change.to)==0){return}var selAfter=computeSelAfterChange(doc,change);addChangeToHistory(doc,change,selAfter,doc.cm?doc.cm.curOp.id:NaN);makeChangeSingleDoc(doc,change,selAfter,stretchSpansOverChange(doc,change));var rebased=[];linkedDocs(doc,function(doc,sharedHist){if(!sharedHist&&indexOf(rebased,doc.history)==-1){rebaseHist(doc.history,change);rebased.push(doc.history)}makeChangeSingleDoc(doc,change,null,stretchSpansOverChange(doc,change))})}function makeChangeFromHistory(doc,type,allowSelectionOnly){if(doc.cm&&doc.cm.state.suppressEdits&&!allowSelectionOnly){return}var hist=doc.history,event,selAfter=doc.sel;var source=type=="undo"?hist.done:hist.undone,dest=type=="undo"?hist.undone:hist.done;var i=0;for(;i<source.length;i++){event=source[i];if(allowSelectionOnly?event.ranges&&!event.equals(doc.sel):!event.ranges){break}}if(i==source.length){return}hist.lastOrigin=hist.lastSelOrigin=null;for(;;){event=source.pop();if(event.ranges){pushSelectionToHistory(event,dest);if(allowSelectionOnly&&!event.equals(doc.sel)){setSelection(doc,event,{clearRedo:false});return}selAfter=event}else{break}}var antiChanges=[];pushSelectionToHistory(selAfter,dest);dest.push({changes:antiChanges,generation:hist.generation});hist.generation=event.generation||++hist.maxGeneration;var filter=hasHandler(doc,"beforeChange")||doc.cm&&hasHandler(doc.cm,"beforeChange");var loop=function(i){var change=event.changes[i];change.origin=type;if(filter&&!filterChange(doc,change,false)){source.length=0;return{}}antiChanges.push(historyChangeFromChange(doc,change));var after=i?computeSelAfterChange(doc,change):lst(source);makeChangeSingleDoc(doc,change,after,mergeOldSpans(doc,change));if(!i&&doc.cm){doc.cm.scrollIntoView({from:change.from,to:changeEnd(change)})}var rebased=[];linkedDocs(doc,function(doc,sharedHist){if(!sharedHist&&indexOf(rebased,doc.history)==-1){rebaseHist(doc.history,change);rebased.push(doc.history)}makeChangeSingleDoc(doc,change,null,mergeOldSpans(doc,change))})};for(var i$1=event.changes.length-1;i$1>=0;--i$1){var returned=loop(i$1);if(returned)return returned.v}}function shiftDoc(doc,distance){if(distance==0){return}doc.first+=distance;doc.sel=new Selection(map(doc.sel.ranges,function(range){return new Range(Pos(range.anchor.line+distance,range.anchor.ch),Pos(range.head.line+distance,range.head.ch))}),doc.sel.primIndex);if(doc.cm){regChange(doc.cm,doc.first,doc.first-distance,distance);for(var d=doc.cm.display,l=d.viewFrom;l<d.viewTo;l++){regLineChange(doc.cm,l,"gutter")}}}function makeChangeSingleDoc(doc,change,selAfter,spans){if(doc.cm&&!doc.cm.curOp){return operation(doc.cm,makeChangeSingleDoc)(doc,change,selAfter,spans)}if(change.to.line<doc.first){shiftDoc(doc,change.text.length-1-(change.to.line-change.from.line));return}if(change.from.line>doc.lastLine()){return}if(change.from.line<doc.first){var shift=change.text.length-1-(doc.first-change.from.line);shiftDoc(doc,shift);change={from:Pos(doc.first,0),to:Pos(change.to.line+shift,change.to.ch),text:[lst(change.text)],origin:change.origin}}var last=doc.lastLine();if(change.to.line>last){change={from:change.from,to:Pos(last,getLine(doc,last).text.length),text:[change.text[0]],origin:change.origin}}change.removed=getBetween(doc,change.from,change.to);if(!selAfter){selAfter=computeSelAfterChange(doc,change)}if(doc.cm){makeChangeSingleDocInEditor(doc.cm,change,spans)}else{updateDoc(doc,change,spans)}setSelectionNoUndo(doc,selAfter,sel_dontScroll)}function makeChangeSingleDocInEditor(cm,change,spans){var doc=cm.doc,display=cm.display,from=change.from,to=change.to;var recomputeMaxLength=false,checkWidthStart=from.line;if(!cm.options.lineWrapping){checkWidthStart=lineNo(visualLine(getLine(doc,from.line)));doc.iter(checkWidthStart,to.line+1,function(line){if(line==display.maxLine){recomputeMaxLength=true;return true}})}if(doc.sel.contains(change.from,change.to)>-1){signalCursorActivity(cm)}updateDoc(doc,change,spans,estimateHeight(cm));if(!cm.options.lineWrapping){doc.iter(checkWidthStart,from.line+change.text.length,function(line){var len=lineLength(line);if(len>display.maxLineLength){display.maxLine=line;display.maxLineLength=len;display.maxLineChanged=true;recomputeMaxLength=false}});if(recomputeMaxLength){cm.curOp.updateMaxLine=true}}doc.frontier=Math.min(doc.frontier,from.line);startWorker(cm,400);var lendiff=change.text.length-(to.line-from.line)-1;if(change.full){regChange(cm)}else if(from.line==to.line&&change.text.length==1&&!isWholeLineUpdate(cm.doc,change)){regLineChange(cm,from.line,"text")}else{regChange(cm,from.line,to.line+1,lendiff)}var changesHandler=hasHandler(cm,"changes"),changeHandler=hasHandler(cm,"change");if(changeHandler||changesHandler){var obj={from:from,to:to,text:change.text,removed:change.removed,origin:change.origin};if(changeHandler){signalLater(cm,"change",cm,obj)}if(changesHandler){(cm.curOp.changeObjs||(cm.curOp.changeObjs=[])).push(obj)}}cm.display.selForContextMenu=null}function replaceRange(doc,code,from,to,origin){if(!to){to=from}if(cmp(to,from)<0){var tmp=to;to=from;from=tmp}if(typeof code=="string"){code=doc.splitLines(code)}makeChange(doc,{from:from,to:to,text:code,origin:origin})}function rebaseHistSelSingle(pos,from,to,diff){if(to<pos.line){pos.line+=diff}else if(from<pos.line){pos.line=from;pos.ch=0}}function rebaseHistArray(array,from,to,diff){for(var i=0;i<array.length;++i){var sub=array[i],ok=true;if(sub.ranges){if(!sub.copied){sub=array[i]=sub.deepCopy();sub.copied=true}for(var j=0;j<sub.ranges.length;j++){rebaseHistSelSingle(sub.ranges[j].anchor,from,to,diff);rebaseHistSelSingle(sub.ranges[j].head,from,to,diff)}continue}for(var j$1=0;j$1<sub.changes.length;++j$1){var cur=sub.changes[j$1];if(to<cur.from.line){cur.from=Pos(cur.from.line+diff,cur.from.ch);cur.to=Pos(cur.to.line+diff,cur.to.ch)}else if(from<=cur.to.line){ok=false;break}}if(!ok){array.splice(0,i+1);i=0}}}function rebaseHist(hist,change){var from=change.from.line,to=change.to.line,diff=change.text.length-(to-from)-1;rebaseHistArray(hist.done,from,to,diff);rebaseHistArray(hist.undone,from,to,diff)}function changeLine(doc,handle,changeType,op){var no=handle,line=handle;if(typeof handle=="number"){line=getLine(doc,clipLine(doc,handle))}else{no=lineNo(handle)}if(no==null){return null}if(op(line,no)&&doc.cm){regLineChange(doc.cm,no,changeType)}return line}var LeafChunk=function(lines){var this$1=this;this.lines=lines;this.parent=null;var height=0;for(var i=0;i<lines.length;++i){lines[i].parent=this$1;height+=lines[i].height}this.height=height};LeafChunk.prototype.chunkSize=function(){return this.lines.length};LeafChunk.prototype.removeInner=function(at,n){var this$1=this;for(var i=at,e=at+n;i<e;++i){var line=this$1.lines[i];this$1.height-=line.height;cleanUpLine(line);signalLater(line,"delete")}this.lines.splice(at,n)};LeafChunk.prototype.collapse=function(lines){lines.push.apply(lines,this.lines)};LeafChunk.prototype.insertInner=function(at,lines,height){var this$1=this;this.height+=height;this.lines=this.lines.slice(0,at).concat(lines).concat(this.lines.slice(at));for(var i=0;i<lines.length;++i){lines[i].parent=this$1}};LeafChunk.prototype.iterN=function(at,n,op){var this$1=this;for(var e=at+n;at<e;++at){if(op(this$1.lines[at])){return true}}};var BranchChunk=function(children){var this$1=this;this.children=children;var size=0,height=0;for(var i=0;i<children.length;++i){var ch=children[i];size+=ch.chunkSize();height+=ch.height;ch.parent=this$1}this.size=size;this.height=height;this.parent=null};BranchChunk.prototype.chunkSize=function(){return this.size};BranchChunk.prototype.removeInner=function(at,n){var this$1=this;this.size-=n;for(var i=0;i<this.children.length;++i){var child=this$1.children[i],sz=child.chunkSize();if(at<sz){var rm=Math.min(n,sz-at),oldHeight=child.height;child.removeInner(at,rm);this$1.height-=oldHeight-child.height;if(sz==rm){this$1.children.splice(i--,1);child.parent=null}if((n-=rm)==0){break}at=0}else{at-=sz}}if(this.size-n<25&&(this.children.length>1||!(this.children[0]instanceof LeafChunk))){var lines=[];this.collapse(lines);this.children=[new LeafChunk(lines)];this.children[0].parent=this}};BranchChunk.prototype.collapse=function(lines){var this$1=this;for(var i=0;i<this.children.length;++i){this$1.children[i].collapse(lines)}};BranchChunk.prototype.insertInner=function(at,lines,height){var this$1=this;this.size+=lines.length;this.height+=height;for(var i=0;i<this.children.length;++i){var child=this$1.children[i],sz=child.chunkSize();if(at<=sz){child.insertInner(at,lines,height);if(child.lines&&child.lines.length>50){var remaining=child.lines.length%25+25;for(var pos=remaining;pos<child.lines.length;){var leaf=new LeafChunk(child.lines.slice(pos,pos+=25));child.height-=leaf.height;this$1.children.splice(++i,0,leaf);leaf.parent=this$1}child.lines=child.lines.slice(0,remaining);this$1.maybeSpill()}break}at-=sz}};BranchChunk.prototype.maybeSpill=function(){if(this.children.length<=10){return}var me=this;do{var spilled=me.children.splice(me.children.length-5,5);var sibling=new BranchChunk(spilled);if(!me.parent){var copy=new BranchChunk(me.children);copy.parent=me;me.children=[copy,sibling];me=copy}else{me.size-=sibling.size;me.height-=sibling.height;var myIndex=indexOf(me.parent.children,me);me.parent.children.splice(myIndex+1,0,sibling)}sibling.parent=me.parent}while(me.children.length>10);me.parent.maybeSpill()};BranchChunk.prototype.iterN=function(at,n,op){var this$1=this;for(var i=0;i<this.children.length;++i){var child=this$1.children[i],sz=child.chunkSize();if(at<sz){var used=Math.min(n,sz-at);if(child.iterN(at,used,op)){return true}if((n-=used)==0){break}at=0}else{at-=sz}}};var LineWidget=function(doc,node,options){var this$1=this;if(options){for(var opt in options){if(options.hasOwnProperty(opt)){this$1[opt]=options[opt]}}}this.doc=doc;this.node=node};LineWidget.prototype.clear=function(){var this$1=this;var cm=this.doc.cm,ws=this.line.widgets,line=this.line,no=lineNo(line);if(no==null||!ws){return}for(var i=0;i<ws.length;++i){if(ws[i]==this$1){ws.splice(i--,1)}}if(!ws.length){line.widgets=null}var height=widgetHeight(this);updateLineHeight(line,Math.max(0,line.height-height));if(cm){runInOp(cm,function(){adjustScrollWhenAboveVisible(cm,line,-height);regLineChange(cm,no,"widget")});signalLater(cm,"lineWidgetCleared",cm,this,no)}};LineWidget.prototype.changed=function(){var this$1=this;var oldH=this.height,cm=this.doc.cm,line=this.line;this.height=null;var diff=widgetHeight(this)-oldH;if(!diff){return}updateLineHeight(line,line.height+diff);if(cm){runInOp(cm,function(){cm.curOp.forceUpdate=true;adjustScrollWhenAboveVisible(cm,line,diff);signalLater(cm,"lineWidgetChanged",cm,this$1,lineNo(line))})}};eventMixin(LineWidget);function adjustScrollWhenAboveVisible(cm,line,diff){if(heightAtLine(line)<(cm.curOp&&cm.curOp.scrollTop||cm.doc.scrollTop)){addToScrollTop(cm,diff)}}function addLineWidget(doc,handle,node,options){var widget=new LineWidget(doc,node,options);var cm=doc.cm;if(cm&&widget.noHScroll){cm.display.alignWidgets=true}changeLine(doc,handle,"widget",function(line){var widgets=line.widgets||(line.widgets=[]);if(widget.insertAt==null){widgets.push(widget)}else{widgets.splice(Math.min(widgets.length-1,Math.max(0,widget.insertAt)),0,widget)}widget.line=line;if(cm&&!lineIsHidden(doc,line)){var aboveVisible=heightAtLine(line)<doc.scrollTop;updateLineHeight(line,line.height+widgetHeight(widget));if(aboveVisible){addToScrollTop(cm,widget.height)}cm.curOp.forceUpdate=true}return true});signalLater(cm,"lineWidgetAdded",cm,widget,typeof handle=="number"?handle:lineNo(handle));return widget}var nextMarkerId=0;var TextMarker=function(doc,type){this.lines=[];this.type=type;this.doc=doc;this.id=++nextMarkerId};TextMarker.prototype.clear=function(){var this$1=this;if(this.explicitlyCleared){return}var cm=this.doc.cm,withOp=cm&&!cm.curOp;if(withOp){startOperation(cm)}if(hasHandler(this,"clear")){var found=this.find();if(found){signalLater(this,"clear",found.from,found.to)}}var min=null,max=null;for(var i=0;i<this.lines.length;++i){var line=this$1.lines[i];var span=getMarkedSpanFor(line.markedSpans,this$1);if(cm&&!this$1.collapsed){regLineChange(cm,lineNo(line),"text")}else if(cm){if(span.to!=null){max=lineNo(line)}if(span.from!=null){min=lineNo(line)}}line.markedSpans=removeMarkedSpan(line.markedSpans,span);if(span.from==null&&this$1.collapsed&&!lineIsHidden(this$1.doc,line)&&cm){updateLineHeight(line,textHeight(cm.display))}}if(cm&&this.collapsed&&!cm.options.lineWrapping){for(var i$1=0;i$1<this.lines.length;++i$1){var visual=visualLine(this$1.lines[i$1]),len=lineLength(visual);if(len>cm.display.maxLineLength){cm.display.maxLine=visual;cm.display.maxLineLength=len;cm.display.maxLineChanged=true}}}if(min!=null&&cm&&this.collapsed){regChange(cm,min,max+1)}this.lines.length=0;this.explicitlyCleared=true;if(this.atomic&&this.doc.cantEdit){this.doc.cantEdit=false;if(cm){reCheckSelection(cm.doc)}}if(cm){signalLater(cm,"markerCleared",cm,this,min,max)}if(withOp){endOperation(cm)}if(this.parent){this.parent.clear()}};TextMarker.prototype.find=function(side,lineObj){var this$1=this;if(side==null&&this.type=="bookmark"){side=1}var from,to;for(var i=0;i<this.lines.length;++i){var line=this$1.lines[i];var span=getMarkedSpanFor(line.markedSpans,this$1);if(span.from!=null){from=Pos(lineObj?line:lineNo(line),span.from);if(side==-1){return from}}if(span.to!=null){to=Pos(lineObj?line:lineNo(line),span.to);if(side==1){return to}}}return from&&{from:from,to:to}};TextMarker.prototype.changed=function(){var this$1=this;var pos=this.find(-1,true),widget=this,cm=this.doc.cm;if(!pos||!cm){return}runInOp(cm,function(){var line=pos.line,lineN=lineNo(pos.line);var view=findViewForLine(cm,lineN);if(view){clearLineMeasurementCacheFor(view);cm.curOp.selectionChanged=cm.curOp.forceUpdate=true}cm.curOp.updateMaxLine=true;if(!lineIsHidden(widget.doc,line)&&widget.height!=null){var oldHeight=widget.height;widget.height=null;var dHeight=widgetHeight(widget)-oldHeight;if(dHeight){updateLineHeight(line,line.height+dHeight)}}signalLater(cm,"markerChanged",cm,this$1)})};TextMarker.prototype.attachLine=function(line){if(!this.lines.length&&this.doc.cm){var op=this.doc.cm.curOp;if(!op.maybeHiddenMarkers||indexOf(op.maybeHiddenMarkers,this)==-1){(op.maybeUnhiddenMarkers||(op.maybeUnhiddenMarkers=[])).push(this)}}this.lines.push(line)};TextMarker.prototype.detachLine=function(line){this.lines.splice(indexOf(this.lines,line),1);if(!this.lines.length&&this.doc.cm){var op=this.doc.cm.curOp;(op.maybeHiddenMarkers||(op.maybeHiddenMarkers=[])).push(this)}};eventMixin(TextMarker);function markText(doc,from,to,options,type){if(options&&options.shared){return markTextShared(doc,from,to,options,type)}if(doc.cm&&!doc.cm.curOp){return operation(doc.cm,markText)(doc,from,to,options,type)}var marker=new TextMarker(doc,type),diff=cmp(from,to);if(options){copyObj(options,marker,false)}if(diff>0||diff==0&&marker.clearWhenEmpty!==false){return marker}if(marker.replacedWith){marker.collapsed=true;marker.widgetNode=eltP("span",[marker.replacedWith],"CodeMirror-widget");if(!options.handleMouseEvents){marker.widgetNode.setAttribute("cm-ignore-events","true")}if(options.insertLeft){marker.widgetNode.insertLeft=true}}if(marker.collapsed){if(conflictingCollapsedRange(doc,from.line,from,to,marker)||from.line!=to.line&&conflictingCollapsedRange(doc,to.line,from,to,marker)){throw new Error("Inserting collapsed marker partially overlapping an existing one")}seeCollapsedSpans()}if(marker.addToHistory){addChangeToHistory(doc,{from:from,to:to,origin:"markText"},doc.sel,NaN)}var curLine=from.line,cm=doc.cm,updateMaxLine;doc.iter(curLine,to.line+1,function(line){if(cm&&marker.collapsed&&!cm.options.lineWrapping&&visualLine(line)==cm.display.maxLine){updateMaxLine=true}if(marker.collapsed&&curLine!=from.line){updateLineHeight(line,0)}addMarkedSpan(line,new MarkedSpan(marker,curLine==from.line?from.ch:null,curLine==to.line?to.ch:null));++curLine});if(marker.collapsed){doc.iter(from.line,to.line+1,function(line){if(lineIsHidden(doc,line)){updateLineHeight(line,0)}})}if(marker.clearOnEnter){on(marker,"beforeCursorEnter",function(){return marker.clear()})}if(marker.readOnly){seeReadOnlySpans();if(doc.history.done.length||doc.history.undone.length){doc.clearHistory()}}if(marker.collapsed){marker.id=++nextMarkerId;marker.atomic=true}if(cm){if(updateMaxLine){cm.curOp.updateMaxLine=true}if(marker.collapsed){regChange(cm,from.line,to.line+1)}else if(marker.className||marker.title||marker.startStyle||marker.endStyle||marker.css){for(var i=from.line;i<=to.line;i++){regLineChange(cm,i,"text")}}if(marker.atomic){reCheckSelection(cm.doc)}signalLater(cm,"markerAdded",cm,marker)}return marker}var SharedTextMarker=function(markers,primary){var this$1=this;this.markers=markers;this.primary=primary;for(var i=0;i<markers.length;++i){markers[i].parent=this$1}};SharedTextMarker.prototype.clear=function(){var this$1=this;if(this.explicitlyCleared){return}this.explicitlyCleared=true;for(var i=0;i<this.markers.length;++i){this$1.markers[i].clear()}signalLater(this,"clear")};SharedTextMarker.prototype.find=function(side,lineObj){return this.primary.find(side,lineObj)};eventMixin(SharedTextMarker);function markTextShared(doc,from,to,options,type){options=copyObj(options);options.shared=false;var markers=[markText(doc,from,to,options,type)],primary=markers[0];var widget=options.widgetNode;linkedDocs(doc,function(doc){if(widget){options.widgetNode=widget.cloneNode(true)}markers.push(markText(doc,clipPos(doc,from),clipPos(doc,to),options,type));for(var i=0;i<doc.linked.length;++i){if(doc.linked[i].isParent){return}}primary=lst(markers)});return new SharedTextMarker(markers,primary)}function findSharedMarkers(doc){return doc.findMarks(Pos(doc.first,0),doc.clipPos(Pos(doc.lastLine())),function(m){return m.parent})}function copySharedMarkers(doc,markers){for(var i=0;i<markers.length;i++){var marker=markers[i],pos=marker.find();var mFrom=doc.clipPos(pos.from),mTo=doc.clipPos(pos.to);if(cmp(mFrom,mTo)){var subMark=markText(doc,mFrom,mTo,marker.primary,marker.primary.type);marker.markers.push(subMark);subMark.parent=marker}}}function detachSharedMarkers(markers){var loop=function(i){var marker=markers[i],linked=[marker.primary.doc];linkedDocs(marker.primary.doc,function(d){return linked.push(d)});for(var j=0;j<marker.markers.length;j++){var subMarker=marker.markers[j];if(indexOf(linked,subMarker.doc)==-1){subMarker.parent=null;marker.markers.splice(j--,1)}}};for(var i=0;i<markers.length;i++)loop(i)}var nextDocId=0;var Doc=function(text,mode,firstLine,lineSep,direction){if(!(this instanceof Doc)){return new Doc(text,mode,firstLine,lineSep,direction)}if(firstLine==null){firstLine=0}BranchChunk.call(this,[new LeafChunk([new Line("",null)])]);this.first=firstLine;this.scrollTop=this.scrollLeft=0;this.cantEdit=false;this.cleanGeneration=1;this.frontier=firstLine;var start=Pos(firstLine,0);this.sel=simpleSelection(start);this.history=new History(null);this.id=++nextDocId;this.modeOption=mode;this.lineSep=lineSep;this.direction=direction=="rtl"?"rtl":"ltr";this.extend=false;if(typeof text=="string"){text=this.splitLines(text)}updateDoc(this,{from:start,to:start,text:text});setSelection(this,simpleSelection(start),sel_dontScroll)};Doc.prototype=createObj(BranchChunk.prototype,{constructor:Doc,iter:function(from,to,op){if(op){this.iterN(from-this.first,to-from,op)}else{this.iterN(this.first,this.first+this.size,from)}},insert:function(at,lines){var height=0;for(var i=0;i<lines.length;++i){height+=lines[i].height}this.insertInner(at-this.first,lines,height)},remove:function(at,n){this.removeInner(at-this.first,n)},getValue:function(lineSep){var lines=getLines(this,this.first,this.first+this.size);if(lineSep===false){return lines}return lines.join(lineSep||this.lineSeparator())},setValue:docMethodOp(function(code){var top=Pos(this.first,0),last=this.first+this.size-1;makeChange(this,{from:top,to:Pos(last,getLine(this,last).text.length),text:this.splitLines(code),origin:"setValue",full:true},true);if(this.cm){scrollToCoords(this.cm,0,0)}setSelection(this,simpleSelection(top),sel_dontScroll)}),replaceRange:function(code,from,to,origin){from=clipPos(this,from);to=to?clipPos(this,to):from;replaceRange(this,code,from,to,origin)},getRange:function(from,to,lineSep){var lines=getBetween(this,clipPos(this,from),clipPos(this,to));if(lineSep===false){return lines}return lines.join(lineSep||this.lineSeparator())},getLine:function(line){var l=this.getLineHandle(line);return l&&l.text},getLineHandle:function(line){if(isLine(this,line)){return getLine(this,line)}},getLineNumber:function(line){return lineNo(line)},getLineHandleVisualStart:function(line){if(typeof line=="number"){line=getLine(this,line)}return visualLine(line)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(pos){return clipPos(this,pos)},getCursor:function(start){var range$$1=this.sel.primary(),pos;if(start==null||start=="head"){pos=range$$1.head}else if(start=="anchor"){pos=range$$1.anchor}else if(start=="end"||start=="to"||start===false){pos=range$$1.to()}else{pos=range$$1.from()}return pos},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:docMethodOp(function(line,ch,options){setSimpleSelection(this,clipPos(this,typeof line=="number"?Pos(line,ch||0):line),null,options)}),setSelection:docMethodOp(function(anchor,head,options){setSimpleSelection(this,clipPos(this,anchor),clipPos(this,head||anchor),options)}),extendSelection:docMethodOp(function(head,other,options){extendSelection(this,clipPos(this,head),other&&clipPos(this,other),options)}),extendSelections:docMethodOp(function(heads,options){extendSelections(this,clipPosArray(this,heads),options)}),extendSelectionsBy:docMethodOp(function(f,options){var heads=map(this.sel.ranges,f);extendSelections(this,clipPosArray(this,heads),options)}),setSelections:docMethodOp(function(ranges,primary,options){var this$1=this;if(!ranges.length){return}var out=[];for(var i=0;i<ranges.length;i++){out[i]=new Range(clipPos(this$1,ranges[i].anchor),clipPos(this$1,ranges[i].head))}if(primary==null){primary=Math.min(ranges.length-1,this.sel.primIndex)}setSelection(this,normalizeSelection(out,primary),options)}),addSelection:docMethodOp(function(anchor,head,options){var ranges=this.sel.ranges.slice(0);ranges.push(new Range(clipPos(this,anchor),clipPos(this,head||anchor)));setSelection(this,normalizeSelection(ranges,ranges.length-1),options)}),getSelection:function(lineSep){var this$1=this;var ranges=this.sel.ranges,lines;for(var i=0;i<ranges.length;i++){var sel=getBetween(this$1,ranges[i].from(),ranges[i].to());lines=lines?lines.concat(sel):sel}if(lineSep===false){return lines}else{return lines.join(lineSep||this.lineSeparator())}},getSelections:function(lineSep){var this$1=this;var parts=[],ranges=this.sel.ranges;for(var i=0;i<ranges.length;i++){var sel=getBetween(this$1,ranges[i].from(),ranges[i].to());if(lineSep!==false){sel=sel.join(lineSep||this$1.lineSeparator())}parts[i]=sel}return parts},replaceSelection:function(code,collapse,origin){var dup=[];for(var i=0;i<this.sel.ranges.length;i++){dup[i]=code}this.replaceSelections(dup,collapse,origin||"+input")},replaceSelections:docMethodOp(function(code,collapse,origin){var this$1=this;var changes=[],sel=this.sel;for(var i=0;i<sel.ranges.length;i++){var range$$1=sel.ranges[i];changes[i]={from:range$$1.from(),to:range$$1.to(),text:this$1.splitLines(code[i]),origin:origin}}var newSel=collapse&&collapse!="end"&&computeReplacedSel(this,changes,collapse);for(var i$1=changes.length-1;i$1>=0;i$1--){makeChange(this$1,changes[i$1])}if(newSel){setSelectionReplaceHistory(this,newSel)}else if(this.cm){ensureCursorVisible(this.cm)}}),undo:docMethodOp(function(){makeChangeFromHistory(this,"undo")}),redo:docMethodOp(function(){makeChangeFromHistory(this,"redo")}),undoSelection:docMethodOp(function(){makeChangeFromHistory(this,"undo",true)}),redoSelection:docMethodOp(function(){makeChangeFromHistory(this,"redo",true)}),setExtending:function(val){this.extend=val},getExtending:function(){return this.extend},historySize:function(){var hist=this.history,done=0,undone=0;for(var i=0;i<hist.done.length;i++){if(!hist.done[i].ranges){++done}}for(var i$1=0;i$1<hist.undone.length;i$1++){if(!hist.undone[i$1].ranges){++undone}}return{undo:done,redo:undone}},clearHistory:function(){this.history=new History(this.history.maxGeneration)
},markClean:function(){this.cleanGeneration=this.changeGeneration(true)},changeGeneration:function(forceSplit){if(forceSplit){this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null}return this.history.generation},isClean:function(gen){return this.history.generation==(gen||this.cleanGeneration)},getHistory:function(){return{done:copyHistoryArray(this.history.done),undone:copyHistoryArray(this.history.undone)}},setHistory:function(histData){var hist=this.history=new History(this.history.maxGeneration);hist.done=copyHistoryArray(histData.done.slice(0),null,true);hist.undone=copyHistoryArray(histData.undone.slice(0),null,true)},setGutterMarker:docMethodOp(function(line,gutterID,value){return changeLine(this,line,"gutter",function(line){var markers=line.gutterMarkers||(line.gutterMarkers={});markers[gutterID]=value;if(!value&&isEmpty(markers)){line.gutterMarkers=null}return true})}),clearGutter:docMethodOp(function(gutterID){var this$1=this;this.iter(function(line){if(line.gutterMarkers&&line.gutterMarkers[gutterID]){changeLine(this$1,line,"gutter",function(){line.gutterMarkers[gutterID]=null;if(isEmpty(line.gutterMarkers)){line.gutterMarkers=null}return true})}})}),lineInfo:function(line){var n;if(typeof line=="number"){if(!isLine(this,line)){return null}n=line;line=getLine(this,line);if(!line){return null}}else{n=lineNo(line);if(n==null){return null}}return{line:n,handle:line,text:line.text,gutterMarkers:line.gutterMarkers,textClass:line.textClass,bgClass:line.bgClass,wrapClass:line.wrapClass,widgets:line.widgets}},addLineClass:docMethodOp(function(handle,where,cls){return changeLine(this,handle,where=="gutter"?"gutter":"class",function(line){var prop=where=="text"?"textClass":where=="background"?"bgClass":where=="gutter"?"gutterClass":"wrapClass";if(!line[prop]){line[prop]=cls}else if(classTest(cls).test(line[prop])){return false}else{line[prop]+=" "+cls}return true})}),removeLineClass:docMethodOp(function(handle,where,cls){return changeLine(this,handle,where=="gutter"?"gutter":"class",function(line){var prop=where=="text"?"textClass":where=="background"?"bgClass":where=="gutter"?"gutterClass":"wrapClass";var cur=line[prop];if(!cur){return false}else if(cls==null){line[prop]=null}else{var found=cur.match(classTest(cls));if(!found){return false}var end=found.index+found[0].length;line[prop]=cur.slice(0,found.index)+(!found.index||end==cur.length?"":" ")+cur.slice(end)||null}return true})}),addLineWidget:docMethodOp(function(handle,node,options){return addLineWidget(this,handle,node,options)}),removeLineWidget:function(widget){widget.clear()},markText:function(from,to,options){return markText(this,clipPos(this,from),clipPos(this,to),options,options&&options.type||"range")},setBookmark:function(pos,options){var realOpts={replacedWith:options&&(options.nodeType==null?options.widget:options),insertLeft:options&&options.insertLeft,clearWhenEmpty:false,shared:options&&options.shared,handleMouseEvents:options&&options.handleMouseEvents};pos=clipPos(this,pos);return markText(this,pos,pos,realOpts,"bookmark")},findMarksAt:function(pos){pos=clipPos(this,pos);var markers=[],spans=getLine(this,pos.line).markedSpans;if(spans){for(var i=0;i<spans.length;++i){var span=spans[i];if((span.from==null||span.from<=pos.ch)&&(span.to==null||span.to>=pos.ch)){markers.push(span.marker.parent||span.marker)}}}return markers},findMarks:function(from,to,filter){from=clipPos(this,from);to=clipPos(this,to);var found=[],lineNo$$1=from.line;this.iter(from.line,to.line+1,function(line){var spans=line.markedSpans;if(spans){for(var i=0;i<spans.length;i++){var span=spans[i];if(!(span.to!=null&&lineNo$$1==from.line&&from.ch>=span.to||span.from==null&&lineNo$$1!=from.line||span.from!=null&&lineNo$$1==to.line&&span.from>=to.ch)&&(!filter||filter(span.marker))){found.push(span.marker.parent||span.marker)}}}++lineNo$$1});return found},getAllMarks:function(){var markers=[];this.iter(function(line){var sps=line.markedSpans;if(sps){for(var i=0;i<sps.length;++i){if(sps[i].from!=null){markers.push(sps[i].marker)}}}});return markers},posFromIndex:function(off){var ch,lineNo$$1=this.first,sepSize=this.lineSeparator().length;this.iter(function(line){var sz=line.text.length+sepSize;if(sz>off){ch=off;return true}off-=sz;++lineNo$$1});return clipPos(this,Pos(lineNo$$1,ch))},indexFromPos:function(coords){coords=clipPos(this,coords);var index=coords.ch;if(coords.line<this.first||coords.ch<0){return 0}var sepSize=this.lineSeparator().length;this.iter(this.first,coords.line,function(line){index+=line.text.length+sepSize});return index},copy:function(copyHistory){var doc=new Doc(getLines(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);doc.scrollTop=this.scrollTop;doc.scrollLeft=this.scrollLeft;doc.sel=this.sel;doc.extend=false;if(copyHistory){doc.history.undoDepth=this.history.undoDepth;doc.setHistory(this.getHistory())}return doc},linkedDoc:function(options){if(!options){options={}}var from=this.first,to=this.first+this.size;if(options.from!=null&&options.from>from){from=options.from}if(options.to!=null&&options.to<to){to=options.to}var copy=new Doc(getLines(this,from,to),options.mode||this.modeOption,from,this.lineSep,this.direction);if(options.sharedHist){copy.history=this.history}(this.linked||(this.linked=[])).push({doc:copy,sharedHist:options.sharedHist});copy.linked=[{doc:this,isParent:true,sharedHist:options.sharedHist}];copySharedMarkers(copy,findSharedMarkers(this));return copy},unlinkDoc:function(other){var this$1=this;if(other instanceof CodeMirror$1){other=other.doc}if(this.linked){for(var i=0;i<this.linked.length;++i){var link=this$1.linked[i];if(link.doc!=other){continue}this$1.linked.splice(i,1);other.unlinkDoc(this$1);detachSharedMarkers(findSharedMarkers(this$1));break}}if(other.history==this.history){var splitIds=[other.id];linkedDocs(other,function(doc){return splitIds.push(doc.id)},true);other.history=new History(null);other.history.done=copyHistoryArray(this.history.done,splitIds);other.history.undone=copyHistoryArray(this.history.undone,splitIds)}},iterLinkedDocs:function(f){linkedDocs(this,f)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(str){if(this.lineSep){return str.split(this.lineSep)}return splitLinesAuto(str)},lineSeparator:function(){return this.lineSep||"\n"},setDirection:docMethodOp(function(dir){if(dir!="rtl"){dir="ltr"}if(dir==this.direction){return}this.direction=dir;this.iter(function(line){return line.order=null});if(this.cm){directionChanged(this.cm)}})});Doc.prototype.eachLine=Doc.prototype.iter;var lastDrop=0;function onDrop(e){var cm=this;clearDragCursor(cm);if(signalDOMEvent(cm,e)||eventInWidget(cm.display,e)){return}e_preventDefault(e);if(ie){lastDrop=+new Date}var pos=posFromMouse(cm,e,true),files=e.dataTransfer.files;if(!pos||cm.isReadOnly()){return}if(files&&files.length&&window.FileReader&&window.File){var n=files.length,text=Array(n),read=0;var loadFile=function(file,i){if(cm.options.allowDropFileTypes&&indexOf(cm.options.allowDropFileTypes,file.type)==-1){return}var reader=new FileReader;reader.onload=operation(cm,function(){var content=reader.result;if(/[\x00-\x08\x0e-\x1f]{2}/.test(content)){content=""}text[i]=content;if(++read==n){pos=clipPos(cm.doc,pos);var change={from:pos,to:pos,text:cm.doc.splitLines(text.join(cm.doc.lineSeparator())),origin:"paste"};makeChange(cm.doc,change);setSelectionReplaceHistory(cm.doc,simpleSelection(pos,changeEnd(change)))}});reader.readAsText(file)};for(var i=0;i<n;++i){loadFile(files[i],i)}}else{if(cm.state.draggingText&&cm.doc.sel.contains(pos)>-1){cm.state.draggingText(e);setTimeout(function(){return cm.display.input.focus()},20);return}try{var text$1=e.dataTransfer.getData("Text");if(text$1){var selected;if(cm.state.draggingText&&!cm.state.draggingText.copy){selected=cm.listSelections()}setSelectionNoUndo(cm.doc,simpleSelection(pos,pos));if(selected){for(var i$1=0;i$1<selected.length;++i$1){replaceRange(cm.doc,"",selected[i$1].anchor,selected[i$1].head,"drag")}}cm.replaceSelection(text$1,"around","paste");cm.display.input.focus()}}catch(e){}}}function onDragStart(cm,e){if(ie&&(!cm.state.draggingText||+new Date-lastDrop<100)){e_stop(e);return}if(signalDOMEvent(cm,e)||eventInWidget(cm.display,e)){return}e.dataTransfer.setData("Text",cm.getSelection());e.dataTransfer.effectAllowed="copyMove";if(e.dataTransfer.setDragImage&&!safari){var img=elt("img",null,null,"position: fixed; left: 0; top: 0;");img.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==";if(presto){img.width=img.height=1;cm.display.wrapper.appendChild(img);img._top=img.offsetTop}e.dataTransfer.setDragImage(img,0,0);if(presto){img.parentNode.removeChild(img)}}}function onDragOver(cm,e){var pos=posFromMouse(cm,e);if(!pos){return}var frag=document.createDocumentFragment();drawSelectionCursor(cm,pos,frag);if(!cm.display.dragCursor){cm.display.dragCursor=elt("div",null,"CodeMirror-cursors CodeMirror-dragcursors");cm.display.lineSpace.insertBefore(cm.display.dragCursor,cm.display.cursorDiv)}removeChildrenAndAdd(cm.display.dragCursor,frag)}function clearDragCursor(cm){if(cm.display.dragCursor){cm.display.lineSpace.removeChild(cm.display.dragCursor);cm.display.dragCursor=null}}function forEachCodeMirror(f){if(!document.body.getElementsByClassName){return}var byClass=document.body.getElementsByClassName("CodeMirror");for(var i=0;i<byClass.length;i++){var cm=byClass[i].CodeMirror;if(cm){f(cm)}}}var globalsRegistered=false;function ensureGlobalHandlers(){if(globalsRegistered){return}registerGlobalHandlers();globalsRegistered=true}function registerGlobalHandlers(){var resizeTimer;on(window,"resize",function(){if(resizeTimer==null){resizeTimer=setTimeout(function(){resizeTimer=null;forEachCodeMirror(onResize)},100)}});on(window,"blur",function(){return forEachCodeMirror(onBlur)})}function onResize(cm){var d=cm.display;if(d.lastWrapHeight==d.wrapper.clientHeight&&d.lastWrapWidth==d.wrapper.clientWidth){return}d.cachedCharWidth=d.cachedTextHeight=d.cachedPaddingH=null;d.scrollbarsClipped=false;cm.setSize()}var keyNames={3:"Enter",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",127:"Delete",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"};for(var i=0;i<10;i++){keyNames[i+48]=keyNames[i+96]=String(i)}for(var i$1=65;i$1<=90;i$1++){keyNames[i$1]=String.fromCharCode(i$1)}for(var i$2=1;i$2<=12;i$2++){keyNames[i$2+111]=keyNames[i$2+63235]="F"+i$2}var keyMap={};keyMap.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"};keyMap.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"};keyMap.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"};keyMap.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]};keyMap["default"]=mac?keyMap.macDefault:keyMap.pcDefault;function normalizeKeyName(name){var parts=name.split(/-(?!$)/);name=parts[parts.length-1];var alt,ctrl,shift,cmd;for(var i=0;i<parts.length-1;i++){var mod=parts[i];if(/^(cmd|meta|m)$/i.test(mod)){cmd=true}else if(/^a(lt)?$/i.test(mod)){alt=true}else if(/^(c|ctrl|control)$/i.test(mod)){ctrl=true}else if(/^s(hift)?$/i.test(mod)){shift=true}else{throw new Error("Unrecognized modifier name: "+mod)}}if(alt){name="Alt-"+name}if(ctrl){name="Ctrl-"+name}if(cmd){name="Cmd-"+name}if(shift){name="Shift-"+name}return name}function normalizeKeyMap(keymap){var copy={};for(var keyname in keymap){if(keymap.hasOwnProperty(keyname)){var value=keymap[keyname];if(/^(name|fallthrough|(de|at)tach)$/.test(keyname)){continue}if(value=="..."){delete keymap[keyname];continue}var keys=map(keyname.split(" "),normalizeKeyName);for(var i=0;i<keys.length;i++){var val=void 0,name=void 0;if(i==keys.length-1){name=keys.join(" ");val=value}else{name=keys.slice(0,i+1).join(" ");val="..."}var prev=copy[name];if(!prev){copy[name]=val}else if(prev!=val){throw new Error("Inconsistent bindings for "+name)}}delete keymap[keyname]}}for(var prop in copy){keymap[prop]=copy[prop]}return keymap}function lookupKey(key,map$$1,handle,context){map$$1=getKeyMap(map$$1);var found=map$$1.call?map$$1.call(key,context):map$$1[key];if(found===false){return"nothing"}if(found==="..."){return"multi"}if(found!=null&&handle(found)){return"handled"}if(map$$1.fallthrough){if(Object.prototype.toString.call(map$$1.fallthrough)!="[object Array]"){return lookupKey(key,map$$1.fallthrough,handle,context)}for(var i=0;i<map$$1.fallthrough.length;i++){var result=lookupKey(key,map$$1.fallthrough[i],handle,context);if(result){return result}}}}function isModifierKey(value){var name=typeof value=="string"?value:keyNames[value.keyCode];return name=="Ctrl"||name=="Alt"||name=="Shift"||name=="Mod"}function keyName(event,noShift){if(presto&&event.keyCode==34&&event["char"]){return false}var base=keyNames[event.keyCode],name=base;if(name==null||event.altGraphKey){return false}if(event.altKey&&base!="Alt"){name="Alt-"+name}if((flipCtrlCmd?event.metaKey:event.ctrlKey)&&base!="Ctrl"){name="Ctrl-"+name}if((flipCtrlCmd?event.ctrlKey:event.metaKey)&&base!="Cmd"){name="Cmd-"+name}if(!noShift&&event.shiftKey&&base!="Shift"){name="Shift-"+name}return name}function getKeyMap(val){return typeof val=="string"?keyMap[val]:val}function deleteNearSelection(cm,compute){var ranges=cm.doc.sel.ranges,kill=[];for(var i=0;i<ranges.length;i++){var toKill=compute(ranges[i]);while(kill.length&&cmp(toKill.from,lst(kill).to)<=0){var replaced=kill.pop();if(cmp(replaced.from,toKill.from)<0){toKill.from=replaced.from;break}}kill.push(toKill)}runInOp(cm,function(){for(var i=kill.length-1;i>=0;i--){replaceRange(cm.doc,"",kill[i].from,kill[i].to,"+delete")}ensureCursorVisible(cm)})}var commands={selectAll:selectAll,singleSelection:function(cm){return cm.setSelection(cm.getCursor("anchor"),cm.getCursor("head"),sel_dontScroll)},killLine:function(cm){return deleteNearSelection(cm,function(range){if(range.empty()){var len=getLine(cm.doc,range.head.line).text.length;if(range.head.ch==len&&range.head.line<cm.lastLine()){return{from:range.head,to:Pos(range.head.line+1,0)}}else{return{from:range.head,to:Pos(range.head.line,len)}}}else{return{from:range.from(),to:range.to()}}})},deleteLine:function(cm){return deleteNearSelection(cm,function(range){return{from:Pos(range.from().line,0),to:clipPos(cm.doc,Pos(range.to().line+1,0))}})},delLineLeft:function(cm){return deleteNearSelection(cm,function(range){return{from:Pos(range.from().line,0),to:range.from()}})},delWrappedLineLeft:function(cm){return deleteNearSelection(cm,function(range){var top=cm.charCoords(range.head,"div").top+5;var leftPos=cm.coordsChar({left:0,top:top},"div");return{from:leftPos,to:range.from()}})},delWrappedLineRight:function(cm){return deleteNearSelection(cm,function(range){var top=cm.charCoords(range.head,"div").top+5;var rightPos=cm.coordsChar({left:cm.display.lineDiv.offsetWidth+100,top:top},"div");return{from:range.from(),to:rightPos}})},undo:function(cm){return cm.undo()},redo:function(cm){return cm.redo()},undoSelection:function(cm){return cm.undoSelection()},redoSelection:function(cm){return cm.redoSelection()},goDocStart:function(cm){return cm.extendSelection(Pos(cm.firstLine(),0))},goDocEnd:function(cm){return cm.extendSelection(Pos(cm.lastLine()))},goLineStart:function(cm){return cm.extendSelectionsBy(function(range){return lineStart(cm,range.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(cm){return cm.extendSelectionsBy(function(range){return lineStartSmart(cm,range.head)},{origin:"+move",bias:1})},goLineEnd:function(cm){return cm.extendSelectionsBy(function(range){return lineEnd(cm,range.head.line)},{origin:"+move",bias:-1})},goLineRight:function(cm){return cm.extendSelectionsBy(function(range){var top=cm.charCoords(range.head,"div").top+5;return cm.coordsChar({left:cm.display.lineDiv.offsetWidth+100,top:top},"div")},sel_move)},goLineLeft:function(cm){return cm.extendSelectionsBy(function(range){var top=cm.charCoords(range.head,"div").top+5;return cm.coordsChar({left:0,top:top},"div")},sel_move)},goLineLeftSmart:function(cm){return cm.extendSelectionsBy(function(range){var top=cm.charCoords(range.head,"div").top+5;var pos=cm.coordsChar({left:0,top:top},"div");if(pos.ch<cm.getLine(pos.line).search(/\S/)){return lineStartSmart(cm,range.head)}return pos},sel_move)},goLineUp:function(cm){return cm.moveV(-1,"line")},goLineDown:function(cm){return cm.moveV(1,"line")},goPageUp:function(cm){return cm.moveV(-1,"page")},goPageDown:function(cm){return cm.moveV(1,"page")},goCharLeft:function(cm){return cm.moveH(-1,"char")},goCharRight:function(cm){return cm.moveH(1,"char")},goColumnLeft:function(cm){return cm.moveH(-1,"column")},goColumnRight:function(cm){return cm.moveH(1,"column")},goWordLeft:function(cm){return cm.moveH(-1,"word")},goGroupRight:function(cm){return cm.moveH(1,"group")},goGroupLeft:function(cm){return cm.moveH(-1,"group")},goWordRight:function(cm){return cm.moveH(1,"word")},delCharBefore:function(cm){return cm.deleteH(-1,"char")},delCharAfter:function(cm){return cm.deleteH(1,"char")},delWordBefore:function(cm){return cm.deleteH(-1,"word")},delWordAfter:function(cm){return cm.deleteH(1,"word")},delGroupBefore:function(cm){return cm.deleteH(-1,"group")},delGroupAfter:function(cm){return cm.deleteH(1,"group")},indentAuto:function(cm){return cm.indentSelection("smart")},indentMore:function(cm){return cm.indentSelection("add")},indentLess:function(cm){return cm.indentSelection("subtract")},insertTab:function(cm){return cm.replaceSelection("	")},insertSoftTab:function(cm){var spaces=[],ranges=cm.listSelections(),tabSize=cm.options.tabSize;for(var i=0;i<ranges.length;i++){var pos=ranges[i].from();var col=countColumn(cm.getLine(pos.line),pos.ch,tabSize);spaces.push(spaceStr(tabSize-col%tabSize))}cm.replaceSelections(spaces)},defaultTab:function(cm){if(cm.somethingSelected()){cm.indentSelection("add")}else{cm.execCommand("insertTab")}},transposeChars:function(cm){return runInOp(cm,function(){var ranges=cm.listSelections(),newSel=[];for(var i=0;i<ranges.length;i++){if(!ranges[i].empty()){continue}var cur=ranges[i].head,line=getLine(cm.doc,cur.line).text;if(line){if(cur.ch==line.length){cur=new Pos(cur.line,cur.ch-1)}if(cur.ch>0){cur=new Pos(cur.line,cur.ch+1);cm.replaceRange(line.charAt(cur.ch-1)+line.charAt(cur.ch-2),Pos(cur.line,cur.ch-2),cur,"+transpose")}else if(cur.line>cm.doc.first){var prev=getLine(cm.doc,cur.line-1).text;if(prev){cur=new Pos(cur.line,1);cm.replaceRange(line.charAt(0)+cm.doc.lineSeparator()+prev.charAt(prev.length-1),Pos(cur.line-1,prev.length-1),cur,"+transpose")}}}newSel.push(new Range(cur,cur))}cm.setSelections(newSel)})},newlineAndIndent:function(cm){return runInOp(cm,function(){var sels=cm.listSelections();for(var i=sels.length-1;i>=0;i--){cm.replaceRange(cm.doc.lineSeparator(),sels[i].anchor,sels[i].head,"+input")}sels=cm.listSelections();for(var i$1=0;i$1<sels.length;i$1++){cm.indentLine(sels[i$1].from().line,null,true)}ensureCursorVisible(cm)})},openLine:function(cm){return cm.replaceSelection("\n","start")},toggleOverwrite:function(cm){return cm.toggleOverwrite()}};function lineStart(cm,lineN){var line=getLine(cm.doc,lineN);var visual=visualLine(line);if(visual!=line){lineN=lineNo(visual)}return endOfLine(true,cm,visual,lineN,1)}function lineEnd(cm,lineN){var line=getLine(cm.doc,lineN);var visual=visualLineEnd(line);if(visual!=line){lineN=lineNo(visual)}return endOfLine(true,cm,line,lineN,-1)}function lineStartSmart(cm,pos){var start=lineStart(cm,pos.line);var line=getLine(cm.doc,start.line);var order=getOrder(line,cm.doc.direction);if(!order||order[0].level==0){var firstNonWS=Math.max(0,line.text.search(/\S/));var inWS=pos.line==start.line&&pos.ch<=firstNonWS&&pos.ch;return Pos(start.line,inWS?0:firstNonWS,start.sticky)}return start}function doHandleBinding(cm,bound,dropShift){if(typeof bound=="string"){bound=commands[bound];if(!bound){return false}}cm.display.input.ensurePolled();var prevShift=cm.display.shift,done=false;try{if(cm.isReadOnly()){cm.state.suppressEdits=true}if(dropShift){cm.display.shift=false}done=bound(cm)!=Pass}finally{cm.display.shift=prevShift;cm.state.suppressEdits=false}return done}function lookupKeyForEditor(cm,name,handle){for(var i=0;i<cm.state.keyMaps.length;i++){var result=lookupKey(name,cm.state.keyMaps[i],handle,cm);if(result){return result}}return cm.options.extraKeys&&lookupKey(name,cm.options.extraKeys,handle,cm)||lookupKey(name,cm.options.keyMap,handle,cm)}var stopSeq=new Delayed;function dispatchKey(cm,name,e,handle){var seq=cm.state.keySeq;if(seq){if(isModifierKey(name)){return"handled"}stopSeq.set(50,function(){if(cm.state.keySeq==seq){cm.state.keySeq=null;cm.display.input.reset()}});name=seq+" "+name}var result=lookupKeyForEditor(cm,name,handle);if(result=="multi"){cm.state.keySeq=name}if(result=="handled"){signalLater(cm,"keyHandled",cm,name,e)}if(result=="handled"||result=="multi"){e_preventDefault(e);restartBlink(cm)}if(seq&&!result&&/\'$/.test(name)){e_preventDefault(e);return true}return!!result}function handleKeyBinding(cm,e){var name=keyName(e,true);if(!name){return false}if(e.shiftKey&&!cm.state.keySeq){return dispatchKey(cm,"Shift-"+name,e,function(b){return doHandleBinding(cm,b,true)})||dispatchKey(cm,name,e,function(b){if(typeof b=="string"?/^go[A-Z]/.test(b):b.motion){return doHandleBinding(cm,b)}})}else{return dispatchKey(cm,name,e,function(b){return doHandleBinding(cm,b)})}}function handleCharBinding(cm,e,ch){return dispatchKey(cm,"'"+ch+"'",e,function(b){return doHandleBinding(cm,b,true)})}var lastStoppedKey=null;function onKeyDown(e){var cm=this;cm.curOp.focus=activeElt();if(signalDOMEvent(cm,e)){return}if(ie&&ie_version<11&&e.keyCode==27){e.returnValue=false}var code=e.keyCode;cm.display.shift=code==16||e.shiftKey;var handled=handleKeyBinding(cm,e);if(presto){lastStoppedKey=handled?code:null;if(!handled&&code==88&&!hasCopyEvent&&(mac?e.metaKey:e.ctrlKey)){cm.replaceSelection("",null,"cut")}}if(code==18&&!/\bCodeMirror-crosshair\b/.test(cm.display.lineDiv.className)){showCrossHair(cm)}}function showCrossHair(cm){var lineDiv=cm.display.lineDiv;addClass(lineDiv,"CodeMirror-crosshair");function up(e){if(e.keyCode==18||!e.altKey){rmClass(lineDiv,"CodeMirror-crosshair");off(document,"keyup",up);off(document,"mouseover",up)}}on(document,"keyup",up);on(document,"mouseover",up)}function onKeyUp(e){if(e.keyCode==16){this.doc.sel.shift=false}signalDOMEvent(this,e)}function onKeyPress(e){var cm=this;if(eventInWidget(cm.display,e)||signalDOMEvent(cm,e)||e.ctrlKey&&!e.altKey||mac&&e.metaKey){return}var keyCode=e.keyCode,charCode=e.charCode;if(presto&&keyCode==lastStoppedKey){lastStoppedKey=null;e_preventDefault(e);return}if(presto&&(!e.which||e.which<10)&&handleKeyBinding(cm,e)){return}var ch=String.fromCharCode(charCode==null?keyCode:charCode);if(ch=="\b"){return}if(handleCharBinding(cm,e,ch)){return}cm.display.input.onKeyPress(e)}function onMouseDown(e){var cm=this,display=cm.display;if(signalDOMEvent(cm,e)||display.activeTouch&&display.input.supportsTouch()){return}display.input.ensurePolled();display.shift=e.shiftKey;if(eventInWidget(display,e)){if(!webkit){display.scroller.draggable=false;setTimeout(function(){return display.scroller.draggable=true},100)}return}if(clickInGutter(cm,e)){return}var start=posFromMouse(cm,e);window.focus();switch(e_button(e)){case 1:if(cm.state.selectingText){cm.state.selectingText(e)}else if(start){leftButtonDown(cm,e,start)}else if(e_target(e)==display.scroller){e_preventDefault(e)}break;case 2:if(webkit){cm.state.lastMiddleDown=+new Date}if(start){extendSelection(cm.doc,start)}setTimeout(function(){return display.input.focus()},20);e_preventDefault(e);break;case 3:if(captureRightClick){onContextMenu(cm,e)}else{delayBlurEvent(cm)}break}}var lastClick;var lastDoubleClick;function leftButtonDown(cm,e,start){if(ie){setTimeout(bind(ensureFocus,cm),0)}else{cm.curOp.focus=activeElt()}var now=+new Date,type;if(lastDoubleClick&&lastDoubleClick.time>now-400&&cmp(lastDoubleClick.pos,start)==0){type="triple"}else if(lastClick&&lastClick.time>now-400&&cmp(lastClick.pos,start)==0){type="double";lastDoubleClick={time:now,pos:start}}else{type="single";lastClick={time:now,pos:start}}var sel=cm.doc.sel,modifier=mac?e.metaKey:e.ctrlKey,contained;if(cm.options.dragDrop&&dragAndDrop&&!cm.isReadOnly()&&type=="single"&&(contained=sel.contains(start))>-1&&(cmp((contained=sel.ranges[contained]).from(),start)<0||start.xRel>0)&&(cmp(contained.to(),start)>0||start.xRel<0)){leftButtonStartDrag(cm,e,start,modifier)}else{leftButtonSelect(cm,e,start,type,modifier)}}function leftButtonStartDrag(cm,e,start,modifier){var display=cm.display,moved=false;var dragEnd=operation(cm,function(e){if(webkit){display.scroller.draggable=false}cm.state.draggingText=false;off(document,"mouseup",dragEnd);off(document,"mousemove",mouseMove);off(display.scroller,"dragstart",dragStart);off(display.scroller,"drop",dragEnd);if(!moved){e_preventDefault(e);if(!modifier){extendSelection(cm.doc,start)}if(webkit||ie&&ie_version==9){setTimeout(function(){document.body.focus();display.input.focus()},20)}else{display.input.focus()}}});var mouseMove=function(e2){moved=moved||Math.abs(e.clientX-e2.clientX)+Math.abs(e.clientY-e2.clientY)>=10};var dragStart=function(){return moved=true};if(webkit){display.scroller.draggable=true}cm.state.draggingText=dragEnd;dragEnd.copy=mac?e.altKey:e.ctrlKey;if(display.scroller.dragDrop){display.scroller.dragDrop()}on(document,"mouseup",dragEnd);on(document,"mousemove",mouseMove);on(display.scroller,"dragstart",dragStart);on(display.scroller,"drop",dragEnd);delayBlurEvent(cm);setTimeout(function(){return display.input.focus()},20)}function leftButtonSelect(cm,e,start,type,addNew){var display=cm.display,doc=cm.doc;e_preventDefault(e);var ourRange,ourIndex,startSel=doc.sel,ranges=startSel.ranges;if(addNew&&!e.shiftKey){ourIndex=doc.sel.contains(start);if(ourIndex>-1){ourRange=ranges[ourIndex]}else{ourRange=new Range(start,start)}}else{ourRange=doc.sel.primary();ourIndex=doc.sel.primIndex}if(chromeOS?e.shiftKey&&e.metaKey:e.altKey){type="rect";if(!addNew){ourRange=new Range(start,start)}start=posFromMouse(cm,e,true,true);ourIndex=-1}else if(type=="double"){var word=cm.findWordAt(start);if(cm.display.shift||doc.extend){ourRange=extendRange(doc,ourRange,word.anchor,word.head)}else{ourRange=word}}else if(type=="triple"){var line=new Range(Pos(start.line,0),clipPos(doc,Pos(start.line+1,0)));if(cm.display.shift||doc.extend){ourRange=extendRange(doc,ourRange,line.anchor,line.head)}else{ourRange=line}}else{ourRange=extendRange(doc,ourRange,start)}if(!addNew){ourIndex=0;setSelection(doc,new Selection([ourRange],0),sel_mouse);startSel=doc.sel}else if(ourIndex==-1){ourIndex=ranges.length;setSelection(doc,normalizeSelection(ranges.concat([ourRange]),ourIndex),{scroll:false,origin:"*mouse"})}else if(ranges.length>1&&ranges[ourIndex].empty()&&type=="single"&&!e.shiftKey){setSelection(doc,normalizeSelection(ranges.slice(0,ourIndex).concat(ranges.slice(ourIndex+1)),0),{scroll:false,origin:"*mouse"});startSel=doc.sel}else{replaceOneSelection(doc,ourIndex,ourRange,sel_mouse)}var lastPos=start;function extendTo(pos){if(cmp(lastPos,pos)==0){return}lastPos=pos;if(type=="rect"){var ranges=[],tabSize=cm.options.tabSize;var startCol=countColumn(getLine(doc,start.line).text,start.ch,tabSize);var posCol=countColumn(getLine(doc,pos.line).text,pos.ch,tabSize);var left=Math.min(startCol,posCol),right=Math.max(startCol,posCol);for(var line=Math.min(start.line,pos.line),end=Math.min(cm.lastLine(),Math.max(start.line,pos.line));line<=end;line++){var text=getLine(doc,line).text,leftPos=findColumn(text,left,tabSize);if(left==right){ranges.push(new Range(Pos(line,leftPos),Pos(line,leftPos)))}else if(text.length>leftPos){ranges.push(new Range(Pos(line,leftPos),Pos(line,findColumn(text,right,tabSize))))}}if(!ranges.length){ranges.push(new Range(start,start))}setSelection(doc,normalizeSelection(startSel.ranges.slice(0,ourIndex).concat(ranges),ourIndex),{origin:"*mouse",scroll:false});cm.scrollIntoView(pos)}else{var oldRange=ourRange;var anchor=oldRange.anchor,head=pos;if(type!="single"){var range$$1;if(type=="double"){range$$1=cm.findWordAt(pos)}else{range$$1=new Range(Pos(pos.line,0),clipPos(doc,Pos(pos.line+1,0)))}if(cmp(range$$1.anchor,anchor)>0){head=range$$1.head;anchor=minPos(oldRange.from(),range$$1.anchor)}else{head=range$$1.anchor;anchor=maxPos(oldRange.to(),range$$1.head)}}var ranges$1=startSel.ranges.slice(0);ranges$1[ourIndex]=new Range(clipPos(doc,anchor),head);setSelection(doc,normalizeSelection(ranges$1,ourIndex),sel_mouse)}}var editorSize=display.wrapper.getBoundingClientRect();var counter=0;function extend(e){var curCount=++counter;var cur=posFromMouse(cm,e,true,type=="rect");if(!cur){return}if(cmp(cur,lastPos)!=0){cm.curOp.focus=activeElt();extendTo(cur);var visible=visibleLines(display,doc);if(cur.line>=visible.to||cur.line<visible.from){setTimeout(operation(cm,function(){if(counter==curCount){extend(e)}}),150)}}else{var outside=e.clientY<editorSize.top?-20:e.clientY>editorSize.bottom?20:0;if(outside){setTimeout(operation(cm,function(){if(counter!=curCount){return}display.scroller.scrollTop+=outside;extend(e)}),50)}}}function done(e){cm.state.selectingText=false;counter=Infinity;e_preventDefault(e);display.input.focus();off(document,"mousemove",move);off(document,"mouseup",up);doc.history.lastSelOrigin=null}var move=operation(cm,function(e){if(!e_button(e)){done(e)}else{extend(e)}});var up=operation(cm,done);cm.state.selectingText=up;on(document,"mousemove",move);on(document,"mouseup",up)}function gutterEvent(cm,e,type,prevent){var mX,mY;try{mX=e.clientX;mY=e.clientY}catch(e){return false}if(mX>=Math.floor(cm.display.gutters.getBoundingClientRect().right)){return false
}if(prevent){e_preventDefault(e)}var display=cm.display;var lineBox=display.lineDiv.getBoundingClientRect();if(mY>lineBox.bottom||!hasHandler(cm,type)){return e_defaultPrevented(e)}mY-=lineBox.top-display.viewOffset;for(var i=0;i<cm.options.gutters.length;++i){var g=display.gutters.childNodes[i];if(g&&g.getBoundingClientRect().right>=mX){var line=lineAtHeight(cm.doc,mY);var gutter=cm.options.gutters[i];signal(cm,type,cm,line,gutter,e);return e_defaultPrevented(e)}}}function clickInGutter(cm,e){return gutterEvent(cm,e,"gutterClick",true)}function onContextMenu(cm,e){if(eventInWidget(cm.display,e)||contextMenuInGutter(cm,e)){return}if(signalDOMEvent(cm,e,"contextmenu")){return}cm.display.input.onContextMenu(e)}function contextMenuInGutter(cm,e){if(!hasHandler(cm,"gutterContextMenu")){return false}return gutterEvent(cm,e,"gutterContextMenu",false)}function themeChanged(cm){cm.display.wrapper.className=cm.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+cm.options.theme.replace(/(^|\s)\s*/g," cm-s-");clearCaches(cm)}var Init={toString:function(){return"CodeMirror.Init"}};var defaults={};var optionHandlers={};function defineOptions(CodeMirror){var optionHandlers=CodeMirror.optionHandlers;function option(name,deflt,handle,notOnInit){CodeMirror.defaults[name]=deflt;if(handle){optionHandlers[name]=notOnInit?function(cm,val,old){if(old!=Init){handle(cm,val,old)}}:handle}}CodeMirror.defineOption=option;CodeMirror.Init=Init;option("value","",function(cm,val){return cm.setValue(val)},true);option("mode",null,function(cm,val){cm.doc.modeOption=val;loadMode(cm)},true);option("indentUnit",2,loadMode,true);option("indentWithTabs",false);option("smartIndent",true);option("tabSize",4,function(cm){resetModeState(cm);clearCaches(cm);regChange(cm)},true);option("lineSeparator",null,function(cm,val){cm.doc.lineSep=val;if(!val){return}var newBreaks=[],lineNo=cm.doc.first;cm.doc.iter(function(line){for(var pos=0;;){var found=line.text.indexOf(val,pos);if(found==-1){break}pos=found+val.length;newBreaks.push(Pos(lineNo,found))}lineNo++});for(var i=newBreaks.length-1;i>=0;i--){replaceRange(cm.doc,val,newBreaks[i],Pos(newBreaks[i].line,newBreaks[i].ch+val.length))}});option("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b-\u200f\u2028\u2029\ufeff]/g,function(cm,val,old){cm.state.specialChars=new RegExp(val.source+(val.test("	")?"":"|	"),"g");if(old!=Init){cm.refresh()}});option("specialCharPlaceholder",defaultSpecialCharPlaceholder,function(cm){return cm.refresh()},true);option("electricChars",true);option("inputStyle",mobile?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor")},true);option("spellcheck",false,function(cm,val){return cm.getInputField().spellcheck=val},true);option("rtlMoveVisually",!windows);option("wholeLineUpdateBefore",true);option("theme","default",function(cm){themeChanged(cm);guttersChanged(cm)},true);option("keyMap","default",function(cm,val,old){var next=getKeyMap(val);var prev=old!=Init&&getKeyMap(old);if(prev&&prev.detach){prev.detach(cm,next)}if(next.attach){next.attach(cm,prev||null)}});option("extraKeys",null);option("lineWrapping",false,wrappingChanged,true);option("gutters",[],function(cm){setGuttersForLineNumbers(cm.options);guttersChanged(cm)},true);option("fixedGutter",true,function(cm,val){cm.display.gutters.style.left=val?compensateForHScroll(cm.display)+"px":"0";cm.refresh()},true);option("coverGutterNextToScrollbar",false,function(cm){return updateScrollbars(cm)},true);option("scrollbarStyle","native",function(cm){initScrollbars(cm);updateScrollbars(cm);cm.display.scrollbars.setScrollTop(cm.doc.scrollTop);cm.display.scrollbars.setScrollLeft(cm.doc.scrollLeft)},true);option("lineNumbers",false,function(cm){setGuttersForLineNumbers(cm.options);guttersChanged(cm)},true);option("firstLineNumber",1,guttersChanged,true);option("lineNumberFormatter",function(integer){return integer},guttersChanged,true);option("showCursorWhenSelecting",false,updateSelection,true);option("resetSelectionOnContextMenu",true);option("lineWiseCopyCut",true);option("readOnly",false,function(cm,val){if(val=="nocursor"){onBlur(cm);cm.display.input.blur();cm.display.disabled=true}else{cm.display.disabled=false}cm.display.input.readOnlyChanged(val)});option("disableInput",false,function(cm,val){if(!val){cm.display.input.reset()}},true);option("dragDrop",true,dragDropChanged);option("allowDropFileTypes",null);option("cursorBlinkRate",530);option("cursorScrollMargin",0);option("cursorHeight",1,updateSelection,true);option("singleCursorHeightPerLine",true,updateSelection,true);option("workTime",100);option("workDelay",100);option("flattenSpans",true,resetModeState,true);option("addModeClass",false,resetModeState,true);option("pollInterval",100);option("undoDepth",200,function(cm,val){return cm.doc.history.undoDepth=val});option("historyEventDelay",1250);option("viewportMargin",10,function(cm){return cm.refresh()},true);option("maxHighlightLength",1e4,resetModeState,true);option("moveInputWithCursor",true,function(cm,val){if(!val){cm.display.input.resetPosition()}});option("tabindex",null,function(cm,val){return cm.display.input.getField().tabIndex=val||""});option("autofocus",null);option("direction","ltr",function(cm,val){return cm.doc.setDirection(val)},true)}function guttersChanged(cm){updateGutters(cm);regChange(cm);alignHorizontally(cm)}function dragDropChanged(cm,value,old){var wasOn=old&&old!=Init;if(!value!=!wasOn){var funcs=cm.display.dragFunctions;var toggle=value?on:off;toggle(cm.display.scroller,"dragstart",funcs.start);toggle(cm.display.scroller,"dragenter",funcs.enter);toggle(cm.display.scroller,"dragover",funcs.over);toggle(cm.display.scroller,"dragleave",funcs.leave);toggle(cm.display.scroller,"drop",funcs.drop)}}function wrappingChanged(cm){if(cm.options.lineWrapping){addClass(cm.display.wrapper,"CodeMirror-wrap");cm.display.sizer.style.minWidth="";cm.display.sizerWidth=null}else{rmClass(cm.display.wrapper,"CodeMirror-wrap");findMaxLine(cm)}estimateLineHeights(cm);regChange(cm);clearCaches(cm);setTimeout(function(){return updateScrollbars(cm)},100)}function CodeMirror$1(place,options){var this$1=this;if(!(this instanceof CodeMirror$1)){return new CodeMirror$1(place,options)}this.options=options=options?copyObj(options):{};copyObj(defaults,options,false);setGuttersForLineNumbers(options);var doc=options.value;if(typeof doc=="string"){doc=new Doc(doc,options.mode,null,options.lineSeparator,options.direction)}this.doc=doc;var input=new CodeMirror$1.inputStyles[options.inputStyle](this);var display=this.display=new Display(place,doc,input);display.wrapper.CodeMirror=this;updateGutters(this);themeChanged(this);if(options.lineWrapping){this.display.wrapper.className+=" CodeMirror-wrap"}initScrollbars(this);this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:false,delayingBlurEvent:false,focused:false,suppressEdits:false,pasteIncoming:false,cutIncoming:false,selectingText:false,draggingText:false,highlight:new Delayed,keySeq:null,specialChars:null};if(options.autofocus&&!mobile){display.input.focus()}if(ie&&ie_version<11){setTimeout(function(){return this$1.display.input.reset(true)},20)}registerEventHandlers(this);ensureGlobalHandlers();startOperation(this);this.curOp.forceUpdate=true;attachDoc(this,doc);if(options.autofocus&&!mobile||this.hasFocus()){setTimeout(bind(onFocus,this),20)}else{onBlur(this)}for(var opt in optionHandlers){if(optionHandlers.hasOwnProperty(opt)){optionHandlers[opt](this$1,options[opt],Init)}}maybeUpdateLineNumberWidth(this);if(options.finishInit){options.finishInit(this)}for(var i=0;i<initHooks.length;++i){initHooks[i](this$1)}endOperation(this);if(webkit&&options.lineWrapping&&getComputedStyle(display.lineDiv).textRendering=="optimizelegibility"){display.lineDiv.style.textRendering="auto"}}CodeMirror$1.defaults=defaults;CodeMirror$1.optionHandlers=optionHandlers;function registerEventHandlers(cm){var d=cm.display;on(d.scroller,"mousedown",operation(cm,onMouseDown));if(ie&&ie_version<11){on(d.scroller,"dblclick",operation(cm,function(e){if(signalDOMEvent(cm,e)){return}var pos=posFromMouse(cm,e);if(!pos||clickInGutter(cm,e)||eventInWidget(cm.display,e)){return}e_preventDefault(e);var word=cm.findWordAt(pos);extendSelection(cm.doc,word.anchor,word.head)}))}else{on(d.scroller,"dblclick",function(e){return signalDOMEvent(cm,e)||e_preventDefault(e)})}if(!captureRightClick){on(d.scroller,"contextmenu",function(e){return onContextMenu(cm,e)})}var touchFinished,prevTouch={end:0};function finishTouch(){if(d.activeTouch){touchFinished=setTimeout(function(){return d.activeTouch=null},1e3);prevTouch=d.activeTouch;prevTouch.end=+new Date}}function isMouseLikeTouchEvent(e){if(e.touches.length!=1){return false}var touch=e.touches[0];return touch.radiusX<=1&&touch.radiusY<=1}function farAway(touch,other){if(other.left==null){return true}var dx=other.left-touch.left,dy=other.top-touch.top;return dx*dx+dy*dy>20*20}on(d.scroller,"touchstart",function(e){if(!signalDOMEvent(cm,e)&&!isMouseLikeTouchEvent(e)){d.input.ensurePolled();clearTimeout(touchFinished);var now=+new Date;d.activeTouch={start:now,moved:false,prev:now-prevTouch.end<=300?prevTouch:null};if(e.touches.length==1){d.activeTouch.left=e.touches[0].pageX;d.activeTouch.top=e.touches[0].pageY}}});on(d.scroller,"touchmove",function(){if(d.activeTouch){d.activeTouch.moved=true}});on(d.scroller,"touchend",function(e){var touch=d.activeTouch;if(touch&&!eventInWidget(d,e)&&touch.left!=null&&!touch.moved&&new Date-touch.start<300){var pos=cm.coordsChar(d.activeTouch,"page"),range;if(!touch.prev||farAway(touch,touch.prev)){range=new Range(pos,pos)}else if(!touch.prev.prev||farAway(touch,touch.prev.prev)){range=cm.findWordAt(pos)}else{range=new Range(Pos(pos.line,0),clipPos(cm.doc,Pos(pos.line+1,0)))}cm.setSelection(range.anchor,range.head);cm.focus();e_preventDefault(e)}finishTouch()});on(d.scroller,"touchcancel",finishTouch);on(d.scroller,"scroll",function(){if(d.scroller.clientHeight){updateScrollTop(cm,d.scroller.scrollTop);setScrollLeft(cm,d.scroller.scrollLeft,true);signal(cm,"scroll",cm)}});on(d.scroller,"mousewheel",function(e){return onScrollWheel(cm,e)});on(d.scroller,"DOMMouseScroll",function(e){return onScrollWheel(cm,e)});on(d.wrapper,"scroll",function(){return d.wrapper.scrollTop=d.wrapper.scrollLeft=0});d.dragFunctions={enter:function(e){if(!signalDOMEvent(cm,e)){e_stop(e)}},over:function(e){if(!signalDOMEvent(cm,e)){onDragOver(cm,e);e_stop(e)}},start:function(e){return onDragStart(cm,e)},drop:operation(cm,onDrop),leave:function(e){if(!signalDOMEvent(cm,e)){clearDragCursor(cm)}}};var inp=d.input.getField();on(inp,"keyup",function(e){return onKeyUp.call(cm,e)});on(inp,"keydown",operation(cm,onKeyDown));on(inp,"keypress",operation(cm,onKeyPress));on(inp,"focus",function(e){return onFocus(cm,e)});on(inp,"blur",function(e){return onBlur(cm,e)})}var initHooks=[];CodeMirror$1.defineInitHook=function(f){return initHooks.push(f)};function indentLine(cm,n,how,aggressive){var doc=cm.doc,state;if(how==null){how="add"}if(how=="smart"){if(!doc.mode.indent){how="prev"}else{state=getStateBefore(cm,n)}}var tabSize=cm.options.tabSize;var line=getLine(doc,n),curSpace=countColumn(line.text,null,tabSize);if(line.stateAfter){line.stateAfter=null}var curSpaceString=line.text.match(/^\s*/)[0],indentation;if(!aggressive&&!/\S/.test(line.text)){indentation=0;how="not"}else if(how=="smart"){indentation=doc.mode.indent(state,line.text.slice(curSpaceString.length),line.text);if(indentation==Pass||indentation>150){if(!aggressive){return}how="prev"}}if(how=="prev"){if(n>doc.first){indentation=countColumn(getLine(doc,n-1).text,null,tabSize)}else{indentation=0}}else if(how=="add"){indentation=curSpace+cm.options.indentUnit}else if(how=="subtract"){indentation=curSpace-cm.options.indentUnit}else if(typeof how=="number"){indentation=curSpace+how}indentation=Math.max(0,indentation);var indentString="",pos=0;if(cm.options.indentWithTabs){for(var i=Math.floor(indentation/tabSize);i;--i){pos+=tabSize;indentString+="	"}}if(pos<indentation){indentString+=spaceStr(indentation-pos)}if(indentString!=curSpaceString){replaceRange(doc,indentString,Pos(n,0),Pos(n,curSpaceString.length),"+input");line.stateAfter=null;return true}else{for(var i$1=0;i$1<doc.sel.ranges.length;i$1++){var range=doc.sel.ranges[i$1];if(range.head.line==n&&range.head.ch<curSpaceString.length){var pos$1=Pos(n,curSpaceString.length);replaceOneSelection(doc,i$1,new Range(pos$1,pos$1));break}}}}var lastCopied=null;function setLastCopied(newLastCopied){lastCopied=newLastCopied}function applyTextInput(cm,inserted,deleted,sel,origin){var doc=cm.doc;cm.display.shift=false;if(!sel){sel=doc.sel}var paste=cm.state.pasteIncoming||origin=="paste";var textLines=splitLinesAuto(inserted),multiPaste=null;if(paste&&sel.ranges.length>1){if(lastCopied&&lastCopied.text.join("\n")==inserted){if(sel.ranges.length%lastCopied.text.length==0){multiPaste=[];for(var i=0;i<lastCopied.text.length;i++){multiPaste.push(doc.splitLines(lastCopied.text[i]))}}}else if(textLines.length==sel.ranges.length){multiPaste=map(textLines,function(l){return[l]})}}var updateInput;for(var i$1=sel.ranges.length-1;i$1>=0;i$1--){var range$$1=sel.ranges[i$1];var from=range$$1.from(),to=range$$1.to();if(range$$1.empty()){if(deleted&&deleted>0){from=Pos(from.line,from.ch-deleted)}else if(cm.state.overwrite&&!paste){to=Pos(to.line,Math.min(getLine(doc,to.line).text.length,to.ch+lst(textLines).length))}else if(lastCopied&&lastCopied.lineWise&&lastCopied.text.join("\n")==inserted){from=to=Pos(from.line,0)}}updateInput=cm.curOp.updateInput;var changeEvent={from:from,to:to,text:multiPaste?multiPaste[i$1%multiPaste.length]:textLines,origin:origin||(paste?"paste":cm.state.cutIncoming?"cut":"+input")};makeChange(cm.doc,changeEvent);signalLater(cm,"inputRead",cm,changeEvent)}if(inserted&&!paste){triggerElectric(cm,inserted)}ensureCursorVisible(cm);cm.curOp.updateInput=updateInput;cm.curOp.typing=true;cm.state.pasteIncoming=cm.state.cutIncoming=false}function handlePaste(e,cm){var pasted=e.clipboardData&&e.clipboardData.getData("Text");if(pasted){e.preventDefault();if(!cm.isReadOnly()&&!cm.options.disableInput){runInOp(cm,function(){return applyTextInput(cm,pasted,0,null,"paste")})}return true}}function triggerElectric(cm,inserted){if(!cm.options.electricChars||!cm.options.smartIndent){return}var sel=cm.doc.sel;for(var i=sel.ranges.length-1;i>=0;i--){var range$$1=sel.ranges[i];if(range$$1.head.ch>100||i&&sel.ranges[i-1].head.line==range$$1.head.line){continue}var mode=cm.getModeAt(range$$1.head);var indented=false;if(mode.electricChars){for(var j=0;j<mode.electricChars.length;j++){if(inserted.indexOf(mode.electricChars.charAt(j))>-1){indented=indentLine(cm,range$$1.head.line,"smart");break}}}else if(mode.electricInput){if(mode.electricInput.test(getLine(cm.doc,range$$1.head.line).text.slice(0,range$$1.head.ch))){indented=indentLine(cm,range$$1.head.line,"smart")}}if(indented){signalLater(cm,"electricInput",cm,range$$1.head.line)}}}function copyableRanges(cm){var text=[],ranges=[];for(var i=0;i<cm.doc.sel.ranges.length;i++){var line=cm.doc.sel.ranges[i].head.line;var lineRange={anchor:Pos(line,0),head:Pos(line+1,0)};ranges.push(lineRange);text.push(cm.getRange(lineRange.anchor,lineRange.head))}return{text:text,ranges:ranges}}function disableBrowserMagic(field,spellcheck){field.setAttribute("autocorrect","off");field.setAttribute("autocapitalize","off");field.setAttribute("spellcheck",!!spellcheck)}function hiddenTextarea(){var te=elt("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; outline: none");var div=elt("div",[te],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");if(webkit){te.style.width="1000px"}else{te.setAttribute("wrap","off")}if(ios){te.style.border="1px solid black"}disableBrowserMagic(te);return div}var addEditorMethods=function(CodeMirror){var optionHandlers=CodeMirror.optionHandlers;var helpers=CodeMirror.helpers={};CodeMirror.prototype={constructor:CodeMirror,focus:function(){window.focus();this.display.input.focus()},setOption:function(option,value){var options=this.options,old=options[option];if(options[option]==value&&option!="mode"){return}options[option]=value;if(optionHandlers.hasOwnProperty(option)){operation(this,optionHandlers[option])(this,value,old)}signal(this,"optionChange",this,option)},getOption:function(option){return this.options[option]},getDoc:function(){return this.doc},addKeyMap:function(map$$1,bottom){this.state.keyMaps[bottom?"push":"unshift"](getKeyMap(map$$1))},removeKeyMap:function(map$$1){var maps=this.state.keyMaps;for(var i=0;i<maps.length;++i){if(maps[i]==map$$1||maps[i].name==map$$1){maps.splice(i,1);return true}}},addOverlay:methodOp(function(spec,options){var mode=spec.token?spec:CodeMirror.getMode(this.options,spec);if(mode.startState){throw new Error("Overlays may not be stateful.")}insertSorted(this.state.overlays,{mode:mode,modeSpec:spec,opaque:options&&options.opaque,priority:options&&options.priority||0},function(overlay){return overlay.priority});this.state.modeGen++;regChange(this)}),removeOverlay:methodOp(function(spec){var this$1=this;var overlays=this.state.overlays;for(var i=0;i<overlays.length;++i){var cur=overlays[i].modeSpec;if(cur==spec||typeof spec=="string"&&cur.name==spec){overlays.splice(i,1);this$1.state.modeGen++;regChange(this$1);return}}}),indentLine:methodOp(function(n,dir,aggressive){if(typeof dir!="string"&&typeof dir!="number"){if(dir==null){dir=this.options.smartIndent?"smart":"prev"}else{dir=dir?"add":"subtract"}}if(isLine(this.doc,n)){indentLine(this,n,dir,aggressive)}}),indentSelection:methodOp(function(how){var this$1=this;var ranges=this.doc.sel.ranges,end=-1;for(var i=0;i<ranges.length;i++){var range$$1=ranges[i];if(!range$$1.empty()){var from=range$$1.from(),to=range$$1.to();var start=Math.max(end,from.line);end=Math.min(this$1.lastLine(),to.line-(to.ch?0:1))+1;for(var j=start;j<end;++j){indentLine(this$1,j,how)}var newRanges=this$1.doc.sel.ranges;if(from.ch==0&&ranges.length==newRanges.length&&newRanges[i].from().ch>0){replaceOneSelection(this$1.doc,i,new Range(from,newRanges[i].to()),sel_dontScroll)}}else if(range$$1.head.line>end){indentLine(this$1,range$$1.head.line,how,true);end=range$$1.head.line;if(i==this$1.doc.sel.primIndex){ensureCursorVisible(this$1)}}}}),getTokenAt:function(pos,precise){return takeToken(this,pos,precise)},getLineTokens:function(line,precise){return takeToken(this,Pos(line),precise,true)},getTokenTypeAt:function(pos){pos=clipPos(this.doc,pos);var styles=getLineStyles(this,getLine(this.doc,pos.line));var before=0,after=(styles.length-1)/2,ch=pos.ch;var type;if(ch==0){type=styles[2]}else{for(;;){var mid=before+after>>1;if((mid?styles[mid*2-1]:0)>=ch){after=mid}else if(styles[mid*2+1]<ch){before=mid+1}else{type=styles[mid*2+2];break}}}var cut=type?type.indexOf("overlay "):-1;return cut<0?type:cut==0?null:type.slice(0,cut-1)},getModeAt:function(pos){var mode=this.doc.mode;if(!mode.innerMode){return mode}return CodeMirror.innerMode(mode,this.getTokenAt(pos).state).mode},getHelper:function(pos,type){return this.getHelpers(pos,type)[0]},getHelpers:function(pos,type){var this$1=this;var found=[];if(!helpers.hasOwnProperty(type)){return found}var help=helpers[type],mode=this.getModeAt(pos);if(typeof mode[type]=="string"){if(help[mode[type]]){found.push(help[mode[type]])}}else if(mode[type]){for(var i=0;i<mode[type].length;i++){var val=help[mode[type][i]];if(val){found.push(val)}}}else if(mode.helperType&&help[mode.helperType]){found.push(help[mode.helperType])}else if(help[mode.name]){found.push(help[mode.name])}for(var i$1=0;i$1<help._global.length;i$1++){var cur=help._global[i$1];if(cur.pred(mode,this$1)&&indexOf(found,cur.val)==-1){found.push(cur.val)}}return found},getStateAfter:function(line,precise){var doc=this.doc;line=clipLine(doc,line==null?doc.first+doc.size-1:line);return getStateBefore(this,line+1,precise)},cursorCoords:function(start,mode){var pos,range$$1=this.doc.sel.primary();if(start==null){pos=range$$1.head}else if(typeof start=="object"){pos=clipPos(this.doc,start)}else{pos=start?range$$1.from():range$$1.to()}return cursorCoords(this,pos,mode||"page")},charCoords:function(pos,mode){return charCoords(this,clipPos(this.doc,pos),mode||"page")},coordsChar:function(coords,mode){coords=fromCoordSystem(this,coords,mode||"page");return coordsChar(this,coords.left,coords.top)},lineAtHeight:function(height,mode){height=fromCoordSystem(this,{top:height,left:0},mode||"page").top;return lineAtHeight(this.doc,height+this.display.viewOffset)},heightAtLine:function(line,mode,includeWidgets){var end=false,lineObj;if(typeof line=="number"){var last=this.doc.first+this.doc.size-1;if(line<this.doc.first){line=this.doc.first}else if(line>last){line=last;end=true}lineObj=getLine(this.doc,line)}else{lineObj=line}return intoCoordSystem(this,lineObj,{top:0,left:0},mode||"page",includeWidgets||end).top+(end?this.doc.height-heightAtLine(lineObj):0)},defaultTextHeight:function(){return textHeight(this.display)},defaultCharWidth:function(){return charWidth(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(pos,node,scroll,vert,horiz){var display=this.display;pos=cursorCoords(this,clipPos(this.doc,pos));var top=pos.bottom,left=pos.left;node.style.position="absolute";node.setAttribute("cm-ignore-events","true");this.display.input.setUneditable(node);display.sizer.appendChild(node);if(vert=="over"){top=pos.top}else if(vert=="above"||vert=="near"){var vspace=Math.max(display.wrapper.clientHeight,this.doc.height),hspace=Math.max(display.sizer.clientWidth,display.lineSpace.clientWidth);if((vert=="above"||pos.bottom+node.offsetHeight>vspace)&&pos.top>node.offsetHeight){top=pos.top-node.offsetHeight}else if(pos.bottom+node.offsetHeight<=vspace){top=pos.bottom}if(left+node.offsetWidth>hspace){left=hspace-node.offsetWidth}}node.style.top=top+"px";node.style.left=node.style.right="";if(horiz=="right"){left=display.sizer.clientWidth-node.offsetWidth;node.style.right="0px"}else{if(horiz=="left"){left=0}else if(horiz=="middle"){left=(display.sizer.clientWidth-node.offsetWidth)/2}node.style.left=left+"px"}if(scroll){scrollIntoView(this,{left:left,top:top,right:left+node.offsetWidth,bottom:top+node.offsetHeight})}},triggerOnKeyDown:methodOp(onKeyDown),triggerOnKeyPress:methodOp(onKeyPress),triggerOnKeyUp:onKeyUp,execCommand:function(cmd){if(commands.hasOwnProperty(cmd)){return commands[cmd].call(null,this)}},triggerElectric:methodOp(function(text){triggerElectric(this,text)}),findPosH:function(from,amount,unit,visually){var this$1=this;var dir=1;if(amount<0){dir=-1;amount=-amount}var cur=clipPos(this.doc,from);for(var i=0;i<amount;++i){cur=findPosH(this$1.doc,cur,dir,unit,visually);if(cur.hitSide){break}}return cur},moveH:methodOp(function(dir,unit){var this$1=this;this.extendSelectionsBy(function(range$$1){if(this$1.display.shift||this$1.doc.extend||range$$1.empty()){return findPosH(this$1.doc,range$$1.head,dir,unit,this$1.options.rtlMoveVisually)}else{return dir<0?range$$1.from():range$$1.to()}},sel_move)}),deleteH:methodOp(function(dir,unit){var sel=this.doc.sel,doc=this.doc;if(sel.somethingSelected()){doc.replaceSelection("",null,"+delete")}else{deleteNearSelection(this,function(range$$1){var other=findPosH(doc,range$$1.head,dir,unit,false);return dir<0?{from:other,to:range$$1.head}:{from:range$$1.head,to:other}})}}),findPosV:function(from,amount,unit,goalColumn){var this$1=this;var dir=1,x=goalColumn;if(amount<0){dir=-1;amount=-amount}var cur=clipPos(this.doc,from);for(var i=0;i<amount;++i){var coords=cursorCoords(this$1,cur,"div");if(x==null){x=coords.left}else{coords.left=x}cur=findPosV(this$1,coords,dir,unit);if(cur.hitSide){break}}return cur},moveV:methodOp(function(dir,unit){var this$1=this;var doc=this.doc,goals=[];var collapse=!this.display.shift&&!doc.extend&&doc.sel.somethingSelected();doc.extendSelectionsBy(function(range$$1){if(collapse){return dir<0?range$$1.from():range$$1.to()}var headPos=cursorCoords(this$1,range$$1.head,"div");if(range$$1.goalColumn!=null){headPos.left=range$$1.goalColumn}goals.push(headPos.left);var pos=findPosV(this$1,headPos,dir,unit);if(unit=="page"&&range$$1==doc.sel.primary()){addToScrollTop(this$1,charCoords(this$1,pos,"div").top-headPos.top)}return pos},sel_move);if(goals.length){for(var i=0;i<doc.sel.ranges.length;i++){doc.sel.ranges[i].goalColumn=goals[i]}}}),findWordAt:function(pos){var doc=this.doc,line=getLine(doc,pos.line).text;var start=pos.ch,end=pos.ch;if(line){var helper=this.getHelper(pos,"wordChars");if((pos.sticky=="before"||end==line.length)&&start){--start}else{++end}var startChar=line.charAt(start);var check=isWordChar(startChar,helper)?function(ch){return isWordChar(ch,helper)}:/\s/.test(startChar)?function(ch){return/\s/.test(ch)}:function(ch){return!/\s/.test(ch)&&!isWordChar(ch)};while(start>0&&check(line.charAt(start-1))){--start}while(end<line.length&&check(line.charAt(end))){++end}}return new Range(Pos(pos.line,start),Pos(pos.line,end))},toggleOverwrite:function(value){if(value!=null&&value==this.state.overwrite){return}if(this.state.overwrite=!this.state.overwrite){addClass(this.display.cursorDiv,"CodeMirror-overwrite")}else{rmClass(this.display.cursorDiv,"CodeMirror-overwrite")}signal(this,"overwriteToggle",this,this.state.overwrite)},hasFocus:function(){return this.display.input.getField()==activeElt()},isReadOnly:function(){return!!(this.options.readOnly||this.doc.cantEdit)},scrollTo:methodOp(function(x,y){scrollToCoords(this,x,y)}),getScrollInfo:function(){var scroller=this.display.scroller;return{left:scroller.scrollLeft,top:scroller.scrollTop,height:scroller.scrollHeight-scrollGap(this)-this.display.barHeight,width:scroller.scrollWidth-scrollGap(this)-this.display.barWidth,clientHeight:displayHeight(this),clientWidth:displayWidth(this)}},scrollIntoView:methodOp(function(range$$1,margin){if(range$$1==null){range$$1={from:this.doc.sel.primary().head,to:null};if(margin==null){margin=this.options.cursorScrollMargin}}else if(typeof range$$1=="number"){range$$1={from:Pos(range$$1,0),to:null}}else if(range$$1.from==null){range$$1={from:range$$1,to:null}}if(!range$$1.to){range$$1.to=range$$1.from}range$$1.margin=margin||0;if(range$$1.from.line!=null){scrollToRange(this,range$$1)}else{scrollToCoordsRange(this,range$$1.from,range$$1.to,range$$1.margin)}}),setSize:methodOp(function(width,height){var this$1=this;var interpret=function(val){return typeof val=="number"||/^\d+$/.test(String(val))?val+"px":val};if(width!=null){this.display.wrapper.style.width=interpret(width)}if(height!=null){this.display.wrapper.style.height=interpret(height)}if(this.options.lineWrapping){clearLineMeasurementCache(this)}var lineNo$$1=this.display.viewFrom;this.doc.iter(lineNo$$1,this.display.viewTo,function(line){if(line.widgets){for(var i=0;i<line.widgets.length;i++){if(line.widgets[i].noHScroll){regLineChange(this$1,lineNo$$1,"widget");break}}}++lineNo$$1});this.curOp.forceUpdate=true;signal(this,"refresh",this)}),operation:function(f){return runInOp(this,f)},refresh:methodOp(function(){var oldHeight=this.display.cachedTextHeight;regChange(this);this.curOp.forceUpdate=true;clearCaches(this);scrollToCoords(this,this.doc.scrollLeft,this.doc.scrollTop);updateGutterSpace(this);if(oldHeight==null||Math.abs(oldHeight-textHeight(this.display))>.5){estimateLineHeights(this)}signal(this,"refresh",this)}),swapDoc:methodOp(function(doc){var old=this.doc;old.cm=null;attachDoc(this,doc);clearCaches(this);this.display.input.reset();scrollToCoords(this,doc.scrollLeft,doc.scrollTop);this.curOp.forceScroll=true;signalLater(this,"swapDoc",this,old);return old}),getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}};eventMixin(CodeMirror);CodeMirror.registerHelper=function(type,name,value){if(!helpers.hasOwnProperty(type)){helpers[type]=CodeMirror[type]={_global:[]}}helpers[type][name]=value};CodeMirror.registerGlobalHelper=function(type,name,predicate,value){CodeMirror.registerHelper(type,name,value);helpers[type]._global.push({pred:predicate,val:value})}};function findPosH(doc,pos,dir,unit,visually){var oldPos=pos;var origDir=dir;var lineObj=getLine(doc,pos.line);function findNextLine(){var l=pos.line+dir;if(l<doc.first||l>=doc.first+doc.size){return false}pos=new Pos(l,pos.ch,pos.sticky);return lineObj=getLine(doc,l)}function moveOnce(boundToLine){var next;if(visually){next=moveVisually(doc.cm,lineObj,pos,dir)}else{next=moveLogically(lineObj,pos,dir)}if(next==null){if(!boundToLine&&findNextLine()){pos=endOfLine(visually,doc.cm,lineObj,pos.line,dir)}else{return false}}else{pos=next}return true}if(unit=="char"){moveOnce()}else if(unit=="column"){moveOnce(true)}else if(unit=="word"||unit=="group"){var sawType=null,group=unit=="group";var helper=doc.cm&&doc.cm.getHelper(pos,"wordChars");for(var first=true;;first=false){if(dir<0&&!moveOnce(!first)){break}var cur=lineObj.text.charAt(pos.ch)||"\n";var type=isWordChar(cur,helper)?"w":group&&cur=="\n"?"n":!group||/\s/.test(cur)?null:"p";if(group&&!first&&!type){type="s"}if(sawType&&sawType!=type){if(dir<0){dir=1;moveOnce();pos.sticky="after"}break}if(type){sawType=type}if(dir>0&&!moveOnce(!first)){break}}}var result=skipAtomic(doc,pos,oldPos,origDir,true);if(equalCursorPos(oldPos,result)){result.hitSide=true}return result}function findPosV(cm,pos,dir,unit){var doc=cm.doc,x=pos.left,y;if(unit=="page"){var pageSize=Math.min(cm.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight);var moveAmount=Math.max(pageSize-.5*textHeight(cm.display),3);y=(dir>0?pos.bottom:pos.top)+dir*moveAmount}else if(unit=="line"){y=dir>0?pos.bottom+3:pos.top-3}var target;for(;;){target=coordsChar(cm,x,y);if(!target.outside){break}if(dir<0?y<=0:y>=doc.height){target.hitSide=true;break}y+=dir*5}return target}var ContentEditableInput=function(cm){this.cm=cm;this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null;this.polling=new Delayed;this.composing=null;this.gracePeriod=false;this.readDOMTimeout=null};ContentEditableInput.prototype.init=function(display){var this$1=this;var input=this,cm=input.cm;var div=input.div=display.lineDiv;disableBrowserMagic(div,cm.options.spellcheck);on(div,"paste",function(e){if(signalDOMEvent(cm,e)||handlePaste(e,cm)){return}if(ie_version<=11){setTimeout(operation(cm,function(){return this$1.updateFromDOM()}),20)}});on(div,"compositionstart",function(e){this$1.composing={data:e.data,done:false}});on(div,"compositionupdate",function(e){if(!this$1.composing){this$1.composing={data:e.data,done:false}}});on(div,"compositionend",function(e){if(this$1.composing){if(e.data!=this$1.composing.data){this$1.readFromDOMSoon()}this$1.composing.done=true}});on(div,"touchstart",function(){return input.forceCompositionEnd()});on(div,"input",function(){if(!this$1.composing){this$1.readFromDOMSoon()}});function onCopyCut(e){if(signalDOMEvent(cm,e)){return}if(cm.somethingSelected()){setLastCopied({lineWise:false,text:cm.getSelections()});if(e.type=="cut"){cm.replaceSelection("",null,"cut")}}else if(!cm.options.lineWiseCopyCut){return}else{var ranges=copyableRanges(cm);setLastCopied({lineWise:true,text:ranges.text});if(e.type=="cut"){cm.operation(function(){cm.setSelections(ranges.ranges,0,sel_dontScroll);cm.replaceSelection("",null,"cut")})}}if(e.clipboardData){e.clipboardData.clearData();var content=lastCopied.text.join("\n");e.clipboardData.setData("Text",content);if(e.clipboardData.getData("Text")==content){e.preventDefault();return}}var kludge=hiddenTextarea(),te=kludge.firstChild;cm.display.lineSpace.insertBefore(kludge,cm.display.lineSpace.firstChild);te.value=lastCopied.text.join("\n");var hadFocus=document.activeElement;selectInput(te);setTimeout(function(){cm.display.lineSpace.removeChild(kludge);
hadFocus.focus();if(hadFocus==div){input.showPrimarySelection()}},50)}on(div,"copy",onCopyCut);on(div,"cut",onCopyCut)};ContentEditableInput.prototype.prepareSelection=function(){var result=prepareSelection(this.cm,false);result.focus=this.cm.state.focused;return result};ContentEditableInput.prototype.showSelection=function(info,takeFocus){if(!info||!this.cm.display.view.length){return}if(info.focus||takeFocus){this.showPrimarySelection()}this.showMultipleSelections(info)};ContentEditableInput.prototype.showPrimarySelection=function(){var sel=window.getSelection(),cm=this.cm,prim=cm.doc.sel.primary();var from=prim.from(),to=prim.to();if(cm.display.viewTo==cm.display.viewFrom||from.line>=cm.display.viewTo||to.line<cm.display.viewFrom){sel.removeAllRanges();return}var curAnchor=domToPos(cm,sel.anchorNode,sel.anchorOffset);var curFocus=domToPos(cm,sel.focusNode,sel.focusOffset);if(curAnchor&&!curAnchor.bad&&curFocus&&!curFocus.bad&&cmp(minPos(curAnchor,curFocus),from)==0&&cmp(maxPos(curAnchor,curFocus),to)==0){return}var view=cm.display.view;var start=from.line>=cm.display.viewFrom&&posToDOM(cm,from)||{node:view[0].measure.map[2],offset:0};var end=to.line<cm.display.viewTo&&posToDOM(cm,to);if(!end){var measure=view[view.length-1].measure;var map$$1=measure.maps?measure.maps[measure.maps.length-1]:measure.map;end={node:map$$1[map$$1.length-1],offset:map$$1[map$$1.length-2]-map$$1[map$$1.length-3]}}if(!start||!end){sel.removeAllRanges();return}var old=sel.rangeCount&&sel.getRangeAt(0),rng;try{rng=range(start.node,start.offset,end.offset,end.node)}catch(e){}if(rng){if(!gecko&&cm.state.focused){sel.collapse(start.node,start.offset);if(!rng.collapsed){sel.removeAllRanges();sel.addRange(rng)}}else{sel.removeAllRanges();sel.addRange(rng)}if(old&&sel.anchorNode==null){sel.addRange(old)}else if(gecko){this.startGracePeriod()}}this.rememberSelection()};ContentEditableInput.prototype.startGracePeriod=function(){var this$1=this;clearTimeout(this.gracePeriod);this.gracePeriod=setTimeout(function(){this$1.gracePeriod=false;if(this$1.selectionChanged()){this$1.cm.operation(function(){return this$1.cm.curOp.selectionChanged=true})}},20)};ContentEditableInput.prototype.showMultipleSelections=function(info){removeChildrenAndAdd(this.cm.display.cursorDiv,info.cursors);removeChildrenAndAdd(this.cm.display.selectionDiv,info.selection)};ContentEditableInput.prototype.rememberSelection=function(){var sel=window.getSelection();this.lastAnchorNode=sel.anchorNode;this.lastAnchorOffset=sel.anchorOffset;this.lastFocusNode=sel.focusNode;this.lastFocusOffset=sel.focusOffset};ContentEditableInput.prototype.selectionInEditor=function(){var sel=window.getSelection();if(!sel.rangeCount){return false}var node=sel.getRangeAt(0).commonAncestorContainer;return contains(this.div,node)};ContentEditableInput.prototype.focus=function(){if(this.cm.options.readOnly!="nocursor"){if(!this.selectionInEditor()){this.showSelection(this.prepareSelection(),true)}this.div.focus()}};ContentEditableInput.prototype.blur=function(){this.div.blur()};ContentEditableInput.prototype.getField=function(){return this.div};ContentEditableInput.prototype.supportsTouch=function(){return true};ContentEditableInput.prototype.receivedFocus=function(){var input=this;if(this.selectionInEditor()){this.pollSelection()}else{runInOp(this.cm,function(){return input.cm.curOp.selectionChanged=true})}function poll(){if(input.cm.state.focused){input.pollSelection();input.polling.set(input.cm.options.pollInterval,poll)}}this.polling.set(this.cm.options.pollInterval,poll)};ContentEditableInput.prototype.selectionChanged=function(){var sel=window.getSelection();return sel.anchorNode!=this.lastAnchorNode||sel.anchorOffset!=this.lastAnchorOffset||sel.focusNode!=this.lastFocusNode||sel.focusOffset!=this.lastFocusOffset};ContentEditableInput.prototype.pollSelection=function(){if(this.readDOMTimeout!=null||this.gracePeriod||!this.selectionChanged()){return}var sel=window.getSelection(),cm=this.cm;if(android&&chrome&&this.cm.options.gutters.length&&isInGutter(sel.anchorNode)){this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs});this.blur();this.focus();return}if(this.composing){return}this.rememberSelection();var anchor=domToPos(cm,sel.anchorNode,sel.anchorOffset);var head=domToPos(cm,sel.focusNode,sel.focusOffset);if(anchor&&head){runInOp(cm,function(){setSelection(cm.doc,simpleSelection(anchor,head),sel_dontScroll);if(anchor.bad||head.bad){cm.curOp.selectionChanged=true}})}};ContentEditableInput.prototype.pollContent=function(){if(this.readDOMTimeout!=null){clearTimeout(this.readDOMTimeout);this.readDOMTimeout=null}var cm=this.cm,display=cm.display,sel=cm.doc.sel.primary();var from=sel.from(),to=sel.to();if(from.ch==0&&from.line>cm.firstLine()){from=Pos(from.line-1,getLine(cm.doc,from.line-1).length)}if(to.ch==getLine(cm.doc,to.line).text.length&&to.line<cm.lastLine()){to=Pos(to.line+1,0)}if(from.line<display.viewFrom||to.line>display.viewTo-1){return false}var fromIndex,fromLine,fromNode;if(from.line==display.viewFrom||(fromIndex=findViewIndex(cm,from.line))==0){fromLine=lineNo(display.view[0].line);fromNode=display.view[0].node}else{fromLine=lineNo(display.view[fromIndex].line);fromNode=display.view[fromIndex-1].node.nextSibling}var toIndex=findViewIndex(cm,to.line);var toLine,toNode;if(toIndex==display.view.length-1){toLine=display.viewTo-1;toNode=display.lineDiv.lastChild}else{toLine=lineNo(display.view[toIndex+1].line)-1;toNode=display.view[toIndex+1].node.previousSibling}if(!fromNode){return false}var newText=cm.doc.splitLines(domTextBetween(cm,fromNode,toNode,fromLine,toLine));var oldText=getBetween(cm.doc,Pos(fromLine,0),Pos(toLine,getLine(cm.doc,toLine).text.length));while(newText.length>1&&oldText.length>1){if(lst(newText)==lst(oldText)){newText.pop();oldText.pop();toLine--}else if(newText[0]==oldText[0]){newText.shift();oldText.shift();fromLine++}else{break}}var cutFront=0,cutEnd=0;var newTop=newText[0],oldTop=oldText[0],maxCutFront=Math.min(newTop.length,oldTop.length);while(cutFront<maxCutFront&&newTop.charCodeAt(cutFront)==oldTop.charCodeAt(cutFront)){++cutFront}var newBot=lst(newText),oldBot=lst(oldText);var maxCutEnd=Math.min(newBot.length-(newText.length==1?cutFront:0),oldBot.length-(oldText.length==1?cutFront:0));while(cutEnd<maxCutEnd&&newBot.charCodeAt(newBot.length-cutEnd-1)==oldBot.charCodeAt(oldBot.length-cutEnd-1)){++cutEnd}if(newText.length==1&&oldText.length==1&&fromLine==from.line){while(cutFront&&cutFront>from.ch&&newBot.charCodeAt(newBot.length-cutEnd-1)==oldBot.charCodeAt(oldBot.length-cutEnd-1)){cutFront--;cutEnd++}}newText[newText.length-1]=newBot.slice(0,newBot.length-cutEnd).replace(/^\u200b+/,"");newText[0]=newText[0].slice(cutFront).replace(/\u200b+$/,"");var chFrom=Pos(fromLine,cutFront);var chTo=Pos(toLine,oldText.length?lst(oldText).length-cutEnd:0);if(newText.length>1||newText[0]||cmp(chFrom,chTo)){replaceRange(cm.doc,newText,chFrom,chTo,"+input");return true}};ContentEditableInput.prototype.ensurePolled=function(){this.forceCompositionEnd()};ContentEditableInput.prototype.reset=function(){this.forceCompositionEnd()};ContentEditableInput.prototype.forceCompositionEnd=function(){if(!this.composing){return}clearTimeout(this.readDOMTimeout);this.composing=null;this.updateFromDOM();this.div.blur();this.div.focus()};ContentEditableInput.prototype.readFromDOMSoon=function(){var this$1=this;if(this.readDOMTimeout!=null){return}this.readDOMTimeout=setTimeout(function(){this$1.readDOMTimeout=null;if(this$1.composing){if(this$1.composing.done){this$1.composing=null}else{return}}this$1.updateFromDOM()},80)};ContentEditableInput.prototype.updateFromDOM=function(){var this$1=this;if(this.cm.isReadOnly()||!this.pollContent()){runInOp(this.cm,function(){return regChange(this$1.cm)})}};ContentEditableInput.prototype.setUneditable=function(node){node.contentEditable="false"};ContentEditableInput.prototype.onKeyPress=function(e){if(e.charCode==0){return}e.preventDefault();if(!this.cm.isReadOnly()){operation(this.cm,applyTextInput)(this.cm,String.fromCharCode(e.charCode==null?e.keyCode:e.charCode),0)}};ContentEditableInput.prototype.readOnlyChanged=function(val){this.div.contentEditable=String(val!="nocursor")};ContentEditableInput.prototype.onContextMenu=function(){};ContentEditableInput.prototype.resetPosition=function(){};ContentEditableInput.prototype.needsContentAttribute=true;function posToDOM(cm,pos){var view=findViewForLine(cm,pos.line);if(!view||view.hidden){return null}var line=getLine(cm.doc,pos.line);var info=mapFromLineView(view,line,pos.line);var order=getOrder(line,cm.doc.direction),side="left";if(order){var partPos=getBidiPartAt(order,pos.ch);side=partPos%2?"right":"left"}var result=nodeAndOffsetInLineMap(info.map,pos.ch,side);result.offset=result.collapse=="right"?result.end:result.start;return result}function isInGutter(node){for(var scan=node;scan;scan=scan.parentNode){if(/CodeMirror-gutter-wrapper/.test(scan.className)){return true}}return false}function badPos(pos,bad){if(bad){pos.bad=true}return pos}function domTextBetween(cm,from,to,fromLine,toLine){var text="",closing=false,lineSep=cm.doc.lineSeparator();function recognizeMarker(id){return function(marker){return marker.id==id}}function close(){if(closing){text+=lineSep;closing=false}}function addText(str){if(str){close();text+=str}}function walk(node){if(node.nodeType==1){var cmText=node.getAttribute("cm-text");if(cmText!=null){addText(cmText||node.textContent.replace(/\u200b/g,""));return}var markerID=node.getAttribute("cm-marker"),range$$1;if(markerID){var found=cm.findMarks(Pos(fromLine,0),Pos(toLine+1,0),recognizeMarker(+markerID));if(found.length&&(range$$1=found[0].find())){addText(getBetween(cm.doc,range$$1.from,range$$1.to).join(lineSep))}return}if(node.getAttribute("contenteditable")=="false"){return}var isBlock=/^(pre|div|p)$/i.test(node.nodeName);if(isBlock){close()}for(var i=0;i<node.childNodes.length;i++){walk(node.childNodes[i])}if(isBlock){closing=true}}else if(node.nodeType==3){addText(node.nodeValue)}}for(;;){walk(from);if(from==to){break}from=from.nextSibling}return text}function domToPos(cm,node,offset){var lineNode;if(node==cm.display.lineDiv){lineNode=cm.display.lineDiv.childNodes[offset];if(!lineNode){return badPos(cm.clipPos(Pos(cm.display.viewTo-1)),true)}node=null;offset=0}else{for(lineNode=node;;lineNode=lineNode.parentNode){if(!lineNode||lineNode==cm.display.lineDiv){return null}if(lineNode.parentNode&&lineNode.parentNode==cm.display.lineDiv){break}}}for(var i=0;i<cm.display.view.length;i++){var lineView=cm.display.view[i];if(lineView.node==lineNode){return locateNodeInLineView(lineView,node,offset)}}}function locateNodeInLineView(lineView,node,offset){var wrapper=lineView.text.firstChild,bad=false;if(!node||!contains(wrapper,node)){return badPos(Pos(lineNo(lineView.line),0),true)}if(node==wrapper){bad=true;node=wrapper.childNodes[offset];offset=0;if(!node){var line=lineView.rest?lst(lineView.rest):lineView.line;return badPos(Pos(lineNo(line),line.text.length),bad)}}var textNode=node.nodeType==3?node:null,topNode=node;if(!textNode&&node.childNodes.length==1&&node.firstChild.nodeType==3){textNode=node.firstChild;if(offset){offset=textNode.nodeValue.length}}while(topNode.parentNode!=wrapper){topNode=topNode.parentNode}var measure=lineView.measure,maps=measure.maps;function find(textNode,topNode,offset){for(var i=-1;i<(maps?maps.length:0);i++){var map$$1=i<0?measure.map:maps[i];for(var j=0;j<map$$1.length;j+=3){var curNode=map$$1[j+2];if(curNode==textNode||curNode==topNode){var line=lineNo(i<0?lineView.line:lineView.rest[i]);var ch=map$$1[j]+offset;if(offset<0||curNode!=textNode){ch=map$$1[j+(offset?1:0)]}return Pos(line,ch)}}}}var found=find(textNode,topNode,offset);if(found){return badPos(found,bad)}for(var after=topNode.nextSibling,dist=textNode?textNode.nodeValue.length-offset:0;after;after=after.nextSibling){found=find(after,after.firstChild,0);if(found){return badPos(Pos(found.line,found.ch-dist),bad)}else{dist+=after.textContent.length}}for(var before=topNode.previousSibling,dist$1=offset;before;before=before.previousSibling){found=find(before,before.firstChild,-1);if(found){return badPos(Pos(found.line,found.ch+dist$1),bad)}else{dist$1+=before.textContent.length}}}var TextareaInput=function(cm){this.cm=cm;this.prevInput="";this.pollingFast=false;this.polling=new Delayed;this.inaccurateSelection=false;this.hasSelection=false;this.composing=null};TextareaInput.prototype.init=function(display){var this$1=this;var input=this,cm=this.cm;var div=this.wrapper=hiddenTextarea();var te=this.textarea=div.firstChild;display.wrapper.insertBefore(div,display.wrapper.firstChild);if(ios){te.style.width="0px"}on(te,"input",function(){if(ie&&ie_version>=9&&this$1.hasSelection){this$1.hasSelection=null}input.poll()});on(te,"paste",function(e){if(signalDOMEvent(cm,e)||handlePaste(e,cm)){return}cm.state.pasteIncoming=true;input.fastPoll()});function prepareCopyCut(e){if(signalDOMEvent(cm,e)){return}if(cm.somethingSelected()){setLastCopied({lineWise:false,text:cm.getSelections()});if(input.inaccurateSelection){input.prevInput="";input.inaccurateSelection=false;te.value=lastCopied.text.join("\n");selectInput(te)}}else if(!cm.options.lineWiseCopyCut){return}else{var ranges=copyableRanges(cm);setLastCopied({lineWise:true,text:ranges.text});if(e.type=="cut"){cm.setSelections(ranges.ranges,null,sel_dontScroll)}else{input.prevInput="";te.value=ranges.text.join("\n");selectInput(te)}}if(e.type=="cut"){cm.state.cutIncoming=true}}on(te,"cut",prepareCopyCut);on(te,"copy",prepareCopyCut);on(display.scroller,"paste",function(e){if(eventInWidget(display,e)||signalDOMEvent(cm,e)){return}cm.state.pasteIncoming=true;input.focus()});on(display.lineSpace,"selectstart",function(e){if(!eventInWidget(display,e)){e_preventDefault(e)}});on(te,"compositionstart",function(){var start=cm.getCursor("from");if(input.composing){input.composing.range.clear()}input.composing={start:start,range:cm.markText(start,cm.getCursor("to"),{className:"CodeMirror-composing"})}});on(te,"compositionend",function(){if(input.composing){input.poll();input.composing.range.clear();input.composing=null}})};TextareaInput.prototype.prepareSelection=function(){var cm=this.cm,display=cm.display,doc=cm.doc;var result=prepareSelection(cm);if(cm.options.moveInputWithCursor){var headPos=cursorCoords(cm,doc.sel.primary().head,"div");var wrapOff=display.wrapper.getBoundingClientRect(),lineOff=display.lineDiv.getBoundingClientRect();result.teTop=Math.max(0,Math.min(display.wrapper.clientHeight-10,headPos.top+lineOff.top-wrapOff.top));result.teLeft=Math.max(0,Math.min(display.wrapper.clientWidth-10,headPos.left+lineOff.left-wrapOff.left))}return result};TextareaInput.prototype.showSelection=function(drawn){var cm=this.cm,display=cm.display;removeChildrenAndAdd(display.cursorDiv,drawn.cursors);removeChildrenAndAdd(display.selectionDiv,drawn.selection);if(drawn.teTop!=null){this.wrapper.style.top=drawn.teTop+"px";this.wrapper.style.left=drawn.teLeft+"px"}};TextareaInput.prototype.reset=function(typing){if(this.contextMenuPending||this.composing){return}var minimal,selected,cm=this.cm,doc=cm.doc;if(cm.somethingSelected()){this.prevInput="";var range$$1=doc.sel.primary();minimal=hasCopyEvent&&(range$$1.to().line-range$$1.from().line>100||(selected=cm.getSelection()).length>1e3);var content=minimal?"-":selected||cm.getSelection();this.textarea.value=content;if(cm.state.focused){selectInput(this.textarea)}if(ie&&ie_version>=9){this.hasSelection=content}}else if(!typing){this.prevInput=this.textarea.value="";if(ie&&ie_version>=9){this.hasSelection=null}}this.inaccurateSelection=minimal};TextareaInput.prototype.getField=function(){return this.textarea};TextareaInput.prototype.supportsTouch=function(){return false};TextareaInput.prototype.focus=function(){if(this.cm.options.readOnly!="nocursor"&&(!mobile||activeElt()!=this.textarea)){try{this.textarea.focus()}catch(e){}}};TextareaInput.prototype.blur=function(){this.textarea.blur()};TextareaInput.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0};TextareaInput.prototype.receivedFocus=function(){this.slowPoll()};TextareaInput.prototype.slowPoll=function(){var this$1=this;if(this.pollingFast){return}this.polling.set(this.cm.options.pollInterval,function(){this$1.poll();if(this$1.cm.state.focused){this$1.slowPoll()}})};TextareaInput.prototype.fastPoll=function(){var missed=false,input=this;input.pollingFast=true;function p(){var changed=input.poll();if(!changed&&!missed){missed=true;input.polling.set(60,p)}else{input.pollingFast=false;input.slowPoll()}}input.polling.set(20,p)};TextareaInput.prototype.poll=function(){var this$1=this;var cm=this.cm,input=this.textarea,prevInput=this.prevInput;if(this.contextMenuPending||!cm.state.focused||hasSelection(input)&&!prevInput&&!this.composing||cm.isReadOnly()||cm.options.disableInput||cm.state.keySeq){return false}var text=input.value;if(text==prevInput&&!cm.somethingSelected()){return false}if(ie&&ie_version>=9&&this.hasSelection===text||mac&&/[\uf700-\uf7ff]/.test(text)){cm.display.input.reset();return false}if(cm.doc.sel==cm.display.selForContextMenu){var first=text.charCodeAt(0);if(first==8203&&!prevInput){prevInput="​"}if(first==8666){this.reset();return this.cm.execCommand("undo")}}var same=0,l=Math.min(prevInput.length,text.length);while(same<l&&prevInput.charCodeAt(same)==text.charCodeAt(same)){++same}runInOp(cm,function(){applyTextInput(cm,text.slice(same),prevInput.length-same,null,this$1.composing?"*compose":null);if(text.length>1e3||text.indexOf("\n")>-1){input.value=this$1.prevInput=""}else{this$1.prevInput=text}if(this$1.composing){this$1.composing.range.clear();this$1.composing.range=cm.markText(this$1.composing.start,cm.getCursor("to"),{className:"CodeMirror-composing"})}});return true};TextareaInput.prototype.ensurePolled=function(){if(this.pollingFast&&this.poll()){this.pollingFast=false}};TextareaInput.prototype.onKeyPress=function(){if(ie&&ie_version>=9){this.hasSelection=null}this.fastPoll()};TextareaInput.prototype.onContextMenu=function(e){var input=this,cm=input.cm,display=cm.display,te=input.textarea;var pos=posFromMouse(cm,e),scrollPos=display.scroller.scrollTop;if(!pos||presto){return}var reset=cm.options.resetSelectionOnContextMenu;if(reset&&cm.doc.sel.contains(pos)==-1){operation(cm,setSelection)(cm.doc,simpleSelection(pos),sel_dontScroll)}var oldCSS=te.style.cssText,oldWrapperCSS=input.wrapper.style.cssText;input.wrapper.style.cssText="position: absolute";var wrapperBox=input.wrapper.getBoundingClientRect();te.style.cssText="position: absolute; width: 30px; height: 30px;\n      top: "+(e.clientY-wrapperBox.top-5)+"px; left: "+(e.clientX-wrapperBox.left-5)+"px;\n      z-index: 1000; background: "+(ie?"rgba(255, 255, 255, .05)":"transparent")+";\n      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);";var oldScrollY;if(webkit){oldScrollY=window.scrollY}display.input.focus();if(webkit){window.scrollTo(null,oldScrollY)}display.input.reset();if(!cm.somethingSelected()){te.value=input.prevInput=" "}input.contextMenuPending=true;display.selForContextMenu=cm.doc.sel;clearTimeout(display.detectingSelectAll);function prepareSelectAllHack(){if(te.selectionStart!=null){var selected=cm.somethingSelected();var extval="​"+(selected?te.value:"");te.value="⇚";te.value=extval;input.prevInput=selected?"":"​";te.selectionStart=1;te.selectionEnd=extval.length;display.selForContextMenu=cm.doc.sel}}function rehide(){input.contextMenuPending=false;input.wrapper.style.cssText=oldWrapperCSS;te.style.cssText=oldCSS;if(ie&&ie_version<9){display.scrollbars.setScrollTop(display.scroller.scrollTop=scrollPos)}if(te.selectionStart!=null){if(!ie||ie&&ie_version<9){prepareSelectAllHack()}var i=0,poll=function(){if(display.selForContextMenu==cm.doc.sel&&te.selectionStart==0&&te.selectionEnd>0&&input.prevInput=="​"){operation(cm,selectAll)(cm)}else if(i++<10){display.detectingSelectAll=setTimeout(poll,500)}else{display.selForContextMenu=null;display.input.reset()}};display.detectingSelectAll=setTimeout(poll,200)}}if(ie&&ie_version>=9){prepareSelectAllHack()}if(captureRightClick){e_stop(e);var mouseup=function(){off(window,"mouseup",mouseup);setTimeout(rehide,20)};on(window,"mouseup",mouseup)}else{setTimeout(rehide,50)}};TextareaInput.prototype.readOnlyChanged=function(val){if(!val){this.reset()}};TextareaInput.prototype.setUneditable=function(){};TextareaInput.prototype.needsContentAttribute=false;function fromTextArea(textarea,options){options=options?copyObj(options):{};options.value=textarea.value;if(!options.tabindex&&textarea.tabIndex){options.tabindex=textarea.tabIndex}if(!options.placeholder&&textarea.placeholder){options.placeholder=textarea.placeholder}if(options.autofocus==null){var hasFocus=activeElt();options.autofocus=hasFocus==textarea||textarea.getAttribute("autofocus")!=null&&hasFocus==document.body}function save(){textarea.value=cm.getValue()}var realSubmit;if(textarea.form){on(textarea.form,"submit",save);if(!options.leaveSubmitMethodAlone){var form=textarea.form;realSubmit=form.submit;try{var wrappedSubmit=form.submit=function(){save();form.submit=realSubmit;form.submit();form.submit=wrappedSubmit}}catch(e){}}}options.finishInit=function(cm){cm.save=save;cm.getTextArea=function(){return textarea};cm.toTextArea=function(){cm.toTextArea=isNaN;save();textarea.parentNode.removeChild(cm.getWrapperElement());textarea.style.display="";if(textarea.form){off(textarea.form,"submit",save);if(typeof textarea.form.submit=="function"){textarea.form.submit=realSubmit}}}};textarea.style.display="none";var cm=CodeMirror$1(function(node){return textarea.parentNode.insertBefore(node,textarea.nextSibling)},options);return cm}function addLegacyProps(CodeMirror){CodeMirror.off=off;CodeMirror.on=on;CodeMirror.wheelEventPixels=wheelEventPixels;CodeMirror.Doc=Doc;CodeMirror.splitLines=splitLinesAuto;CodeMirror.countColumn=countColumn;CodeMirror.findColumn=findColumn;CodeMirror.isWordChar=isWordCharBasic;CodeMirror.Pass=Pass;CodeMirror.signal=signal;CodeMirror.Line=Line;CodeMirror.changeEnd=changeEnd;CodeMirror.scrollbarModel=scrollbarModel;CodeMirror.Pos=Pos;CodeMirror.cmpPos=cmp;CodeMirror.modes=modes;CodeMirror.mimeModes=mimeModes;CodeMirror.resolveMode=resolveMode;CodeMirror.getMode=getMode;CodeMirror.modeExtensions=modeExtensions;CodeMirror.extendMode=extendMode;CodeMirror.copyState=copyState;CodeMirror.startState=startState;CodeMirror.innerMode=innerMode;CodeMirror.commands=commands;CodeMirror.keyMap=keyMap;CodeMirror.keyName=keyName;CodeMirror.isModifierKey=isModifierKey;CodeMirror.lookupKey=lookupKey;CodeMirror.normalizeKeyMap=normalizeKeyMap;CodeMirror.StringStream=StringStream;CodeMirror.SharedTextMarker=SharedTextMarker;CodeMirror.TextMarker=TextMarker;CodeMirror.LineWidget=LineWidget;CodeMirror.e_preventDefault=e_preventDefault;CodeMirror.e_stopPropagation=e_stopPropagation;CodeMirror.e_stop=e_stop;CodeMirror.addClass=addClass;CodeMirror.contains=contains;CodeMirror.rmClass=rmClass;CodeMirror.keyNames=keyNames}defineOptions(CodeMirror$1);addEditorMethods(CodeMirror$1);var dontDelegate="iter insert remove copy getEditor constructor".split(" ");for(var prop in Doc.prototype){if(Doc.prototype.hasOwnProperty(prop)&&indexOf(dontDelegate,prop)<0){CodeMirror$1.prototype[prop]=function(method){return function(){return method.apply(this.doc,arguments)}}(Doc.prototype[prop])}}eventMixin(Doc);CodeMirror$1.inputStyles={textarea:TextareaInput,contenteditable:ContentEditableInput};CodeMirror$1.defineMode=function(name){if(!CodeMirror$1.defaults.mode&&name!="null"){CodeMirror$1.defaults.mode=name}defineMode.apply(this,arguments)};CodeMirror$1.defineMIME=defineMIME;CodeMirror$1.defineMode("null",function(){return{token:function(stream){return stream.skipToEnd()}}});CodeMirror$1.defineMIME("text/plain","null");CodeMirror$1.defineExtension=function(name,func){CodeMirror$1.prototype[name]=func};CodeMirror$1.defineDocExtension=function(name,func){Doc.prototype[name]=func};CodeMirror$1.fromTextArea=fromTextArea;addLegacyProps(CodeMirror$1);CodeMirror$1.version="5.26.0";return CodeMirror$1})},function(module,exports,__webpack_require__){"use strict";(function(process){var inherits=__webpack_require__(2),urlUtils=__webpack_require__(7),SenderReceiver=__webpack_require__(73);var debug=function(){};if(process.env.NODE_ENV!=="production"){debug=__webpack_require__(5)("sockjs-client:ajax-based")}function createAjaxSender(AjaxObject){return function(url,payload,callback){debug("create ajax sender",url,payload);var opt={};if(typeof payload==="string"){opt.headers={"Content-type":"text/plain"}}var ajaxUrl=urlUtils.addPath(url,"/xhr_send");var xo=new AjaxObject("POST",ajaxUrl,payload,opt);xo.once("finish",function(status){debug("finish",status);xo=null;if(status!==200&&status!==204){return callback(new Error("http status "+status))}callback()});return function(){debug("abort");xo.close();xo=null;var err=new Error("Aborted");err.code=1e3;callback(err)}}}function AjaxBasedTransport(transUrl,urlSuffix,Receiver,AjaxObject){SenderReceiver.call(this,transUrl,urlSuffix,createAjaxSender(AjaxObject),Receiver,AjaxObject)}inherits(AjaxBasedTransport,SenderReceiver);module.exports=AjaxBasedTransport}).call(exports,__webpack_require__(4))},function(module,exports,__webpack_require__){"use strict";var crypto=__webpack_require__(298);var _randomStringChars="abcdefghijklmnopqrstuvwxyz012345";module.exports={string:function(length){var max=_randomStringChars.length;var bytes=crypto.randomBytes(length);var ret=[];for(var i=0;i<length;i++){ret.push(_randomStringChars.substr(bytes[i]%max,1))}return ret.join("")},number:function(max){return Math.floor(Math.random()*max)},numberString:function(max){var t=(""+(max-1)).length;var p=new Array(t+1).join("0");return(p+this.number(max)).slice(-t)}}},function(module,exports,__webpack_require__){"use strict";(function(_){var Backbone=__webpack_require__(0);module.exports=Backbone.View.extend({events:{change:"onChange"},initialize:function initialize(o){var md=this.model;this.config=o.config||{};this.pfx=this.config.stylePrefix||"";this.ppfx=this.config.pStylePrefix||"";this.target=md.target;this.className=this.pfx+"trait";this.labelClass=this.ppfx+"label";this.fieldClass=this.ppfx+"field "+this.ppfx+"field-"+md.get("type");this.inputhClass=this.ppfx+"input-holder";md.off("change:value",this.onValueChange);var label=this.getLabel();if(label=="CId"){}else{this.listenTo(md,"change:value",this.onValueChange)}this.tmpl='<div class="'+this.fieldClass+'"><div class="'+this.inputhClass+'"></div></div>'},onChange:function onChange(){this.model.set("value",this.getInputEl().value)},getValueForTarget:function getValueForTarget(){return this.model.get("value")},onValueChange:function onValueChange(){var m=this.model;var trg=this.target;var name=m.get("name");var value=this.getValueForTarget();if(m.get("changeProp")){trg.set(name,value)}else{var attrs=_.clone(trg.get("attributes"));attrs[name]=value;trg.set("attributes",attrs)}},renderLabel:function renderLabel(){this.$el.html('<div class="'+this.labelClass+'">'+this.getLabel()+"</div>")},getLabel:function getLabel(){var model=this.model;var label=model.get("label")||model.get("name");var labelN=label.charAt(0).toUpperCase()+label.slice(1).replace(/-/g," ");if(labelN=="Id"){return"CId"}return labelN},getInputEl:function getInputEl(){if(!this.$input){var md=this.model;var trg=this.target;var name=md.get("name");var opts={placeholder:md.get("placeholder")||md.get("default"),type:md.get("type")||"text"};var label=this.getLabel();if(label=="CId"){opts["readonly"]=true;opts["placeholder"]=this.target.get("attributes")["custom-name"]||md.cid}if(md.get("changeProp")){opts.value=trg.get(name)}else{var attrs=trg.get("attributes");opts.value=md.get("value")||attrs[name]}if(md.get("min"))opts.min=md.get("min");if(md.get("max"))opts.max=md.get("max");this.$input=$("<input>",opts)}return this.$input.get(0)},getModelValue:function getModelValue(){var value;var model=this.model;var target=this.target;var name=model.get("name");if(model.get("changeProp")){value=target.get(name)}else{var attrs=target.get("attributes");value=model.get("value")||attrs[name]}return value},renderField:function renderField(){if(!this.$input){this.$el.append(this.tmpl);var el=this.getInputEl();this.$el.find("."+this.inputhClass).prepend(el)}},render:function render(){this.renderLabel();this.renderField();this.el.className=this.className;return this}})}).call(exports,__webpack_require__(1))},function(module,exports,__webpack_require__){"use strict";var inherits=__webpack_require__(2),XhrDriver=__webpack_require__(68);function XHRLocalObject(method,url,payload){XhrDriver.call(this,method,url,payload,{noCredentials:true})}inherits(XHRLocalObject,XhrDriver);XHRLocalObject.enabled=XhrDriver.enabled;module.exports=XHRLocalObject},function(module,exports,__webpack_require__){"use strict";(function(global){module.exports={isOpera:function(){return global.navigator&&/opera/i.test(global.navigator.userAgent)},isKonqueror:function(){return global.navigator&&/konqueror/i.test(global.navigator.userAgent)},hasDomain:function(){if(!global.document){return true}try{return!!global.document.domain}catch(e){return false}}}}).call(exports,__webpack_require__(3))},function(module,exports,__webpack_require__){"use strict";(function(process,global){var eventUtils=__webpack_require__(11),JSON3=__webpack_require__(9),browser=__webpack_require__(18);var debug=function(){};if(process.env.NODE_ENV!=="production"){debug=__webpack_require__(5)("sockjs-client:utils:iframe")}module.exports={WPrefix:"_jp",currentWindowId:null,polluteGlobalNamespace:function(){if(!(module.exports.WPrefix in global)){global[module.exports.WPrefix]={}}},postMessage:function(type,data){if(global.parent!==global){global.parent.postMessage(JSON3.stringify({windowId:module.exports.currentWindowId,type:type,data:data||""}),"*")}else{debug("Cannot postMessage, no parent window.",type,data)}},createIframe:function(iframeUrl,errorCallback){var iframe=global.document.createElement("iframe");var tref,unloadRef;var unattach=function(){debug("unattach");clearTimeout(tref);try{iframe.onload=null}catch(x){}iframe.onerror=null};var cleanup=function(){debug("cleanup");if(iframe){unattach();setTimeout(function(){if(iframe){iframe.parentNode.removeChild(iframe)}iframe=null},0);eventUtils.unloadDel(unloadRef)}};var onerror=function(err){debug("onerror",err);if(iframe){cleanup();errorCallback(err)}};var post=function(msg,origin){debug("post",msg,origin);try{setTimeout(function(){if(iframe&&iframe.contentWindow){iframe.contentWindow.postMessage(msg,origin)}},0)}catch(x){}};iframe.src=iframeUrl;iframe.style.display="none";iframe.style.position="absolute";iframe.onerror=function(){onerror("onerror")};iframe.onload=function(){debug("onload");clearTimeout(tref);tref=setTimeout(function(){onerror("onload timeout")},2e3)};global.document.body.appendChild(iframe);tref=setTimeout(function(){onerror("timeout")},15e3);unloadRef=eventUtils.unloadAdd(cleanup);return{post:post,cleanup:cleanup,loaded:unattach}},createHtmlfile:function(iframeUrl,errorCallback){var axo=["Active"].concat("Object").join("X");var doc=new global[axo]("htmlfile");var tref,unloadRef;var iframe;var unattach=function(){clearTimeout(tref);iframe.onerror=null};var cleanup=function(){if(doc){unattach();eventUtils.unloadDel(unloadRef);iframe.parentNode.removeChild(iframe);iframe=doc=null;CollectGarbage()}};var onerror=function(r){debug("onerror",r);if(doc){cleanup();errorCallback(r)}};var post=function(msg,origin){try{setTimeout(function(){if(iframe&&iframe.contentWindow){iframe.contentWindow.postMessage(msg,origin)}},0)}catch(x){}};doc.open();doc.write("<html><s"+"cript>"+'document.domain="'+global.document.domain+'";'+"</s"+"cript></html>");doc.close();doc.parentWindow[module.exports.WPrefix]=global[module.exports.WPrefix];var c=doc.createElement("div");doc.body.appendChild(c);
iframe=doc.createElement("iframe");c.appendChild(iframe);iframe.src=iframeUrl;iframe.onerror=function(){onerror("onerror")};tref=setTimeout(function(){onerror("timeout")},15e3);unloadRef=eventUtils.unloadAdd(cleanup);return{post:post,cleanup:cleanup,loaded:unattach}}};module.exports.iframeEnabled=false;if(global.document){module.exports.iframeEnabled=(typeof global.postMessage==="function"||typeof global.postMessage==="object")&&!browser.isKonqueror()}}).call(exports,__webpack_require__(4),__webpack_require__(3))},function(module,exports,__webpack_require__){"use strict";var Backbone=__webpack_require__(0);var ComponentView=__webpack_require__(10);module.exports=ComponentView.extend({tagName:"img",events:{dblclick:"openModal",click:"initResize"},initialize:function initialize(o){ComponentView.prototype.initialize.apply(this,arguments);this.listenTo(this.model,"change:src",this.updateSrc);this.listenTo(this.model,"dblclick active",this.openModal);this.classEmpty=this.ppfx+"plh-image";if(this.config.modal)this.modal=this.config.modal;if(this.config.am)this.am=this.config.am},updateSrc:function updateSrc(){var src=this.model.get("src");this.$el.attr("src",src);if(!src)this.$el.addClass(this.classEmpty);else this.$el.removeClass(this.classEmpty)},openModal:function openModal(e){var em=this.opts.config.em;var editor=em?em.get("Editor"):"";if(editor){editor.runCommand("open-assets",{target:this.model,onSelect:function onSelect(){editor.Modal.close();editor.AssetManager.setTarget(null)}})}},render:function render(){this.updateAttributes();this.updateClasses();var actCls=this.$el.attr("class")||"";if(!this.model.get("src"))this.$el.attr("class",(actCls+" "+this.classEmpty).trim());this.$el.attr("onmousedown","return false");return this}})},function(module,exports,__webpack_require__){"use strict";(function(process){var inherits=__webpack_require__(2),EventEmitter=__webpack_require__(6).EventEmitter;var debug=function(){};if(process.env.NODE_ENV!=="production"){debug=__webpack_require__(5)("sockjs-client:receiver:xhr")}function XhrReceiver(url,AjaxObject){debug(url);EventEmitter.call(this);var self=this;this.bufferPosition=0;this.xo=new AjaxObject("POST",url,null);this.xo.on("chunk",this._chunkHandler.bind(this));this.xo.once("finish",function(status,text){debug("finish",status,text);self._chunkHandler(status,text);self.xo=null;var reason=status===200?"network":"permanent";debug("close",reason);self.emit("close",null,reason);self._cleanup()})}inherits(XhrReceiver,EventEmitter);XhrReceiver.prototype._chunkHandler=function(status,text){debug("_chunkHandler",status);if(status!==200||!text){return}for(var idx=-1;;this.bufferPosition+=idx+1){var buf=text.slice(this.bufferPosition);idx=buf.indexOf("\n");if(idx===-1){break}var msg=buf.slice(0,idx);if(msg){debug("message",msg);this.emit("message",msg)}}};XhrReceiver.prototype._cleanup=function(){debug("_cleanup");this.removeAllListeners()};XhrReceiver.prototype.abort=function(){debug("abort");if(this.xo){this.xo.close();debug("close");this.emit("close",null,"user");this.xo=null}this._cleanup()};module.exports=XhrReceiver}).call(exports,__webpack_require__(4))},function(module,exports,__webpack_require__){"use strict";var inherits=__webpack_require__(2),XhrDriver=__webpack_require__(68);function XHRCorsObject(method,url,payload,opts){XhrDriver.call(this,method,url,payload,opts)}inherits(XHRCorsObject,XhrDriver);XHRCorsObject.enabled=XhrDriver.enabled&&XhrDriver.supportsCORS;module.exports=XHRCorsObject},function(module,exports,__webpack_require__){"use strict";(function(_){var Backbone=__webpack_require__(0);var SelectPosition=__webpack_require__(36);module.exports=_.extend({},SelectPosition,{init:function init(opt){_.bindAll(this,"startDraw","draw","endDraw","rollback");this.config=opt||{};this.hType=this.config.newFixedH?"height":"min-height";this.allowDraw=1},enable:function enable(){for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}SelectPosition.enable.apply(this,args);this.$wr.css("cursor","crosshair");if(this.allowDraw)this.$wr.on("mousedown",this.startDraw);this.ghost=this.canvas.getGhostEl()},startDraw:function startDraw(e){e.preventDefault();this.stopSelectPosition();this.ghost.style.display="block";this.frameOff=this.getOffsetDim();this.startPos={top:e.pageY+this.frameOff.top,left:e.pageX+this.frameOff.left};this.isDragged=false;this.tempComponent={style:{}};this.beforeDraw(this.tempComponent);this.updateSize(this.startPos.top,this.startPos.left,0,0);this.toggleEvents(1)},toggleEvents:function toggleEvents(enable){var method=enable?"on":"off";this.$wr[method]("mousemove",this.draw);this.$wr[method]("mouseup",this.endDraw);this.$canvas[method]("mousemove",this.draw);$(document)[method]("mouseup",this.endDraw);$(document)[method]("keypress",this.rollback)},draw:function draw(e){this.isDragged=true;this.updateComponentSize(e)},endDraw:function endDraw(e){this.toggleEvents();var model={};if(this.isDragged){this.updateComponentSize(e);this.setRequirements(this.tempComponent);var lp=this.sorter.lastPos;model=this.create(this.sorter.target,this.tempComponent,lp.index,lp.method);this.sorter.prevTarget=null}this.ghost.style.display="none";this.startSelectPosition();this.afterDraw(model)},create:function create(target,component,index,method,opts){index=method==="after"?index+1:index;var opt=opts||{};var $trg=$(target);var trgModel=$trg.data("model");var trgCollection=$trg.data("collection");var droppable=trgModel?trgModel.get("droppable"):1;opt.at=index;if(trgCollection&&droppable)return trgCollection.add(component,opt);else console.warn("Invalid target position")},setRequirements:function setRequirements(component){var c=this.config;var compStl=component.style;if(compStl.width.replace(/\D/g,"")<c.minComponentW)compStl.width=c.minComponentW+"px";if(compStl[this.hType].replace(/\D/g,"")<c.minComponentH)compStl[this.hType]=c.minComponentH+"px";if(c.newFixedH)compStl.overflow="auto";if(!this.absoluteMode){delete compStl.left;delete compStl.top}else compStl.position="absolute";var lp=this.sorter.lastPos;if(this.nearFloat(lp.index,lp.method,this.sorter.lastDims))compStl.float="left";if(this.config.firstCentered&&this.getCanvasWrapper()==this.sorter.target){compStl.margin="0 auto"}return component},updateComponentSize:function updateComponentSize(e){var y=e.pageY+this.frameOff.top;var x=e.pageX+this.frameOff.left;var start=this.startPos;var top=start.top;var left=start.left;var height=y-top;var width=x-left;if(x<left){left=x;width=start.left-x}if(y<top){top=y;height=start.top-y}this.updateSize(top,left,width,height)},updateSize:function updateSize(top,left,width,height){var u="px";var ghStl=this.ghost.style;var compStl=this.tempComponent.style;ghStl.top=compStl.top=top+u;ghStl.left=compStl.left=left+u;ghStl.width=compStl.width=width+u;ghStl[this.hType]=compStl[this.hType]=height+u},rollback:function rollback(e,force){var key=e.which||e.keyCode;if(key==this.config.ESCAPE_KEY||force){this.isDragged=false;this.endDraw()}return},beforeDraw:function beforeDraw(component){component.editable=false},afterDraw:function afterDraw(model){},run:function run(editor,sender,opts){this.editor=editor;this.sender=sender;this.$wr=this.$wrapper;this.enable()},stop:function stop(){this.stopSelectPosition();this.$wrapper.css("cursor","");this.$wrapper.unbind()}})}).call(exports,__webpack_require__(1))},function(module,exports,__webpack_require__){"use strict";(function(_){var ToolbarView=__webpack_require__(168);var Toolbar=__webpack_require__(155);var key=__webpack_require__(63);module.exports={init:function init(o){_.bindAll(this,"onHover","onOut","onClick","onKeyPress")},enable:function enable(){_.bindAll(this,"copyComp","pasteComp","onFrameScroll");this.frameOff=this.canvasOff=this.adjScroll=null;var config=this.config.em.get("Config");this.startSelectComponent();this.toggleClipboard(config.copyPaste);var em=this.config.em;em.on("component:update",this.updateAttached,this);em.on("change:canvasOffset",this.updateAttached,this);em.on("change:selectedComponent",this.updateToolbar,this)},toggleClipboard:function toggleClipboard(active){var en=active||0;if(en){key("⌘+c, ctrl+c",this.copyComp);key("⌘+v, ctrl+v",this.pasteComp)}else{key.unbind("⌘+c, ctrl+c");key.unbind("⌘+v, ctrl+v")}},copyComp:function copyComp(){var el=this.editorModel.get("selectedComponent");if(el&&el.get("copyable"))this.editorModel.set("clipboard",el)},pasteComp:function pasteComp(){var clp=this.editorModel.get("clipboard"),sel=this.editorModel.get("selectedComponent");if(clp&&sel&&sel.collection){var index=sel.collection.indexOf(sel),clone=clp.clone();sel.collection.add(clone,{at:index+1})}},getCanvasBodyEl:function getCanvasBodyEl(){if(!this.$bodyEl){this.$bodyEl=$(this.getCanvasBody())}return this.$bodyEl},startSelectComponent:function startSelectComponent(){this.toggleSelectComponent(1)},stopSelectComponent:function stopSelectComponent(){this.toggleSelectComponent()},toggleSelectComponent:function toggleSelectComponent(enable){var el="*";var method=enable?"on":"off";this.getCanvasBodyEl()[method]("mouseover",el,this.onHover)[method]("mouseout",el,this.onOut)[method]("click",el,this.onClick);var cw=this.getContentWindow();cw[method]("scroll",this.onFrameScroll);cw[method]("keydown",this.onKeyPress)},onKeyPress:function onKeyPress(e){var key=e.which||e.keyCode;var comp=this.editorModel.get("selectedComponent");var focused=this.frameEl.contentDocument.activeElement.tagName!=="BODY";if(key==8||key==46){if(!focused)e.preventDefault();if(comp&&!focused){if(!comp.get("removable"))return;comp.set("status","");comp.destroy();this.hideBadge();this.clean();this.hideHighlighter();this.editorModel.set("selectedComponent",null)}}},onHover:function onHover(e){e.stopPropagation();var trg=e.target;if(!this.adjScroll){this.adjScroll=1;this.onFrameScroll(e);this.updateAttached()}var pos=this.getElementPos(trg);this.updateBadge(trg,pos);this.updateHighlighter(trg,pos);this.showElementOffset(trg,pos)},onOut:function onOut(e){e.stopPropagation();this.hideBadge();this.hideHighlighter();this.hideElementOffset()},showElementOffset:function showElementOffset(el,pos){var $el=$(el);var model=$el.data("model");if(model&&model.get("status")=="selected"){return}this.editor.runCommand("show-offset",{el:el,elPos:pos})},hideElementOffset:function hideElementOffset(el,pos){this.editor.stopCommand("show-offset")},showFixedElementOffset:function showFixedElementOffset(el,pos){this.editor.runCommand("show-offset",{el:el,elPos:pos,state:"Fixed"})},hideFixedElementOffset:function hideFixedElementOffset(el,pos){if(this.editor)this.editor.stopCommand("show-offset",{state:"Fixed"})},hideHighlighter:function hideHighlighter(){this.canvas.getHighlighter().style.display="none"},onClick:function onClick(e){var m=$(e.target).data("model");if(!m)return;var s=m.get("stylable");if(!(s instanceof Array)&&!s)return;this.onSelect(e,e.target)},updateBadge:function updateBadge(el,pos){var $el=$(el);this.cacheEl=el;var model=$el.data("model");if(!model||!model.get("badgable"))return;var badge=this.getBadge();badge.innerHTML=model.getName();var bStyle=badge.style;var u="px";bStyle.display="block";var canvasPos=this.canvas.getCanvasView().getPosition();var badgeH=badge?badge.offsetHeight:0;var badgeW=badge?badge.offsetWidth:0;var top=pos.top-badgeH<canvasPos.top?canvasPos.top:pos.top-badgeH;var left=pos.left+badgeW<canvasPos.left?canvasPos.left:pos.left;bStyle.top=top+u;bStyle.left=left+u},updateHighlighter:function updateHighlighter(el,pos){var $el=$(el);var model=$el.data("model");if(!model||model&&model.get("status")=="selected"){return}var hlEl=this.canvas.getHighlighter();var hlStyle=hlEl.style;var unit="px";hlStyle.left=pos.left+unit;hlStyle.top=pos.top+unit;hlStyle.height=pos.height+unit;hlStyle.width=pos.width+unit;hlStyle.display="block"},onSelect:function onSelect(e,el){e.stopPropagation();var md=this.editorModel.get("selectedComponent");this.cleanPrevious(md);var $el=$(el);var nMd=$el.data("model");if(nMd){var em=this.em;var mirror=nMd.get("mirror");nMd=mirror?mirror:nMd;var opened=em.get("opened");for(var cid in opened){var m=opened[cid];m.set("open",0)}var parent=nMd.collection?nMd.collection.parent:null;while(parent){parent.set("open",1);opened[parent.cid]=parent;parent=parent.collection?parent.collection.parent:null}this.editorModel.set("selectedComponent",nMd);nMd.set("status","selected");this.showFixedElementOffset(el);this.hideElementOffset();this.hideHighlighter()}},updateToolbar:function updateToolbar(mod){var em=this.config.em;var model=mod==em?em.get("selectedComponent"):mod;if(!model){return}var toolbar=model.get("toolbar");var ppfx=this.ppfx;var showToolbar=em.get("Config").showToolbar;var toolbarEl=this.canvas.getToolbarEl();var toolbarStyle=toolbarEl.style;if(showToolbar&&toolbar&&toolbar.length){toolbarStyle.display="flex";if(!this.toolbar){toolbarEl.innerHTML="";this.toolbar=new Toolbar(toolbar);var toolbarView=new ToolbarView({collection:this.toolbar,editor:this.editor});toolbarEl.appendChild(toolbarView.render().el)}this.toolbar.reset(toolbar);var view=model.view;if(view){this.updateToolbarPos(view.el)}}else{toolbarStyle.display="none"}},updateToolbarPos:function updateToolbarPos(el,elPos){var unit="px";var toolbarEl=this.canvas.getToolbarEl();var toolbarStyle=toolbarEl.style;var pos=this.canvas.getTargetToElementDim(toolbarEl,el,{elPos:elPos,event:"toolbarPosUpdate"});var leftPos=pos.left+pos.elementWidth-pos.targetWidth;toolbarStyle.top=pos.top+unit;toolbarStyle.left=leftPos+unit},getCanvasPosition:function getCanvasPosition(){return this.canvas.getCanvasView().getPosition()},clean:function clean(){if(this.selEl)this.selEl.removeClass(this.hoverClass)},getBadge:function getBadge(){return this.canvas.getBadgeEl()},onFrameScroll:function onFrameScroll(e){var el=this.cacheEl;if(el){var elPos=this.getElementPos(el);this.updateBadge(el,elPos);var model=this.em.get("selectedComponent");if(model){this.updateToolbarPos(model.view.el)}}},updateAttached:function updateAttached(){var model=this.em.get("selectedComponent");if(model){var view=model.view;this.updateToolbarPos(view.el);this.showFixedElementOffset(view.el)}},getElementPos:function getElementPos(el,badge){return this.canvas.getCanvasView().getElementPos(el)},hideBadge:function hideBadge(){this.getBadge().style.display="none"},cleanPrevious:function cleanPrevious(model){if(model)model.set({status:"",state:""})},getContentWindow:function getContentWindow(){if(!this.contWindow)this.contWindow=$(this.frameEl.contentWindow);return this.contWindow},run:function run(em){if(em&&em.get)this.editor=em.get("Editor");this.enable()},stop:function stop(){this.stopSelectComponent();this.cleanPrevious(this.em.get("selectedComponent"));this.clean();this.em.set("selectedComponent",null);this.toggleClipboard();this.hideBadge();this.hideFixedElementOffset();this.canvas.getToolbarEl().style.display="none";this.em.off("component:update",this.updateAttached,this);this.em.off("change:canvasOffset",this.updateAttached,this);this.em.off("change:selectedComponent",this.updateToolbar,this)}}}).call(exports,__webpack_require__(1))},function(module,exports,__webpack_require__){"use strict";(function(_){var Component=__webpack_require__(8);module.exports=Component.extend({defaults:_.extend({},Component.prototype.defaults,{type:"image",tagName:"img",src:"","void":1,droppable:false,resizable:true,traits:["alt"]}),initialize:function initialize(o,opt){Component.prototype.initialize.apply(this,arguments);var attr=this.get("attributes");if(attr.src)this.set("src",attr.src)},initToolbar:function initToolbar(){for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}Component.prototype.initToolbar.apply(this,args);if(this.sm&&this.sm.get){var cmd=this.sm.get("Commands");var cmdName="image-editor";if(cmd.has(cmdName)){var tb=this.get("toolbar");tb.push({attributes:{"class":"fa fa-pencil"},command:cmdName});this.set("toolbar",tb)}}},getAttrToHTML:function getAttrToHTML(){for(var _len2=arguments.length,args=Array(_len2),_key2=0;_key2<_len2;_key2++){args[_key2]=arguments[_key2]}var attr=Component.prototype.getAttrToHTML.apply(this,args);delete attr.onmousedown;var src=this.get("src");if(src)attr.src=src;return attr},parseUri:function parseUri(uri){var el=document.createElement("a");el.href=uri;var query={};var qrs=el.search.substring(1).split("&");for(var i=0;i<qrs.length;i++){var pair=qrs[i].split("=");var name=decodeURIComponent(pair[0]);if(name)query[name]=decodeURIComponent(pair[1])}return{hostname:el.hostname,pathname:el.pathname,protocol:el.protocol,search:el.search,hash:el.hash,port:el.port,query:query}}},{isComponent:function isComponent(el){var result="";if(el.tagName=="IMG"){result={type:"image"}}return result}})}).call(exports,__webpack_require__(1))},function(module,exports,__webpack_require__){"use strict";function Event(eventType){this.type=eventType}Event.prototype.initEvent=function(eventType,canBubble,cancelable){this.type=eventType;this.bubbles=canBubble;this.cancelable=cancelable;this.timeStamp=+new Date;return this};Event.prototype.stopPropagation=function(){};Event.prototype.preventDefault=function(){};Event.CAPTURING_PHASE=1;Event.AT_TARGET=2;Event.BUBBLING_PHASE=3;module.exports=Event},function(module,exports,__webpack_require__){"use strict";(function(global){var inherits=__webpack_require__(2),IframeTransport=__webpack_require__(72),objectUtils=__webpack_require__(29);module.exports=function(transport){function IframeWrapTransport(transUrl,baseUrl){IframeTransport.call(this,transport.transportName,transUrl,baseUrl)}inherits(IframeWrapTransport,IframeTransport);IframeWrapTransport.enabled=function(url,info){if(!global.document){return false}var iframeInfo=objectUtils.extend({},info);iframeInfo.sameOrigin=true;return transport.enabled(iframeInfo)&&IframeTransport.enabled()};IframeWrapTransport.transportName="iframe-"+transport.transportName;IframeWrapTransport.needBody=true;IframeWrapTransport.roundTrips=IframeTransport.roundTrips+transport.roundTrips-1;IframeWrapTransport.facadeTransport=transport;return IframeWrapTransport}}).call(exports,__webpack_require__(3))},function(module,exports,__webpack_require__){"use strict";(function(process,global){var EventEmitter=__webpack_require__(6).EventEmitter,inherits=__webpack_require__(2),eventUtils=__webpack_require__(11),browser=__webpack_require__(18),urlUtils=__webpack_require__(7);var debug=function(){};if(process.env.NODE_ENV!=="production"){debug=__webpack_require__(5)("sockjs-client:sender:xdr")}function XDRObject(method,url,payload){debug(method,url);var self=this;EventEmitter.call(this);setTimeout(function(){self._start(method,url,payload)},0)}inherits(XDRObject,EventEmitter);XDRObject.prototype._start=function(method,url,payload){debug("_start");var self=this;var xdr=new global.XDomainRequest;url=urlUtils.addQuery(url,"t="+ +new Date);xdr.onerror=function(){debug("onerror");self._error()};xdr.ontimeout=function(){debug("ontimeout");self._error()};xdr.onprogress=function(){debug("progress",xdr.responseText);self.emit("chunk",200,xdr.responseText)};xdr.onload=function(){debug("load");self.emit("finish",200,xdr.responseText);self._cleanup(false)};this.xdr=xdr;this.unloadRef=eventUtils.unloadAdd(function(){self._cleanup(true)});try{this.xdr.open(method,url);if(this.timeout){this.xdr.timeout=this.timeout}this.xdr.send(payload)}catch(x){this._error()}};XDRObject.prototype._error=function(){this.emit("finish",0,"");this._cleanup(false)};XDRObject.prototype._cleanup=function(abort){debug("cleanup",abort);if(!this.xdr){return}this.removeAllListeners();eventUtils.unloadDel(this.unloadRef);this.xdr.ontimeout=this.xdr.onerror=this.xdr.onprogress=this.xdr.onload=null;if(abort){try{this.xdr.abort()}catch(x){}}this.unloadRef=this.xdr=null};XDRObject.prototype.close=function(){debug("close");this._cleanup(true)};XDRObject.enabled=!!(global.XDomainRequest&&browser.hasDomain());module.exports=XDRObject}).call(exports,__webpack_require__(4),__webpack_require__(3))},function(module,exports,__webpack_require__){"use strict";module.exports={isObject:function(obj){var type=typeof obj;return type==="function"||type==="object"&&!!obj},extend:function(obj){if(!this.isObject(obj)){return obj}var source,prop;for(var i=1,length=arguments.length;i<length;i++){source=arguments[i];for(prop in source){if(Object.prototype.hasOwnProperty.call(source,prop)){obj[prop]=source[prop]}}}return obj}}},function(module,exports){module.exports=__WEBPACK_EXTERNAL_MODULE_30__},function(module,exports,__webpack_require__){"use strict";var Backbone=__webpack_require__(0);module.exports=Backbone.Model.extend({idAttribute:"src",defaults:{type:"",src:""},getFilename:function getFilename(){return this.get("src").split("/").pop()},getExtension:function getExtension(){return this.getFilename().split(".").pop()}})},function(module,exports,__webpack_require__){"use strict";var Backbone=__webpack_require__(0);module.exports=Backbone.View.extend({initialize:function initialize(o){this.options=o;this.config=o.config||{};this.pfx=this.config.stylePrefix||"";this.ppfx=this.config.pStylePrefix||"";this.className=this.pfx+"asset";this.listenTo(this.model,"destroy remove",this.remove)}})},function(module,exports,__webpack_require__){"use strict";(function(_){var Backbone=__webpack_require__(0);var fileUploaderTemplate='\n<form>\n  <div id="<%= pfx %>title"><%= title %></div>\n  <input type="file" id="<%= uploadId %>" name="file" accept="image/*" <%= disabled ? \'disabled\' : \'\' %> multiple/>\n  <div style="clear:both;"></div>\n</form>\n';module.exports=Backbone.View.extend({template:_.template(fileUploaderTemplate),events:{},initialize:function initialize(o){this.options=o||{};this.config=o.config||{};this.pfx=this.config.stylePrefix||"";this.target=this.collection||{};this.uploadId=this.pfx+"uploadFile";this.disabled=!this.config.upload;this.events["change #"+this.uploadId]="uploadFile";this.delegateEvents()},uploadFile:function uploadFile(e){var files=e.dataTransfer?e.dataTransfer.files:e.target.files,formData=new FormData;for(var i=0;i<files.length;i++){formData.append("files[]",files[i])}var target=this.target;$.ajax({url:this.config.upload,type:"POST",data:formData,beforeSend:this.config.beforeSend,complete:this.config.onComplete,xhrFields:{onprogress:function onprogress(e){if(e.lengthComputable){}},onload:function onload(e){}},cache:false,contentType:false,processData:false}).done(function(data){target.add(data.data)}).always(function(){})},initDrop:function initDrop(){var that=this;if(!this.uploadForm){this.uploadForm=this.$el.find("form").get(0);if("draggable"in this.uploadForm){var uploadFile=this.uploadFile;this.uploadForm.ondragover=function(){this.className=that.pfx+"hover";return false};this.uploadForm.ondragleave=function(){this.className="";return false};this.uploadForm.ondrop=function(e){this.className="";e.preventDefault();that.uploadFile(e);return}}}},render:function render(){this.$el.html(this.template({title:this.config.uploadText,uploadId:this.uploadId,disabled:this.disabled,pfx:this.pfx}));this.initDrop();this.$el.attr("class",this.pfx+"file-uploader");return this}})}).call(exports,__webpack_require__(1))},function(module,exports,__webpack_require__){"use strict";var Backbone=__webpack_require__(0);module.exports=Backbone.Model.extend({defaults:{id:"",label:"",open:true,attributes:{}}})},function(module,exports,__webpack_require__){"use strict";(function(_){var Backbone=__webpack_require__(0);var CreateComponent=__webpack_require__(23);module.exports=_.extend({},CreateComponent,{init:function init(){for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}CreateComponent.init.apply(this,args);_.bindAll(this,"insertComponent");this.allowDraw=0},run:function run(em,sender,options){alert("init");this.sender=sender;this.opt=options||{};this.$wr=this.$wrapper;this.enable()},enable:function enable(){for(var _len2=arguments.length,args=Array(_len2),_key2=0;_key2<_len2;_key2++){args[_key2]=arguments[_key2]}CreateComponent.enable.apply(this,args);this.$wr.on("click",this.insertComponent)},insertComponent:function insertComponent(){this.$wr.off("click",this.insertComponent);this.stopSelectPosition();var object=this.buildContent();this.beforeInsert(object);var index=this.sorter.lastPos.index;var model=this.create(this.sorter.target,object,index,null,{silent:false});if(this.opt.terminateAfterInsert&&this.sender)this.sender.set("active",false);else this.enable();if(!model)return;if(this.em)this.em.editor.initChildrenComp(model);this.afterInsert(model,this)},beforeInsert:function beforeInsert(obj){},afterInsert:function afterInsert(model){},buildContent:function buildContent(){return this.opt.content||{}}})}).call(exports,__webpack_require__(1))},function(module,exports,__webpack_require__){"use strict";module.exports={startSelectPosition:function startSelectPosition(trg,doc){this.isPointed=false;var utils=this.editorModel.get("Utils");if(utils&&!this.sorter)this.sorter=new utils.Sorter({container:this.getCanvasBody(),placer:this.canvas.getPlacerEl(),containerSel:"*",itemSel:"*",pfx:this.ppfx,direction:"a",document:doc,wmargin:1,nested:1,em:this.editorModel,canvasRelative:1});this.sorter.startSort(trg)},getOffsetDim:function getOffsetDim(){var frameOff=this.offset(this.canvas.getFrameEl());var canvasOff=this.offset(this.canvas.getElement());var top=frameOff.top-canvasOff.top;var left=frameOff.left-canvasOff.left;return{top:top,left:left}},stopSelectPosition:function stopSelectPosition(){this.posTargetCollection=null;this.posIndex=this.posMethod=="after"&&this.cDim.length!==0?this.posIndex+1:this.posIndex;if(this.sorter){this.sorter.moved=0;this.sorter.endMove()}if(this.cDim){this.posIsLastEl=this.cDim.length!==0&&this.posMethod=="after"&&this.posIndex==this.cDim.length;this.posTargetEl=this.cDim.length===0?$(this.outsideElem):!this.posIsLastEl&&this.cDim[this.posIndex]?$(this.cDim[this.posIndex][5]).parent():$(this.outsideElem);this.posTargetModel=this.posTargetEl.data("model");this.posTargetCollection=this.posTargetEl.data("model-comp")}},enable:function enable(){this.startSelectPosition()},nearFloat:function nearFloat(index,method,dims){var i=index||0;var m=method||"before";var len=dims.length;var isLast=len!==0&&m=="after"&&i==len;if(len!==0&&(!isLast&&!dims[i][4]||dims[i-1]&&!dims[i-1][4]||isLast&&!dims[i-1][4]))return 1;return 0},run:function run(){this.enable()},stop:function stop(){this.stopSelectPosition();this.$wrapper.css("cursor","");this.$wrapper.unbind()}}},function(module,exports,__webpack_require__){"use strict";(function(_){var Backbone=__webpack_require__(0);var Selectors=__webpack_require__(38);module.exports=Backbone.Model.extend({defaults:{selectors:{},selectorsAdd:"",style:{},mediaText:"",state:"",stylable:true},initialize:function initialize(c,opt){this.config=c||{};this.sm=opt?opt.sm||{}:{};this.slct=this.config.selectors||[];if(this.sm.get){var slct=[];for(var i=0;i<this.slct.length;i++){slct.push(this.sm.get("SelectorManager").add(this.slct[i].name||this.slct[i]))}this.slct=slct}this.set("selectors",new Selectors(this.slct))},compare:function compare(selectors,state,width,ruleProps){var otherRule=ruleProps||{};var st=state||"";var wd=width||"";var selectorsAdd=otherRule.selectorsAdd||"";var cId="cid";if(!(selectors instanceof Array)&&!selectors.models)selectors=[selectors];var a1=_.map(selectors.models||selectors,function(model){return model.get("name")});var a2=_.map(this.get("selectors").models,function(model){return model.get("name")});var f=false;if(a1.length!==a2.length)return f;for(var i=0;i<a1.length;i++){var re=0;for(var j=0;j<a2.length;j++){if(a1[i]===a2[j])re=1}if(re===0)return f}if(this.get("state")!==st)return f;if(this.get("mediaText")!==wd)return f;if(this.get("selectorsAdd")!==selectorsAdd)return f;return true}})}).call(exports,__webpack_require__(1))},function(module,exports,__webpack_require__){"use strict";var Backbone=__webpack_require__(0);module.exports=Backbone.Collection.extend({initialize:function initialize(models,opt){this.model=function(attrs,opts){var model;switch(1){default:if(!this.ClassTag)this.ClassTag=__webpack_require__(53);model=new this.ClassTag(attrs,opts)}return model}}})},function(module,exports,__webpack_require__){"use strict";(function(_){var Component=__webpack_require__(8);module.exports=Component.extend({defaults:_.extend({},Component.prototype.defaults,{type:"text",droppable:false,editable:true})})}).call(exports,__webpack_require__(1))},function(module,exports,__webpack_require__){"use strict";(function(_){var Backbone=__webpack_require__(0);var ComponentView=__webpack_require__(10);module.exports=ComponentView.extend({events:{dblclick:"enableEditing",change:"parseRender"},initialize:function initialize(o){ComponentView.prototype.initialize.apply(this,arguments);_.bindAll(this,"disableEditing");this.listenTo(this.model,"focus active",this.enableEditing);this.rte=this.config.rte||"";this.activeRte=null;this.em=this.config.em},enableEditing:function enableEditing(e){var editable=this.model.get("editable");if(this.rte&&editable){try{this.activeRte=this.rte.attach(this,this.activeRte);this.rte.focus(this,this.activeRte)}catch(err){console.error(err)}}this.toggleEvents(1)},disableEditing:function disableEditing(e){var model=this.model;var editable=model.get("editable");if(this.rte&&editable){try{this.rte.detach(this,this.activeRte)}catch(err){console.error(err)}var el=this.getChildrenContainer();model.set("content",el.innerHTML)}if(!this.rte.customRte&&editable){this.parseRender()}this.toggleEvents()},disablePropagation:function disablePropagation(e){e.stopPropagation()},parseRender:function parseRender(){var el=this.getChildrenContainer();var comps=this.model.get("components");var opts={silent:true};comps.reset(null,opts);comps.add(el.innerHTML,opts);this.model.set("content","");this.render();comps.trigger("resetNavigator")},toggleEvents:function toggleEvents(enable){var method=enable?"on":"off";var elDocs=[this.el.ownerDocument,document,this.rte];$(elDocs).off("mousedown",this.disableEditing);$(elDocs)[method]("mousedown",this.disableEditing);this.$el.off("mousedown",this.disablePropagation);this.$el[method]("mousedown",this.disablePropagation)}})}).call(exports,__webpack_require__(1))},function(module,exports,__webpack_require__){"use strict";(function(_){var Backbone=__webpack_require__(0);var Input=__webpack_require__(169);var Spectrum=__webpack_require__(302);module.exports=Input.extend({template:_.template('\n  <div class=\'<%= ppfx %>input-holder\'></div>\n  <div class="<%= ppfx %>field-colorp">\n    <div class="<%= ppfx %>field-colorp-c">\n      <div class="<%= ppfx %>checker-bg"></div>\n    </div>\n  </div>'),initialize:function initialize(opts){Input.prototype.initialize.apply(this,arguments);var ppfx=this.ppfx;this.colorCls=ppfx+"field-color-picker";this.inputClass=ppfx+"field "+ppfx+"field-color";this.colorHolderClass=ppfx+"field-colorp-c";this.listenTo(this.model,"change:value",this.handleModelChange)},handleModelChange:function handleModelChange(){for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}Input.prototype.handleModelChange.apply(this,args);var value=this.model.get("value");var colorEl=this.getColorEl();value=value==="none"?"#fff":value;colorEl.spectrum("set",value);colorEl.get(0).style.backgroundColor=value},getColorEl:function getColorEl(){if(!this.colorEl){var model=this.model;var colorEl=$("<div>",{"class":this.colorCls});var cpStyle=colorEl.get(0).style;var elToAppend=this.target&&this.target.config?this.target.config.el:"";colorEl.spectrum({appendTo:elToAppend||"body",maxSelectionSize:8,showPalette:true,showAlpha:true,chooseText:"Ok",cancelText:"⨯",palette:[],move:function move(color){var c=color.getAlpha()==1?color.toHexString():color.toRgbString();cpStyle.backgroundColor=c},change:function change(color){var c=color.getAlpha()==1?color.toHexString():color.toRgbString();
c=c.replace(/ /g,"");cpStyle.backgroundColor=c;model.set("value",c)}});this.colorEl=colorEl}return this.colorEl},render:function render(){for(var _len2=arguments.length,args=Array(_len2),_key2=0;_key2<_len2;_key2++){args[_key2]=arguments[_key2]}Input.prototype.render.apply(this,args);this.$el.find("."+this.colorHolderClass).html(this.getColorEl());return this}})}).call(exports,__webpack_require__(1))},function(module,exports,__webpack_require__){"use strict";(function(_){var Backbone=__webpack_require__(0);module.exports=Backbone.View.extend({events:{},template:_.template('\n  <span class=\'<%= ppfx %>input-holder\'></span>\n  <span class=\'<%= ppfx %>field-units\'></span>\n  <div class="<%= ppfx %>field-arrows">\n    <div class="<%= ppfx %>field-arrow-u"></div>\n    <div class="<%= ppfx %>field-arrow-d"></div>\n  </div>'),initialize:function initialize(opts){_.bindAll(this,"moveIncrement","upIncrement");var opt=opts||{};var ppfx=opt.ppfx||"";var contClass=opt.contClass||ppfx+"field";this.ppfx=ppfx;this.docEl=$(document);this.inputCls=ppfx+"input-number";this.unitCls=ppfx+"input-unit";this.contClass=contClass;this.events["click ."+ppfx+"field-arrow-u"]="upArrowClick";this.events["click ."+ppfx+"field-arrow-d"]="downArrowClick";this.events["mousedown ."+ppfx+"field-arrows"]="downIncrement";this.events["change ."+this.inputCls]="handleChange";this.events["change ."+this.unitCls]="handleUnitChange";this.listenTo(this.model,"change:unit change:value",this.handleModelChange);this.delegateEvents()},setValue:function setValue(value,opts){var opt=opts||{};var valid=this.validateInputValue(value,{deepCheck:1});var validObj={value:valid.value};if(valid.unit||valid.force){validObj.unit=valid.unit}this.model.set(validObj,opt);if(opt.silent){this.handleModelChange()}},handleChange:function handleChange(e){e.stopPropagation();this.setValue(this.getInputEl().value)},handleUnitChange:function handleUnitChange(e){e.stopPropagation();var value=this.getUnitEl().value;this.model.set("unit",value)},handleModelChange:function handleModelChange(){var m=this.model;this.getInputEl().value=m.get("value");var unit=this.getUnitEl();if(unit){unit.value=m.get("unit")}},getInputEl:function getInputEl(){if(!this.inputEl){this.inputEl=$("<input>",{type:"text","class":this.inputCls,placeholder:this.model.get("defaults")})}return this.inputEl.get(0)},getUnitEl:function getUnitEl(){if(!this.unitEl){var model=this.model;var units=model.get("units")||[];if(units.length){var unitStr='<select class="'+this.unitCls+'">';_.each(units,function(unit){var selected=unit==model.get("unit")?"selected":"";unitStr+="<option "+selected+" >"+unit+"</option>"});unitStr+="</select>";this.unitEl=$(unitStr)}}return this.unitEl&&this.unitEl.get(0)},upArrowClick:function upArrowClick(){var value=this.model.get("value");value=isNaN(value)?1:parseInt(value,10)+1;var valid=this.validateInputValue(value);this.model.set("value",valid.value)},downArrowClick:function downArrowClick(){var value=this.model.get("value");value=isNaN(value)?0:parseInt(value,10)-1;var valid=this.validateInputValue(value);this.model.set("value",valid.value)},downIncrement:function downIncrement(e){e.preventDefault();this.moved=0;var value=this.model.get("value");value=isNaN(value)?0:parseInt(value,10);var current={y:e.pageY,val:value};this.docEl.mouseup(current,this.upIncrement);this.docEl.mousemove(current,this.moveIncrement)},moveIncrement:function moveIncrement(ev){this.moved=1;var pos=parseInt(ev.data.val-ev.pageY+ev.data.y,10);this.prValue=this.validateInputValue(pos).value;this.model.set("value",this.prValue,{avoidStore:1});return false},upIncrement:function upIncrement(e){this.docEl.off("mouseup",this.upIncrement);this.docEl.off("mousemove",this.moveIncrement);if(this.prValue&&this.moved){var value=this.prValue-1;this.model.set("value",value,{avoidStore:1}).set("value",value+1)}},validateInputValue:function validateInputValue(value,opts){var force=0;var opt=opts||{};var model=this.model;var val=value||model.get("defaults");var units=model.get("units")||[];var unit=model.get("unit")||units.length&&units[0]||"";var max=model.get("max");var min=model.get("min");if(opt.deepCheck){var fixed=model.get("fixedValues")||[];if(val){var regFixed=new RegExp("^"+fixed.join("|"),"g");if(fixed.length&&regFixed.test(val)){val=val.match(regFixed)[0];unit="";force=1}else{var valCopy=val+"";val+="";val=parseFloat(val.replace(",","."));val=!isNaN(val)?val:model.get("defaults");var uN=valCopy.replace(val,"");if(_.indexOf(units,uN)>=0)unit=uN}}}if(typeof max!=="undefined"&&max!=="")val=val>max?max:val;if(typeof min!=="undefined"&&min!=="")val=val<min?min:val;return{force:force,value:val,unit:unit}},render:function render(){var ppfx=this.ppfx;this.$el.html(this.template({ppfx:ppfx}));this.$el.find("."+ppfx+"input-holder").html(this.getInputEl());this.$el.find("."+ppfx+"field-units").html(this.getUnitEl());this.$el.addClass(this.contClass);return this}})}).call(exports,__webpack_require__(1))},function(module,exports,__webpack_require__){"use strict";var Backbone=__webpack_require__(0);module.exports=Backbone.View.extend({itemView:"",itemsView:"",itemType:"type",initialize:function initialize(opts,config){this.config=config||{}},addTo:function addTo(model){this.add(model)},add:function add(model,fragment){var frag=fragment||null;var itemView=this.itemView;var typeField=model.get(this.itemType);if(this.itemsView&&this.itemsView[typeField]){itemView=this.itemsView[typeField]}var view=new itemView({model:model,config:this.config},this.config);var rendered=view.render().el;if(frag)frag.appendChild(rendered);else this.$el.append(rendered)},render:function render(){var frag=document.createDocumentFragment();this.$el.empty();if(this.collection.length)this.collection.each(function(model){this.add(model,frag)},this);this.$el.append(frag);return this}})},function(module,exports,__webpack_require__){"use strict";var Backbone=__webpack_require__(0);module.exports=Backbone.Model.extend({idAttribute:"src",defaults:{type:"",src:""},getFilename:function getFilename(){return this.get("src").split("/").pop()},getExtension:function getExtension(){return this.getFilename().split(".").pop()}})},function(module,exports,__webpack_require__){"use strict";function Navigator(collection,c){var config=c,defaults=__webpack_require__(193),ItemsView=__webpack_require__(46);for(var name in defaults){if(!(name in config))config[name]=defaults[name]}var obj={collection:collection,config:config,opened:c.opened||{}};this.ItemsView=new ItemsView(obj)}Navigator.prototype={render:function render(){return this.ItemsView.render().$el}};module.exports=Navigator},function(module,exports,__webpack_require__){"use strict";(function(_){var Backbone=__webpack_require__(0);var ItemView=__webpack_require__(194);module.exports=Backbone.View.extend({initialize:function initialize(o){this.opt=o;this.config=o.config;this.preview=o.preview;this.ppfx=o.config.pStylePrefix||"";this.pfx=o.config.stylePrefix||"";this.parent=o.parent;this.listenTo(this.collection,"add",this.addTo);this.listenTo(this.collection,"reset resetNavigator",this.render);this.className=this.pfx+"items";if(this.config.sortable&&!this.opt.sorter){var pfx=this.pfx;var utils=this.config.em.get("Utils");this.opt.sorter=new utils.Sorter({container:this.el,containerSel:"."+pfx+"items",itemSel:"."+pfx+"item",ppfx:this.ppfx,pfx:pfx,nested:1})}this.sorter=this.opt.sorter||"";if(!this.parent)this.className+=" "+this.pfx+this.config.containerId;this.$el.data("collection",this.collection)},addTo:function addTo(model){var i=this.collection.indexOf(model);this.addToCollection(model,null,i)},addToCollection:function addToCollection(model,fragmentEl,index){var fragment=fragmentEl||null;var viewObject=ItemView;var view=new viewObject({model:model,config:this.config,sorter:this.sorter,isCountable:this.isCountable,opened:this.opt.opened});var rendered=view.render().el;if(fragment){fragment.appendChild(rendered)}else{if(typeof index!="undefined"){var method="before";if(this.$el.children().length==index){index--;method="after"}if(index<0){this.$el.append(rendered)}else this.$el.children().eq(index)[method](rendered)}else this.$el.append(rendered)}return rendered},isCountable:function isCountable(model,hide){var type=model.get("type");var tag=model.get("tagName");if((type=="textnode"||tag=="br")&&hide||model.get("hiddenLayer")){return false}return true},render:function render(){var fragment=document.createDocumentFragment();this.$el.empty();this.collection.each(function(model){if(!this.isCountable(model,this.config.hideTextnode))return;this.addToCollection(model,fragment)},this);this.$el.append(fragment);this.$el.attr("class",_.result(this,"className"));return this}})}).call(exports,__webpack_require__(1))},function(module,exports,__webpack_require__){"use strict";var Backbone=__webpack_require__(0);module.exports=Backbone.Model.extend({defaults:{id:"",label:"",open:true,attributes:{}}})},function(module,exports,__webpack_require__){"use strict";var Backbone=__webpack_require__(0);var Button=__webpack_require__(205);module.exports=Backbone.Collection.extend({model:Button,deactivateAllExceptOne:function deactivateAllExceptOne(except,r){this.forEach(function(model,index){if(model!==except){model.set("active",false);if(r&&model.get("buttons").length)model.get("buttons").deactivateAllExceptOne(except,r)}})},deactivateAll:function deactivateAll(ctx){var context=ctx||"";this.forEach(function(model,index){if(model.get("context")==context){model.set("active",false);if(model.get("buttons").length)model.get("buttons").deactivateAll(context)}})}})},function(module,exports,__webpack_require__){"use strict";var Backbone=__webpack_require__(0);var Buttons=__webpack_require__(48);module.exports=Backbone.Model.extend({defaults:{id:"",content:"",visible:true,buttons:[]},initialize:function initialize(options){this.btn=this.get("buttons")||[];this.buttons=new Buttons(this.btn);this.set("buttons",this.buttons)}})},function(module,exports,__webpack_require__){"use strict";(function(_){var Backbone=__webpack_require__(0);var ButtonView=__webpack_require__(207);module.exports=Backbone.View.extend({initialize:function initialize(o){this.opt=o||{};this.config=this.opt.config||{};this.pfx=this.config.stylePrefix||"";this.parentM=this.opt.parentM||null;this.listenTo(this.collection,"add",this.addTo);this.listenTo(this.collection,"reset",this.render);this.className=this.pfx+"buttons"},addTo:function addTo(model){this.addToCollection(model)},addToCollection:function addToCollection(model,fragmentEl){var fragment=fragmentEl||null;var viewObject=ButtonView;var view=new viewObject({model:model,config:this.config,parentM:this.parentM});var rendered=view.render().el;if(fragment){fragment.appendChild(rendered)}else{this.$el.append(rendered)}return rendered},render:function render(){var fragment=document.createDocumentFragment();this.$el.empty();this.collection.each(function(model){this.addToCollection(model,fragment)},this);this.$el.append(fragment);this.$el.attr("class",_.result(this,"className"));return this}})}).call(exports,__webpack_require__(1))},function(module,exports,__webpack_require__){"use strict";var Backbone=__webpack_require__(0);var ButtonsView=__webpack_require__(50);module.exports=Backbone.View.extend({initialize:function initialize(o){this.config=o.config||{};this.pfx=this.config.stylePrefix||"";this.buttons=this.model.get("buttons");this.className=this.pfx+"panel";this.id=this.pfx+this.model.get("id");this.listenTo(this.model,"change:appendContent",this.appendContent);this.listenTo(this.model,"change:content",this.updateContent)},appendContent:function appendContent(){this.$el.append(this.model.get("appendContent"))},updateContent:function updateContent(){this.$el.html(this.model.get("content"))},initResize:function initResize(){var em=this.config.em;var editor=em?em.get("Editor"):"";var resizable=this.model.get("resizable");if(editor&&resizable){var resz=resizable===true?[1,1,1,1]:resizable;var resLen=resz.length;var tc,cr,bc,cl=0;if(resLen==2){tc=resz[0];bc=resz[0];cr=resz[1];cl=resz[1]}else if(resLen==4){tc=resz[0];cr=resz[1];bc=resz[2];cl=resz[3]}var resizer=editor.Utils.Resizer.init({tc:tc,cr:cr,bc:bc,cl:cl,tl:0,tr:0,bl:0,br:0,appendTo:this.el,prefix:editor.getConfig().stylePrefix,posFetcher:function posFetcher(el){var rect=el.getBoundingClientRect();return{left:0,top:0,width:rect.width,height:rect.height}}});resizer.blur=function(){};resizer.focus(this.el)}},render:function render(){this.$el.attr("class",this.className);if(this.id)this.$el.attr("id",this.id);if(this.buttons.length){var buttons=new ButtonsView({collection:this.buttons,config:this.config});this.$el.append(buttons.render().el)}this.$el.append(this.model.get("content"));return this}})},function(module,exports,__webpack_require__){"use strict";var Backbone=__webpack_require__(0);module.exports=Backbone.View.extend({tagName:"a",initialize:function initialize(o,config){this.config=config||{};this.ppfx=this.config.pStylePrefix||"";this.className=this.config.stylePrefix+"btn "+this.model.get("class")},render:function render(){this.$el.addClass(this.className);return this}})},function(module,exports,__webpack_require__){"use strict";var Backbone=__webpack_require__(0);module.exports=Backbone.Model.extend({idAttribute:"name",defaults:{name:"",label:"",type:"class",active:true},initialize:function initialize(){this.set("name",this.escapeName(this.get("name")));var label=this.get("label").trim();if(!label)this.set("label",this.get("name"))},escapeName:function escapeName(name){return name.replace(/([^a-z0-9\w]+)/gi,"-")}})},function(module,exports,__webpack_require__){"use strict";var Backbone=__webpack_require__(0);var Selector=__webpack_require__(53);module.exports=Backbone.Collection.extend({model:Selector})},function(module,exports,__webpack_require__){"use strict";(function(_){module.exports=function(){var c={},defaults=__webpack_require__(230),Sectors=__webpack_require__(235),SectorsView=__webpack_require__(245);var sectors,SectView;return{name:"StyleManager",getConfig:function getConfig(){return c},init:function init(config){c=config||{};for(var name in defaults){if(!(name in c))c[name]=defaults[name]}var ppfx=c.pStylePrefix;if(ppfx)c.stylePrefix=ppfx+c.stylePrefix;sectors=new Sectors(c.sectors);SectView=new SectorsView({collection:sectors,target:c.em,config:c});return this},addSector:function addSector(id,sector){var result=this.getSector(id);if(!result){sector.id=id;result=sectors.add(sector)}return result},getSector:function getSector(id){var res=sectors.where({id:id});return res.length?res[0]:null},getSectors:function getSectors(){return sectors},addProperty:function addProperty(sectorId,property){var prop=null;var sector=this.getSector(sectorId);if(sector)prop=sector.get("properties").add(property);return prop},getProperty:function getProperty(sectorId,name){var prop=null;var sector=this.getSector(sectorId);if(sector){prop=sector.get("properties").where({property:name});prop=prop.length==1?prop[0]:prop}return prop},getProperties:function getProperties(sectorId){var props=null;var sector=this.getSector(sectorId);if(sector)props=sector.get("properties");return props},getModelToStyle:function getModelToStyle(model){var classes=model.get("classes");if(c.em&&classes&&classes.length){var previewMode=c.em.get("Config").devicePreviewMode;var device=c.em.getDeviceModel();var state=!previewMode?model.get("state"):"";var deviceW=device&&!previewMode?device.get("width"):"";var cssC=c.em.get("CssComposer");var valid=_.filter(classes.models,function(item){return item.get("active")});var CssRule=cssC.get(valid,state,deviceW);if(CssRule){return CssRule}}return model},render:function render(){return SectView.render().el}}}}).call(exports,__webpack_require__(1))},function(module,exports,__webpack_require__){"use strict";var Backbone=__webpack_require__(0);var Layer=__webpack_require__(231);module.exports=Backbone.Collection.extend({model:Layer,initialize:function initialize(){this.idx=1;this.on("add",this.onAdd);this.on("reset",this.onReset)},onAdd:function onAdd(model,c,opts){if(!opts.noIncrement)model.set("index",this.idx++)},onReset:function onReset(){this.idx=1}})},function(module,exports,__webpack_require__){"use strict";var Backbone=__webpack_require__(0);var Property=__webpack_require__(232);module.exports=Backbone.Collection.extend({model:Property})},function(module,exports,__webpack_require__){"use strict";var Backbone=__webpack_require__(0);var PropertyView=__webpack_require__(12);var PropertyIntegerView=__webpack_require__(240);var PropertyRadioView=__webpack_require__(241);var PropertySelectView=__webpack_require__(242);var PropertyColorView=__webpack_require__(238);var PropertyFileView=__webpack_require__(239);var PropertyCompositeView=__webpack_require__(59);var PropertyStackView=__webpack_require__(243);module.exports=Backbone.View.extend({initialize:function initialize(o){this.config=o.config||{};this.pfx=this.config.stylePrefix||"";this.target=o.target||{};this.propTarget=o.propTarget||{};this.onChange=o.onChange||{};this.onInputRender=o.onInputRender||{};this.customValue=o.customValue||{}},render:function render(){var fragment=document.createDocumentFragment();this.collection.each(function(model){var objView=PropertyView;switch(model.get("type")){case"integer":objView=PropertyIntegerView;break;case"radio":objView=PropertyRadioView;break;case"select":objView=PropertySelectView;break;case"color":objView=PropertyColorView;break;case"file":objView=PropertyFileView;break;case"composite":objView=PropertyCompositeView;break;case"stack":objView=PropertyStackView;break}var view=new objView({model:model,name:model.get("name"),id:this.pfx+model.get("property"),target:this.target,propTarget:this.propTarget,onChange:this.onChange,onInputRender:this.onInputRender,config:this.config});if(model.get("type")!="composite"){view.customValue=this.customValue}fragment.appendChild(view.render().el)},this);this.$el.append(fragment);this.$el.append($("<div>",{"class":"clear"}));this.$el.attr("class",this.pfx+"properties");return this}})},function(module,exports,__webpack_require__){"use strict";(function(_){var Backbone=__webpack_require__(0);var PropertyView=__webpack_require__(12);module.exports=PropertyView.extend({template:_.template('\n  <div class="<%= pfx %>field <%= pfx %>composite">\n  	<span id=\'<%= pfx %>input-holder\'></span>\n  </div>\n  <div style="clear:both"></div>'),initialize:function initialize(o){PropertyView.prototype.initialize.apply(this,arguments);_.bindAll(this,"build");this.config=o.config||{};this.className=this.className+" "+this.pfx+"composite"},valueUpdated:function valueUpdated(){for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}if(!this.model.get("detached"))PropertyView.prototype.valueUpdated.apply(this,args)},renderInput:function renderInput(){var model=this.model;var props=model.get("properties")||[];var self=this;if(props.length){if(!this.$input)this.$input=$("<input>",{value:0,type:"hidden"});if(!this.props){this.props=model.get("properties")}if(!this.$props){this.props.each(function(prop,index){if(prop&&prop.get("type")=="composite"){this.props.remove(prop);console.warn("Nested composite types not yet allowed.")}prop.parent=model},this);var PropertiesView=__webpack_require__(58);var propsView=new PropertiesView(this.getPropsConfig());this.$props=propsView.render().$el;this.$el.find("#"+this.pfx+"input-holder").html(this.$props)}}},getPropsConfig:function getPropsConfig(opts){var that=this;var result={config:this.config,collection:this.props,target:this.target,propTarget:this.propTarget,onChange:function onChange(el,view,opts){var result=that.build();that.model.set("value",result,opts)},customValue:function customValue(property,mIndex){return that.valueOnIndex(mIndex,property)}};if(this.model.get("detached"))delete result.onChange;return result},getDefaultValue:function getDefaultValue(){var str="";this.props.each(function(prop,index){str+=prop.get("defaults")+prop.get("unit")+" "});return str.replace(/ +$/,"")},valueOnIndex:function valueOnIndex(index,view){var result=null;var a=this.getComponentValue().split(" ");if(a.length&&a[index]){result=a[index];if(view&&view.model&&view.model.get("functionName")){var v=this.fetchFromFunction(result);if(v)result=v}}return result},build:function build(selectedEl,propertyView,opts){var result="";this.model.get("properties").each(function(prop){var v=prop.getValue();var func=prop.get("functionName");if(func)v=func+"("+v+")";result+=v+" "});return result.replace(/ +$/,"")}})}).call(exports,__webpack_require__(1))},function(module,exports,__webpack_require__){"use strict";var Backbone=__webpack_require__(0);var Trait=__webpack_require__(248);var TraitFactory=__webpack_require__(249);module.exports=Backbone.Collection.extend({model:Trait,setTarget:function setTarget(target){this.target=target},add:function add(models,opt){if(typeof models==="string"||models instanceof Array){if(typeof models==="string")models=[models];for(var i=0,len=models.length;i<len;i++){var str=models[i];var model=typeof str==="string"?TraitFactory.build(str)[0]:str;model.target=this.target;models[i]=model}}return Backbone.Collection.prototype.add.apply(this,[models,opt])}})},function(module,exports,__webpack_require__){(function(mod){if(true)mod(__webpack_require__(13));else if(typeof define=="function"&&define.amd)define(["../../lib/codemirror"],mod);else mod(CodeMirror)})(function(CodeMirror){"use strict";CodeMirror.defineMode("css",function(config,parserConfig){var inline=parserConfig.inline;if(!parserConfig.propertyKeywords)parserConfig=CodeMirror.resolveMode("text/css");var indentUnit=config.indentUnit,tokenHooks=parserConfig.tokenHooks,documentTypes=parserConfig.documentTypes||{},mediaTypes=parserConfig.mediaTypes||{},mediaFeatures=parserConfig.mediaFeatures||{},mediaValueKeywords=parserConfig.mediaValueKeywords||{},propertyKeywords=parserConfig.propertyKeywords||{},nonStandardPropertyKeywords=parserConfig.nonStandardPropertyKeywords||{},fontProperties=parserConfig.fontProperties||{},counterDescriptors=parserConfig.counterDescriptors||{},colorKeywords=parserConfig.colorKeywords||{},valueKeywords=parserConfig.valueKeywords||{},allowNested=parserConfig.allowNested,lineComment=parserConfig.lineComment,supportsAtComponent=parserConfig.supportsAtComponent===true;var type,override;function ret(style,tp){type=tp;return style}function tokenBase(stream,state){var ch=stream.next();if(tokenHooks[ch]){var result=tokenHooks[ch](stream,state);if(result!==false)return result}if(ch=="@"){stream.eatWhile(/[\w\\\-]/);return ret("def",stream.current())}else if(ch=="="||(ch=="~"||ch=="|")&&stream.eat("=")){return ret(null,"compare")}else if(ch=='"'||ch=="'"){state.tokenize=tokenString(ch);return state.tokenize(stream,state)}else if(ch=="#"){stream.eatWhile(/[\w\\\-]/);return ret("atom","hash")}else if(ch=="!"){stream.match(/^\s*\w*/);return ret("keyword","important")}else if(/\d/.test(ch)||ch=="."&&stream.eat(/\d/)){stream.eatWhile(/[\w.%]/);return ret("number","unit")}else if(ch==="-"){if(/[\d.]/.test(stream.peek())){stream.eatWhile(/[\w.%]/);return ret("number","unit")}else if(stream.match(/^-[\w\\\-]+/)){stream.eatWhile(/[\w\\\-]/);if(stream.match(/^\s*:/,false))return ret("variable-2","variable-definition");return ret("variable-2","variable")}else if(stream.match(/^\w+-/)){return ret("meta","meta")}}else if(/[,+>*\/]/.test(ch)){return ret(null,"select-op")}else if(ch=="."&&stream.match(/^-?[_a-z][_a-z0-9-]*/i)){return ret("qualifier","qualifier")}else if(/[:;{}\[\]\(\)]/.test(ch)){return ret(null,ch)}else if(ch=="u"&&stream.match(/rl(-prefix)?\(/)||ch=="d"&&stream.match("omain(")||ch=="r"&&stream.match("egexp(")){stream.backUp(1);state.tokenize=tokenParenthesized;return ret("property","word")}else if(/[\w\\\-]/.test(ch)){stream.eatWhile(/[\w\\\-]/);return ret("property","word")}else{return ret(null,null)}}function tokenString(quote){return function(stream,state){var escaped=false,ch;while((ch=stream.next())!=null){if(ch==quote&&!escaped){if(quote==")")stream.backUp(1);break}escaped=!escaped&&ch=="\\"}if(ch==quote||!escaped&&quote!=")")state.tokenize=null;return ret("string","string")}}function tokenParenthesized(stream,state){stream.next();if(!stream.match(/\s*[\"\')]/,false))state.tokenize=tokenString(")");else state.tokenize=null;return ret(null,"(")}function Context(type,indent,prev){this.type=type;this.indent=indent;this.prev=prev}function pushContext(state,stream,type,indent){state.context=new Context(type,stream.indentation()+(indent===false?0:indentUnit),state.context);return type}function popContext(state){if(state.context.prev)state.context=state.context.prev;return state.context.type}function pass(type,stream,state){return states[state.context.type](type,stream,state)}function popAndPass(type,stream,state,n){for(var i=n||1;i>0;i--)state.context=state.context.prev;return pass(type,stream,state)}function wordAsValue(stream){var word=stream.current().toLowerCase();if(valueKeywords.hasOwnProperty(word))override="atom";else if(colorKeywords.hasOwnProperty(word))override="keyword";else override="variable"}var states={};states.top=function(type,stream,state){if(type=="{"){return pushContext(state,stream,"block")}else if(type=="}"&&state.context.prev){return popContext(state)}else if(supportsAtComponent&&/@component/.test(type)){return pushContext(state,stream,"atComponentBlock")}else if(/^@(-moz-)?document$/.test(type)){return pushContext(state,stream,"documentTypes")}else if(/^@(media|supports|(-moz-)?document|import)$/.test(type)){return pushContext(state,stream,"atBlock")}else if(/^@(font-face|counter-style)/.test(type)){state.stateArg=type;return"restricted_atBlock_before"}else if(/^@(-(moz|ms|o|webkit)-)?keyframes$/.test(type)){return"keyframes"}else if(type&&type.charAt(0)=="@"){return pushContext(state,stream,"at")}else if(type=="hash"){override="builtin"}else if(type=="word"){override="tag"}else if(type=="variable-definition"){return"maybeprop"}else if(type=="interpolation"){return pushContext(state,stream,"interpolation")}else if(type==":"){return"pseudo"}else if(allowNested&&type=="("){return pushContext(state,stream,"parens")}return state.context.type};states.block=function(type,stream,state){if(type=="word"){var word=stream.current().toLowerCase();if(propertyKeywords.hasOwnProperty(word)){override="property";return"maybeprop"}else if(nonStandardPropertyKeywords.hasOwnProperty(word)){override="string-2";return"maybeprop"}else if(allowNested){override=stream.match(/^\s*:(?:\s|$)/,false)?"property":"tag";return"block"}else{override+=" error";return"maybeprop"}}else if(type=="meta"){return"block"}else if(!allowNested&&(type=="hash"||type=="qualifier")){override="error";return"block"}else{return states.top(type,stream,state)}};states.maybeprop=function(type,stream,state){if(type==":")return pushContext(state,stream,"prop");return pass(type,stream,state)};states.prop=function(type,stream,state){if(type==";")return popContext(state);if(type=="{"&&allowNested)return pushContext(state,stream,"propBlock");if(type=="}"||type=="{")return popAndPass(type,stream,state);if(type=="(")return pushContext(state,stream,"parens");if(type=="hash"&&!/^#([0-9a-fA-f]{3,4}|[0-9a-fA-f]{6}|[0-9a-fA-f]{8})$/.test(stream.current())){override+=" error"}else if(type=="word"){wordAsValue(stream)}else if(type=="interpolation"){return pushContext(state,stream,"interpolation")}return"prop"};states.propBlock=function(type,_stream,state){if(type=="}")return popContext(state);if(type=="word"){override="property";return"maybeprop"}return state.context.type};states.parens=function(type,stream,state){if(type=="{"||type=="}")return popAndPass(type,stream,state);if(type==")")return popContext(state);if(type=="(")return pushContext(state,stream,"parens");if(type=="interpolation")return pushContext(state,stream,"interpolation");if(type=="word")wordAsValue(stream);return"parens"};states.pseudo=function(type,stream,state){if(type=="meta")return"pseudo";if(type=="word"){override="variable-3";return state.context.type}return pass(type,stream,state)};states.documentTypes=function(type,stream,state){if(type=="word"&&documentTypes.hasOwnProperty(stream.current())){override="tag";return state.context.type}else{return states.atBlock(type,stream,state)}};states.atBlock=function(type,stream,state){if(type=="(")return pushContext(state,stream,"atBlock_parens");if(type=="}"||type==";")return popAndPass(type,stream,state);if(type=="{")return popContext(state)&&pushContext(state,stream,allowNested?"block":"top");if(type=="interpolation")return pushContext(state,stream,"interpolation");if(type=="word"){var word=stream.current().toLowerCase();if(word=="only"||word=="not"||word=="and"||word=="or")override="keyword";else if(mediaTypes.hasOwnProperty(word))override="attribute";else if(mediaFeatures.hasOwnProperty(word))override="property";else if(mediaValueKeywords.hasOwnProperty(word))override="keyword";else if(propertyKeywords.hasOwnProperty(word))override="property";else if(nonStandardPropertyKeywords.hasOwnProperty(word))override="string-2";else if(valueKeywords.hasOwnProperty(word))override="atom";else if(colorKeywords.hasOwnProperty(word))override="keyword";else override="error"}return state.context.type};states.atComponentBlock=function(type,stream,state){if(type=="}")return popAndPass(type,stream,state);if(type=="{")return popContext(state)&&pushContext(state,stream,allowNested?"block":"top",false);if(type=="word")override="error";return state.context.type};states.atBlock_parens=function(type,stream,state){if(type==")")return popContext(state);if(type=="{"||type=="}")return popAndPass(type,stream,state,2);return states.atBlock(type,stream,state)};states.restricted_atBlock_before=function(type,stream,state){if(type=="{")return pushContext(state,stream,"restricted_atBlock");if(type=="word"&&state.stateArg=="@counter-style"){override="variable";return"restricted_atBlock_before"}return pass(type,stream,state)};states.restricted_atBlock=function(type,stream,state){if(type=="}"){state.stateArg=null;return popContext(state)}if(type=="word"){if(state.stateArg=="@font-face"&&!fontProperties.hasOwnProperty(stream.current().toLowerCase())||state.stateArg=="@counter-style"&&!counterDescriptors.hasOwnProperty(stream.current().toLowerCase()))override="error";else override="property";return"maybeprop"}return"restricted_atBlock"};states.keyframes=function(type,stream,state){if(type=="word"){override="variable";return"keyframes"}if(type=="{")return pushContext(state,stream,"top");return pass(type,stream,state)};states.at=function(type,stream,state){if(type==";")return popContext(state);if(type=="{"||type=="}")return popAndPass(type,stream,state);if(type=="word")override="tag";else if(type=="hash")override="builtin";return"at"};states.interpolation=function(type,stream,state){if(type=="}")return popContext(state);if(type=="{"||type==";")return popAndPass(type,stream,state);if(type=="word")override="variable";else if(type!="variable"&&type!="("&&type!=")")override="error";return"interpolation"};return{startState:function(base){return{tokenize:null,state:inline?"block":"top",stateArg:null,context:new Context(inline?"block":"top",base||0,null)}},token:function(stream,state){if(!state.tokenize&&stream.eatSpace())return null;var style=(state.tokenize||tokenBase)(stream,state);if(style&&typeof style=="object"){type=style[1];style=style[0]}override=style;state.state=states[state.state](type,stream,state);return override},indent:function(state,textAfter){var cx=state.context,ch=textAfter&&textAfter.charAt(0);var indent=cx.indent;if(cx.type=="prop"&&(ch=="}"||ch==")"))cx=cx.prev;if(cx.prev){if(ch=="}"&&(cx.type=="block"||cx.type=="top"||cx.type=="interpolation"||cx.type=="restricted_atBlock")){cx=cx.prev;indent=cx.indent}else if(ch==")"&&(cx.type=="parens"||cx.type=="atBlock_parens")||ch=="{"&&(cx.type=="at"||cx.type=="atBlock")){indent=Math.max(0,cx.indent-indentUnit)
}}return indent},electricChars:"}",blockCommentStart:"/*",blockCommentEnd:"*/",lineComment:lineComment,fold:"brace"}});function keySet(array){var keys={};for(var i=0;i<array.length;++i){keys[array[i].toLowerCase()]=true}return keys}var documentTypes_=["domain","regexp","url","url-prefix"],documentTypes=keySet(documentTypes_);var mediaTypes_=["all","aural","braille","handheld","print","projection","screen","tty","tv","embossed"],mediaTypes=keySet(mediaTypes_);var mediaFeatures_=["width","min-width","max-width","height","min-height","max-height","device-width","min-device-width","max-device-width","device-height","min-device-height","max-device-height","aspect-ratio","min-aspect-ratio","max-aspect-ratio","device-aspect-ratio","min-device-aspect-ratio","max-device-aspect-ratio","color","min-color","max-color","color-index","min-color-index","max-color-index","monochrome","min-monochrome","max-monochrome","resolution","min-resolution","max-resolution","scan","grid","orientation","device-pixel-ratio","min-device-pixel-ratio","max-device-pixel-ratio","pointer","any-pointer","hover","any-hover"],mediaFeatures=keySet(mediaFeatures_);var mediaValueKeywords_=["landscape","portrait","none","coarse","fine","on-demand","hover","interlace","progressive"],mediaValueKeywords=keySet(mediaValueKeywords_);var propertyKeywords_=["align-content","align-items","align-self","alignment-adjust","alignment-baseline","anchor-point","animation","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-timing-function","appearance","azimuth","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","baseline-shift","binding","bleed","bookmark-label","bookmark-level","bookmark-state","bookmark-target","border","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-decoration-break","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","caret-color","clear","clip","color","color-profile","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","content","counter-increment","counter-reset","crop","cue","cue-after","cue-before","cursor","direction","display","dominant-baseline","drop-initial-after-adjust","drop-initial-after-align","drop-initial-before-adjust","drop-initial-before-align","drop-initial-size","drop-initial-value","elevation","empty-cells","fit","fit-position","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","float-offset","flow-from","flow-into","font","font-feature-settings","font-family","font-kerning","font-language-override","font-size","font-size-adjust","font-stretch","font-style","font-synthesis","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-ligatures","font-variant-numeric","font-variant-position","font-weight","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-gap","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-gap","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphens","icon","image-orientation","image-rendering","image-resolution","inline-box-align","justify-content","justify-items","justify-self","left","letter-spacing","line-break","line-height","line-stacking","line-stacking-ruby","line-stacking-shift","line-stacking-strategy","list-style","list-style-image","list-style-position","list-style-type","margin","margin-bottom","margin-left","margin-right","margin-top","marks","marquee-direction","marquee-loop","marquee-play-count","marquee-speed","marquee-style","max-height","max-width","min-height","min-width","move-to","nav-down","nav-index","nav-left","nav-right","nav-up","object-fit","object-position","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-style","overflow-wrap","overflow-x","overflow-y","padding","padding-bottom","padding-left","padding-right","padding-top","page","page-break-after","page-break-before","page-break-inside","page-policy","pause","pause-after","pause-before","perspective","perspective-origin","pitch","pitch-range","place-content","place-items","place-self","play-during","position","presentation-level","punctuation-trim","quotes","region-break-after","region-break-before","region-break-inside","region-fragment","rendering-intent","resize","rest","rest-after","rest-before","richness","right","rotation","rotation-point","ruby-align","ruby-overhang","ruby-position","ruby-span","shape-image-threshold","shape-inside","shape-margin","shape-outside","size","speak","speak-as","speak-header","speak-numeral","speak-punctuation","speech-rate","stress","string-set","tab-size","table-layout","target","target-name","target-new","target-position","text-align","text-align-last","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip","text-decoration-style","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-height","text-indent","text-justify","text-outline","text-overflow","text-shadow","text-size-adjust","text-space-collapse","text-transform","text-underline-position","text-wrap","top","transform","transform-origin","transform-style","transition","transition-delay","transition-duration","transition-property","transition-timing-function","unicode-bidi","user-select","vertical-align","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","volume","white-space","widows","width","will-change","word-break","word-spacing","word-wrap","z-index","clip-path","clip-rule","mask","enable-background","filter","flood-color","flood-opacity","lighting-color","stop-color","stop-opacity","pointer-events","color-interpolation","color-interpolation-filters","color-rendering","fill","fill-opacity","fill-rule","image-rendering","marker","marker-end","marker-mid","marker-start","shape-rendering","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","text-rendering","baseline-shift","dominant-baseline","glyph-orientation-horizontal","glyph-orientation-vertical","text-anchor","writing-mode"],propertyKeywords=keySet(propertyKeywords_);var nonStandardPropertyKeywords_=["scrollbar-arrow-color","scrollbar-base-color","scrollbar-dark-shadow-color","scrollbar-face-color","scrollbar-highlight-color","scrollbar-shadow-color","scrollbar-3d-light-color","scrollbar-track-color","shape-inside","searchfield-cancel-button","searchfield-decoration","searchfield-results-button","searchfield-results-decoration","zoom"],nonStandardPropertyKeywords=keySet(nonStandardPropertyKeywords_);var fontProperties_=["font-family","src","unicode-range","font-variant","font-feature-settings","font-stretch","font-weight","font-style"],fontProperties=keySet(fontProperties_);var counterDescriptors_=["additive-symbols","fallback","negative","pad","prefix","range","speak-as","suffix","symbols","system"],counterDescriptors=keySet(counterDescriptors_);var colorKeywords_=["aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","grey","green","greenyellow","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen"],colorKeywords=keySet(colorKeywords_);var valueKeywords_=["above","absolute","activeborder","additive","activecaption","afar","after-white-space","ahead","alias","all","all-scroll","alphabetic","alternate","always","amharic","amharic-abegede","antialiased","appworkspace","arabic-indic","armenian","asterisks","attr","auto","auto-flow","avoid","avoid-column","avoid-page","avoid-region","background","backwards","baseline","below","bidi-override","binary","bengali","blink","block","block-axis","bold","bolder","border","border-box","both","bottom","break","break-all","break-word","bullets","button","button-bevel","buttonface","buttonhighlight","buttonshadow","buttontext","calc","cambodian","capitalize","caps-lock-indicator","caption","captiontext","caret","cell","center","checkbox","circle","cjk-decimal","cjk-earthly-branch","cjk-heavenly-stem","cjk-ideographic","clear","clip","close-quote","col-resize","collapse","color","color-burn","color-dodge","column","column-reverse","compact","condensed","contain","content","contents","content-box","context-menu","continuous","copy","counter","counters","cover","crop","cross","crosshair","currentcolor","cursive","cyclic","darken","dashed","decimal","decimal-leading-zero","default","default-button","dense","destination-atop","destination-in","destination-out","destination-over","devanagari","difference","disc","discard","disclosure-closed","disclosure-open","document","dot-dash","dot-dot-dash","dotted","double","down","e-resize","ease","ease-in","ease-in-out","ease-out","element","ellipse","ellipsis","embed","end","ethiopic","ethiopic-abegede","ethiopic-abegede-am-et","ethiopic-abegede-gez","ethiopic-abegede-ti-er","ethiopic-abegede-ti-et","ethiopic-halehame-aa-er","ethiopic-halehame-aa-et","ethiopic-halehame-am-et","ethiopic-halehame-gez","ethiopic-halehame-om-et","ethiopic-halehame-sid-et","ethiopic-halehame-so-et","ethiopic-halehame-ti-er","ethiopic-halehame-ti-et","ethiopic-halehame-tig","ethiopic-numeric","ew-resize","exclusion","expanded","extends","extra-condensed","extra-expanded","fantasy","fast","fill","fixed","flat","flex","flex-end","flex-start","footnotes","forwards","from","geometricPrecision","georgian","graytext","grid","groove","gujarati","gurmukhi","hand","hangul","hangul-consonant","hard-light","hebrew","help","hidden","hide","higher","highlight","highlighttext","hiragana","hiragana-iroha","horizontal","hsl","hsla","hue","icon","ignore","inactiveborder","inactivecaption","inactivecaptiontext","infinite","infobackground","infotext","inherit","initial","inline","inline-axis","inline-block","inline-flex","inline-grid","inline-table","inset","inside","intrinsic","invert","italic","japanese-formal","japanese-informal","justify","kannada","katakana","katakana-iroha","keep-all","khmer","korean-hangul-formal","korean-hanja-formal","korean-hanja-informal","landscape","lao","large","larger","left","level","lighter","lighten","line-through","linear","linear-gradient","lines","list-item","listbox","listitem","local","logical","loud","lower","lower-alpha","lower-armenian","lower-greek","lower-hexadecimal","lower-latin","lower-norwegian","lower-roman","lowercase","ltr","luminosity","malayalam","match","matrix","matrix3d","media-controls-background","media-current-time-display","media-fullscreen-button","media-mute-button","media-play-button","media-return-to-realtime-button","media-rewind-button","media-seek-back-button","media-seek-forward-button","media-slider","media-sliderthumb","media-time-remaining-display","media-volume-slider","media-volume-slider-container","media-volume-sliderthumb","medium","menu","menulist","menulist-button","menulist-text","menulist-textfield","menutext","message-box","middle","min-intrinsic","mix","mongolian","monospace","move","multiple","multiply","myanmar","n-resize","narrower","ne-resize","nesw-resize","no-close-quote","no-drop","no-open-quote","no-repeat","none","normal","not-allowed","nowrap","ns-resize","numbers","numeric","nw-resize","nwse-resize","oblique","octal","opacity","open-quote","optimizeLegibility","optimizeSpeed","oriya","oromo","outset","outside","outside-shape","overlay","overline","padding","padding-box","painted","page","paused","persian","perspective","plus-darker","plus-lighter","pointer","polygon","portrait","pre","pre-line","pre-wrap","preserve-3d","progress","push-button","radial-gradient","radio","read-only","read-write","read-write-plaintext-only","rectangle","region","relative","repeat","repeating-linear-gradient","repeating-radial-gradient","repeat-x","repeat-y","reset","reverse","rgb","rgba","ridge","right","rotate","rotate3d","rotateX","rotateY","rotateZ","round","row","row-resize","row-reverse","rtl","run-in","running","s-resize","sans-serif","saturation","scale","scale3d","scaleX","scaleY","scaleZ","screen","scroll","scrollbar","scroll-position","se-resize","searchfield","searchfield-cancel-button","searchfield-decoration","searchfield-results-button","searchfield-results-decoration","self-start","self-end","semi-condensed","semi-expanded","separate","serif","show","sidama","simp-chinese-formal","simp-chinese-informal","single","skew","skewX","skewY","skip-white-space","slide","slider-horizontal","slider-vertical","sliderthumb-horizontal","sliderthumb-vertical","slow","small","small-caps","small-caption","smaller","soft-light","solid","somali","source-atop","source-in","source-out","source-over","space","space-around","space-between","space-evenly","spell-out","square","square-button","start","static","status-bar","stretch","stroke","sub","subpixel-antialiased","super","sw-resize","symbolic","symbols","system-ui","table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row","table-row-group","tamil","telugu","text","text-bottom","text-top","textarea","textfield","thai","thick","thin","threeddarkshadow","threedface","threedhighlight","threedlightshadow","threedshadow","tibetan","tigre","tigrinya-er","tigrinya-er-abegede","tigrinya-et","tigrinya-et-abegede","to","top","trad-chinese-formal","trad-chinese-informal","transform","translate","translate3d","translateX","translateY","translateZ","transparent","ultra-condensed","ultra-expanded","underline","unset","up","upper-alpha","upper-armenian","upper-greek","upper-hexadecimal","upper-latin","upper-norwegian","upper-roman","uppercase","urdu","url","var","vertical","vertical-text","visible","visibleFill","visiblePainted","visibleStroke","visual","w-resize","wait","wave","wider","window","windowframe","windowtext","words","wrap","wrap-reverse","x-large","x-small","xor","xx-large","xx-small"],valueKeywords=keySet(valueKeywords_);var allWords=documentTypes_.concat(mediaTypes_).concat(mediaFeatures_).concat(mediaValueKeywords_).concat(propertyKeywords_).concat(nonStandardPropertyKeywords_).concat(colorKeywords_).concat(valueKeywords_);CodeMirror.registerHelper("hintWords","css",allWords);function tokenCComment(stream,state){var maybeEnd=false,ch;while((ch=stream.next())!=null){if(maybeEnd&&ch=="/"){state.tokenize=null;break}maybeEnd=ch=="*"}return["comment","comment"]}CodeMirror.defineMIME("text/css",{documentTypes:documentTypes,mediaTypes:mediaTypes,mediaFeatures:mediaFeatures,mediaValueKeywords:mediaValueKeywords,propertyKeywords:propertyKeywords,nonStandardPropertyKeywords:nonStandardPropertyKeywords,fontProperties:fontProperties,counterDescriptors:counterDescriptors,colorKeywords:colorKeywords,valueKeywords:valueKeywords,tokenHooks:{"/":function(stream,state){if(!stream.eat("*"))return false;state.tokenize=tokenCComment;return tokenCComment(stream,state)}},name:"css"});CodeMirror.defineMIME("text/x-scss",{mediaTypes:mediaTypes,mediaFeatures:mediaFeatures,mediaValueKeywords:mediaValueKeywords,propertyKeywords:propertyKeywords,nonStandardPropertyKeywords:nonStandardPropertyKeywords,colorKeywords:colorKeywords,valueKeywords:valueKeywords,fontProperties:fontProperties,allowNested:true,lineComment:"//",tokenHooks:{"/":function(stream,state){if(stream.eat("/")){stream.skipToEnd();return["comment","comment"]}else if(stream.eat("*")){state.tokenize=tokenCComment;return tokenCComment(stream,state)}else{return["operator","operator"]}},":":function(stream){if(stream.match(/\s*\{/,false))return[null,null];return false},$:function(stream){stream.match(/^[\w-]+/);if(stream.match(/^\s*:/,false))return["variable-2","variable-definition"];return["variable-2","variable"]},"#":function(stream){if(!stream.eat("{"))return false;return[null,"interpolation"]}},name:"css",helperType:"scss"});CodeMirror.defineMIME("text/x-less",{mediaTypes:mediaTypes,mediaFeatures:mediaFeatures,mediaValueKeywords:mediaValueKeywords,propertyKeywords:propertyKeywords,nonStandardPropertyKeywords:nonStandardPropertyKeywords,colorKeywords:colorKeywords,valueKeywords:valueKeywords,fontProperties:fontProperties,allowNested:true,lineComment:"//",tokenHooks:{"/":function(stream,state){if(stream.eat("/")){stream.skipToEnd();return["comment","comment"]}else if(stream.eat("*")){state.tokenize=tokenCComment;return tokenCComment(stream,state)}else{return["operator","operator"]}},"@":function(stream){if(stream.eat("{"))return[null,"interpolation"];if(stream.match(/^(charset|document|font-face|import|(-(moz|ms|o|webkit)-)?keyframes|media|namespace|page|supports)\b/,false))return false;stream.eatWhile(/[\w\\\-]/);if(stream.match(/^\s*:/,false))return["variable-2","variable-definition"];return["variable-2","variable"]},"&":function(){return["atom","atom"]}},name:"css",helperType:"less"});CodeMirror.defineMIME("text/x-gss",{documentTypes:documentTypes,mediaTypes:mediaTypes,mediaFeatures:mediaFeatures,propertyKeywords:propertyKeywords,nonStandardPropertyKeywords:nonStandardPropertyKeywords,fontProperties:fontProperties,counterDescriptors:counterDescriptors,colorKeywords:colorKeywords,valueKeywords:valueKeywords,supportsAtComponent:true,tokenHooks:{"/":function(stream,state){if(!stream.eat("*"))return false;state.tokenize=tokenCComment;return tokenCComment(stream,state)}},name:"css",helperType:"gss"})})},function(module,exports){var ENTITIES=[["Aacute",[193]],["aacute",[225]],["Abreve",[258]],["abreve",[259]],["ac",[8766]],["acd",[8767]],["acE",[8766,819]],["Acirc",[194]],["acirc",[226]],["acute",[180]],["Acy",[1040]],["acy",[1072]],["AElig",[198]],["aelig",[230]],["af",[8289]],["Afr",[120068]],["afr",[120094]],["Agrave",[192]],["agrave",[224]],["alefsym",[8501]],["aleph",[8501]],["Alpha",[913]],["alpha",[945]],["Amacr",[256]],["amacr",[257]],["amalg",[10815]],["amp",[38]],["AMP",[38]],["andand",[10837]],["And",[10835]],["and",[8743]],["andd",[10844]],["andslope",[10840]],["andv",[10842]],["ang",[8736]],["ange",[10660]],["angle",[8736]],["angmsdaa",[10664]],["angmsdab",[10665]],["angmsdac",[10666]],["angmsdad",[10667]],["angmsdae",[10668]],["angmsdaf",[10669]],["angmsdag",[10670]],["angmsdah",[10671]],["angmsd",[8737]],["angrt",[8735]],["angrtvb",[8894]],["angrtvbd",[10653]],["angsph",[8738]],["angst",[197]],["angzarr",[9084]],["Aogon",[260]],["aogon",[261]],["Aopf",[120120]],["aopf",[120146]],["apacir",[10863]],["ap",[8776]],["apE",[10864]],["ape",[8778]],["apid",[8779]],["apos",[39]],["ApplyFunction",[8289]],["approx",[8776]],["approxeq",[8778]],["Aring",[197]],["aring",[229]],["Ascr",[119964]],["ascr",[119990]],["Assign",[8788]],["ast",[42]],["asymp",[8776]],["asympeq",[8781]],["Atilde",[195]],["atilde",[227]],["Auml",[196]],["auml",[228]],["awconint",[8755]],["awint",[10769]],["backcong",[8780]],["backepsilon",[1014]],["backprime",[8245]],["backsim",[8765]],["backsimeq",[8909]],["Backslash",[8726]],["Barv",[10983]],["barvee",[8893]],["barwed",[8965]],["Barwed",[8966]],["barwedge",[8965]],["bbrk",[9141]],["bbrktbrk",[9142]],["bcong",[8780]],["Bcy",[1041]],["bcy",[1073]],["bdquo",[8222]],["becaus",[8757]],["because",[8757]],["Because",[8757]],["bemptyv",[10672]],["bepsi",[1014]],["bernou",[8492]],["Bernoullis",[8492]],["Beta",[914]],["beta",[946]],["beth",[8502]],["between",[8812]],["Bfr",[120069]],["bfr",[120095]],["bigcap",[8898]],["bigcirc",[9711]],["bigcup",[8899]],["bigodot",[10752]],["bigoplus",[10753]],["bigotimes",[10754]],["bigsqcup",[10758]],["bigstar",[9733]],["bigtriangledown",[9661]],["bigtriangleup",[9651]],["biguplus",[10756]],["bigvee",[8897]],["bigwedge",[8896]],["bkarow",[10509]],["blacklozenge",[10731]],["blacksquare",[9642]],["blacktriangle",[9652]],["blacktriangledown",[9662]],["blacktriangleleft",[9666]],["blacktriangleright",[9656]],["blank",[9251]],["blk12",[9618]],["blk14",[9617]],["blk34",[9619]],["block",[9608]],["bne",[61,8421]],["bnequiv",[8801,8421]],["bNot",[10989]],["bnot",[8976]],["Bopf",[120121]],["bopf",[120147]],["bot",[8869]],["bottom",[8869]],["bowtie",[8904]],["boxbox",[10697]],["boxdl",[9488]],["boxdL",[9557]],["boxDl",[9558]],["boxDL",[9559]],["boxdr",[9484]],["boxdR",[9554]],["boxDr",[9555]],["boxDR",[9556]],["boxh",[9472]],["boxH",[9552]],["boxhd",[9516]],["boxHd",[9572]],["boxhD",[9573]],["boxHD",[9574]],["boxhu",[9524]],["boxHu",[9575]],["boxhU",[9576]],["boxHU",[9577]],["boxminus",[8863]],["boxplus",[8862]],["boxtimes",[8864]],["boxul",[9496]],["boxuL",[9563]],["boxUl",[9564]],["boxUL",[9565]],["boxur",[9492]],["boxuR",[9560]],["boxUr",[9561]],["boxUR",[9562]],["boxv",[9474]],["boxV",[9553]],["boxvh",[9532]],["boxvH",[9578]],["boxVh",[9579]],["boxVH",[9580]],["boxvl",[9508]],["boxvL",[9569]],["boxVl",[9570]],["boxVL",[9571]],["boxvr",[9500]],["boxvR",[9566]],["boxVr",[9567]],["boxVR",[9568]],["bprime",[8245]],["breve",[728]],["Breve",[728]],["brvbar",[166]],["bscr",[119991]],["Bscr",[8492]],["bsemi",[8271]],["bsim",[8765]],["bsime",[8909]],["bsolb",[10693]],["bsol",[92]],["bsolhsub",[10184]],["bull",[8226]],["bullet",[8226]],["bump",[8782]],["bumpE",[10926]],["bumpe",[8783]],["Bumpeq",[8782]],["bumpeq",[8783]],["Cacute",[262]],["cacute",[263]],["capand",[10820]],["capbrcup",[10825]],["capcap",[10827]],["cap",[8745]],["Cap",[8914]],["capcup",[10823]],["capdot",[10816]],["CapitalDifferentialD",[8517]],["caps",[8745,65024]],["caret",[8257]],["caron",[711]],["Cayleys",[8493]],["ccaps",[10829]],["Ccaron",[268]],["ccaron",[269]],["Ccedil",[199]],["ccedil",[231]],["Ccirc",[264]],["ccirc",[265]],["Cconint",[8752]],["ccups",[10828]],["ccupssm",[10832]],["Cdot",[266]],["cdot",[267]],["cedil",[184]],["Cedilla",[184]],["cemptyv",[10674]],["cent",[162]],["centerdot",[183]],["CenterDot",[183]],["cfr",[120096]],["Cfr",[8493]],["CHcy",[1063]],["chcy",[1095]],["check",[10003]],["checkmark",[10003]],["Chi",[935]],["chi",[967]],["circ",[710]],["circeq",[8791]],["circlearrowleft",[8634]],["circlearrowright",[8635]],["circledast",[8859]],["circledcirc",[8858]],["circleddash",[8861]],["CircleDot",[8857]],["circledR",[174]],["circledS",[9416]],["CircleMinus",[8854]],["CirclePlus",[8853]],["CircleTimes",[8855]],["cir",[9675]],["cirE",[10691]],["cire",[8791]],["cirfnint",[10768]],["cirmid",[10991]],["cirscir",[10690]],["ClockwiseContourIntegral",[8754]],["clubs",[9827]],["clubsuit",[9827]],["colon",[58]],["Colon",[8759]],["Colone",[10868]],["colone",[8788]],["coloneq",[8788]],["comma",[44]],["commat",[64]],["comp",[8705]],["compfn",[8728]],["complement",[8705]],["complexes",[8450]],["cong",[8773]],["congdot",[10861]],["Congruent",[8801]],["conint",[8750]],["Conint",[8751]],["ContourIntegral",[8750]],["copf",[120148]],["Copf",[8450]],["coprod",[8720]],["Coproduct",[8720]],["copy",[169]],["COPY",[169]],["copysr",[8471]],["CounterClockwiseContourIntegral",[8755]],["crarr",[8629]],["cross",[10007]],["Cross",[10799]],["Cscr",[119966]],["cscr",[119992]],["csub",[10959]],["csube",[10961]],["csup",[10960]],["csupe",[10962]],["ctdot",[8943]],["cudarrl",[10552]],["cudarrr",[10549]],["cuepr",[8926]],["cuesc",[8927]],["cularr",[8630]],["cularrp",[10557]],["cupbrcap",[10824]],["cupcap",[10822]],["CupCap",[8781]],["cup",[8746]],["Cup",[8915]],["cupcup",[10826]],["cupdot",[8845]],["cupor",[10821]],["cups",[8746,65024]],["curarr",[8631]],["curarrm",[10556]],["curlyeqprec",[8926]],["curlyeqsucc",[8927]],["curlyvee",[8910]],["curlywedge",[8911]],["curren",[164]],["curvearrowleft",[8630]],["curvearrowright",[8631]],["cuvee",[8910]],["cuwed",[8911]],["cwconint",[8754]],["cwint",[8753]],["cylcty",[9005]],["dagger",[8224]],["Dagger",[8225]],["daleth",[8504]],["darr",[8595]],["Darr",[8609]],["dArr",[8659]],["dash",[8208]],["Dashv",[10980]],["dashv",[8867]],["dbkarow",[10511]],["dblac",[733]],["Dcaron",[270]],["dcaron",[271]],["Dcy",[1044]],["dcy",[1076]],["ddagger",[8225]],["ddarr",[8650]],["DD",[8517]],["dd",[8518]],["DDotrahd",[10513]],["ddotseq",[10871]],["deg",[176]],["Del",[8711]],["Delta",[916]],["delta",[948]],["demptyv",[10673]],["dfisht",[10623]],["Dfr",[120071]],["dfr",[120097]],["dHar",[10597]],["dharl",[8643]],["dharr",[8642]],["DiacriticalAcute",[180]],["DiacriticalDot",[729]],["DiacriticalDoubleAcute",[733]],["DiacriticalGrave",[96]],["DiacriticalTilde",[732]],["diam",[8900]],["diamond",[8900]],["Diamond",[8900]],["diamondsuit",[9830]],["diams",[9830]],["die",[168]],["DifferentialD",[8518]],["digamma",[989]],["disin",[8946]],["div",[247]],["divide",[247]],["divideontimes",[8903]],["divonx",[8903]],["DJcy",[1026]],["djcy",[1106]],["dlcorn",[8990]],["dlcrop",[8973]],["dollar",[36]],["Dopf",[120123]],["dopf",[120149]],["Dot",[168]],["dot",[729]],["DotDot",[8412]],["doteq",[8784]],["doteqdot",[8785]],["DotEqual",[8784]],["dotminus",[8760]],["dotplus",[8724]],["dotsquare",[8865]],["doublebarwedge",[8966]],["DoubleContourIntegral",[8751]],["DoubleDot",[168]],["DoubleDownArrow",[8659]],["DoubleLeftArrow",[8656]],["DoubleLeftRightArrow",[8660]],["DoubleLeftTee",[10980]],["DoubleLongLeftArrow",[10232]],["DoubleLongLeftRightArrow",[10234]],["DoubleLongRightArrow",[10233]],["DoubleRightArrow",[8658]],["DoubleRightTee",[8872]],["DoubleUpArrow",[8657]],["DoubleUpDownArrow",[8661]],["DoubleVerticalBar",[8741]],["DownArrowBar",[10515]],["downarrow",[8595]],["DownArrow",[8595]],["Downarrow",[8659]],["DownArrowUpArrow",[8693]],["DownBreve",[785]],["downdownarrows",[8650]],["downharpoonleft",[8643]],["downharpoonright",[8642]],["DownLeftRightVector",[10576]],["DownLeftTeeVector",[10590]],["DownLeftVectorBar",[10582]],["DownLeftVector",[8637]],["DownRightTeeVector",[10591]],["DownRightVectorBar",[10583]],["DownRightVector",[8641]],["DownTeeArrow",[8615]],["DownTee",[8868]],["drbkarow",[10512]],["drcorn",[8991]],["drcrop",[8972]],["Dscr",[119967]],["dscr",[119993]],["DScy",[1029]],["dscy",[1109]],["dsol",[10742]],["Dstrok",[272]],["dstrok",[273]],["dtdot",[8945]],["dtri",[9663]],["dtrif",[9662]],["duarr",[8693]],["duhar",[10607]],["dwangle",[10662]],["DZcy",[1039]],["dzcy",[1119]],["dzigrarr",[10239]],["Eacute",[201]],["eacute",[233]],["easter",[10862]],["Ecaron",[282]],["ecaron",[283]],["Ecirc",[202]],["ecirc",[234]],["ecir",[8790]],["ecolon",[8789]],["Ecy",[1069]],["ecy",[1101]],["eDDot",[10871]],["Edot",[278]],["edot",[279]],["eDot",[8785]],["ee",[8519]],["efDot",[8786]],["Efr",[120072]],["efr",[120098]],["eg",[10906]],["Egrave",[200]],["egrave",[232]],["egs",[10902]],["egsdot",[10904]],["el",[10905]],["Element",[8712]],["elinters",[9191]],["ell",[8467]],["els",[10901]],["elsdot",[10903]],["Emacr",[274]],["emacr",[275]],["empty",[8709]],["emptyset",[8709]],["EmptySmallSquare",[9723]],["emptyv",[8709]],["EmptyVerySmallSquare",[9643]],["emsp13",[8196]],["emsp14",[8197]],["emsp",[8195]],["ENG",[330]],["eng",[331]],["ensp",[8194]],["Eogon",[280]],["eogon",[281]],["Eopf",[120124]],["eopf",[120150]],["epar",[8917]],["eparsl",[10723]],["eplus",[10865]],["epsi",[949]],["Epsilon",[917]],["epsilon",[949]],["epsiv",[1013]],["eqcirc",[8790]],["eqcolon",[8789]],["eqsim",[8770]],["eqslantgtr",[10902]],["eqslantless",[10901]],["Equal",[10869]],["equals",[61]],["EqualTilde",[8770]],["equest",[8799]],["Equilibrium",[8652]],["equiv",[8801]],["equivDD",[10872]],["eqvparsl",[10725]],["erarr",[10609]],["erDot",[8787]],["escr",[8495]],["Escr",[8496]],["esdot",[8784]],["Esim",[10867]],["esim",[8770]],["Eta",[919]],["eta",[951]],["ETH",[208]],["eth",[240]],["Euml",[203]],["euml",[235]],["euro",[8364]],["excl",[33]],["exist",[8707]],["Exists",[8707]],["expectation",[8496]],["exponentiale",[8519]],["ExponentialE",[8519]],["fallingdotseq",[8786]],["Fcy",[1060]],["fcy",[1092]],["female",[9792]],["ffilig",[64259]],["fflig",[64256]],["ffllig",[64260]],["Ffr",[120073]],["ffr",[120099]],["filig",[64257]],["FilledSmallSquare",[9724]],["FilledVerySmallSquare",[9642]],["fjlig",[102,106]],["flat",[9837]],["fllig",[64258]],["fltns",[9649]],["fnof",[402]],["Fopf",[120125]],["fopf",[120151]],["forall",[8704]],["ForAll",[8704]],["fork",[8916]],["forkv",[10969]],["Fouriertrf",[8497]],["fpartint",[10765]],["frac12",[189]],["frac13",[8531]],["frac14",[188]],["frac15",[8533]],["frac16",[8537]],["frac18",[8539]],["frac23",[8532]],["frac25",[8534]],["frac34",[190]],["frac35",[8535]],["frac38",[8540]],["frac45",[8536]],["frac56",[8538]],["frac58",[8541]],["frac78",[8542]],["frasl",[8260]],["frown",[8994]],["fscr",[119995]],["Fscr",[8497]],["gacute",[501]],["Gamma",[915]],["gamma",[947]],["Gammad",[988]],["gammad",[989]],["gap",[10886]],["Gbreve",[286]],["gbreve",[287]],["Gcedil",[290]],["Gcirc",[284]],["gcirc",[285]],["Gcy",[1043]],["gcy",[1075]],["Gdot",[288]],["gdot",[289]],["ge",[8805]],["gE",[8807]],["gEl",[10892]],["gel",[8923]],["geq",[8805]],["geqq",[8807]],["geqslant",[10878]],["gescc",[10921]],["ges",[10878]],["gesdot",[10880]],["gesdoto",[10882]],["gesdotol",[10884]],["gesl",[8923,65024]],["gesles",[10900]],["Gfr",[120074]],["gfr",[120100]],["gg",[8811]],["Gg",[8921]],["ggg",[8921]],["gimel",[8503]],["GJcy",[1027]],["gjcy",[1107]],["gla",[10917]],["gl",[8823]],["glE",[10898]],["glj",[10916]],["gnap",[10890]],["gnapprox",[10890]],["gne",[10888]],["gnE",[8809]],["gneq",[10888]],["gneqq",[8809]],["gnsim",[8935]],["Gopf",[120126]],["gopf",[120152]],["grave",[96]],["GreaterEqual",[8805]],["GreaterEqualLess",[8923]],["GreaterFullEqual",[8807]],["GreaterGreater",[10914]],["GreaterLess",[8823]],["GreaterSlantEqual",[10878]],["GreaterTilde",[8819]],["Gscr",[119970]],["gscr",[8458]],["gsim",[8819]],["gsime",[10894]],["gsiml",[10896]],["gtcc",[10919]],["gtcir",[10874]],["gt",[62]],["GT",[62]],["Gt",[8811]],["gtdot",[8919]],["gtlPar",[10645]],["gtquest",[10876]],["gtrapprox",[10886]],["gtrarr",[10616]],["gtrdot",[8919]],["gtreqless",[8923]],["gtreqqless",[10892]],["gtrless",[8823]],["gtrsim",[8819]],["gvertneqq",[8809,65024]],["gvnE",[8809,65024]],["Hacek",[711]],["hairsp",[8202]],["half",[189]],["hamilt",[8459]],["HARDcy",[1066]],["hardcy",[1098]],["harrcir",[10568]],["harr",[8596]],["hArr",[8660]],["harrw",[8621]],["Hat",[94]],["hbar",[8463]],["Hcirc",[292]],["hcirc",[293]],["hearts",[9829]],["heartsuit",[9829]],["hellip",[8230]],["hercon",[8889]],["hfr",[120101]],["Hfr",[8460]],["HilbertSpace",[8459]],["hksearow",[10533]],["hkswarow",[10534]],["hoarr",[8703]],["homtht",[8763]],["hookleftarrow",[8617]],["hookrightarrow",[8618]],["hopf",[120153]],["Hopf",[8461]],["horbar",[8213]],["HorizontalLine",[9472]],["hscr",[119997]],["Hscr",[8459]],["hslash",[8463]],["Hstrok",[294]],["hstrok",[295]],["HumpDownHump",[8782]],["HumpEqual",[8783]],["hybull",[8259]],["hyphen",[8208]],["Iacute",[205]],["iacute",[237]],["ic",[8291]],["Icirc",[206]],["icirc",[238]],["Icy",[1048]],["icy",[1080]],["Idot",[304]],["IEcy",[1045]],["iecy",[1077]],["iexcl",[161]],["iff",[8660]],["ifr",[120102]],["Ifr",[8465]],["Igrave",[204]],["igrave",[236]],["ii",[8520]],["iiiint",[10764]],["iiint",[8749]],["iinfin",[10716]],["iiota",[8489]],["IJlig",[306]],["ijlig",[307]],["Imacr",[298]],["imacr",[299]],["image",[8465]],["ImaginaryI",[8520]],["imagline",[8464]],["imagpart",[8465]],["imath",[305]],["Im",[8465]],["imof",[8887]],["imped",[437]],["Implies",[8658]],["incare",[8453]],["in",[8712]],["infin",[8734]],["infintie",[10717]],["inodot",[305]],["intcal",[8890]],["int",[8747]],["Int",[8748]],["integers",[8484]],["Integral",[8747]],["intercal",[8890]],["Intersection",[8898]],["intlarhk",[10775]],["intprod",[10812]],["InvisibleComma",[8291]],["InvisibleTimes",[8290]],["IOcy",[1025]],["iocy",[1105]],["Iogon",[302]],["iogon",[303]],["Iopf",[120128]],["iopf",[120154]],["Iota",[921]],["iota",[953]],["iprod",[10812]],["iquest",[191]],["iscr",[119998]],["Iscr",[8464]],["isin",[8712]],["isindot",[8949]],["isinE",[8953]],["isins",[8948]],["isinsv",[8947]],["isinv",[8712]],["it",[8290]],["Itilde",[296]],["itilde",[297]],["Iukcy",[1030]],["iukcy",[1110]],["Iuml",[207]],["iuml",[239]],["Jcirc",[308]],["jcirc",[309]],["Jcy",[1049]],["jcy",[1081]],["Jfr",[120077]],["jfr",[120103]],["jmath",[567]],["Jopf",[120129]],["jopf",[120155]],["Jscr",[119973]],["jscr",[119999]],["Jsercy",[1032]],["jsercy",[1112]],["Jukcy",[1028]],["jukcy",[1108]],["Kappa",[922]],["kappa",[954]],["kappav",[1008]],["Kcedil",[310]],["kcedil",[311]],["Kcy",[1050]],["kcy",[1082]],["Kfr",[120078]],["kfr",[120104]],["kgreen",[312]],["KHcy",[1061]],["khcy",[1093]],["KJcy",[1036]],["kjcy",[1116]],["Kopf",[120130]],["kopf",[120156]],["Kscr",[119974]],["kscr",[12e4]],["lAarr",[8666]],["Lacute",[313]],["lacute",[314]],["laemptyv",[10676]],["lagran",[8466]],["Lambda",[923]],["lambda",[955]],["lang",[10216]],["Lang",[10218]],["langd",[10641]],["langle",[10216]],["lap",[10885]],["Laplacetrf",[8466]],["laquo",[171]],["larrb",[8676]],["larrbfs",[10527]],["larr",[8592]],["Larr",[8606]],["lArr",[8656]],["larrfs",[10525]],["larrhk",[8617]],["larrlp",[8619]],["larrpl",[10553]],["larrsim",[10611]],["larrtl",[8610]],["latail",[10521]],["lAtail",[10523]],["lat",[10923]],["late",[10925]],["lates",[10925,65024]],["lbarr",[10508]],["lBarr",[10510]],["lbbrk",[10098]],["lbrace",[123]],["lbrack",[91]],["lbrke",[10635]],["lbrksld",[10639]],["lbrkslu",[10637]],["Lcaron",[317]],["lcaron",[318]],["Lcedil",[315]],["lcedil",[316]],["lceil",[8968]],["lcub",[123]],["Lcy",[1051]],["lcy",[1083]],["ldca",[10550]],["ldquo",[8220]],["ldquor",[8222]],["ldrdhar",[10599]],["ldrushar",[10571]],["ldsh",[8626]],["le",[8804]],["lE",[8806]],["LeftAngleBracket",[10216]],["LeftArrowBar",[8676]],["leftarrow",[8592]],["LeftArrow",[8592]],["Leftarrow",[8656]],["LeftArrowRightArrow",[8646]],["leftarrowtail",[8610]],["LeftCeiling",[8968]],["LeftDoubleBracket",[10214]],["LeftDownTeeVector",[10593]],["LeftDownVectorBar",[10585]],["LeftDownVector",[8643]],["LeftFloor",[8970]],["leftharpoondown",[8637]],["leftharpoonup",[8636]],["leftleftarrows",[8647]],["leftrightarrow",[8596]],["LeftRightArrow",[8596]],["Leftrightarrow",[8660]],["leftrightarrows",[8646]],["leftrightharpoons",[8651]],["leftrightsquigarrow",[8621]],["LeftRightVector",[10574]],["LeftTeeArrow",[8612]],["LeftTee",[8867]],["LeftTeeVector",[10586]],["leftthreetimes",[8907]],["LeftTriangleBar",[10703]],["LeftTriangle",[8882]],["LeftTriangleEqual",[8884]],["LeftUpDownVector",[10577]],["LeftUpTeeVector",[10592]],["LeftUpVectorBar",[10584]],["LeftUpVector",[8639]],["LeftVectorBar",[10578]],["LeftVector",[8636]],["lEg",[10891]],["leg",[8922]],["leq",[8804]],["leqq",[8806]],["leqslant",[10877]],["lescc",[10920]],["les",[10877]],["lesdot",[10879]],["lesdoto",[10881]],["lesdotor",[10883]],["lesg",[8922,65024]],["lesges",[10899]],["lessapprox",[10885]],["lessdot",[8918]],["lesseqgtr",[8922]],["lesseqqgtr",[10891]],["LessEqualGreater",[8922]],["LessFullEqual",[8806]],["LessGreater",[8822]],["lessgtr",[8822]],["LessLess",[10913]],["lesssim",[8818]],["LessSlantEqual",[10877]],["LessTilde",[8818]],["lfisht",[10620]],["lfloor",[8970]],["Lfr",[120079]],["lfr",[120105]],["lg",[8822]],["lgE",[10897]],["lHar",[10594]],["lhard",[8637]],["lharu",[8636]],["lharul",[10602]],["lhblk",[9604]],["LJcy",[1033]],["ljcy",[1113]],["llarr",[8647]],["ll",[8810]],["Ll",[8920]],["llcorner",[8990]],["Lleftarrow",[8666]],["llhard",[10603]],["lltri",[9722]],["Lmidot",[319]],["lmidot",[320]],["lmoustache",[9136]],["lmoust",[9136]],["lnap",[10889]],["lnapprox",[10889]],["lne",[10887]],["lnE",[8808]],["lneq",[10887]],["lneqq",[8808]],["lnsim",[8934]],["loang",[10220]],["loarr",[8701]],["lobrk",[10214]],["longleftarrow",[10229]],["LongLeftArrow",[10229]],["Longleftarrow",[10232]],["longleftrightarrow",[10231]],["LongLeftRightArrow",[10231]],["Longleftrightarrow",[10234]],["longmapsto",[10236]],["longrightarrow",[10230]],["LongRightArrow",[10230]],["Longrightarrow",[10233]],["looparrowleft",[8619]],["looparrowright",[8620]],["lopar",[10629]],["Lopf",[120131]],["lopf",[120157]],["loplus",[10797]],["lotimes",[10804]],["lowast",[8727]],["lowbar",[95]],["LowerLeftArrow",[8601]],["LowerRightArrow",[8600]],["loz",[9674]],["lozenge",[9674]],["lozf",[10731]],["lpar",[40]],["lparlt",[10643]],["lrarr",[8646]],["lrcorner",[8991]],["lrhar",[8651]],["lrhard",[10605]],["lrm",[8206]],["lrtri",[8895]],["lsaquo",[8249]],["lscr",[120001]],["Lscr",[8466]],["lsh",[8624]],["Lsh",[8624]],["lsim",[8818]],["lsime",[10893]],["lsimg",[10895]],["lsqb",[91]],["lsquo",[8216]],["lsquor",[8218]],["Lstrok",[321]],["lstrok",[322]],["ltcc",[10918]],["ltcir",[10873]],["lt",[60]],["LT",[60]],["Lt",[8810]],["ltdot",[8918]],["lthree",[8907]],["ltimes",[8905]],["ltlarr",[10614]],["ltquest",[10875]],["ltri",[9667]],["ltrie",[8884]],["ltrif",[9666]],["ltrPar",[10646]],["lurdshar",[10570]],["luruhar",[10598]],["lvertneqq",[8808,65024]],["lvnE",[8808,65024]],["macr",[175]],["male",[9794]],["malt",[10016]],["maltese",[10016]],["Map",[10501]],["map",[8614]],["mapsto",[8614]],["mapstodown",[8615]],["mapstoleft",[8612]],["mapstoup",[8613]],["marker",[9646]],["mcomma",[10793]],["Mcy",[1052]],["mcy",[1084]],["mdash",[8212]],["mDDot",[8762]],["measuredangle",[8737]],["MediumSpace",[8287]],["Mellintrf",[8499]],["Mfr",[120080]],["mfr",[120106]],["mho",[8487]],["micro",[181]],["midast",[42]],["midcir",[10992]],["mid",[8739]],["middot",[183]],["minusb",[8863]],["minus",[8722]],["minusd",[8760]],["minusdu",[10794]],["MinusPlus",[8723]],["mlcp",[10971]],["mldr",[8230]],["mnplus",[8723]],["models",[8871]],["Mopf",[120132]],["mopf",[120158]],["mp",[8723]],["mscr",[120002]],["Mscr",[8499]],["mstpos",[8766]],["Mu",[924]],["mu",[956]],["multimap",[8888]],["mumap",[8888]],["nabla",[8711]],["Nacute",[323]],["nacute",[324]],["nang",[8736,8402]],["nap",[8777]],["napE",[10864,824]],["napid",[8779,824]],["napos",[329]],["napprox",[8777]],["natural",[9838]],["naturals",[8469]],["natur",[9838]],["nbsp",[160]],["nbump",[8782,824]],["nbumpe",[8783,824]],["ncap",[10819]],["Ncaron",[327]],["ncaron",[328]],["Ncedil",[325]],["ncedil",[326]],["ncong",[8775]],["ncongdot",[10861,824]],["ncup",[10818]],["Ncy",[1053]],["ncy",[1085]],["ndash",[8211]],["nearhk",[10532]],["nearr",[8599]],["neArr",[8663]],["nearrow",[8599]],["ne",[8800]],["nedot",[8784,824]],["NegativeMediumSpace",[8203]],["NegativeThickSpace",[8203]],["NegativeThinSpace",[8203]],["NegativeVeryThinSpace",[8203]],["nequiv",[8802]],["nesear",[10536]],["nesim",[8770,824]],["NestedGreaterGreater",[8811]],["NestedLessLess",[8810]],["nexist",[8708]],["nexists",[8708]],["Nfr",[120081]],["nfr",[120107]],["ngE",[8807,824]],["nge",[8817]],["ngeq",[8817]],["ngeqq",[8807,824]],["ngeqslant",[10878,824]],["nges",[10878,824]],["nGg",[8921,824]],["ngsim",[8821]],["nGt",[8811,8402]],["ngt",[8815]],["ngtr",[8815]],["nGtv",[8811,824]],["nharr",[8622]],["nhArr",[8654]],["nhpar",[10994]],["ni",[8715]],["nis",[8956]],["nisd",[8954]],["niv",[8715]],["NJcy",[1034]],["njcy",[1114]],["nlarr",[8602]],["nlArr",[8653]],["nldr",[8229]],["nlE",[8806,824]],["nle",[8816]],["nleftarrow",[8602]],["nLeftarrow",[8653]],["nleftrightarrow",[8622]],["nLeftrightarrow",[8654]],["nleq",[8816]],["nleqq",[8806,824]],["nleqslant",[10877,824]],["nles",[10877,824]],["nless",[8814]],["nLl",[8920,824]],["nlsim",[8820]],["nLt",[8810,8402]],["nlt",[8814]],["nltri",[8938]],["nltrie",[8940]],["nLtv",[8810,824]],["nmid",[8740]],["NoBreak",[8288]],["NonBreakingSpace",[160]],["nopf",[120159]],["Nopf",[8469]],["Not",[10988]],["not",[172]],["NotCongruent",[8802]],["NotCupCap",[8813]],["NotDoubleVerticalBar",[8742]],["NotElement",[8713]],["NotEqual",[8800]],["NotEqualTilde",[8770,824]],["NotExists",[8708]],["NotGreater",[8815]],["NotGreaterEqual",[8817]],["NotGreaterFullEqual",[8807,824]],["NotGreaterGreater",[8811,824]],["NotGreaterLess",[8825]],["NotGreaterSlantEqual",[10878,824]],["NotGreaterTilde",[8821]],["NotHumpDownHump",[8782,824]],["NotHumpEqual",[8783,824]],["notin",[8713]],["notindot",[8949,824]],["notinE",[8953,824]],["notinva",[8713]],["notinvb",[8951]],["notinvc",[8950]],["NotLeftTriangleBar",[10703,824]],["NotLeftTriangle",[8938]],["NotLeftTriangleEqual",[8940]],["NotLess",[8814]],["NotLessEqual",[8816]],["NotLessGreater",[8824]],["NotLessLess",[8810,824]],["NotLessSlantEqual",[10877,824]],["NotLessTilde",[8820]],["NotNestedGreaterGreater",[10914,824]],["NotNestedLessLess",[10913,824]],["notni",[8716]],["notniva",[8716]],["notnivb",[8958]],["notnivc",[8957]],["NotPrecedes",[8832]],["NotPrecedesEqual",[10927,824]],["NotPrecedesSlantEqual",[8928]],["NotReverseElement",[8716]],["NotRightTriangleBar",[10704,824]],["NotRightTriangle",[8939]],["NotRightTriangleEqual",[8941]],["NotSquareSubset",[8847,824]],["NotSquareSubsetEqual",[8930]],["NotSquareSuperset",[8848,824]],["NotSquareSupersetEqual",[8931]],["NotSubset",[8834,8402]],["NotSubsetEqual",[8840]],["NotSucceeds",[8833]],["NotSucceedsEqual",[10928,824]],["NotSucceedsSlantEqual",[8929]],["NotSucceedsTilde",[8831,824]],["NotSuperset",[8835,8402]],["NotSupersetEqual",[8841]],["NotTilde",[8769]],["NotTildeEqual",[8772]],["NotTildeFullEqual",[8775]],["NotTildeTilde",[8777]],["NotVerticalBar",[8740]],["nparallel",[8742]],["npar",[8742]],["nparsl",[11005,8421]],["npart",[8706,824]],["npolint",[10772]],["npr",[8832]],["nprcue",[8928]],["nprec",[8832]],["npreceq",[10927,824]],["npre",[10927,824]],["nrarrc",[10547,824]],["nrarr",[8603]],["nrArr",[8655]],["nrarrw",[8605,824]],["nrightarrow",[8603]],["nRightarrow",[8655]],["nrtri",[8939]],["nrtrie",[8941]],["nsc",[8833]],["nsccue",[8929]],["nsce",[10928,824]],["Nscr",[119977]],["nscr",[120003]],["nshortmid",[8740]],["nshortparallel",[8742]],["nsim",[8769]],["nsime",[8772]],["nsimeq",[8772]],["nsmid",[8740]],["nspar",[8742]],["nsqsube",[8930]],["nsqsupe",[8931]],["nsub",[8836]],["nsubE",[10949,824]],["nsube",[8840]],["nsubset",[8834,8402]],["nsubseteq",[8840]],["nsubseteqq",[10949,824]],["nsucc",[8833]],["nsucceq",[10928,824]],["nsup",[8837]],["nsupE",[10950,824]],["nsupe",[8841]],["nsupset",[8835,8402]],["nsupseteq",[8841]],["nsupseteqq",[10950,824]],["ntgl",[8825]],["Ntilde",[209]],["ntilde",[241]],["ntlg",[8824]],["ntriangleleft",[8938]],["ntrianglelefteq",[8940]],["ntriangleright",[8939]],["ntrianglerighteq",[8941]],["Nu",[925]],["nu",[957]],["num",[35]],["numero",[8470]],["numsp",[8199]],["nvap",[8781,8402]],["nvdash",[8876]],["nvDash",[8877]],["nVdash",[8878]],["nVDash",[8879]],["nvge",[8805,8402]],["nvgt",[62,8402]],["nvHarr",[10500]],["nvinfin",[10718]],["nvlArr",[10498]],["nvle",[8804,8402]],["nvlt",[60,8402]],["nvltrie",[8884,8402]],["nvrArr",[10499]],["nvrtrie",[8885,8402]],["nvsim",[8764,8402]],["nwarhk",[10531]],["nwarr",[8598]],["nwArr",[8662]],["nwarrow",[8598]],["nwnear",[10535]],["Oacute",[211]],["oacute",[243]],["oast",[8859]],["Ocirc",[212]],["ocirc",[244]],["ocir",[8858]],["Ocy",[1054]],["ocy",[1086]],["odash",[8861]],["Odblac",[336]],["odblac",[337]],["odiv",[10808]],["odot",[8857]],["odsold",[10684]],["OElig",[338]],["oelig",[339]],["ofcir",[10687]],["Ofr",[120082]],["ofr",[120108]],["ogon",[731]],["Ograve",[210]],["ograve",[242]],["ogt",[10689]],["ohbar",[10677]],["ohm",[937]],["oint",[8750]],["olarr",[8634]],["olcir",[10686]],["olcross",[10683]],["oline",[8254]],["olt",[10688]],["Omacr",[332]],["omacr",[333]],["Omega",[937]],["omega",[969]],["Omicron",[927]],["omicron",[959]],["omid",[10678]],["ominus",[8854]],["Oopf",[120134]],["oopf",[120160]],["opar",[10679]],["OpenCurlyDoubleQuote",[8220]],["OpenCurlyQuote",[8216]],["operp",[10681]],["oplus",[8853]],["orarr",[8635]],["Or",[10836]],["or",[8744]],["ord",[10845]],["order",[8500]],["orderof",[8500]],["ordf",[170]],["ordm",[186]],["origof",[8886]],["oror",[10838]],["orslope",[10839]],["orv",[10843]],["oS",[9416]],["Oscr",[119978]],["oscr",[8500]],["Oslash",[216]],["oslash",[248]],["osol",[8856]],["Otilde",[213]],["otilde",[245]],["otimesas",[10806]],["Otimes",[10807]],["otimes",[8855]],["Ouml",[214]],["ouml",[246]],["ovbar",[9021]],["OverBar",[8254]],["OverBrace",[9182]],["OverBracket",[9140]],["OverParenthesis",[9180]],["para",[182]],["parallel",[8741]],["par",[8741]],["parsim",[10995]],["parsl",[11005]],["part",[8706]],["PartialD",[8706]],["Pcy",[1055]],["pcy",[1087]],["percnt",[37]],["period",[46]],["permil",[8240]],["perp",[8869]],["pertenk",[8241]],["Pfr",[120083]],["pfr",[120109]],["Phi",[934]],["phi",[966]],["phiv",[981]],["phmmat",[8499]],["phone",[9742]],["Pi",[928]],["pi",[960]],["pitchfork",[8916]],["piv",[982]],["planck",[8463]],["planckh",[8462]],["plankv",[8463]],["plusacir",[10787]],["plusb",[8862]],["pluscir",[10786]],["plus",[43]],["plusdo",[8724]],["plusdu",[10789]],["pluse",[10866]],["PlusMinus",[177]],["plusmn",[177]],["plussim",[10790]],["plustwo",[10791]],["pm",[177]],["Poincareplane",[8460]],["pointint",[10773]],["popf",[120161]],["Popf",[8473]],["pound",[163]],["prap",[10935]],["Pr",[10939]],["pr",[8826]],["prcue",[8828]],["precapprox",[10935]],["prec",[8826]],["preccurlyeq",[8828]],["Precedes",[8826]],["PrecedesEqual",[10927]],["PrecedesSlantEqual",[8828]],["PrecedesTilde",[8830]],["preceq",[10927]],["precnapprox",[10937]],["precneqq",[10933]],["precnsim",[8936]],["pre",[10927]],["prE",[10931]],["precsim",[8830]],["prime",[8242]],["Prime",[8243]],["primes",[8473]],["prnap",[10937]],["prnE",[10933]],["prnsim",[8936]],["prod",[8719]],["Product",[8719]],["profalar",[9006]],["profline",[8978]],["profsurf",[8979]],["prop",[8733]],["Proportional",[8733]],["Proportion",[8759]],["propto",[8733]],["prsim",[8830]],["prurel",[8880]],["Pscr",[119979]],["pscr",[120005]],["Psi",[936]],["psi",[968]],["puncsp",[8200]],["Qfr",[120084]],["qfr",[120110]],["qint",[10764]],["qopf",[120162]],["Qopf",[8474]],["qprime",[8279]],["Qscr",[119980]],["qscr",[120006]],["quaternions",[8461]],["quatint",[10774]],["quest",[63]],["questeq",[8799]],["quot",[34]],["QUOT",[34]],["rAarr",[8667]],["race",[8765,817]],["Racute",[340]],["racute",[341]],["radic",[8730]],["raemptyv",[10675]],["rang",[10217]],["Rang",[10219]],["rangd",[10642]],["range",[10661]],["rangle",[10217]],["raquo",[187]],["rarrap",[10613]],["rarrb",[8677]],["rarrbfs",[10528]],["rarrc",[10547]],["rarr",[8594]],["Rarr",[8608]],["rArr",[8658]],["rarrfs",[10526]],["rarrhk",[8618]],["rarrlp",[8620]],["rarrpl",[10565]],["rarrsim",[10612]],["Rarrtl",[10518]],["rarrtl",[8611]],["rarrw",[8605]],["ratail",[10522]],["rAtail",[10524]],["ratio",[8758]],["rationals",[8474]],["rbarr",[10509]],["rBarr",[10511]],["RBarr",[10512]],["rbbrk",[10099]],["rbrace",[125]],["rbrack",[93]],["rbrke",[10636]],["rbrksld",[10638]],["rbrkslu",[10640]],["Rcaron",[344]],["rcaron",[345]],["Rcedil",[342]],["rcedil",[343]],["rceil",[8969]],["rcub",[125]],["Rcy",[1056]],["rcy",[1088]],["rdca",[10551]],["rdldhar",[10601]],["rdquo",[8221]],["rdquor",[8221]],["CloseCurlyDoubleQuote",[8221]],["rdsh",[8627]],["real",[8476]],["realine",[8475]],["realpart",[8476]],["reals",[8477]],["Re",[8476]],["rect",[9645]],["reg",[174]],["REG",[174]],["ReverseElement",[8715]],["ReverseEquilibrium",[8651]],["ReverseUpEquilibrium",[10607]],["rfisht",[10621]],["rfloor",[8971]],["rfr",[120111]],["Rfr",[8476]],["rHar",[10596]],["rhard",[8641]],["rharu",[8640]],["rharul",[10604]],["Rho",[929]],["rho",[961]],["rhov",[1009]],["RightAngleBracket",[10217]],["RightArrowBar",[8677]],["rightarrow",[8594]],["RightArrow",[8594]],["Rightarrow",[8658]],["RightArrowLeftArrow",[8644]],["rightarrowtail",[8611]],["RightCeiling",[8969]],["RightDoubleBracket",[10215]],["RightDownTeeVector",[10589]],["RightDownVectorBar",[10581]],["RightDownVector",[8642]],["RightFloor",[8971]],["rightharpoondown",[8641]],["rightharpoonup",[8640]],["rightleftarrows",[8644]],["rightleftharpoons",[8652]],["rightrightarrows",[8649]],["rightsquigarrow",[8605]],["RightTeeArrow",[8614]],["RightTee",[8866]],["RightTeeVector",[10587]],["rightthreetimes",[8908]],["RightTriangleBar",[10704]],["RightTriangle",[8883]],["RightTriangleEqual",[8885]],["RightUpDownVector",[10575]],["RightUpTeeVector",[10588]],["RightUpVectorBar",[10580]],["RightUpVector",[8638]],["RightVectorBar",[10579]],["RightVector",[8640]],["ring",[730]],["risingdotseq",[8787]],["rlarr",[8644]],["rlhar",[8652]],["rlm",[8207]],["rmoustache",[9137]],["rmoust",[9137]],["rnmid",[10990]],["roang",[10221]],["roarr",[8702]],["robrk",[10215]],["ropar",[10630]],["ropf",[120163]],["Ropf",[8477]],["roplus",[10798]],["rotimes",[10805]],["RoundImplies",[10608]],["rpar",[41]],["rpargt",[10644]],["rppolint",[10770]],["rrarr",[8649]],["Rrightarrow",[8667]],["rsaquo",[8250]],["rscr",[120007]],["Rscr",[8475]],["rsh",[8625]],["Rsh",[8625]],["rsqb",[93]],["rsquo",[8217]],["rsquor",[8217]],["CloseCurlyQuote",[8217]],["rthree",[8908]],["rtimes",[8906]],["rtri",[9657]],["rtrie",[8885]],["rtrif",[9656]],["rtriltri",[10702]],["RuleDelayed",[10740]],["ruluhar",[10600]],["rx",[8478]],["Sacute",[346]],["sacute",[347]],["sbquo",[8218]],["scap",[10936]],["Scaron",[352]],["scaron",[353]],["Sc",[10940]],["sc",[8827]],["sccue",[8829]],["sce",[10928]],["scE",[10932]],["Scedil",[350]],["scedil",[351]],["Scirc",[348]],["scirc",[349]],["scnap",[10938]],["scnE",[10934]],["scnsim",[8937]],["scpolint",[10771]],["scsim",[8831]],["Scy",[1057]],["scy",[1089]],["sdotb",[8865]],["sdot",[8901]],["sdote",[10854]],["searhk",[10533]],["searr",[8600]],["seArr",[8664]],["searrow",[8600]],["sect",[167]],["semi",[59]],["seswar",[10537]],["setminus",[8726]],["setmn",[8726]],["sext",[10038]],["Sfr",[120086]],["sfr",[120112]],["sfrown",[8994]],["sharp",[9839]],["SHCHcy",[1065]],["shchcy",[1097]],["SHcy",[1064]],["shcy",[1096]],["ShortDownArrow",[8595]],["ShortLeftArrow",[8592]],["shortmid",[8739]],["shortparallel",[8741]],["ShortRightArrow",[8594]],["ShortUpArrow",[8593]],["shy",[173]],["Sigma",[931]],["sigma",[963]],["sigmaf",[962]],["sigmav",[962]],["sim",[8764]],["simdot",[10858]],["sime",[8771]],["simeq",[8771]],["simg",[10910]],["simgE",[10912]],["siml",[10909]],["simlE",[10911]],["simne",[8774]],["simplus",[10788]],["simrarr",[10610]],["slarr",[8592]],["SmallCircle",[8728]],["smallsetminus",[8726]],["smashp",[10803]],["smeparsl",[10724]],["smid",[8739]],["smile",[8995]],["smt",[10922]],["smte",[10924]],["smtes",[10924,65024]],["SOFTcy",[1068]],["softcy",[1100]],["solbar",[9023]],["solb",[10692]],["sol",[47]],["Sopf",[120138]],["sopf",[120164]],["spades",[9824]],["spadesuit",[9824]],["spar",[8741]],["sqcap",[8851]],["sqcaps",[8851,65024]],["sqcup",[8852]],["sqcups",[8852,65024]],["Sqrt",[8730]],["sqsub",[8847]],["sqsube",[8849]],["sqsubset",[8847]],["sqsubseteq",[8849]],["sqsup",[8848]],["sqsupe",[8850]],["sqsupset",[8848]],["sqsupseteq",[8850]],["square",[9633]],["Square",[9633]],["SquareIntersection",[8851]],["SquareSubset",[8847]],["SquareSubsetEqual",[8849]],["SquareSuperset",[8848]],["SquareSupersetEqual",[8850]],["SquareUnion",[8852]],["squarf",[9642]],["squ",[9633]],["squf",[9642]],["srarr",[8594]],["Sscr",[119982]],["sscr",[120008]],["ssetmn",[8726]],["ssmile",[8995]],["sstarf",[8902]],["Star",[8902]],["star",[9734]],["starf",[9733]],["straightepsilon",[1013]],["straightphi",[981]],["strns",[175]],["sub",[8834]],["Sub",[8912]],["subdot",[10941]],["subE",[10949]],["sube",[8838]],["subedot",[10947]],["submult",[10945]],["subnE",[10955]],["subne",[8842]],["subplus",[10943]],["subrarr",[10617]],["subset",[8834]],["Subset",[8912]],["subseteq",[8838]],["subseteqq",[10949]],["SubsetEqual",[8838]],["subsetneq",[8842]],["subsetneqq",[10955]],["subsim",[10951]],["subsub",[10965]],["subsup",[10963]],["succapprox",[10936]],["succ",[8827]],["succcurlyeq",[8829]],["Succeeds",[8827]],["SucceedsEqual",[10928]],["SucceedsSlantEqual",[8829]],["SucceedsTilde",[8831]],["succeq",[10928]],["succnapprox",[10938]],["succneqq",[10934]],["succnsim",[8937]],["succsim",[8831]],["SuchThat",[8715]],["sum",[8721]],["Sum",[8721]],["sung",[9834]],["sup1",[185]],["sup2",[178]],["sup3",[179]],["sup",[8835]],["Sup",[8913]],["supdot",[10942]],["supdsub",[10968]],["supE",[10950]],["supe",[8839]],["supedot",[10948]],["Superset",[8835]],["SupersetEqual",[8839]],["suphsol",[10185]],["suphsub",[10967]],["suplarr",[10619]],["supmult",[10946]],["supnE",[10956]],["supne",[8843]],["supplus",[10944]],["supset",[8835]],["Supset",[8913]],["supseteq",[8839]],["supseteqq",[10950]],["supsetneq",[8843]],["supsetneqq",[10956]],["supsim",[10952]],["supsub",[10964]],["supsup",[10966]],["swarhk",[10534]],["swarr",[8601]],["swArr",[8665]],["swarrow",[8601]],["swnwar",[10538]],["szlig",[223]],["Tab",[9]],["target",[8982]],["Tau",[932]],["tau",[964]],["tbrk",[9140]],["Tcaron",[356]],["tcaron",[357]],["Tcedil",[354]],["tcedil",[355]],["Tcy",[1058]],["tcy",[1090]],["tdot",[8411]],["telrec",[8981]],["Tfr",[120087]],["tfr",[120113]],["there4",[8756]],["therefore",[8756]],["Therefore",[8756]],["Theta",[920]],["theta",[952]],["thetasym",[977]],["thetav",[977]],["thickapprox",[8776]],["thicksim",[8764]],["ThickSpace",[8287,8202]],["ThinSpace",[8201]],["thinsp",[8201]],["thkap",[8776]],["thksim",[8764]],["THORN",[222]],["thorn",[254]],["tilde",[732]],["Tilde",[8764]],["TildeEqual",[8771]],["TildeFullEqual",[8773]],["TildeTilde",[8776]],["timesbar",[10801]],["timesb",[8864]],["times",[215]],["timesd",[10800]],["tint",[8749]],["toea",[10536]],["topbot",[9014]],["topcir",[10993]],["top",[8868]],["Topf",[120139]],["topf",[120165]],["topfork",[10970]],["tosa",[10537]],["tprime",[8244]],["trade",[8482]],["TRADE",[8482]],["triangle",[9653]],["triangledown",[9663]],["triangleleft",[9667]],["trianglelefteq",[8884]],["triangleq",[8796]],["triangleright",[9657]],["trianglerighteq",[8885]],["tridot",[9708]],["trie",[8796]],["triminus",[10810]],["TripleDot",[8411]],["triplus",[10809]],["trisb",[10701]],["tritime",[10811]],["trpezium",[9186]],["Tscr",[119983]],["tscr",[120009]],["TScy",[1062]],["tscy",[1094]],["TSHcy",[1035]],["tshcy",[1115]],["Tstrok",[358]],["tstrok",[359]],["twixt",[8812]],["twoheadleftarrow",[8606]],["twoheadrightarrow",[8608]],["Uacute",[218]],["uacute",[250]],["uarr",[8593]],["Uarr",[8607]],["uArr",[8657]],["Uarrocir",[10569]],["Ubrcy",[1038]],["ubrcy",[1118]],["Ubreve",[364]],["ubreve",[365]],["Ucirc",[219]],["ucirc",[251]],["Ucy",[1059]],["ucy",[1091]],["udarr",[8645]],["Udblac",[368]],["udblac",[369]],["udhar",[10606]],["ufisht",[10622]],["Ufr",[120088]],["ufr",[120114]],["Ugrave",[217]],["ugrave",[249]],["uHar",[10595]],["uharl",[8639]],["uharr",[8638]],["uhblk",[9600]],["ulcorn",[8988]],["ulcorner",[8988]],["ulcrop",[8975]],["ultri",[9720]],["Umacr",[362]],["umacr",[363]],["uml",[168]],["UnderBar",[95]],["UnderBrace",[9183]],["UnderBracket",[9141]],["UnderParenthesis",[9181]],["Union",[8899]],["UnionPlus",[8846]],["Uogon",[370]],["uogon",[371]],["Uopf",[120140]],["uopf",[120166]],["UpArrowBar",[10514]],["uparrow",[8593]],["UpArrow",[8593]],["Uparrow",[8657]],["UpArrowDownArrow",[8645]],["updownarrow",[8597]],["UpDownArrow",[8597]],["Updownarrow",[8661]],["UpEquilibrium",[10606]],["upharpoonleft",[8639]],["upharpoonright",[8638]],["uplus",[8846]],["UpperLeftArrow",[8598]],["UpperRightArrow",[8599]],["upsi",[965]],["Upsi",[978]],["upsih",[978]],["Upsilon",[933]],["upsilon",[965]],["UpTeeArrow",[8613]],["UpTee",[8869]],["upuparrows",[8648]],["urcorn",[8989]],["urcorner",[8989]],["urcrop",[8974]],["Uring",[366]],["uring",[367]],["urtri",[9721]],["Uscr",[119984]],["uscr",[120010]],["utdot",[8944]],["Utilde",[360]],["utilde",[361]],["utri",[9653]],["utrif",[9652]],["uuarr",[8648]],["Uuml",[220]],["uuml",[252]],["uwangle",[10663]],["vangrt",[10652]],["varepsilon",[1013]],["varkappa",[1008]],["varnothing",[8709]],["varphi",[981]],["varpi",[982]],["varpropto",[8733]],["varr",[8597]],["vArr",[8661]],["varrho",[1009]],["varsigma",[962]],["varsubsetneq",[8842,65024]],["varsubsetneqq",[10955,65024]],["varsupsetneq",[8843,65024]],["varsupsetneqq",[10956,65024]],["vartheta",[977]],["vartriangleleft",[8882]],["vartriangleright",[8883]],["vBar",[10984]],["Vbar",[10987]],["vBarv",[10985]],["Vcy",[1042]],["vcy",[1074]],["vdash",[8866]],["vDash",[8872]],["Vdash",[8873]],["VDash",[8875]],["Vdashl",[10982]],["veebar",[8891]],["vee",[8744]],["Vee",[8897]],["veeeq",[8794]],["vellip",[8942]],["verbar",[124]],["Verbar",[8214]],["vert",[124]],["Vert",[8214]],["VerticalBar",[8739]],["VerticalLine",[124]],["VerticalSeparator",[10072]],["VerticalTilde",[8768]],["VeryThinSpace",[8202]],["Vfr",[120089]],["vfr",[120115]],["vltri",[8882]],["vnsub",[8834,8402]],["vnsup",[8835,8402]],["Vopf",[120141]],["vopf",[120167]],["vprop",[8733]],["vrtri",[8883]],["Vscr",[119985]],["vscr",[120011]],["vsubnE",[10955,65024]],["vsubne",[8842,65024]],["vsupnE",[10956,65024]],["vsupne",[8843,65024]],["Vvdash",[8874]],["vzigzag",[10650]],["Wcirc",[372]],["wcirc",[373]],["wedbar",[10847]],["wedge",[8743]],["Wedge",[8896]],["wedgeq",[8793]],["weierp",[8472]],["Wfr",[120090]],["wfr",[120116]],["Wopf",[120142]],["wopf",[120168]],["wp",[8472]],["wr",[8768]],["wreath",[8768]],["Wscr",[119986]],["wscr",[120012]],["xcap",[8898]],["xcirc",[9711]],["xcup",[8899]],["xdtri",[9661]],["Xfr",[120091]],["xfr",[120117]],["xharr",[10231]],["xhArr",[10234]],["Xi",[926]],["xi",[958]],["xlarr",[10229]],["xlArr",[10232]],["xmap",[10236]],["xnis",[8955]],["xodot",[10752]],["Xopf",[120143]],["xopf",[120169]],["xoplus",[10753]],["xotime",[10754]],["xrarr",[10230]],["xrArr",[10233]],["Xscr",[119987]],["xscr",[120013]],["xsqcup",[10758]],["xuplus",[10756]],["xutri",[9651]],["xvee",[8897]],["xwedge",[8896]],["Yacute",[221]],["yacute",[253]],["YAcy",[1071]],["yacy",[1103]],["Ycirc",[374]],["ycirc",[375]],["Ycy",[1067]],["ycy",[1099]],["yen",[165]],["Yfr",[120092]],["yfr",[120118]],["YIcy",[1031]],["yicy",[1111]],["Yopf",[120144]],["yopf",[120170]],["Yscr",[119988]],["yscr",[120014]],["YUcy",[1070]],["yucy",[1102]],["yuml",[255]],["Yuml",[376]],["Zacute",[377]],["zacute",[378]],["Zcaron",[381]],["zcaron",[382]],["Zcy",[1047]],["zcy",[1079]],["Zdot",[379]],["zdot",[380]],["zeetrf",[8488]],["ZeroWidthSpace",[8203]],["Zeta",[918]],["zeta",[950]],["zfr",[120119]],["Zfr",[8488]],["ZHcy",[1046]],["zhcy",[1078]],["zigrarr",[8669]],["zopf",[120171]],["Zopf",[8484]],["Zscr",[119989]],["zscr",[120015]],["zwj",[8205]],["zwnj",[8204]]];
var alphaIndex={};var charIndex={};createIndexes(alphaIndex,charIndex);function Html5Entities(){}Html5Entities.prototype.decode=function(str){if(!str||!str.length){return""}return str.replace(/&(#?[\w\d]+);?/g,function(s,entity){var chr;if(entity.charAt(0)==="#"){var code=entity.charAt(1)==="x"?parseInt(entity.substr(2).toLowerCase(),16):parseInt(entity.substr(1));if(!(isNaN(code)||code<-32768||code>65535)){chr=String.fromCharCode(code)}}else{chr=alphaIndex[entity]}return chr||s})};Html5Entities.decode=function(str){return(new Html5Entities).decode(str)};Html5Entities.prototype.encode=function(str){if(!str||!str.length){return""}var strLength=str.length;var result="";var i=0;while(i<strLength){var charInfo=charIndex[str.charCodeAt(i)];if(charInfo){var alpha=charInfo[str.charCodeAt(i+1)];if(alpha){i++}else{alpha=charInfo[""]}if(alpha){result+="&"+alpha+";";i++;continue}}result+=str.charAt(i);i++}return result};Html5Entities.encode=function(str){return(new Html5Entities).encode(str)};Html5Entities.prototype.encodeNonUTF=function(str){if(!str||!str.length){return""}var strLength=str.length;var result="";var i=0;while(i<strLength){var c=str.charCodeAt(i);var charInfo=charIndex[c];if(charInfo){var alpha=charInfo[str.charCodeAt(i+1)];if(alpha){i++}else{alpha=charInfo[""]}if(alpha){result+="&"+alpha+";";i++;continue}}if(c<32||c>126){result+="&#"+c+";"}else{result+=str.charAt(i)}i++}return result};Html5Entities.encodeNonUTF=function(str){return(new Html5Entities).encodeNonUTF(str)};Html5Entities.prototype.encodeNonASCII=function(str){if(!str||!str.length){return""}var strLength=str.length;var result="";var i=0;while(i<strLength){var c=str.charCodeAt(i);if(c<=255){result+=str[i++];continue}result+="&#"+c+";";i++}return result};Html5Entities.encodeNonASCII=function(str){return(new Html5Entities).encodeNonASCII(str)};function createIndexes(alphaIndex,charIndex){var i=ENTITIES.length;var _results=[];while(i--){var e=ENTITIES[i];var alpha=e[0];var chars=e[1];var chr=chars[0];var addChar=chr<32||chr>126||chr===62||chr===60||chr===38||chr===34||chr===39;var charInfo;if(addChar){charInfo=charIndex[chr]=charIndex[chr]||{}}if(chars[1]){var chr2=chars[1];alphaIndex[alpha]=String.fromCharCode(chr)+String.fromCharCode(chr2);_results.push(addChar&&(charInfo[chr2]=alpha))}else{alphaIndex[alpha]=String.fromCharCode(chr);_results.push(addChar&&(charInfo[""]=alpha))}}}module.exports=Html5Entities},function(module,exports,__webpack_require__){(function(global){var k,_handlers={},_mods={16:false,18:false,17:false,91:false},_scope="all",_MODIFIERS={"⇧":16,shift:16,"⌥":18,alt:18,option:18,"⌃":17,ctrl:17,control:17,"⌘":91,command:91},_MAP={backspace:8,tab:9,clear:12,enter:13,"return":13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,"delete":46,home:36,end:35,pageup:33,pagedown:34,",":188,".":190,"/":191,"`":192,"-":189,"=":187,";":186,"'":222,"[":219,"]":221,"\\":220},code=function(x){return _MAP[x]||x.toUpperCase().charCodeAt(0)},_downKeys=[];for(k=1;k<20;k++)_MAP["f"+k]=111+k;function index(array,item){var i=array.length;while(i--)if(array[i]===item)return i;return-1}function compareArray(a1,a2){if(a1.length!=a2.length)return false;for(var i=0;i<a1.length;i++){if(a1[i]!==a2[i])return false}return true}var modifierMap={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey"};function updateModifierKey(event){for(k in _mods)_mods[k]=event[modifierMap[k]]}function dispatch(event){var key,handler,k,i,modifiersMatch,scope;key=event.keyCode;if(index(_downKeys,key)==-1){_downKeys.push(key)}if(key==93||key==224)key=91;if(key in _mods){_mods[key]=true;for(k in _MODIFIERS)if(_MODIFIERS[k]==key)assignKey[k]=true;return}updateModifierKey(event);if(!assignKey.filter.call(this,event))return;if(!(key in _handlers))return;scope=getScope();for(i=0;i<_handlers[key].length;i++){handler=_handlers[key][i];if(handler.scope==scope||handler.scope=="all"){modifiersMatch=handler.mods.length>0;for(k in _mods)if(!_mods[k]&&index(handler.mods,+k)>-1||_mods[k]&&index(handler.mods,+k)==-1)modifiersMatch=false;if(handler.mods.length==0&&!_mods[16]&&!_mods[18]&&!_mods[17]&&!_mods[91]||modifiersMatch){if(handler.method(event,handler)===false){if(event.preventDefault)event.preventDefault();else event.returnValue=false;if(event.stopPropagation)event.stopPropagation();if(event.cancelBubble)event.cancelBubble=true}}}}}function clearModifier(event){var key=event.keyCode,k,i=index(_downKeys,key);if(i>=0){_downKeys.splice(i,1)}if(key==93||key==224)key=91;if(key in _mods){_mods[key]=false;for(k in _MODIFIERS)if(_MODIFIERS[k]==key)assignKey[k]=false}}function resetModifiers(){for(k in _mods)_mods[k]=false;for(k in _MODIFIERS)assignKey[k]=false}function assignKey(key,scope,method){var keys,mods;keys=getKeys(key);if(method===undefined){method=scope;scope="all"}for(var i=0;i<keys.length;i++){mods=[];key=keys[i].split("+");if(key.length>1){mods=getMods(key);key=[key[key.length-1]]}key=key[0];key=code(key);if(!(key in _handlers))_handlers[key]=[];_handlers[key].push({shortcut:keys[i],scope:scope,method:method,key:keys[i],mods:mods})}}function unbindKey(key,scope){var multipleKeys,keys,mods=[],i,j,obj;multipleKeys=getKeys(key);for(j=0;j<multipleKeys.length;j++){keys=multipleKeys[j].split("+");if(keys.length>1){mods=getMods(keys);key=keys[keys.length-1]}key=code(key);if(scope===undefined){scope=getScope()}if(!_handlers[key]){return}for(i=0;i<_handlers[key].length;i++){obj=_handlers[key][i];if(obj.scope===scope&&compareArray(obj.mods,mods)){_handlers[key][i]={}}}}}function isPressed(keyCode){if(typeof keyCode=="string"){keyCode=code(keyCode)}return index(_downKeys,keyCode)!=-1}function getPressedKeyCodes(){return _downKeys.slice(0)}function filter(event){var tagName=(event.target||event.srcElement).tagName;return!(tagName=="INPUT"||tagName=="SELECT"||tagName=="TEXTAREA")}for(k in _MODIFIERS)assignKey[k]=false;function setScope(scope){_scope=scope||"all"}function getScope(){return _scope||"all"}function deleteScope(scope){var key,handlers,i;for(key in _handlers){handlers=_handlers[key];for(i=0;i<handlers.length;){if(handlers[i].scope===scope)handlers.splice(i,1);else i++}}}function getKeys(key){var keys;key=key.replace(/\s/g,"");keys=key.split(",");if(keys[keys.length-1]==""){keys[keys.length-2]+=","}return keys}function getMods(key){var mods=key.slice(0,key.length-1);for(var mi=0;mi<mods.length;mi++)mods[mi]=_MODIFIERS[mods[mi]];return mods}function addEvent(object,event,method){if(object.addEventListener)object.addEventListener(event,method,false);else if(object.attachEvent)object.attachEvent("on"+event,function(){method(window.event)})}addEvent(document,"keydown",function(event){dispatch(event)});addEvent(document,"keyup",clearModifier);addEvent(window,"focus",resetModifiers);var previousKey=global.key;function noConflict(){var k=global.key;global.key=previousKey;return k}global.key=assignKey;global.key.setScope=setScope;global.key.getScope=getScope;global.key.deleteScope=deleteScope;global.key.filter=filter;global.key.isPressed=isPressed;global.key.getPressedKeyCodes=getPressedKeyCodes;global.key.noConflict=noConflict;global.key.unbind=unbindKey;if(true)module.exports=assignKey})(this)},function(module,exports,__webpack_require__){"use strict";function EventTarget(){this._listeners={}}EventTarget.prototype.addEventListener=function(eventType,listener){if(!(eventType in this._listeners)){this._listeners[eventType]=[]}var arr=this._listeners[eventType];if(arr.indexOf(listener)===-1){arr=arr.concat([listener])}this._listeners[eventType]=arr};EventTarget.prototype.removeEventListener=function(eventType,listener){var arr=this._listeners[eventType];if(!arr){return}var idx=arr.indexOf(listener);if(idx!==-1){if(arr.length>1){this._listeners[eventType]=arr.slice(0,idx).concat(arr.slice(idx+1))}else{delete this._listeners[eventType]}return}};EventTarget.prototype.dispatchEvent=function(){var event=arguments[0];var t=event.type;var args=arguments.length===1?[event]:Array.apply(null,arguments);if(this["on"+t]){this["on"+t].apply(this,args)}if(t in this._listeners){var listeners=this._listeners[t];for(var i=0;i<listeners.length;i++){listeners[i].apply(this,args)}}};module.exports=EventTarget},function(module,exports,__webpack_require__){"use strict";(function(process){var EventEmitter=__webpack_require__(6).EventEmitter,inherits=__webpack_require__(2),JSON3=__webpack_require__(9),objectUtils=__webpack_require__(29);var debug=function(){};if(process.env.NODE_ENV!=="production"){debug=__webpack_require__(5)("sockjs-client:info-ajax")}function InfoAjax(url,AjaxObject){EventEmitter.call(this);var self=this;var t0=+new Date;this.xo=new AjaxObject("GET",url);this.xo.once("finish",function(status,text){var info,rtt;if(status===200){rtt=+new Date-t0;if(text){try{info=JSON3.parse(text)}catch(e){debug("bad json",text)}}if(!objectUtils.isObject(info)){info={}}}self.emit("finish",info,rtt);self.removeAllListeners()})}inherits(InfoAjax,EventEmitter);InfoAjax.prototype.close=function(){this.removeAllListeners();this.xo.close()};module.exports=InfoAjax}).call(exports,__webpack_require__(4))},function(module,exports,__webpack_require__){"use strict";var inherits=__webpack_require__(2),EventEmitter=__webpack_require__(6).EventEmitter,JSON3=__webpack_require__(9),XHRLocalObject=__webpack_require__(17),InfoAjax=__webpack_require__(65);function InfoReceiverIframe(transUrl){var self=this;EventEmitter.call(this);this.ir=new InfoAjax(transUrl,XHRLocalObject);this.ir.once("finish",function(info,rtt){self.ir=null;self.emit("message",JSON3.stringify([info,rtt]))})}inherits(InfoReceiverIframe,EventEmitter);InfoReceiverIframe.transportName="iframe-info-receiver";InfoReceiverIframe.prototype.close=function(){if(this.ir){this.ir.close();this.ir=null}this.removeAllListeners()};module.exports=InfoReceiverIframe},function(module,exports,__webpack_require__){"use strict";(function(global){module.exports=global.location||{origin:"http://localhost:80",protocol:"http",host:"localhost",port:80,href:"http://localhost/",hash:""}}).call(exports,__webpack_require__(3))},function(module,exports,__webpack_require__){"use strict";(function(global,process){var EventEmitter=__webpack_require__(6).EventEmitter,inherits=__webpack_require__(2),utils=__webpack_require__(11),urlUtils=__webpack_require__(7),XHR=global.XMLHttpRequest;var debug=function(){};if(process.env.NODE_ENV!=="production"){debug=__webpack_require__(5)("sockjs-client:browser:xhr")}function AbstractXHRObject(method,url,payload,opts){debug(method,url);var self=this;EventEmitter.call(this);setTimeout(function(){self._start(method,url,payload,opts)},0)}inherits(AbstractXHRObject,EventEmitter);AbstractXHRObject.prototype._start=function(method,url,payload,opts){var self=this;try{this.xhr=new XHR}catch(x){}if(!this.xhr){debug("no xhr");this.emit("finish",0,"no xhr support");this._cleanup();return}url=urlUtils.addQuery(url,"t="+ +new Date);this.unloadRef=utils.unloadAdd(function(){debug("unload cleanup");self._cleanup(true)});try{this.xhr.open(method,url,true);if(this.timeout&&"timeout"in this.xhr){this.xhr.timeout=this.timeout;this.xhr.ontimeout=function(){debug("xhr timeout");self.emit("finish",0,"");self._cleanup(false)}}}catch(e){debug("exception",e);this.emit("finish",0,"");this._cleanup(false);return}if((!opts||!opts.noCredentials)&&AbstractXHRObject.supportsCORS){debug("withCredentials");this.xhr.withCredentials="true"}if(opts&&opts.headers){for(var key in opts.headers){this.xhr.setRequestHeader(key,opts.headers[key])}}this.xhr.onreadystatechange=function(){if(self.xhr){var x=self.xhr;var text,status;debug("readyState",x.readyState);switch(x.readyState){case 3:try{status=x.status;text=x.responseText}catch(e){}debug("status",status);if(status===1223){status=204}if(status===200&&text&&text.length>0){debug("chunk");self.emit("chunk",status,text)}break;case 4:status=x.status;debug("status",status);if(status===1223){status=204}if(status===12005||status===12029){status=0}debug("finish",status,x.responseText);self.emit("finish",status,x.responseText);self._cleanup(false);break}}};try{self.xhr.send(payload)}catch(e){self.emit("finish",0,"");self._cleanup(false)}};AbstractXHRObject.prototype._cleanup=function(abort){debug("cleanup");if(!this.xhr){return}this.removeAllListeners();utils.unloadDel(this.unloadRef);this.xhr.onreadystatechange=function(){};if(this.xhr.ontimeout){this.xhr.ontimeout=null}if(abort){try{this.xhr.abort()}catch(x){}}this.unloadRef=this.xhr=null};AbstractXHRObject.prototype.close=function(){debug("close");this._cleanup(true)};AbstractXHRObject.enabled=!!XHR;var axo=["Active"].concat("Object").join("X");if(!AbstractXHRObject.enabled&&axo in global){debug("overriding xmlhttprequest");XHR=function(){try{return new global[axo]("Microsoft.XMLHTTP")}catch(e){return null}};AbstractXHRObject.enabled=!!new XHR}var cors=false;try{cors="withCredentials"in new XHR}catch(ignored){}AbstractXHRObject.supportsCORS=cors;module.exports=AbstractXHRObject}).call(exports,__webpack_require__(3),__webpack_require__(4))},function(module,exports,__webpack_require__){(function(global){module.exports=global.EventSource}).call(exports,__webpack_require__(3))},function(module,exports,__webpack_require__){"use strict";var inherits=__webpack_require__(2),AjaxBasedTransport=__webpack_require__(14),EventSourceReceiver=__webpack_require__(290),XHRCorsObject=__webpack_require__(22),EventSourceDriver=__webpack_require__(69);function EventSourceTransport(transUrl){if(!EventSourceTransport.enabled()){throw new Error("Transport created when disabled")}AjaxBasedTransport.call(this,transUrl,"/eventsource",EventSourceReceiver,XHRCorsObject)}inherits(EventSourceTransport,AjaxBasedTransport);EventSourceTransport.enabled=function(){return!!EventSourceDriver};EventSourceTransport.transportName="eventsource";EventSourceTransport.roundTrips=2;module.exports=EventSourceTransport},function(module,exports,__webpack_require__){"use strict";var inherits=__webpack_require__(2),HtmlfileReceiver=__webpack_require__(291),XHRLocalObject=__webpack_require__(17),AjaxBasedTransport=__webpack_require__(14);function HtmlFileTransport(transUrl){if(!HtmlfileReceiver.enabled){throw new Error("Transport created when disabled")}AjaxBasedTransport.call(this,transUrl,"/htmlfile",HtmlfileReceiver,XHRLocalObject)}inherits(HtmlFileTransport,AjaxBasedTransport);HtmlFileTransport.enabled=function(info){return HtmlfileReceiver.enabled&&info.sameOrigin};HtmlFileTransport.transportName="htmlfile";HtmlFileTransport.roundTrips=2;module.exports=HtmlFileTransport},function(module,exports,__webpack_require__){"use strict";(function(process){var inherits=__webpack_require__(2),JSON3=__webpack_require__(9),EventEmitter=__webpack_require__(6).EventEmitter,version=__webpack_require__(76),urlUtils=__webpack_require__(7),iframeUtils=__webpack_require__(19),eventUtils=__webpack_require__(11),random=__webpack_require__(15);var debug=function(){};if(process.env.NODE_ENV!=="production"){debug=__webpack_require__(5)("sockjs-client:transport:iframe")}function IframeTransport(transport,transUrl,baseUrl){if(!IframeTransport.enabled()){throw new Error("Transport created when disabled")}EventEmitter.call(this);var self=this;this.origin=urlUtils.getOrigin(baseUrl);this.baseUrl=baseUrl;this.transUrl=transUrl;this.transport=transport;this.windowId=random.string(8);var iframeUrl=urlUtils.addPath(baseUrl,"/iframe.html")+"#"+this.windowId;debug(transport,transUrl,iframeUrl);this.iframeObj=iframeUtils.createIframe(iframeUrl,function(r){debug("err callback");self.emit("close",1006,"Unable to load an iframe ("+r+")");self.close()});this.onmessageCallback=this._message.bind(this);eventUtils.attachEvent("message",this.onmessageCallback)}inherits(IframeTransport,EventEmitter);IframeTransport.prototype.close=function(){debug("close");this.removeAllListeners();if(this.iframeObj){eventUtils.detachEvent("message",this.onmessageCallback);try{this.postMessage("c")}catch(x){}this.iframeObj.cleanup();this.iframeObj=null;this.onmessageCallback=this.iframeObj=null}};IframeTransport.prototype._message=function(e){debug("message",e.data);if(!urlUtils.isOriginEqual(e.origin,this.origin)){debug("not same origin",e.origin,this.origin);return}var iframeMessage;try{iframeMessage=JSON3.parse(e.data)}catch(ignored){debug("bad json",e.data);return}if(iframeMessage.windowId!==this.windowId){debug("mismatched window id",iframeMessage.windowId,this.windowId);return}switch(iframeMessage.type){case"s":this.iframeObj.loaded();this.postMessage("s",JSON3.stringify([version,this.transport,this.transUrl,this.baseUrl]));break;case"t":this.emit("message",iframeMessage.data);break;case"c":var cdata;try{cdata=JSON3.parse(iframeMessage.data)}catch(ignored){debug("bad json",iframeMessage.data);return}this.emit("close",cdata[0],cdata[1]);this.close();break}};IframeTransport.prototype.postMessage=function(type,data){debug("postMessage",type,data);this.iframeObj.post(JSON3.stringify({windowId:this.windowId,type:type,data:data||""}),this.origin)};IframeTransport.prototype.send=function(message){debug("send",message);this.postMessage("m",message)};IframeTransport.enabled=function(){return iframeUtils.iframeEnabled};IframeTransport.transportName="iframe";IframeTransport.roundTrips=2;module.exports=IframeTransport}).call(exports,__webpack_require__(4))},function(module,exports,__webpack_require__){"use strict";(function(process){var inherits=__webpack_require__(2),urlUtils=__webpack_require__(7),BufferedSender=__webpack_require__(288),Polling=__webpack_require__(289);var debug=function(){};if(process.env.NODE_ENV!=="production"){debug=__webpack_require__(5)("sockjs-client:sender-receiver")}function SenderReceiver(transUrl,urlSuffix,senderFunc,Receiver,AjaxObject){var pollUrl=urlUtils.addPath(transUrl,urlSuffix);debug(pollUrl);var self=this;BufferedSender.call(this,transUrl,senderFunc);this.poll=new Polling(Receiver,pollUrl,AjaxObject);this.poll.on("message",function(msg){debug("poll message",msg);self.emit("message",msg)});this.poll.once("close",function(code,reason){debug("poll close",code,reason);self.poll=null;self.emit("close",code,reason);self.close()})}inherits(SenderReceiver,BufferedSender);SenderReceiver.prototype.close=function(){BufferedSender.prototype.close.call(this);debug("close");this.removeAllListeners();if(this.poll){this.poll.abort();this.poll=null}};module.exports=SenderReceiver}).call(exports,__webpack_require__(4))},function(module,exports,__webpack_require__){"use strict";var inherits=__webpack_require__(2),AjaxBasedTransport=__webpack_require__(14),XhrReceiver=__webpack_require__(21),XDRObject=__webpack_require__(28);function XdrStreamingTransport(transUrl){if(!XDRObject.enabled){throw new Error("Transport created when disabled")}AjaxBasedTransport.call(this,transUrl,"/xhr_streaming",XhrReceiver,XDRObject)}inherits(XdrStreamingTransport,AjaxBasedTransport);XdrStreamingTransport.enabled=function(info){if(info.cookie_needed||info.nullOrigin){return false}return XDRObject.enabled&&info.sameScheme};XdrStreamingTransport.transportName="xdr-streaming";XdrStreamingTransport.roundTrips=2;module.exports=XdrStreamingTransport},function(module,exports,__webpack_require__){"use strict";var inherits=__webpack_require__(2),AjaxBasedTransport=__webpack_require__(14),XhrReceiver=__webpack_require__(21),XHRCorsObject=__webpack_require__(22),XHRLocalObject=__webpack_require__(17);function XhrPollingTransport(transUrl){if(!XHRLocalObject.enabled&&!XHRCorsObject.enabled){throw new Error("Transport created when disabled")}AjaxBasedTransport.call(this,transUrl,"/xhr",XhrReceiver,XHRCorsObject)}inherits(XhrPollingTransport,AjaxBasedTransport);XhrPollingTransport.enabled=function(info){if(info.nullOrigin){return false}if(XHRLocalObject.enabled&&info.sameOrigin){return true}return XHRCorsObject.enabled};XhrPollingTransport.transportName="xhr-polling";XhrPollingTransport.roundTrips=2;module.exports=XhrPollingTransport},function(module,exports){module.exports="1.1.2"},function(module,exports,__webpack_require__){"use strict";(function(global){var required=__webpack_require__(275),qs=__webpack_require__(304),protocolre=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\S\s]*)/i,slashes=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//;var rules=[["#","hash"],["?","query"],["/","pathname"],["@","auth",1],[NaN,"host",undefined,1,1],[/:(\d+)$/,"port",undefined,1],[NaN,"hostname",undefined,1,1]];var ignore={hash:1,query:1};function lolcation(loc){loc=loc||global.location||{};var finaldestination={},type=typeof loc,key;if("blob:"===loc.protocol){finaldestination=new URL(unescape(loc.pathname),{})}else if("string"===type){finaldestination=new URL(loc,{});for(key in ignore)delete finaldestination[key]}else if("object"===type){for(key in loc){if(key in ignore)continue;finaldestination[key]=loc[key]}if(finaldestination.slashes===undefined){finaldestination.slashes=slashes.test(loc.href)}}return finaldestination}function extractProtocol(address){var match=protocolre.exec(address);return{protocol:match[1]?match[1].toLowerCase():"",slashes:!!match[2],rest:match[3]}}function resolve(relative,base){var path=(base||"/").split("/").slice(0,-1).concat(relative.split("/")),i=path.length,last=path[i-1],unshift=false,up=0;while(i--){if(path[i]==="."){path.splice(i,1)}else if(path[i]===".."){path.splice(i,1);up++}else if(up){if(i===0)unshift=true;path.splice(i,1);up--}}if(unshift)path.unshift("");if(last==="."||last==="..")path.push("");return path.join("/")}function URL(address,location,parser){if(!(this instanceof URL)){return new URL(address,location,parser)}var relative,extracted,parse,instruction,index,key,instructions=rules.slice(),type=typeof location,url=this,i=0;if("object"!==type&&"string"!==type){parser=location;location=null}if(parser&&"function"!==typeof parser)parser=qs.parse;location=lolcation(location);extracted=extractProtocol(address||"");relative=!extracted.protocol&&!extracted.slashes;url.slashes=extracted.slashes||relative&&location.slashes;url.protocol=extracted.protocol||location.protocol||"";address=extracted.rest;if(!extracted.slashes)instructions[2]=[/(.*)/,"pathname"];for(;i<instructions.length;i++){instruction=instructions[i];parse=instruction[0];key=instruction[1];if(parse!==parse){url[key]=address}else if("string"===typeof parse){if(~(index=address.indexOf(parse))){if("number"===typeof instruction[2]){url[key]=address.slice(0,index);address=address.slice(index+instruction[2])}else{url[key]=address.slice(index);address=address.slice(0,index)}}}else if(index=parse.exec(address)){url[key]=index[1];address=address.slice(0,index.index)}url[key]=url[key]||(relative&&instruction[3]?location[key]||"":"");if(instruction[4])url[key]=url[key].toLowerCase()}if(parser)url.query=parser(url.query);if(relative&&location.slashes&&url.pathname.charAt(0)!=="/"&&(url.pathname!==""||location.pathname!=="")){url.pathname=resolve(url.pathname,location.pathname)}if(!required(url.port,url.protocol)){url.host=url.hostname;url.port=""}url.username=url.password="";if(url.auth){instruction=url.auth.split(":");url.username=instruction[0]||"";url.password=instruction[1]||""}url.origin=url.protocol&&url.host&&url.protocol!=="file:"?url.protocol+"//"+url.host:"null";url.href=url.toString()}function set(part,value,fn){var url=this;switch(part){case"query":if("string"===typeof value&&value.length){value=(fn||qs.parse)(value)}url[part]=value;break;case"port":url[part]=value;if(!required(value,url.protocol)){url.host=url.hostname;url[part]=""}else if(value){url.host=url.hostname+":"+value}break;case"hostname":url[part]=value;if(url.port)value+=":"+url.port;url.host=value;break;case"host":url[part]=value;if(/:\d+$/.test(value)){value=value.split(":");url.port=value.pop();url.hostname=value.join(":")}else{url.hostname=value;url.port=""}break;case"protocol":url.protocol=value.toLowerCase();url.slashes=!fn;break;case"pathname":url.pathname=value.length&&value.charAt(0)!=="/"?"/"+value:value;break;default:url[part]=value}for(var i=0;i<rules.length;i++){var ins=rules[i];if(ins[4])url[ins[1]]=url[ins[1]].toLowerCase()}url.origin=url.protocol&&url.host&&url.protocol!=="file:"?url.protocol+"//"+url.host:"null";url.href=url.toString();return url}function toString(stringify){if(!stringify||"function"!==typeof stringify)stringify=qs.stringify;var query,url=this,protocol=url.protocol;if(protocol&&protocol.charAt(protocol.length-1)!==":")protocol+=":";var result=protocol+(url.slashes?"//":"");if(url.username){result+=url.username;if(url.password)result+=":"+url.password;result+="@"}result+=url.host+url.pathname;query="object"===typeof url.query?stringify(url.query):url.query;if(query)result+="?"!==query.charAt(0)?"?"+query:query;if(url.hash)result+=url.hash;return result}URL.prototype={set:set,toString:toString};URL.extractProtocol=extractProtocol;URL.location=lolcation;URL.qs=qs;module.exports=URL}).call(exports,__webpack_require__(3))},function(module,exports){module.exports=function(module){if(!module.webpackPolyfill){module.deprecate=function(){};module.paths=[];if(!module.children)module.children=[];Object.defineProperty(module,"loaded",{enumerable:true,get:function(){return module.l}});Object.defineProperty(module,"id",{enumerable:true,get:function(){return module.i}});module.webpackPolyfill=1}return module}},function(module,exports,__webpack_require__){"use strict";module.exports=__webpack_require__(181)},function(module,exports,__webpack_require__){(function(__resourceQuery){var url=__webpack_require__(305);var stripAnsi=__webpack_require__(303);var socket=__webpack_require__(308);var overlay=__webpack_require__(307);function getCurrentScriptSource(){if(document.currentScript)return document.currentScript.getAttribute("src");var scriptElements=document.scripts||[];var currentScript=scriptElements[scriptElements.length-1];if(currentScript)return currentScript.getAttribute("src");throw new Error("[WDS] Failed to get current script source")}var urlParts;if(true){urlParts=url.parse(__resourceQuery.substr(1))}else{var scriptHost=getCurrentScriptSource();scriptHost=scriptHost.replace(/\/[^\/]+$/,"");urlParts=url.parse(scriptHost?scriptHost:"/",false,true)}var hot=false;var initial=true;var currentHash="";var logLevel="info";var useWarningOverlay=false;var useErrorOverlay=false;function log(level,msg){if(logLevel==="info"&&level==="info")return console.log(msg);if(["info","warning"].indexOf(logLevel)>=0&&level==="warning")return console.warn(msg);if(["info","warning","error"].indexOf(logLevel)>=0&&level==="error")return console.error(msg)}function sendMsg(type,data){if(typeof self!=="undefined"&&(typeof WorkerGlobalScope==="undefined"||!(self instanceof WorkerGlobalScope))){self.postMessage({type:"webpack"+type,data:data},"*")}}var onSocketMsg={hot:function(){hot=true;log("info","[WDS] Hot Module Replacement enabled.")},invalid:function(){log("info","[WDS] App updated. Recompiling...");sendMsg("Invalid")},hash:function(hash){currentHash=hash},"still-ok":function(){log("info","[WDS] Nothing changed.");if(useWarningOverlay||useErrorOverlay)overlay.clear();sendMsg("StillOk")},"log-level":function(level){logLevel=level},overlay:function(overlay){if(typeof document!=="undefined"){if(typeof overlay==="boolean"){useWarningOverlay=overlay;useErrorOverlay=overlay}else if(overlay){useWarningOverlay=overlay.warnings;useErrorOverlay=overlay.errors}}},ok:function(){sendMsg("Ok");if(useWarningOverlay||useErrorOverlay)overlay.clear();if(initial)return initial=false;reloadApp()},"content-changed":function(){log("info","[WDS] Content base changed. Reloading...");self.location.reload()},warnings:function(warnings){log("info","[WDS] Warnings while compiling.");var strippedWarnings=warnings.map(function(warning){return stripAnsi(warning)});sendMsg("Warnings",strippedWarnings);for(var i=0;i<strippedWarnings.length;i++)log("warning",strippedWarnings[i]);if(useWarningOverlay)overlay.showMessage(warnings);if(initial)return initial=false;reloadApp()},errors:function(errors){log("info","[WDS] Errors while compiling. Reload prevented.");var strippedErrors=errors.map(function(error){return stripAnsi(error)});sendMsg("Errors",strippedErrors);for(var i=0;i<strippedErrors.length;i++)log("error",strippedErrors[i]);if(useErrorOverlay)overlay.showMessage(errors)},error:function(error){console.error(error)},close:function(){log("error","[WDS] Disconnected!");sendMsg("Close")}};var hostname=urlParts.hostname;var protocol=urlParts.protocol;if(hostname==="0.0.0.0"||hostname==="::"){if(self.location.hostname&&!!~self.location.protocol.indexOf("http")){hostname=self.location.hostname}}if(hostname&&(self.location.protocol==="https:"||urlParts.hostname==="0.0.0.0")){protocol=self.location.protocol}var socketUrl=url.format({protocol:protocol,auth:urlParts.auth,hostname:hostname,port:urlParts.port==="0"?self.location.port:urlParts.port,pathname:urlParts.path==null||urlParts.path==="/"?"/sockjs-node":urlParts.path});socket(socketUrl,onSocketMsg);var isUnloading=false;self.addEventListener("beforeunload",function(){isUnloading=true});function reloadApp(){if(isUnloading){return}if(hot){log("info","[WDS] App hot update...");var hotEmitter=__webpack_require__(310);hotEmitter.emit("webpackHotUpdate",currentHash);if(typeof self!=="undefined"&&self.window){self.postMessage("webpackHotUpdate"+currentHash,"*")}}else{log("info","[WDS] App updated. Reloading...");self.location.reload()}}}).call(exports,"?http://localhost:8080")},function(module,exports,__webpack_require__){"use strict";module.exports=ansiHTML;var _regANSI=/(?:(?:\u001b\[)|\u009b)(?:(?:[0-9]{1,3})?(?:(?:;[0-9]{0,3})*)?[A-M|f-m])|\u001b[A-M]/;var _defColors={reset:["fff","000"],black:"000",red:"ff0000",green:"209805",yellow:"e8bf03",blue:"0000ff",magenta:"ff00ff",cyan:"00ffee",lightgrey:"f0f0f0",darkgrey:"888"};var _styles={30:"black",31:"red",32:"green",33:"yellow",34:"blue",35:"magenta",36:"cyan",37:"lightgrey"};var _openTags={1:"font-weight:bold",2:"opacity:0.5",3:"<i>",4:"<u>",8:"display:none",9:"<del>"};var _closeTags={23:"</i>",24:"</u>",29:"</del>"};[0,21,22,27,28,39,49].forEach(function(n){_closeTags[n]="</span>"});function ansiHTML(text){if(!_regANSI.test(text)){return text}var ansiCodes=[];var ret=text.replace(/\033\[(\d+)*m/g,function(match,seq){var ot=_openTags[seq];if(ot){if(!!~ansiCodes.indexOf(seq)){ansiCodes.pop();return"</span>"}ansiCodes.push(seq);return ot[0]==="<"?ot:'<span style="'+ot+';">'}var ct=_closeTags[seq];if(ct){ansiCodes.pop();return ct}return""});var l=ansiCodes.length;l>0&&(ret+=Array(l+1).join("</span>"));return ret}ansiHTML.setColors=function(colors){if(typeof colors!=="object"){throw new Error("`colors` parameter must be an Object.")}var _finalColors={};for(var key in _defColors){var hex=colors.hasOwnProperty(key)?colors[key]:null;if(!hex){_finalColors[key]=_defColors[key];continue}if("reset"===key){if(typeof hex==="string"){hex=[hex]}if(!Array.isArray(hex)||hex.length===0||hex.some(function(h){return typeof h!=="string"})){throw new Error("The value of `"+key+"` property must be an Array and each item could only be a hex string, e.g.: FF0000")}var defHexColor=_defColors[key];if(!hex[0]){hex[0]=defHexColor[0]}if(hex.length===1||!hex[1]){hex=[hex[0]];hex.push(defHexColor[1])}hex=hex.slice(0,2)}else if(typeof hex!=="string"){throw new Error("The value of `"+key+"` property must be a hex string, e.g.: FF0000")}_finalColors[key]=hex}_setTags(_finalColors)};ansiHTML.reset=function(){_setTags(_defColors)};ansiHTML.tags={};if(Object.defineProperty){Object.defineProperty(ansiHTML.tags,"open",{get:function(){return _openTags}});Object.defineProperty(ansiHTML.tags,"close",{get:function(){return _closeTags}})}else{ansiHTML.tags.open=_openTags;ansiHTML.tags.close=_closeTags}function _setTags(colors){_openTags["0"]="font-weight:normal;opacity:1;color:#"+colors.reset[0]+";background:#"+colors.reset[1];_openTags["7"]="color:#"+colors.reset[1]+";background:#"+colors.reset[0];_openTags["90"]="color:#"+colors.darkgrey;for(var code in _styles){var color=_styles[code];var oriColor=colors[color]||"000";_openTags[code]="color:#"+oriColor;
code=parseInt(code);_openTags[(code+10).toString()]="background:#"+oriColor}}ansiHTML.reset()},function(module,exports,__webpack_require__){"use strict";module.exports=function(){return/[\u001b\u009b][[()#;?]*(?:[0-9]{1,4}(?:;[0-9]{0,4})*)?[0-9A-PRZcf-nqry=><]/g}},function(module,exports,__webpack_require__){"use strict";module.exports={assets:[],stylePrefix:"am-",upload:"http://localhost/assets/upload",uploadText:"Drop files here or click to upload",addBtnText:"Add image"}},function(module,exports,__webpack_require__){"use strict";module.exports=function(){var c={},Assets=__webpack_require__(86),AssetsView=__webpack_require__(88),FileUpload=__webpack_require__(33),assets,am,fu;return{name:"AssetManager",storageKey:"assets",init:function init(config){c=config||{};var defaults=__webpack_require__(83);for(var name in defaults){if(!(name in c))c[name]=defaults[name]}var ppfx=c.pStylePrefix;if(ppfx)c.stylePrefix=ppfx+c.stylePrefix;assets=new Assets(c.assets);var obj={collection:assets,config:c};am=new AssetsView(obj);fu=new FileUpload(obj);return this},add:function add(asset){return assets.add(asset)},get:function get(src){return assets.where({src:src})[0]},getAll:function getAll(){return assets},remove:function remove(src){var asset=this.get(src);this.getAll().remove(asset);return this},store:function store(noStore){var obj={};var assets=JSON.stringify(this.getAll().toJSON());obj[this.storageKey]=assets;if(!noStore&&c.stm)c.stm.store(obj);return obj},load:function load(data){var d=data||"";var name=this.storageKey;if(!d&&c.stm)d=c.stm.load(name);var assets=[];try{assets=JSON.parse(d[name])}catch(err){}this.getAll().add(assets);return assets},render:function render(f){if(!this.rendered||f)this.rendered=am.render().$el.add(fu.render().$el);return this.rendered},setTarget:function setTarget(m){am.collection.target=m},onSelect:function onSelect(f){am.collection.onSelect=f},onClick:function onClick(func){c.onClick=func},onDblClick:function onDblClick(func){c.onDblClick=func}}}},function(module,exports,__webpack_require__){"use strict";(function(_){var Backbone=__webpack_require__(0);var Asset=__webpack_require__(31);module.exports=Asset.extend({defaults:_.extend({},Asset.prototype.defaults,{type:"image",unitDim:"px",height:0,width:0})})}).call(exports,__webpack_require__(1))},function(module,exports,__webpack_require__){"use strict";var Backbone=__webpack_require__(0);var Asset=__webpack_require__(31);var AssetImage=__webpack_require__(85);module.exports=Backbone.Collection.extend({model:AssetImage,initialize:function initialize(models,opt){this.model=function(attrs,options){var model;switch(attrs.type){default:model=new AssetImage(attrs,options)}return model}},addImg:function addImg(url,opts){this.add({type:"image",src:url},opts);return this},add:function add(models,opt){var mods=[];models=models instanceof Array?models:[models];for(var i=0,len=models.length;i<len;i++){var model=models[i];if(typeof model==="string")model={src:model,type:"image"};if(!model||!model.src)continue;var found=this.where({src:model.src});if(!found.length)mods.push(model)}if(mods.length==1)mods=mods[0];return Backbone.Collection.prototype.add.apply(this,[mods,opt])}})},function(module,exports,__webpack_require__){"use strict";(function(_){var AssetView=__webpack_require__(32);var assetTemplate='\n<div id="<%= pfx %>preview-cont">\n  <div id="<%= pfx %>preview" style="background-image: url(<%= src %>);"></div>\n  <div id="<%= pfx %>preview-bg" class="<%= ppfx %>checker-bg"></div>\n</div>\n<div id="<%= pfx %>meta">\n	<div id="<%= pfx %>name"><%= name %></div>\n	<div id="<%= pfx %>dimensions"><%= dim %></div>\n</div>\n<div id="<%= pfx %>close">&Cross;</div>\n<div style="clear:both"></div>\n';module.exports=AssetView.extend({events:{click:"handleClick",dblclick:"handleDblClick"},template:_.template(assetTemplate),initialize:function initialize(o){AssetView.prototype.initialize.apply(this,arguments);this.className+=" "+this.pfx+"asset-image";this.events["click #"+this.pfx+"close"]="removeItem";this.delegateEvents()},handleClick:function handleClick(){var onClick=this.config.onClick;var model=this.model;model.collection.trigger("deselectAll");this.$el.addClass(this.pfx+"highlight");if(typeof onClick==="function"){onClick(model)}else{this.updateTarget(model.get("src"))}},handleDblClick:function handleDblClick(){var onDblClick=this.config.onDblClick;var model=this.model;if(typeof onDblClick==="function"){onDblClick(model)}else{this.updateTarget(model.get("src"))}var onSelect=model.collection.onSelect;if(typeof onSelect=="function"){onSelect(this.model)}},updateTarget:function updateTarget(v){var target=this.model.collection.target;if(target&&target.set){var attr=_.clone(target.get("attributes"));target.set("attributes",attr);target.set("src",v)}},removeItem:function removeItem(e){e.stopPropagation();this.model.collection.remove(this.model)},render:function render(){var name=this.model.get("name"),dim=this.model.get("width")&&this.model.get("height")?this.model.get("width")+" x "+this.model.get("height"):"";name=name?name:this.model.get("src").split("/").pop();name=name&&name.length>30?name.substring(0,30)+"...":name;dim=dim?dim+(this.model.get("unitDim")?this.model.get("unitDim"):" px"):"";this.$el.html(this.template({name:name,src:this.model.get("src"),dim:dim,pfx:this.pfx,ppfx:this.ppfx}));this.$el.attr("class",this.className);return this}})}).call(exports,__webpack_require__(1))},function(module,exports,__webpack_require__){"use strict";(function(_){var Backbone=__webpack_require__(0);var AssetView=__webpack_require__(32);var AssetImageView=__webpack_require__(87);var FileUploader=__webpack_require__(33);var assetsTemplate='\n<div class="<%= pfx %>assets-cont">\n  <div class="<%= pfx %>assets-header">\n    <form class="<%= pfx %>add-asset">\n      <div class="<%= ppfx %>field <%= pfx %>add-field">\n        <input placeholder="http://path/to/the/image.jpg"/>\n      </div>\n      <button class="<%= ppfx %>btn-prim"><%= btnText %></button>\n      <div style="clear:both"></div>\n    </form>\n    <div class="<%= pfx %>dips" style="display:none">\n      <button class="fa fa-th <%= ppfx %>btnt"></button>\n      <button class="fa fa-th-list <%= ppfx %>btnt"></button>\n    </div>\n  </div>\n  <div class="<%= pfx %>assets"></div>\n  <div style="clear:both"></div>\n</div>\n\n';module.exports=Backbone.View.extend({template:_.template(assetsTemplate),initialize:function initialize(o){this.options=o;this.config=o.config;this.pfx=this.config.stylePrefix||"";this.ppfx=this.config.pStylePrefix||"";this.listenTo(this.collection,"add",this.addToAsset);this.listenTo(this.collection,"deselectAll",this.deselectAll);this.className=this.pfx+"assets";this.events={};this.events.submit="addFromStr";this.delegateEvents()},addFromStr:function addFromStr(e){e.preventDefault();var input=this.getInputUrl();var url=input.value.trim();if(!url)return;this.collection.addImg(url,{at:0});this.getAssetsEl().scrollTop=0;input.value="";return this},getAssetsEl:function getAssetsEl(){this.assets=this.el.querySelector("."+this.pfx+"assets");return this.assets},getInputUrl:function getInputUrl(){if(!this.inputUrl||!this.inputUrl.value)this.inputUrl=this.el.querySelector("."+this.pfx+"add-asset input");return this.inputUrl},addToAsset:function addToAsset(model){this.addAsset(model)},addAsset:function addAsset(model,fragmentEl){var fragment=fragmentEl||null;var viewObject=AssetView;if(model.get("type").indexOf("image")>-1)viewObject=AssetImageView;var view=new viewObject({model:model,config:this.config});var rendered=view.render().el;if(fragment){fragment.appendChild(rendered)}else{var assetsEl=this.getAssetsEl();if(assetsEl)assetsEl.insertBefore(rendered,assetsEl.firstChild)}return rendered},deselectAll:function deselectAll(){this.$el.find("."+this.pfx+"highlight").removeClass(this.pfx+"highlight")},render:function render(){var fragment=document.createDocumentFragment();this.$el.empty();this.collection.each(function(model){this.addAsset(model,fragment)},this);this.$el.html(this.template({pfx:this.pfx,ppfx:this.ppfx,btnText:this.config.addBtnText}));this.$el.find("."+this.pfx+"assets").append(fragment);return this}})}).call(exports,__webpack_require__(1))},function(module,exports,__webpack_require__){"use strict";module.exports={blocks:[],appendTo:""}},function(module,exports,__webpack_require__){"use strict";module.exports=function(){var c={},defaults=__webpack_require__(89),Blocks=__webpack_require__(92),BlockCategories=__webpack_require__(93),BlocksView=__webpack_require__(95);var blocks,view;var categories=[];return{name:"BlockManager",init:function init(config){c=config||{};for(var name in defaults){if(!(name in c))c[name]=defaults[name]}blocks=new Blocks(c.blocks);categories=new BlockCategories,view=new BlocksView({collection:blocks,categories:categories},c);return this},add:function add(id,opts){var obj=opts||{};obj.id=id;return blocks.add(obj)},get:function get(id){return blocks.get(id)},getAll:function getAll(){return blocks},getCategories:function getCategories(){return categories},render:function render(){return view.render().el}}}},function(module,exports,__webpack_require__){"use strict";var Backbone=__webpack_require__(0);var Category=__webpack_require__(34);module.exports=Backbone.Model.extend({defaults:{label:"",content:"",category:"",attributes:{}},initialize:function initialize(){var opts=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var category=this.get("category");if(category){if(typeof category=="string"){var catObj=new Category({id:category,label:category})}}}})},function(module,exports,__webpack_require__){"use strict";var Backbone=__webpack_require__(0);var Block=__webpack_require__(91);module.exports=Backbone.Collection.extend({model:Block})},function(module,exports,__webpack_require__){"use strict";var Backbone=__webpack_require__(0);module.exports=Backbone.Collection.extend({model:__webpack_require__(34)})},function(module,exports,__webpack_require__){"use strict";(function(_){var Backbone=__webpack_require__(0);module.exports=Backbone.View.extend({events:{mousedown:"onDrag"},initialize:function initialize(o,config){_.bindAll(this,"onDrop");this.config=config||{};this.ppfx=this.config.pStylePrefix||"";this.listenTo(this.model,"destroy",this.remove);this.doc=$(document)},onDrag:function onDrag(e){if(e.button!==0){return}if(!this.config.getSorter){return}this.config.em.refreshCanvas();var sorter=this.config.getSorter();sorter.setDragHelper(this.el,e);sorter.startSort(this.el);sorter.setDropContent(this.model.get("content"));this.doc.on("mouseup",this.onDrop)},onDrop:function onDrop(){this.doc.off("mouseup",this.onDrop);this.config.getSorter().endMove()},render:function render(){var className=this.ppfx+"block";this.$el.addClass(className);this.el.innerHTML='<div class="'+className+'-label">'+this.model.get("label")+"</div>";return this}})}).call(exports,__webpack_require__(1))},function(module,exports,__webpack_require__){"use strict";(function(_){var Backbone=__webpack_require__(0);var BlockView=__webpack_require__(94);var CategoryView=__webpack_require__(96);module.exports=Backbone.View.extend({initialize:function initialize(opts,config){_.bindAll(this,"getSorter","onDrag","onDrop");this.config=config||{};this.categories=opts.categories||"";this.renderedCategories=[];var ppfx=this.config.pStylePrefix||"";this.ppfx=ppfx;this.noCatClass=ppfx+"blocks-no-cat";this.blockContClass=ppfx+"blocks-c";this.catsClass=ppfx+"block-categories";this.listenTo(this.collection,"add",this.addTo);this.em=this.config.em;this.tac="test-tac";this.grabbingCls=this.ppfx+"grabbing";if(this.em){this.config.getSorter=this.getSorter;this.canvas=this.em.get("Canvas")}},getSorter:function getSorter(){if(!this.em)return;if(!this.sorter){var utils=this.em.get("Utils");var canvas=this.canvas;this.sorter=new utils.Sorter({container:canvas.getBody(),placer:canvas.getPlacerEl(),containerSel:"*",itemSel:"*",pfx:this.ppfx,onStart:this.onDrag,onEndMove:this.onDrop,onMove:this.onMove,document:canvas.getFrameEl().contentDocument,direction:"a",wmargin:1,nested:1,em:this.em,canvasRelative:1})}return this.sorter},onDrag:function onDrag(e){this.em.stopDefault();this.em.trigger("block:drag:start",e)},onMove:function onMove(e){this.em.trigger("block:drag:move",e)},onDrop:function onDrop(model){this.em.runDefault();if(model&&model.get){if(model.get("activeOnRender")){model.trigger("active");model.set("activeOnRender",0)}this.em.initChildrenComp(model)}this.em.trigger("block:drag:stop",model)},addTo:function addTo(model){this.add(model)},add:function add(model,fragment){var frag=fragment||null;var view=new BlockView({model:model,attributes:model.get("attributes")},this.config);var rendered=view.render().el;var category=model.get("category");if(category&&this.categories){if(typeof category=="string"){category={id:category,label:category}}var catModel=this.categories.add(category);var catId=catModel.get("id");var catView=this.renderedCategories[catId];var categories=this.getCategoriesEl();model.set("category",catModel);if(!catView&&categories){catView=new CategoryView({model:catModel},this.config).render();this.renderedCategories[catId]=catView;categories.appendChild(catView.el)}catView&&catView.append(rendered);return}if(frag)frag.appendChild(rendered);else this.append(rendered)},getCategoriesEl:function getCategoriesEl(){if(!this.catsEl){this.catsEl=this.el.querySelector("."+this.catsClass)}return this.catsEl},getBlocksEl:function getBlocksEl(){if(!this.blocksEl){this.blocksEl=this.el.querySelector("."+this.noCatClass+" ."+this.blockContClass)}return this.blocksEl},append:function append(el){var blocks=this.getBlocksEl();blocks&&blocks.appendChild(el)},render:function render(){var ppfx=this.ppfx;var frag=document.createDocumentFragment();this.catsEl=null;this.blocksEl=null;this.renderedCategories=[];this.el.innerHTML='\n      <div class="'+this.catsClass+'"></div>\n      <div class="'+this.noCatClass+'">\n        <div class="'+this.blockContClass+'"></div>\n      </div>\n    ';this.collection.each(function(model){this.add(model,frag)},this);this.append(frag);this.$el.addClass(this.blockContClass+"s");return this}})}).call(exports,__webpack_require__(1))},function(module,exports,__webpack_require__){"use strict";(function(_){var Backbone=__webpack_require__(0);module.exports=Backbone.View.extend({template:_.template('\n  <div class="<%= pfx %>title">\n    <i class="<%= pfx %>caret-icon"></i>\n    <%= label %>\n  </div>\n  <div class="<%= pfx %>blocks-c"></div>\n  '),events:{},initialize:function initialize(){var o=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var config=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};this.config=config;var pfx=this.config.pStylePrefix||"";this.pfx=pfx;this.caretR="fa fa-caret-right";this.caretD="fa fa-caret-down";this.iconClass=pfx+"caret-icon";this.activeClass=pfx+"open";this.className=pfx+"block-category";this.events["click ."+pfx+"title"]="toggle";this.listenTo(this.model,"change:open",this.updateVisibility);this.delegateEvents()},updateVisibility:function updateVisibility(){if(this.model.get("open"))this.open();else this.close()},open:function open(){this.el.className=this.className+" "+this.activeClass;this.getIconEl().className=this.iconClass+" "+this.caretD;this.getBlocksEl().style.display=""},close:function close(){this.el.className=this.className;this.getIconEl().className=this.iconClass+" "+this.caretR;this.getBlocksEl().style.display="none"},toggle:function toggle(){var model=this.model;model.set("open",!model.get("open"))},getIconEl:function getIconEl(){if(!this.iconEl){this.iconEl=this.el.querySelector("."+this.iconClass)}return this.iconEl},getBlocksEl:function getBlocksEl(){if(!this.blocksEl){this.blocksEl=this.el.querySelector("."+this.pfx+"blocks-c")}return this.blocksEl},append:function append(el){this.getBlocksEl().appendChild(el)},render:function render(){this.el.innerHTML=this.template({pfx:this.pfx,label:this.model.get("label")});this.el.className=this.className;this.updateVisibility();return this}})}).call(exports,__webpack_require__(1))},function(module,exports,__webpack_require__){"use strict";module.exports={stylePrefix:"cv-",rulers:false,scripts:[]}},function(module,exports,__webpack_require__){"use strict";module.exports=function(){var c={},defaults=__webpack_require__(97),Canvas=__webpack_require__(99),CanvasView=__webpack_require__(101);var canvas;return{getCanvasView:function getCanvasView(){return CanvasView},name:"Canvas",init:function init(config){c=config||{};for(var name in defaults){if(!(name in c))c[name]=defaults[name]}var ppfx=c.pStylePrefix;if(ppfx)c.stylePrefix=ppfx+c.stylePrefix;canvas=new Canvas(config);CanvasView=new CanvasView({model:canvas,config:c});var cm=c.em.get("DomComponents");if(cm)this.setWrapper(cm);return this},setWrapper:function setWrapper(wrp){canvas.set("wrapper",wrp)},getElement:function getElement(){return CanvasView.el},getFrameEl:function getFrameEl(){return CanvasView.frame.el},getBody:function getBody(){return CanvasView.frame.el.contentDocument.body},getWrapperEl:function getWrapperEl(){return this.getBody().querySelector("#wrapper")},getToolsEl:function getToolsEl(){return CanvasView.toolsEl},getHighlighter:function getHighlighter(){return CanvasView.hlEl},getBadgeEl:function getBadgeEl(){return CanvasView.badgeEl},getPlacerEl:function getPlacerEl(){return CanvasView.placerEl},getGhostEl:function getGhostEl(){return CanvasView.ghostEl},getToolbarEl:function getToolbarEl(){return CanvasView.toolbarEl},getResizerEl:function getResizerEl(){return CanvasView.resizerEl},getOffsetViewerEl:function getOffsetViewerEl(){return CanvasView.offsetEl},getFixedOffsetViewerEl:function getFixedOffsetViewerEl(){return CanvasView.fixedOffsetEl},render:function render(){return CanvasView.render().el},getOffset:function getOffset(){var frameOff=this.offset(this.getFrameEl());var canvasOff=this.offset(this.getElement());return{top:frameOff.top-canvasOff.top,left:frameOff.left-canvasOff.left}},offset:function offset(el){var rect=el.getBoundingClientRect();return{top:rect.top+document.body.scrollTop,left:rect.left+document.body.scrollLeft}},getElementPos:function getElementPos(el,opts){return CanvasView.getElementPos(el,opts)},getTargetToElementDim:function getTargetToElementDim(target,element,options){var opts=options||{};var canvasPos=CanvasView.getPosition();var pos=opts.elPos||CanvasView.getElementPos(element);var toRight=options.toRight||0;var targetHeight=opts.targetHeight||target.offsetHeight;var targetWidth=opts.targetWidth||target.offsetWidth;var eventToTrigger=opts.event||null;var elTop=pos.top-targetHeight;var elLeft=pos.left;elLeft+=toRight?pos.width:0;elLeft=toRight?elLeft-targetWidth:elLeft;var leftPos=elLeft<canvasPos.left?canvasPos.left:elLeft;var topPos=elTop<canvasPos.top?canvasPos.top:elTop;topPos=topPos>pos.top+pos.height?pos.top+pos.height:topPos;var result={top:topPos,left:leftPos,elementTop:pos.top,elementLeft:pos.left,elementWidth:pos.width,elementHeight:pos.height,targetWidth:target.offsetWidth,targetHeight:target.offsetHeight,canvasTop:canvasPos.top,canvasLeft:canvasPos.left};if(eventToTrigger&&c.em){c.em.trigger(eventToTrigger,result)}return result},getMouseRelativePos:function getMouseRelativePos(e,options){var opts=options||{};var addTop=0;var addLeft=0;var subWinOffset=opts.subWinOffset;var doc=e.target.ownerDocument;var win=doc.defaultView||doc.parentWindow;var frame=win.frameElement;var yOffset=subWinOffset?win.pageYOffset:0;var xOffset=subWinOffset?win.pageXOffset:0;if(frame){var frameRect=frame.getBoundingClientRect();addTop=frameRect.top||0;addLeft=frameRect.left||0}return{y:e.clientY+addTop-yOffset,x:e.clientX+addLeft-xOffset}},getMouseRelativeCanvas:function getMouseRelativeCanvas(e,options){var opts=options||{};var frame=this.getFrameEl();var body=this.getBody();var addTop=frame.offsetTop||0;var addLeft=frame.offsetLeft||0;var yOffset=body.scrollTop||0;var xOffset=body.scrollLeft||0;return{y:e.clientY+addTop+yOffset,x:e.clientX+addLeft+xOffset}},getFrameWrapperEl:function getFrameWrapperEl(){return CanvasView.frame.getWrapper()}}}},function(module,exports,__webpack_require__){"use strict";var Backbone=__webpack_require__(0);var Frame=__webpack_require__(100);module.exports=Backbone.Model.extend({defaults:{frame:"",wrapper:"",rulers:false},initialize:function initialize(config){var conf=this.conf||{};this.set("frame",new Frame(conf.frame))}})},function(module,exports,__webpack_require__){"use strict";var Backbone=__webpack_require__(0);module.exports=Backbone.Model.extend({defaults:{wrapper:"",width:"",height:"",attributes:{}}})},function(module,exports,__webpack_require__){"use strict";(function(_){var Backbone=__webpack_require__(0);var FrameView=__webpack_require__(102);module.exports=Backbone.View.extend({initialize:function initialize(o){_.bindAll(this,"renderBody","onFrameScroll","clearOff");this.config=o.config||{};this.em=this.config.em||{};this.ppfx=this.config.pStylePrefix||"";this.className=this.config.stylePrefix+"canvas";this.listenTo(this.em,"change:canvasOffset",this.clearOff);this.frame=new FrameView({model:this.model.get("frame"),config:this.config})},onFrameScroll:function onFrameScroll(){var u="px";var body=this.frame.el.contentDocument.body;this.toolsEl.style.top="-"+body.scrollTop+u;this.toolsEl.style.left="-"+body.scrollLeft+u;this.em.trigger("canvasScroll")},renderScripts:function renderScripts(){var frame=this.frame;var that=this;frame.el.onload=function(){var scripts=that.config.scripts.slice(0),counter=0;function appendScript(scripts){if(scripts.length>0){var script=document.createElement("script");script.type="text/javascript";script.src=scripts.shift();script.onerror=script.onload=appendScript.bind(null,scripts);frame.el.contentDocument.head.appendChild(script)}else{that.renderBody()}}appendScript(scripts)}},renderBody:function renderBody(){var wrap=this.model.get("frame").get("wrapper");var em=this.config.em;if(wrap){var ppfx=this.ppfx;var body=this.frame.$el.contents().find("body");var cssc=em.get("CssComposer");var conf=em.get("Config");var protCss=conf.protectedCss;var frameCss="* {box-sizing: border-box;} body{margin:0;height:auto;background-color:#fff} #wrapper{min-height:100%; overflow:auto}"+"."+ppfx+"dashed :not([contenteditable]) > *[data-highlightable]{outline: 1px dashed rgba(170,170,170,0.7); outline-offset: -2px}"+"."+ppfx+"comp-selected{outline: 3px solid #3b97e3 !important}"+"."+ppfx+"no-select{user-select: none; -webkit-user-select:none; -moz-user-select: none}"+"."+ppfx+"freezed{opacity: 0.5; pointer-events: none}"+"."+ppfx+"no-pointer{pointer-events: none}"+"."+ppfx+"plh-image{background:#f5f5f5; border:none; height:50px; width:50px; display:block; outline:3px solid #ffca6f; cursor:pointer}"+"."+ppfx+"grabbing{cursor: grabbing; cursor: -webkit-grabbing}"+"* ::-webkit-scrollbar-track {background: rgba(0, 0, 0, 0.1)}"+"* ::-webkit-scrollbar-thumb {background: rgba(255, 255, 255, 0.2)}"+"* ::-webkit-scrollbar {width: 10px}"+(conf.canvasCss||"");frameCss+=protCss||"";body.append("<style>"+frameCss+"</style>");body.append(wrap.render()).append(cssc.render());body.append(this.getJsContainer());em.trigger("loaded");this.frame.el.contentWindow.onscroll=this.onFrameScroll;this.frame.udpateOffset();var doc=document;var fdoc=this.frame.el.contentDocument;fdoc.addEventListener("keydown",function(e){doc.dispatchEvent(new KeyboardEvent(e.type,e))});fdoc.addEventListener("keyup",function(e){doc.dispatchEvent(new KeyboardEvent(e.type,e))})}},offset:function offset(el){var rect=el.getBoundingClientRect();var docBody=el.ownerDocument.body;return{top:rect.top+docBody.scrollTop,left:rect.left+docBody.scrollLeft}},clearOff:function clearOff(){this.frmOff=null;this.cvsOff=null},getFrameOffset:function getFrameOffset(){if(!this.frmOff)this.frmOff=this.offset(this.frame.el);return this.frmOff},getCanvasOffset:function getCanvasOffset(){if(!this.cvsOff)this.cvsOff=this.offset(this.el);return this.cvsOff},getElementPos:function getElementPos(el,opts){var opt=opts||{};var frmOff=this.getFrameOffset();var cvsOff=this.getCanvasOffset();var eo=this.offset(el);var frmTop=opt.avoidFrameOffset?0:frmOff.top;var frmLeft=opt.avoidFrameOffset?0:frmOff.left;var top=eo.top+frmTop-cvsOff.top;var left=eo.left+frmLeft-cvsOff.left;return{top:top,left:left,height:el.offsetHeight,width:el.offsetWidth}},getPosition:function getPosition(){var bEl=this.frame.el.contentDocument.body;var fo=this.getFrameOffset();var co=this.getCanvasOffset();return{top:fo.top+bEl.scrollTop-co.top,left:fo.left+bEl.scrollLeft-co.left}},updateScript:function updateScript(view){if(!view.scriptContainer){view.scriptContainer=$("<div>");this.getJsContainer().append(view.scriptContainer.get(0))}var id=view.model.cid;var script=view.model.get("script");var scrStr="function(){"+script+"}";scrStr=typeof script=="function"?script.toString():scrStr;view.el.id=id;view.scriptContainer.html("");view.scriptContainer.append("<script>"+'var item = document.getElementById("'+id+'");'+"("+scrStr+".bind(item))()</script>")},getJsContainer:function getJsContainer(){if(!this.jsContainer){this.jsContainer=$("<div>",{"class":this.ppfx+"js-cont"}).get(0)}return this.jsContainer},render:function render(){this.wrapper=this.model.get("wrapper");if(this.wrapper&&typeof this.wrapper.render=="function"){this.model.get("frame").set("wrapper",this.wrapper);this.$el.append(this.frame.render().el);var frame=this.frame;if(this.config.scripts.length===0){frame.el.onload=this.renderBody}else{this.renderScripts()}}var ppfx=this.ppfx;var toolsEl=$("<div>",{id:ppfx+"tools"}).get(0);this.hlEl=$("<div>",{"class":ppfx+"highlighter"}).get(0);this.badgeEl=$("<div>",{"class":ppfx+"badge"}).get(0);this.placerEl=$("<div>",{"class":ppfx+"placeholder"}).get(0);this.placerIntEl=$("<div>",{"class":ppfx+"placeholder-int"}).get(0);this.ghostEl=$("<div>",{"class":ppfx+"ghost"}).get(0);this.toolbarEl=$("<div>",{"class":ppfx+"toolbar"}).get(0);this.resizerEl=$("<div>",{"class":ppfx+"resizer"}).get(0);this.offsetEl=$("<div>",{"class":ppfx+"offset-v"}).get(0);this.fixedOffsetEl=$("<div>",{"class":ppfx+"offset-fixed-v"}).get(0);this.placerEl.appendChild(this.placerIntEl);toolsEl.appendChild(this.hlEl);toolsEl.appendChild(this.badgeEl);toolsEl.appendChild(this.placerEl);toolsEl.appendChild(this.ghostEl);toolsEl.appendChild(this.toolbarEl);toolsEl.appendChild(this.resizerEl);toolsEl.appendChild(this.offsetEl);toolsEl.appendChild(this.fixedOffsetEl);this.$el.append(toolsEl);var rte=this.em.get("rte");if(rte)toolsEl.appendChild(rte.render());this.toolsEl=toolsEl;this.$el.attr({"class":this.className});return this}})}).call(exports,__webpack_require__(1))},function(module,exports,__webpack_require__){"use strict";(function(_){var Backbone=__webpack_require__(0);module.exports=Backbone.View.extend({tagName:"iframe",attributes:{src:"about:blank",allowfullscreen:"allowfullscreen"},initialize:function initialize(o){_.bindAll(this,"udpateOffset");this.config=o.config||{};this.ppfx=this.config.pStylePrefix||"";this.em=this.config.em;this.motionsEv="transitionend oTransitionEnd transitionend webkitTransitionEnd";this.listenTo(this.em,"change:device",this.updateWidth)},updateWidth:function updateWidth(model){var device=this.em.getDeviceModel();this.el.style.width=device?device.get("width"):"";this.udpateOffset();this.$el.on(this.motionsEv,this.udpateOffset)},udpateOffset:function udpateOffset(){var offset=this.em.get("Canvas").getOffset();this.em.set("canvasOffset",offset);this.$el.off(this.motionsEv,this.udpateOffset)},getBody:function getBody(){this.$el.contents().find("body")},getWrapper:function getWrapper(){return this.$el.contents().find("body > div")},render:function render(){this.$el.attr({"class":this.ppfx+"frame"});return this}})}).call(exports,__webpack_require__(1))},function(module,exports,__webpack_require__){"use strict";module.exports={stylePrefix:"cm-",inlineCss:false}},function(module,exports,__webpack_require__){"use strict";module.exports=function(){var c={},defaults=__webpack_require__(103),gHtml=__webpack_require__(107),gCss=__webpack_require__(106),gJson=__webpack_require__(109),gJs=__webpack_require__(108),eCM=__webpack_require__(105),editorView=__webpack_require__(110);var generators={},defGenerators={},viewers={},defViewers={};return{getConfig:function getConfig(){return c},config:c,EditorView:editorView,name:"CodeManager",init:function init(config){c=config||{};for(var name in defaults){if(!(name in c))c[name]=defaults[name]}var ppfx=c.pStylePrefix;if(ppfx)c.stylePrefix=ppfx+c.stylePrefix;defGenerators.html=new gHtml;defGenerators.css=new gCss;defGenerators.json=new gJson;defGenerators.js=new gJs;defViewers.CodeMirror=new eCM;return this},onLoad:function onLoad(){this.loadDefaultGenerators().loadDefaultViewers()},addGenerator:function addGenerator(id,generator){generators[id]=generator;return this},getGenerator:function getGenerator(id){return generators[id]||null},getGenerators:function getGenerators(){return generators},addViewer:function addViewer(id,viewer){viewers[id]=viewer;return this},getViewer:function getViewer(id){return viewers[id]||null},getViewers:function getViewers(){return viewers},updateViewer:function updateViewer(viewer,code){viewer.setContent(code)},getCode:function getCode(model,genId,opt){var generator=this.getGenerator(genId);return generator?generator.build(model,opt):""},loadDefaultGenerators:function loadDefaultGenerators(){for(var id in defGenerators){this.addGenerator(id,defGenerators[id])}return this},loadDefaultViewers:function loadDefaultViewers(){for(var id in defViewers){this.addViewer(id,defViewers[id])}return this}}}},function(module,exports,__webpack_require__){"use strict";var Backbone=__webpack_require__(0);var CodeMirror=__webpack_require__(13);var htmlMode=__webpack_require__(262);var cssMode=__webpack_require__(61);var formatting=__webpack_require__(261);module.exports=Backbone.Model.extend({defaults:{input:"",label:"",codeName:"",theme:"",readOnly:true,lineNumbers:true},init:function init(el){this.editor=CodeMirror.fromTextArea(el,{dragDrop:false,lineWrapping:true,lineNumbers:this.get("lineNumbers"),readOnly:this.get("readOnly"),mode:this.get("codeName"),theme:this.get("theme")});return this},setContent:function setContent(v){if(!this.editor)return;this.editor.setValue(v);if(this.editor.autoFormatRange){CodeMirror.commands.selectAll(this.editor);this.editor.autoFormatRange(this.editor.getCursor(true),this.editor.getCursor(false));CodeMirror.commands.goDocStart(this.editor)}}})},function(module,exports,__webpack_require__){"use strict";var Backbone=__webpack_require__(0);module.exports=Backbone.Model.extend({initialize:function initialize(){this.compCls=[]},buildFromModel:function buildFromModel(model){var code="";var style=model.get("style");var classes=model.get("classes");if(classes){classes.each(function(model){this.compCls.push(model.get("name"))},this)}if(style&&Object.keys(style).length!==0){console.error("THEKEKJLKS");console.error(model);if(!(model.get("name")===undefined)){code+="."+model.get("name")+"{";for(var prop in style){if(style.hasOwnProperty(prop))code+=prop+":"+style[prop]+";"}code+="}"}else{code+="."+"gId_"+window.editor.md5prefix+"-"+model.cid+"{";for(var prop in style){if(style.hasOwnProperty(prop))code+=prop+":"+style[prop]+";"}code+="}"}}console.error("CODE IS");console.error(code);return code},buildFromComp:function buildFromComp(model){var coll=model.get("components")||model,code="";coll.each(function(m){var cln=m.get("components");code+=this.buildFromModel(m);if(cln.length){code+=this.buildFromComp(cln)}},this);return code},build:function build(model,cssc){this.compCls=[];var code=this.buildFromModel(model);code+=this.buildFromComp(model);var compCls=this.compCls;if(cssc){var rules=cssc.getAll();var mediaRules={};rules.each(function(rule){var width=rule.get("mediaText");if(width){var mRule=mediaRules[width];if(mRule)mRule.push(rule);
else mediaRules[width]=[rule];return}code+=this.buildFromRule(rule)},this);for(var ruleW in mediaRules){var meRules=mediaRules[ruleW];var ruleC="";for(var i=0,len=meRules.length;i<len;i++){ruleC+=this.buildFromRule(meRules[i])}if(ruleC){code+="@media "+ruleW+"{"+ruleC+"}"}}}return code},buildFromRule:function buildFromRule(rule){var result="";var selectorsAdd=rule.get("selectorsAdd");var selectors=rule.get("selectors");var ruleStyle=rule.get("style");var state=rule.get("state");var strSel="";var found=0;var compCls=this.compCls;selectors.each(function(selector){console.error(selector);strSel+=".";console.error(selector);console.error("NAME IS :"+selector.get("name"));strSel+=selector.get("name");if(compCls.indexOf(selector.get("name"))>-1)found=1});if(strSel&&found||selectorsAdd){strSel+=state?":"+state:"";strSel+=selectorsAdd?(strSel?", ":"")+selectorsAdd:"";var strStyle="";if(ruleStyle&&Object.keys(ruleStyle).length!==0){for(var prop2 in ruleStyle){if(ruleStyle.hasOwnProperty(prop2))strStyle+=prop2+":"+ruleStyle[prop2]+";"}}if(strStyle)result+=strSel+"{"+strStyle+"}"}return result}})},function(module,exports,__webpack_require__){"use strict";var Backbone=__webpack_require__(0);module.exports=Backbone.Model.extend({build:function build(model,cssc){var coll=model.get("components")||model,code="";coll.each(function(m){code+=m.toHTML({cssc:cssc})},this);return code}})},function(module,exports,__webpack_require__){"use strict";(function(_){var Backbone=__webpack_require__(0);module.exports=Backbone.Model.extend({mapModel:function mapModel(model){var code="";var script=model.get("script");var type=model.get("type");var comps=model.get("components");var id=model.cid;if(script){var attr=model.get("attributes");attr=_.extend({},attr,{id:id});model.set("attributes",attr);var scrStr="function(){"+script+"}";scrStr=typeof script=="function"?script.toString():scrStr;if(model.get("scriptUpdated")){this.mapJs[type+"-"+id]={ids:[id],code:scrStr}}else{var mapType=this.mapJs[type];if(mapType){mapType.ids.push(id)}else{this.mapJs[type]={ids:[id],code:scrStr}}}}comps.each(function(model){code+=this.mapModel(model)},this);return code},build:function build(model){this.mapJs={};this.mapModel(model);var code="";for(var type in this.mapJs){var mapType=this.mapJs[type];var ids="#"+mapType.ids.join(", #");code+='var items = document.querySelectorAll("'+ids+'");'+"for (var i = 0, len = items.length; i < len; i++) {"+"("+mapType.code+".bind(items[i]))();"+"}"}return code}})}).call(exports,__webpack_require__(1))},function(module,exports,__webpack_require__){"use strict";(function(_){var Backbone=__webpack_require__(0);module.exports=Backbone.Model.extend({build:function build(model){var json=model.toJSON();this.beforeEach(json);_.each(json,function(v,attr){var obj=json[attr];if(obj instanceof Backbone.Model){json[attr]=this.build(obj)}else if(obj instanceof Backbone.Collection){var coll=obj;json[attr]=[];if(coll.length){coll.each(function(el,index){json[attr][index]=this.build(el)},this)}}},this);return json},beforeEach:function beforeEach(obj){delete obj.status}})}).call(exports,__webpack_require__(1))},function(module,exports,__webpack_require__){"use strict";(function(_){var Backbone=__webpack_require__(0);module.exports=Backbone.View.extend({template:_.template('\n  <div class="<%= pfx %>editor" id="<%= pfx %><%= codeName %>">\n  	<div id="<%= pfx %>title"><%= label %></div>\n  	<div id="<%= pfx %>code"></div>\n  </div>'),initialize:function initialize(o){this.config=o.config||{};this.pfx=this.config.stylePrefix},render:function render(){var obj=this.model.toJSON();obj.pfx=this.pfx;this.$el.html(this.template(obj));this.$el.attr("class",this.pfx+"editor-c");this.$el.find("#"+this.pfx+"code").html(this.model.get("input"));return this}})}).call(exports,__webpack_require__(1))},function(module,exports,__webpack_require__){"use strict";module.exports={ESCAPE_KEY:27,stylePrefix:"com-",defaults:[],em:null,firstCentered:true,newFixedH:false,minComponentH:50,minComponentW:50}},function(module,exports,__webpack_require__){"use strict";module.exports=function(){var c={},commands={},defaultCommands={},defaults=__webpack_require__(111),AbsCommands=__webpack_require__(113);var add=function add(id,obj){delete obj.initialize;commands[id]=AbsCommands.extend(obj);return this};return{name:"Commands",init:function init(config){c=config||{};for(var name in defaults){if(!(name in c))c[name]=defaults[name]}var ppfx=c.pStylePrefix;if(ppfx)c.stylePrefix=ppfx+c.stylePrefix;for(var k in c.defaults){var obj=c.defaults[k];if(obj.id)this.add(obj.id,obj)}defaultCommands["select-comp"]=__webpack_require__(24);defaultCommands["create-comp"]=__webpack_require__(23);defaultCommands["delete-comp"]=__webpack_require__(115);defaultCommands["image-comp"]=__webpack_require__(120);defaultCommands["move-comp"]=__webpack_require__(122);defaultCommands["text-comp"]=__webpack_require__(132);defaultCommands["insert-custom"]=__webpack_require__(35);defaultCommands["export-template"]=__webpack_require__(118);defaultCommands["sw-visibility"]=__webpack_require__(131);defaultCommands["open-layers"]=__webpack_require__(125);defaultCommands["open-sm"]=__webpack_require__(126);defaultCommands["open-tm"]=__webpack_require__(127);defaultCommands["open-blocks"]=__webpack_require__(124);defaultCommands["list-pages"]=__webpack_require__(121);defaultCommands["open-assets"]=__webpack_require__(123);defaultCommands["create-file"]=__webpack_require__(114);defaultCommands["block-edit"]=__webpack_require__(117);defaultCommands["show-offset"]=__webpack_require__(130);defaultCommands.fullscreen=__webpack_require__(119);defaultCommands.preview=__webpack_require__(128);defaultCommands.resize=__webpack_require__(129);defaultCommands.drag=__webpack_require__(116);defaultCommands["tlb-delete"]={run:function run(ed){var sel=ed.getSelected();if(!sel||!sel.get("removable")){console.warn("The element is not removable");return}sel.set("status","");sel.destroy();ed.trigger("component:update",sel);ed.editor.set("selectedComponent",null)}};defaultCommands["tlb-clone"]={run:function run(ed){var sel=ed.getSelected();if(!sel||!sel.get("copyable")){console.warn("The element is not clonable");return}var collection=sel.collection;var index=collection.indexOf(sel);collection.add(sel.clone(),{at:index+1});ed.trigger("component:update",sel)}};defaultCommands["tlb-move"]={run:function run(ed,sender,opts){var sel=ed.getSelected();var dragger;if(!sel||!sel.get("draggable")){console.warn("The element is not draggable");return}var onStart=function onStart(e,opts){console.log("start mouse pos ",opts.start);console.log("el rect ",opts.elRect);var el=opts.el;el.style.position="absolute";el.style.margin=0};var onEnd=function onEnd(e,opts){em.runDefault();em.set("selectedComponent",sel);ed.trigger("component:update",sel);dragger&&dragger.blur();console.log("onEnd ",opts)};var onDrag=function onDrag(e,opts){console.log("Delta ",opts.delta);console.log("Current ",opts.current)};var toolbarEl=ed.Canvas.getToolbarEl();toolbarEl.style.display="none";var em=ed.getModel();em.stopDefault();if(em.get("designerMode")){dragger=editor.runCommand("drag",{el:sel.view.el,options:{event:opts&&opts.event,onStart:onStart,onDrag:onDrag,onEnd:onEnd}})}else{var cmdMove=ed.Commands.get("move-comp");cmdMove.onEndMoveFromModel=onEnd;cmdMove.initSorterFromModel(sel)}sel.set("status","selected")}};if(c.em)c.model=c.em.get("Canvas");return this},onLoad:function onLoad(){this.loadDefaultCommands()},add:add,get:function get(id){var el=commands[id];if(typeof el=="function"){el=new el(c);commands[id]=el}return el},has:function has(id){return!!commands[id]},loadDefaultCommands:function loadDefaultCommands(){for(var id in defaultCommands){this.add(id,defaultCommands[id])}return this}}}},function(module,exports,__webpack_require__){"use strict";var Backbone=__webpack_require__(0);module.exports=Backbone.View.extend({initialize:function initialize(o){this.config=o||{};this.editorModel=this.em=this.config.em||{};this.pfx=this.config.stylePrefix;this.ppfx=this.config.pStylePrefix;this.hoverClass=this.pfx+"hover";this.badgeClass=this.pfx+"badge";this.plhClass=this.pfx+"placeholder";this.freezClass=this.ppfx+"freezed";this.canvas=this.em.get&&this.em.get("Canvas");if(this.em.get)this.setElement(this.getCanvas());if(this.canvas){this.$canvas=this.$el;this.$wrapper=$(this.getCanvasWrapper());this.frameEl=this.canvas.getFrameEl();this.canvasTool=this.getCanvasTools();this.bodyEl=this.getCanvasBody()}this.init(this.config)},onFrameScroll:function onFrameScroll(e){},getCanvas:function getCanvas(){return this.canvas.getElement()},getCanvasBody:function getCanvasBody(){return this.canvas.getBody()},getCanvasWrapper:function getCanvasWrapper(){return this.canvas.getWrapperEl()},getCanvasTools:function getCanvasTools(){return this.canvas.getToolsEl()},offset:function offset(el){var rect=el.getBoundingClientRect();return{top:rect.top+el.ownerDocument.body.scrollTop,left:rect.left+el.ownerDocument.body.scrollLeft}},init:function init(o){},run:function run(em,sender){},stop:function stop(em,sender){}})},function(module,exports,__webpack_require__){"use strict";module.exports={run:function run(editor,sender,opts){var opt=opts||{};var config=editor.getConfig();var modal=editor.Modal;var fileManager=editor.FileManager;console.error("GOT FILE MNAAGER");console.error(fileManager);fileManager.onClick(opt.onClick);fileManager.onDblClick(opt.onDblClick);fileManager.setTarget(opt.target);fileManager.onSelect(opt.onSelect);modal.setTitle(opt.modalTitle||"Enter filename");modal.setContent(fileManager.render());modal.open()}}},function(module,exports,__webpack_require__){"use strict";(function(_){var Backbone=__webpack_require__(0);var SelectComponent=__webpack_require__(24);module.exports=_.extend({},SelectComponent,{init:function init(o){_.bindAll(this,"startDelete","stopDelete","onDelete");this.hoverClass=this.pfx+"hover-delete";this.badgeClass=this.pfx+"badge-red"},enable:function enable(){var that=this;this.$el.find("*").mouseover(this.startDelete).mouseout(this.stopDelete).click(this.onDelete)},startDelete:function startDelete(e){e.stopPropagation();var $this=$(e.target);if($this.data("model").get("removable")){$this.addClass(this.hoverClass);this.attachBadge($this.get(0))}},stopDelete:function stopDelete(e){e.stopPropagation();var $this=$(e.target);$this.removeClass(this.hoverClass);if(this.badge)this.badge.css({left:-1e3,top:-1e3})},onDelete:function onDelete(e){e.stopPropagation();var $this=$(e.target);if(!$this.data("model").get("removable"))return;$this.data("model").destroy();this.removeBadge();this.clean()},updateBadgeLabel:function updateBadgeLabel(model){this.badge.html("Remove "+model.getName())}})}).call(exports,__webpack_require__(1))},function(module,exports,__webpack_require__){"use strict";module.exports={run:function run(editor,sender,opts){var el=opts&&opts.el||"";var canvas=editor.Canvas;var dragger=this.dragger;var options=opts.options||{};var canvasView=canvas.getCanvasView();options.prefix=editor.getConfig().stylePrefix;options.mousePosFetcher=canvas.getMouseRelativePos;options.posFetcher=canvasView.getElementPos.bind(canvasView);if(!dragger){dragger=editor.Utils.Dragger.init(options);this.dragger=dragger}dragger.setOptions(options);dragger.focus(el);if(options.event){dragger.start(options.event)}return dragger},stop:function stop(){if(this.canvasResizer)this.canvasResizer.blur()}}},function(module,exports,__webpack_require__){"use strict";module.exports={run:function run(editor,sender,opts){var opt=opts||{};var config=editor.getConfig();delete window.components_ori;delete window.components_ori_hash;delete window.head_components_ori;delete window.head_components_ori_hash;window.editorInitialized=false;window.preventUpdates=sender;window.component_edit=sender;editor.setComponents("");editor.setHeadComponents("");var ee={button:0};console.error(sender);console.error(sender);if(this.em){this.config.getSorter=this.getSorter}this.em.refreshCanvas();var sorter=this.config.getSorter();console.error("test this");console.error(this);console.error(this.el);var tgt=$("iframe").contents().find("#wrapper")[0];var created=function created(){editor.DomComponents.setComponentOrig(editor.DomComponents.getComponents());editor.DomComponents.setHeadComponentOrig(editor.DomComponents.getHeadComponents());window.editorInitialized=true};var dragEl=sorter.setDragHelper(this.el,{button:0,pageX:0,pageY:0,target:tgt});console.error(dragEl);var moved=1;var target=tgt;var ev="";var lastPos={index:0,method:"after"};sorter.setDropContent(sender.get("content"));var tmpCr=this.config.getSorter().move(target,ev,lastPos);console.error(this.config.getSorter());this.config.getSorter().onEndMove=created;this.config.getSorter().endMove();var headTag=$("iframe").contents().find("head")[0];var styles=document.createElement("link");styles.ignore="true";styles.rel="stylesheet";styles.type="text/css";styles.media="screen";styles.href="/css/theme.css";headTag.appendChild(styles)},getSorter:function getSorter(){if(!this.em)return;if(!this.sorter){var utils=this.em.get("Utils");var canvas=this.em.get("Canvas");this.sorter=new utils.Sorter({container:canvas.getBody(),placer:canvas.getPlacerEl(),containerSel:"*",itemSel:"*",pfx:this.ppfx,onStart:this.onDrag,onEndMove:this.onDrop,onMove:this.onMove,document:canvas.getFrameEl().contentDocument,direction:"a",wmargin:1,nested:1,em:this.em,canvasRelative:1})}return this.sorter}}},function(module,exports,__webpack_require__){"use strict";module.exports={run:function run(editor,sender){this.sender=sender;this.wrapper=editor.DomComponents.getWrapper();this.components=editor.DomComponents.getComponents();this.modal=editor.Modal||null;this.cm=editor.CodeManager||null;this.cssc=editor.CssComposer||null;this.protCss=editor.Config.protectedCss;this.pfx=editor.Config.stylePrefix||"";this.enable()},buildEditor:function buildEditor(codeName,theme,label){if(!this.codeMirror)this.codeMirror=this.cm.getViewer("CodeMirror");var $input=$("<textarea>"),editor=this.codeMirror.clone().set({label:label,codeName:codeName,theme:theme,input:$input[0]}),$editor=new this.cm.EditorView({model:editor,config:this.cm.getConfig()}).render().$el;editor.init($input[0]);return{el:editor,$el:$editor}},enable:function enable(){if(!this.$editors){var oHtmlEd=this.buildEditor("htmlmixed","hopscotch","HTML"),oCsslEd=this.buildEditor("css","hopscotch","CSS");this.htmlEditor=oHtmlEd.el;this.cssEditor=oCsslEd.el;this.$editors=$("<div>",{"class":this.pfx+"export-dl"});this.$editors.append(oHtmlEd.$el).append(oCsslEd.$el)}if(this.modal){this.modal.setTitle("Export template");this.modal.setContent(this.$editors);this.modal.open()}var addCss=this.protCss||"";this.htmlEditor.setContent(this.em.getHtml());this.cssEditor.setContent(addCss+this.cm.getCode(this.wrapper,"css",this.cssc));if(this.sender)this.sender.set("active",false)},stop:function stop(){}}},function(module,exports,__webpack_require__){"use strict";module.exports={isEnabled:function isEnabled(){var d=document;if(d.fullscreenElement||d.webkitFullscreenElement||d.mozFullScreenElement)return 1;else return 0},enable:function enable(el){var pfx="";if(el.requestFullscreen)el.requestFullscreen();else if(el.webkitRequestFullscreen){pfx="webkit";el.webkitRequestFullscreen()}else if(el.mozRequestFullScreen){pfx="moz";el.mozRequestFullScreen()}else if(el.msRequestFullscreen)el.msRequestFullscreen();else console.warn("Fullscreen not supported");return pfx},disable:function disable(){var d=document;if(d.exitFullscreen)d.exitFullscreen();else if(d.webkitExitFullscreen)d.webkitExitFullscreen();else if(d.mozCancelFullScreen)d.mozCancelFullScreen();else if(d.msExitFullscreen)d.msExitFullscreen()},fsChanged:function fsChanged(pfx,e){var d=document;var ev=(pfx||"")+"fullscreenchange";if(!this.isEnabled()){this.stop(null,this.sender);document.removeEventListener(ev,this.fsChanged)}},run:function run(editor,sender){this.sender=sender;var pfx=this.enable(editor.getContainer());this.fsChanged=this.fsChanged.bind(this,pfx);document.addEventListener(pfx+"fullscreenchange",this.fsChanged);if(editor)editor.trigger("change:canvasOffset")},stop:function stop(editor,sender){if(sender&&sender.set)sender.set("active",false);this.disable();if(editor)editor.trigger("change:canvasOffset")}}},function(module,exports,__webpack_require__){"use strict";(function(_){var Backbone=__webpack_require__(0);var InsertCustom=__webpack_require__(35);module.exports=_.extend({},InsertCustom,{beforeInsert:function beforeInsert(object){object.type="image";object.style={};object.attributes={};object.attributes.onmousedown="return false";if(this.config.firstCentered&&this.getCanvasWrapper()==this.sorter.target){object.style.margin="0 auto"}},afterInsert:function afterInsert(model){model.trigger("dblclick");if(this.sender)this.sender.set("active",false)}})}).call(exports,__webpack_require__(1))},function(module,exports,__webpack_require__){"use strict";var Layers=__webpack_require__(45);module.exports={run:function run(editor,sender){var config=editor.Config;var pfx=config.stylePrefix;var bm=editor.PageManager;var panelC;if(!this.blocks){this.blocks=$('<div class="page-view-selection"/>').get(0);this.blocks.appendChild(bm.render());var panels=editor.Panels;if(!panels.getPanel("views-container"))panelC=panels.addPanel({id:"views-container"});else panelC=panels.getPanel("views-container");panelC.set("appendContent",this.blocks).trigger("change:appendContent")}this.blocks.style.display="block"},stop:function stop(){if(this.blocks)this.blocks.style.display="none"}}},function(module,exports,__webpack_require__){"use strict";(function(_){var Backbone=__webpack_require__(0);var SelectComponent=__webpack_require__(24);var SelectPosition=__webpack_require__(36);module.exports=_.extend({},SelectPosition,SelectComponent,{init:function init(o){SelectComponent.init.apply(this,arguments);_.bindAll(this,"initSorter","rollback","onEndMove");this.opt=o;this.hoverClass=this.ppfx+"highlighter-warning";this.badgeClass=this.ppfx+"badge-warning";this.noSelClass=this.ppfx+"no-select"},enable:function enable(){for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}SelectComponent.enable.apply(this,args);this.getBadgeEl().addClass(this.badgeClass);this.getHighlighterEl().addClass(this.hoverClass);var wp=this.$wrapper;wp.css("cursor","move");wp.on("mousedown",this.initSorter);wp.addClass(this.noSelClass)},toggleClipboard:function toggleClipboard(){},initSorter:function initSorter(e){var el=$(e.target).data("model");var drag=el.get("draggable");if(!drag)return;this.cacheEl=null;this.startSelectPosition(e.target,this.frameEl.contentDocument);this.sorter.draggable=drag;this.sorter.onEndMove=this.onEndMove.bind(this);this.stopSelectComponent();this.$wrapper.off("mousedown",this.initSorter);this.getContentWindow().on("keydown",this.rollback)},initSorterFromModel:function initSorterFromModel(model){var drag=model.get("draggable");if(!drag)return;this.cacheEl=null;var el=model.view.el;this.startSelectPosition(el,this.frameEl.contentDocument);this.sorter.draggable=drag;this.sorter.onEndMove=this.onEndMoveFromModel.bind(this);this.stopSelectComponent();this.getContentWindow().on("keydown",this.rollback)},onEndMoveFromModel:function onEndMoveFromModel(){this.getContentWindow().off("keydown",this.rollback)},onEndMove:function onEndMove(){this.enable();this.getContentWindow().off("keydown",this.rollback)},onSelect:function onSelect(e,el){},rollback:function rollback(e,force){var key=e.which||e.keyCode;if(key==this.opt.ESCAPE_KEY||force){this.sorter.moved=false;this.sorter.endMove()}return},getBadgeEl:function getBadgeEl(){if(!this.$badge)this.$badge=$(this.getBadge());return this.$badge},getHighlighterEl:function getHighlighterEl(){if(!this.$hl)this.$hl=$(this.canvas.getHighlighter());return this.$hl},stop:function stop(){for(var _len2=arguments.length,args=Array(_len2),_key2=0;_key2<_len2;_key2++){args[_key2]=arguments[_key2]}SelectComponent.stop.apply(this,args);this.getBadgeEl().removeClass(this.badgeClass);this.getHighlighterEl().removeClass(this.hoverClass);var wp=this.$wrapper;wp.css("cursor","").unbind().removeClass(this.noSelClass)}})}).call(exports,__webpack_require__(1))},function(module,exports,__webpack_require__){"use strict";module.exports={run:function run(editor,sender,opts){var opt=opts||{};var config=editor.getConfig();var modal=editor.Modal;var assetManager=editor.AssetManager;assetManager.onClick(opt.onClick);assetManager.onDblClick(opt.onDblClick);assetManager.setTarget(opt.target);assetManager.onSelect(opt.onSelect);modal.setTitle(opt.modalTitle||"Select image");modal.setContent(assetManager.render());modal.open()}}},function(module,exports,__webpack_require__){"use strict";module.exports={run:function run(editor,sender){var config=editor.Config;var pfx=config.stylePrefix;var bm=editor.BlockManager;var panelC;if(!this.blocks){this.blocks=$('<div class="page-block-selection"/>').get(0);this.blocks.appendChild(bm.render());var panels=editor.Panels;if(!panels.getPanel("views-container"))panelC=panels.addPanel({id:"views-container"});else panelC=panels.getPanel("views-container");panelC.set("appendContent",this.blocks).trigger("change:appendContent")}this.blocks.style.display="block"},stop:function stop(){if(this.blocks)this.blocks.style.display="none"}}},function(module,exports,__webpack_require__){"use strict";var Layers=__webpack_require__(45);module.exports={run:function run(em,sender){if(!this.$layers){var collection=em.DomComponents.getComponent().get("components"),config=em.getConfig(),panels=em.Panels,lyStylePfx=config.layers.stylePrefix||"nv-";config.layers.stylePrefix=config.stylePrefix+lyStylePfx;config.layers.pStylePrefix=config.stylePrefix;config.layers.em=em.editor;config.layers.opened=em.editor.get("opened");var layers=new Layers(collection,config.layers);this.$layers=layers.render();if(!panels.getPanel("views-container"))this.panel=panels.addPanel({id:"views-container"});else this.panel=panels.getPanel("views-container");this.panel.set("appendContent",this.$layers).trigger("change:appendContent")}this.$layers.show()},stop:function stop(){if(this.$layers)this.$layers.hide()}}},function(module,exports,__webpack_require__){"use strict";var StyleManager=__webpack_require__(55);module.exports={run:function run(em,sender){this.sender=sender;if(!this.$cn){var config=em.getConfig(),panels=em.Panels;this.$cn=$("<div/>");this.$cn2=$("<div/>");this.$cn.append(this.$cn2);var dvm=em.DeviceManager;if(dvm&&config.showDevices){var devicePanel=panels.addPanel({id:"devices-c"});devicePanel.set("appendContent",dvm.render()).trigger("change:appendContent")}var hvm=em.HugoManager;if(hvm){var hugoPanel=panels.addPanel({id:"hugo-c"});hugoPanel.set("appendContent",hvm.render()).trigger("change:appendContent")}var clm=em.SelectorManager;if(clm)this.$cn2.append(clm.render([]));this.$cn2.append(em.StyleManager.render());var smConfig=em.StyleManager.getConfig();this.$header=$("<div>",{"class":smConfig.stylePrefix+"header",text:smConfig.textNoElement});this.$cn.append(this.$header);if(!panels.getPanel("views-container"))this.panel=panels.addPanel({id:"views-container"});else this.panel=panels.getPanel("views-container");this.panel.set("appendContent",this.$cn).trigger("change:appendContent");this.target=em.editor;this.listenTo(this.target,"change:selectedComponent",this.toggleSm)}this.toggleSm()},toggleSm:function toggleSm(){if(!this.sender.get("active"))return;if(this.target.get("selectedComponent")){this.$cn2.show();this.$header.hide()}else{this.$cn2.hide();this.$header.show()}},stop:function stop(){if(this.$cn2)this.$cn2.hide();if(this.$header)this.$header.hide()}}},function(module,exports,__webpack_require__){"use strict";module.exports={run:function run(editor,sender){var config=editor.Config;var pfx=config.stylePrefix;var tm=editor.TraitManager;var panelC;if(!this.obj){var tmView=tm.getTraitsViewer();var confTm=tm.getConfig();this.obj=$("<div/>").append('<div class="'+pfx+'traits-label">'+confTm.labelContainer+"</div>").get(0);this.obj.appendChild(tmView.render().el);var panels=editor.Panels;if(!panels.getPanel("views-container"))panelC=panels.addPanel({id:"views-container"});else panelC=panels.getPanel("views-container");panelC.set("appendContent",this.obj).trigger("change:appendContent")}this.obj.style.display="block"},stop:function stop(){if(this.obj)this.obj.style.display="none"}}},function(module,exports,__webpack_require__){"use strict";(function(_){module.exports={getPanels:function getPanels(editor){if(!this.panels)this.panels=editor.Panels.getPanelsEl();return this.panels},tglPointers:function tglPointers(editor,v){var elP=editor.Canvas.getBody().querySelectorAll("."+this.ppfx+"no-pointer");_.each(elP,function(item){item.style.pointerEvents=v?"":"all"})},run:function run(editor,sender){if(sender&&sender.set)sender.set("active",false);editor.stopCommand("sw-visibility");editor.getModel().stopDefault();var that=this;var panels=this.getPanels(editor);var canvas=editor.Canvas.getElement();var editorEl=editor.getEl();var pfx=editor.Config.stylePrefix;if(!this.helper){this.helper=document.createElement("span");this.helper.className=pfx+"off-prv fa fa-eye-slash";editorEl.appendChild(this.helper);this.helper.onclick=function(){that.stop(editor)}}this.helper.style.display="inline-block";this.tglPointers(editor);panels.style.display="none";var canvasS=canvas.style;canvasS.width="100%";canvasS.height="100%";canvasS.top="0";canvasS.left="0";canvasS.padding="0";canvasS.margin="0";editor.trigger("change:canvasOffset")},stop:function stop(editor,sender){var panels=this.getPanels(editor);editor.runCommand("sw-visibility");editor.getModel().runDefault();panels.style.display="block";var canvas=editor.Canvas.getElement();canvas.setAttribute("style","");if(this.helper){this.helper.style.display="none"}editor.trigger("change:canvasOffset");this.tglPointers(editor,1)}}}).call(exports,__webpack_require__(1))},function(module,exports,__webpack_require__){"use strict";module.exports={run:function run(editor,sender,opts){var opt=opts||{};var el=opt.el||"";var canvas=editor.Canvas;var canvasResizer=this.canvasResizer;var options=opt.options||{};var canvasView=canvas.getCanvasView();if(!canvasResizer||opt.forceNew){options.ratioDefault=1;options.appendTo=canvas.getResizerEl();options.prefix=editor.getConfig().stylePrefix;options.posFetcher=canvasView.getElementPos.bind(canvasView);options.mousePosFetcher=canvas.getMouseRelativePos;this.canvasResizer=editor.Utils.Resizer.init(options);canvasResizer=this.canvasResizer}canvasResizer.setOptions(options);canvasResizer.focus(el);return canvasResizer},stop:function stop(){if(this.canvasResizer)this.canvasResizer.blur()}}},function(module,exports,__webpack_require__){"use strict";module.exports={getOffsetMethod:function getOffsetMethod(state){var method=state||"";return"get"+method+"OffsetViewerEl"},run:function run(editor,sender,opts){var opt=opts||{};var state=opt.state||"";var config=editor.getConfig();if(!config.showOffsets||!config.showOffsetsSelected&&state=="Fixed"){return}var canvas=editor.Canvas;var el=opt.el||"";var pos=opt.elPos||canvas.getElementPos(el);var style=window.getComputedStyle(el);var ppfx=this.ppfx;var stateVar=state+"State";var method=this.getOffsetMethod(state);var offsetViewer=canvas[method]();offsetViewer.style.display="block";var marginT=this["marginT"+state];var marginB=this["marginB"+state];var marginL=this["marginL"+state];var marginR=this["marginR"+state];var padT=this["padT"+state];var padB=this["padB"+state];var padL=this["padL"+state];var padR=this["padR"+state];if(!this[stateVar]){var stateLow=state.toLowerCase();var marginName=stateLow+"margin-v";var paddingName=stateLow+"padding-v";var marginV=$("<div>",{"class":ppfx+marginName}).get(0);var paddingV=$("<div>",{"class":ppfx+paddingName}).get(0);var marginEls=ppfx+marginName+"-el";var paddingEls=ppfx+paddingName+"-el";marginT=$("<div>",{"class":ppfx+marginName+"-top "+marginEls}).get(0);marginB=$("<div>",{"class":ppfx+marginName+"-bottom "+marginEls}).get(0);marginL=$("<div>",{"class":ppfx+marginName+"-left "+marginEls}).get(0);marginR=$("<div>",{"class":ppfx+marginName+"-right "+marginEls}).get(0);padT=$("<div>",{"class":ppfx+paddingName+"-top "+paddingEls}).get(0);padB=$("<div>",{"class":ppfx+paddingName+"-bottom "+paddingEls}).get(0);padL=$("<div>",{"class":ppfx+paddingName+"-left "+paddingEls}).get(0);padR=$("<div>",{"class":ppfx+paddingName+"-right "+paddingEls}).get(0);this["marginT"+state]=marginT;this["marginB"+state]=marginB;this["marginL"+state]=marginL;this["marginR"+state]=marginR;this["padT"+state]=padT;this["padB"+state]=padB;this["padL"+state]=padL;this["padR"+state]=padR;marginV.appendChild(marginT);marginV.appendChild(marginB);marginV.appendChild(marginL);marginV.appendChild(marginR);paddingV.appendChild(padT);paddingV.appendChild(padB);paddingV.appendChild(padL);paddingV.appendChild(padR);offsetViewer.appendChild(marginV);offsetViewer.appendChild(paddingV);this[stateVar]="1"}var unit="px";var marginLeftSt=style.marginLeft.replace(unit,"");var marginTopSt=parseInt(style.marginTop.replace(unit,""));var marginBottomSt=parseInt(style.marginBottom.replace(unit,""));var mtStyle=marginT.style;var mbStyle=marginB.style;var mlStyle=marginL.style;var mrStyle=marginR.style;var ptStyle=padT.style;var pbStyle=padB.style;var plStyle=padL.style;var prStyle=padR.style;var posLeft=parseInt(pos.left);mtStyle.height=style.marginTop;mtStyle.width=style.width;mtStyle.top=pos.top-style.marginTop.replace(unit,"")+unit;mtStyle.left=posLeft+unit;mbStyle.height=style.marginBottom;mbStyle.width=style.width;mbStyle.top=pos.top+pos.height+unit;mbStyle.left=posLeft+unit;var marginSideH=pos.height+marginTopSt+marginBottomSt+unit;var marginSideT=pos.top-marginTopSt+unit;mlStyle.height=marginSideH;mlStyle.width=style.marginLeft;mlStyle.top=marginSideT;mlStyle.left=posLeft-marginLeftSt+unit;mrStyle.height=marginSideH;mrStyle.width=style.marginRight;mrStyle.top=marginSideT;mrStyle.left=posLeft+pos.width+unit;var padTop=parseInt(style.paddingTop.replace(unit,""));ptStyle.height=style.paddingTop;ptStyle.width=style.width;ptStyle.top=pos.top+unit;ptStyle.left=posLeft+unit;var padBot=parseInt(style.paddingBottom.replace(unit,""));pbStyle.height=style.paddingBottom;pbStyle.width=style.width;pbStyle.top=pos.top+pos.height-padBot+unit;pbStyle.left=posLeft+unit;var padSideH=pos.height-padBot-padTop+unit;var padSideT=pos.top+padTop+unit;plStyle.height=padSideH;plStyle.width=style.paddingLeft;plStyle.top=padSideT;plStyle.left=pos.left+unit;var padRight=parseInt(style.paddingRight.replace(unit,""));prStyle.height=padSideH;prStyle.width=style.paddingRight;prStyle.top=padSideT;prStyle.left=pos.left+pos.width-padRight+unit},stop:function stop(editor,sender,opts){var opt=opts||{};var state=opt.state||"";var method=this.getOffsetMethod(state);var canvas=editor.Canvas;var offsetViewer=canvas[method]();offsetViewer.style.display="none"}}},function(module,exports,__webpack_require__){"use strict";module.exports={run:function run(ed){ed.Canvas.getBody().className=this.ppfx+"dashed"},stop:function stop(ed){ed.Canvas.getBody().className=""}}},function(module,exports,__webpack_require__){"use strict";(function(_){var Backbone=__webpack_require__(0);var CreateComponent=__webpack_require__(23);module.exports=_.extend({},CreateComponent,{beforeDraw:function beforeDraw(component){component.type="text";if(!component.style)component.style={};component.style.padding="10px"},afterDraw:function afterDraw(model){if(!model||!model.set)return;model.trigger("focus");if(this.sender)this.sender.set("active",false)}})}).call(exports,__webpack_require__(1))},function(module,exports,__webpack_require__){"use strict";module.exports={stylePrefix:"css-",staticRules:"",rules:[]}},function(module,exports,__webpack_require__){"use strict";(function(_){module.exports=function(){var c={},defaults=__webpack_require__(133),CssRule=__webpack_require__(37),CssRules=__webpack_require__(135),Selectors=__webpack_require__(38),CssRulesView=__webpack_require__(137);
var rules,rulesView;return{Selectors:Selectors,name:"CssComposer",storageKey:function storageKey(){var keys=[];var smc=c.stm&&c.stm.getConfig()||{};if(smc.storeCss)keys.push("css");if(smc.storeStyles)keys.push("styles");return keys},init:function init(config){c=config||{};for(var name in defaults){if(!(name in c))c[name]=defaults[name]}var ppfx=c.pStylePrefix;if(ppfx)c.stylePrefix=ppfx+c.stylePrefix;var elStyle=c.em&&c.em.config.style||"";c.rules=elStyle||c.rules;c.sm=c.em;rules=new CssRules([],c);rules.add(c.rules);rulesView=new CssRulesView({collection:rules,config:c});return this},onLoad:function onLoad(){if(c.stm&&c.stm.getConfig().autoload)this.load();if(c.stm&&c.stm.isAutosave())c.em.listenRules(this.getAll())},load:function load(data){var d=data||"";if(!d&&c.stm)d=c.em.getCacheLoad();var obj="";if(d.styles){try{obj=JSON.parse(d.styles)}catch(err){}}else if(d.css){obj=c.em.get("Parser").parseCss(d.css)}if(obj)rules.reset(obj);return obj},store:function store(noStore){if(!c.stm)return;var obj={};var keys=this.storageKey();if(keys.indexOf("css")>=0){obj.css=c.em.getCss()}if(keys.indexOf("styles")>=0){obj.styles=JSON.stringify(rules)}if(!noStore)c.stm.store(obj);return obj},add:function add(selectors,state,width,opts){var s=state||"";var w=width||"";var opt=opts||{};var rule=this.get(selectors,s,w,opt);if(rule)return rule;else{opt.state=s;opt.mediaText=w;opt.selectors="";rule=new CssRule(opt);rule.get("selectors").add(selectors);rules.add(rule);return rule}},get:function get(selectors,state,width,ruleProps){var rule=null;rules.each(function(m){if(rule)return;if(m.compare(selectors,state,width,ruleProps))rule=m});return rule},getAll:function getAll(){return rules},addCollection:function addCollection(data,opts){var opt=opts||{};var result=[];var d=data instanceof Array?data:[data];for(var i=0,l=d.length;i<l;i++){var rule=d[i]||{};if(!rule.selectors)continue;var sm=c.em&&c.em.get("SelectorManager");if(!sm)console.warn("Selector Manager not found");var sl=rule.selectors;var sels=sl instanceof Array?sl:[sl];var newSels=[];for(var j=0,le=sels.length;j<le;j++){var selec=sm.add(sels[j]);newSels.push(selec)}var model=this.add(newSels,rule.state,rule.mediaText,rule);if(opt.extend){var newStyle=_.extend({},model.get("style"),rule.style||{});model.set("style",newStyle)}else{model.set("style",rule.style||{})}result.push(model)}return result},render:function render(){return rulesView.render().el}}}}).call(exports,__webpack_require__(1))},function(module,exports,__webpack_require__){"use strict";var Backbone=__webpack_require__(0);var CssRule=__webpack_require__(37);module.exports=Backbone.Collection.extend({initialize:function initialize(models,opt){if(opt&&opt.sm)this.editor=opt.sm;this.model=function(attrs,options){var model;if(!options.sm&&opt&&opt.sm)options.sm=opt.sm;switch(1){default:model=new CssRule(attrs,options)}return model}},add:function add(models,opt){if(typeof models==="string")models=this.editor.get("Parser").parseCss(models);return Backbone.Collection.prototype.add.apply(this,[models,opt])}})},function(module,exports,__webpack_require__){"use strict";var Backbone=__webpack_require__(0);module.exports=Backbone.View.extend({tagName:"style",initialize:function initialize(o){this.config=o.config||{};this.listenTo(this.model,"change:style",this.render);this.listenTo(this.model,"change:state",this.render);this.listenTo(this.model,"destroy remove",this.remove);this.listenTo(this.model,"change:mediaText",this.render);this.listenTo(this.model.get("selectors"),"change",this.selChanged)},selChanged:function selChanged(){this.selStr=this.renderSelectors();this.render()},renderSelectors:function renderSelectors(){var sel=[];var model=this.model;var add=model.get("selectorsAdd");model.get("selectors").each(function(m){sel.push("."+m.get("name"))});var sels=sel.join("");return sels+(sels&&add?", ":"")+add},renderProperties:function renderProperties(){var sel=[],props=this.model.get("style");for(var prop in props){sel.push(prop+":"+props[prop]+";")}return sel.join("")},render:function render(){var block="",selStr="",o="";if(!this.selStr)this.selStr=this.renderSelectors();var prpStr=this.renderProperties();var stateStr=this.model.get("state");var mediaText=this.model.get("mediaText");if(this.selStr){stateStr=stateStr?":"+stateStr:"";block=prpStr!==""?"{"+prpStr+"}":""}o=this.selStr&&block?this.selStr+stateStr+block:"";if(mediaText&&o)o="@media "+mediaText+"{"+o+"}";this.$el.html(o);return this}})},function(module,exports,__webpack_require__){"use strict";var Backbone=__webpack_require__(0);var CssRuleView=__webpack_require__(136);module.exports=Backbone.View.extend({initialize:function initialize(o){this.config=o.config||{};this.pfx=this.config.stylePrefix||"";this.className=this.pfx+"rules";this.listenTo(this.collection,"add",this.addTo);this.listenTo(this.collection,"reset",this.render)},addTo:function addTo(model){this.addToCollection(model)},addToCollection:function addToCollection(model,fragmentEl){var fragment=fragmentEl||null;var viewObject=CssRuleView;var view=new viewObject({model:model,config:this.config});var rendered=view.render().el;if(fragment)fragment.appendChild(rendered);else this.$el.append(rendered);return rendered},render:function render(){var fragment=document.createDocumentFragment();this.$el.empty();this.collection.each(function(model){this.addToCollection(model,fragment)},this);this.$el.append(fragment);this.$el.attr("class",this.className);return this}})},function(module,exports,__webpack_require__){"use strict";module.exports={devices:[],deviceLabel:"Device"}},function(module,exports,__webpack_require__){"use strict";module.exports=function(){var c={},defaults=__webpack_require__(138),Devices=__webpack_require__(141),DevicesView=__webpack_require__(142);var devices,view;return{name:"DeviceManager",init:function init(config){c=config||{};for(var name in defaults){if(!(name in c))c[name]=defaults[name]}devices=new Devices(c.devices);view=new DevicesView({collection:devices,config:c});console.log("returning view");console.log(view);return this},add:function add(name,width,opts){var obj=opts||{};obj.name=name;obj.width=width;return devices.add(obj)},get:function get(name){return devices.get(name)},getAll:function getAll(){return devices},render:function render(){return view.render().el}}}},function(module,exports,__webpack_require__){"use strict";var Backbone=__webpack_require__(0);module.exports=Backbone.Model.extend({idAttribute:"name",defaults:{name:"",width:""}})},function(module,exports,__webpack_require__){"use strict";var Backbone=__webpack_require__(0);var Device=__webpack_require__(140);module.exports=Backbone.Collection.extend({model:Device})},function(module,exports,__webpack_require__){"use strict";(function(_){var Backbone=__webpack_require__(0);module.exports=Backbone.View.extend({template:_.template('\n    <div class="<%= ppfx %>device-label"><%= deviceLabel %></div>\n    <div class="<%= ppfx %>field <%= ppfx %>select">\n      <span id="<%= ppfx %>input-holder">\n        <select class="<%= ppfx %>devices"></select>\n      </span>\n      <div class="<%= ppfx %>sel-arrow">\n        <div class="<%= ppfx %>d-s-arrow"></div>\n      </div>\n    </div>\n    <button style="display:none" class="<%= ppfx %>add-trasp">+</button>'),events:{change:"updateDevice"},initialize:function initialize(o){this.config=o.config||{};this.em=this.config.em;this.ppfx=this.config.pStylePrefix||"";this.events["click ."+this.ppfx+"add-trasp"]=this.startAdd;this.listenTo(this.em,"change:device",this.updateSelect);this.delegateEvents()},startAdd:function startAdd(){},updateDevice:function updateDevice(){var em=this.em;if(em){var devEl=this.devicesEl;var val=devEl?devEl.val():"";em.set("device",val)}},updateSelect:function updateSelect(){var em=this.em;var devEl=this.devicesEl;if(em&&em.getDeviceModel&&devEl){var device=em.getDeviceModel();var name=device?device.get("name"):"";devEl.val(name)}},getOptions:function getOptions(){var result="";this.collection.each(function(device){var name=device.get("name");result+='<option value="'+name+'">'+name+"</option>"});return result},render:function render(){var pfx=this.ppfx;this.$el.html(this.template({ppfx:pfx,deviceLabel:this.config.deviceLabel}));this.devicesEl=this.$el.find("."+pfx+"devices");this.devicesEl.append(this.getOptions());this.el.className=pfx+"devices-c";return this}})}).call(exports,__webpack_require__(1))},function(module,exports,__webpack_require__){"use strict";module.exports={stylePrefix:"comp-",wrapperId:"wrapper",wrapper:{removable:false,copyable:false,stylable:["background","background-color","background-image","background-repeat","background-attachment","background-position"],draggable:false,badgable:false,heads:[],heads_ori:[],components:[],components_ori:[]},components:[],heads:[],rte:{},imageCompClass:"fa fa-picture-o",oAssetsOnCreate:true,voidElements:["area","base","br","col","embed","hr","img","input","keygen","link","menuitem","meta","param","source","track","wbr"]}},function(module,exports,__webpack_require__){"use strict";module.exports=function(){var c={},componentTypes={},defaults=__webpack_require__(143),Component=__webpack_require__(8),ComponentView=__webpack_require__(10);var component,componentView;var defaultTypes=[{id:"cell",model:__webpack_require__(150),view:__webpack_require__(161)},{id:"row",model:__webpack_require__(151),view:__webpack_require__(162)},{id:"table",model:__webpack_require__(149),view:__webpack_require__(163)},{id:"map",model:__webpack_require__(146),view:__webpack_require__(158)},{id:"link",model:__webpack_require__(145),view:__webpack_require__(157)},{id:"video",model:__webpack_require__(153),view:__webpack_require__(165)},{id:"image",model:__webpack_require__(25),view:__webpack_require__(20)},{id:"script",model:__webpack_require__(147),view:__webpack_require__(159)},{id:"svg",model:__webpack_require__(148),view:__webpack_require__(160)},{id:"textnode",model:__webpack_require__(152),view:__webpack_require__(164)},{id:"text",model:__webpack_require__(39),view:__webpack_require__(40)},{id:"default",model:Component,view:ComponentView}];return{componentTypes:defaultTypes,name:"DomComponents",getConfig:function getConfig(){return c},storageKey:function storageKey(){var keys=[];var smc=c.stm&&c.stm.getConfig()||{};if(smc.storeHtml)keys.push("html");if(smc.storeComponents)keys.push("components");return keys},init:function init(config){c=config||{};if(c.em)c.components=c.em.config.components||c.components;for(var name in defaults){if(!(name in c))c[name]=defaults[name]}var ppfx=c.pStylePrefix;if(ppfx)c.stylePrefix=ppfx+c.stylePrefix;if(c.em){c.rte=c.em.get("rte")||"";c.modal=c.em.get("Modal")||"";c.am=c.em.get("AssetManager")||"";c.em.get("Parser").compTypes=defaultTypes}component=new Component(c.wrapper,{sm:c.em,config:c,defaultTypes:defaultTypes,componentTypes:componentTypes});component.set({attributes:{id:"wrapper"}});if(c.em&&!c.em.config.loadCompsOnRender){component.get("components").add(c.components)}componentView=new ComponentView({model:component,config:c,defaultTypes:defaultTypes,componentTypes:componentTypes});return this},onLoad:function onLoad(){if(c.stm&&c.stm.getConfig().autoload)this.load();if(c.stm&&c.stm.isAutosave()){c.em.initUndoManager();c.em.initChildrenComp(this.getWrapper())}},load:function load(data){var d=data||"";if(!d&&c.stm)d=c.em.getCacheLoad();var obj="";if(d.components){try{obj=JSON.parse(d.components)}catch(err){}}else if(d.html)obj=d.html;if(obj){this.getComponents().reset(obj)}var headObj="";if(d.heads){try{headObj=JSON.parse(d.heads)}catch(err){}if(headObj){this.getComponents().reset(headObj)}}else if(d.html)headObj=d.html;return obj},store:function store(noStore){try{fdskljfs()}catch(e){console.error(e.stack)}console.log("STORE");if(!c.stm)return;var obj={};var keys=this.storageKey();if(keys.indexOf("html")>=0)obj.html=c.em.getHtml();if(keys.indexOf("components")>=0)obj.components=JSON.stringify(c.em.getComponents());if(!noStore)c.stm.store(obj);return obj},getComponent:function getComponent(){return component},getWrapper:function getWrapper(){return this.getComponent()},getHeadWrapper:function getHeadWrapper(){return this.getHeadComponent()},getComponents:function getComponents(){return this.getWrapper().get("components")},getHeadComponents:function getHeadComponents(){return this.getWrapper().get("heads")},getComponentsOrig:function getComponentsOrig(){window.components_ori=window.components_ori||[];window.components_ori_hash=window.components_ori_hash||{};return window.components_ori},getHeadComponentsOrig:function getHeadComponentsOrig(){window.head_components_ori=window.chead_omponents_ori||[];window.head_components_ori_hash=window.head_components_ori_hash||{};return window.head_components_ori},addComponent:function addComponent(component){return this.getComponents().add(component)},addHeadComponent:function addHeadComponent(head){return this.getHeadComponents().add(head)},setComponentOrig:function setComponentOrig(component){console.error("SET COMONENT ORIG TATE");console.error(component);var cc=this.getComponentsOrig();var commpOrigHash=window.components_ori_hash;console.error("GOT CC");console.error(this.getComponents());var comps=this.getComponents();var len=comps.length;for(var i=0;i<len;i++){var cmp=comps.models[i];var clonedObj=JSON.parse(JSON.stringify(cmp));clonedObj.cid=cmp.cid;components_ori_hash[cmp.cid]=clonedObj;cc.push(clonedObj)}},setHeadComponentOrig:function setHeadComponentOrig(component){console.error("SET COMONENT ORIG TATE");console.error(component);var cc=this.getHeadComponentsOrig();var commpOrigHash=window.head_components_ori_hash;console.error("GOT CC");console.error(this.getHeadComponents());var comps=this.getHeadComponents();var len=comps.length;for(var i=0;i<len;i++){var cmp=comps.models[i];var clonedObj=JSON.parse(JSON.stringify(cmp));clonedObj.cid=cmp.cid;head_components_ori_hash[cmp.cid]=clonedObj;cc.push(clonedObj)}},render:function render(){var renderedElements=componentView.render().el;setTimeout(function(){$("iframe").contents().find("head").append(window.editor.getHead())},500);return renderedElements},clear:function clear(){var c=this.getComponents();for(var i=0,len=c.length;i<len;i++){c.pop()}return this},clearHead:function clearHead(){var c=this.getHeadComponents();for(var i=0,len=c.length;i<len;i++){c.pop()}return this},setComponents:function setComponents(components){this.clear().addComponent(components)},setHeadComponents:function setHeadComponents(components){this.clearHead().addHeadComponent(components)},addType:function addType(type,methods){var compType=this.getType(type);if(compType){compType.model=methods.model;compType.view=methods.view}else{methods.id=type;defaultTypes.unshift(methods)}},getType:function getType(type){var df=defaultTypes;for(var it=0;it<df.length;it++){var dfId=df[it].id;if(dfId==type){return df[it]}}return}}}},function(module,exports,__webpack_require__){"use strict";(function(_){var Component=__webpack_require__(39);module.exports=Component.extend({defaults:_.extend({},Component.prototype.defaults,{type:"link",tagName:"a",traits:["title","href","target"]}),getAttrToHTML:function getAttrToHTML(){for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}var attr=Component.prototype.getAttrToHTML.apply(this,args);delete attr.onmousedown;return attr}},{isComponent:function isComponent(el){var result="";if(el.tagName=="A"){result={type:"link"}}return result}})}).call(exports,__webpack_require__(1))},function(module,exports,__webpack_require__){"use strict";(function(_){var Component=__webpack_require__(25);var OComponent=__webpack_require__(8);module.exports=Component.extend({defaults:_.extend({},Component.prototype.defaults,{type:"map","void":0,mapUrl:"https://maps.google.com/maps",tagName:"iframe",mapType:"q",address:"",zoom:"1",attributes:{frameborder:0},toolbar:OComponent.prototype.defaults.toolbar,traits:[{label:"Address",name:"address",placeholder:"eg. London, UK",changeProp:1},{type:"select",label:"Map type",name:"mapType",changeProp:1,options:[{value:"q",name:"Roadmap"},{value:"w",name:"Satellite"}]},{label:"Zoom",name:"zoom",type:"range",min:"1",max:"20",changeProp:1}]}),initialize:function initialize(o,opt){if(this.get("src"))this.parseFromSrc();else this.updateSrc();Component.prototype.initialize.apply(this,arguments);this.listenTo(this,"change:address change:zoom change:mapType",this.updateSrc)},updateSrc:function updateSrc(){this.set("src",this.getMapUrl())},getMapUrl:function getMapUrl(){var md=this;var addr=md.get("address");var zoom=md.get("zoom");var type=md.get("mapType");var size="";addr=addr?"&q="+addr:"";zoom=zoom?"&z="+zoom:"";type=type?"&t="+type:"";var result=md.get("mapUrl")+"?"+addr+zoom+type;result+="&output=embed";return result},parseFromSrc:function parseFromSrc(){var uri=this.parseUri(this.get("src"));var qr=uri.query;if(qr.q)this.set("address",qr.q);if(qr.z)this.set("zoom",qr.z);if(qr.t)this.set("mapType",qr.t)}},{isComponent:function isComponent(el){var result="";if(el.tagName=="IFRAME"&&/maps\.google\.com/.test(el.src)){result={type:"map",src:el.src}}return result}})}).call(exports,__webpack_require__(1))},function(module,exports,__webpack_require__){"use strict";(function(_){var Component=__webpack_require__(8);module.exports=Component.extend({defaults:_.extend({},Component.prototype.defaults,{type:"script",droppable:false,draggable:false,hiddenLayer:true})},{isComponent:function isComponent(el){if(el.tagName=="SCRIPT"){var result={type:"script"};if(el.src){result.src=el.src;result.onload=el.onload}return result}}})}).call(exports,__webpack_require__(1))},function(module,exports,__webpack_require__){"use strict";var Component=__webpack_require__(8);module.exports=Component.extend({getName:function getName(){var name=this.get("tagName");return name.charAt(0).toUpperCase()+name.slice(1)}},{isComponent:function isComponent(el){if(el instanceof SVGElement){return{type:"svg"}}}})},function(module,exports,__webpack_require__){"use strict";(function(_){var Component=__webpack_require__(8);module.exports=Component.extend({defaults:_.extend({},Component.prototype.defaults,{type:"table",tagName:"table",droppable:["tr","tbody","thead","tfoot"],columns:3,rows:2}),initialize:function initialize(o,opt){Component.prototype.initialize.apply(this,arguments);var components=this.get("components");var rows=this.get("rows");var columns=this.get("columns");if(!components.length){var rowsToAdd=[];while(rows--){var columnsToAdd=[];var clm=columns;while(clm--){columnsToAdd.push({type:"cell",classes:["cell"]})}rowsToAdd.push({type:"row",classes:["row"],components:columnsToAdd})}components.add(rowsToAdd)}var rowsColl=[];components.each(function(model){if(model.get("type")!="row"){model.get("components").each(function(row){if(row.get("type")=="row"){row.collection=components;rowsColl.push(row)}})}else{rowsColl.push(model)}});components.reset(rowsColl)}},{isComponent:function isComponent(el){var result="";if(el.tagName=="TABLE"){result={type:"table"}}return result}})}).call(exports,__webpack_require__(1))},function(module,exports,__webpack_require__){"use strict";(function(_){var Component=__webpack_require__(8);module.exports=Component.extend({defaults:_.extend({},Component.prototype.defaults,{type:"cell",tagName:"td",draggable:["tr"]})},{isComponent:function isComponent(el){var result="";var tag=el.tagName;if(tag=="TD"||tag=="TH"){result={type:"cell",tagName:tag.toLowerCase()}}return result}})}).call(exports,__webpack_require__(1))},function(module,exports,__webpack_require__){"use strict";(function(_){var Component=__webpack_require__(8);module.exports=Component.extend({defaults:_.extend({},Component.prototype.defaults,{type:"row",tagName:"tr",draggable:["table","tbody","thead"],droppable:["th","td"]}),initialize:function initialize(o,opt){Component.prototype.initialize.apply(this,arguments);var cells=[];var components=this.get("components");components.each(function(model){if(model.get("type")=="cell"){cells.push(model)}});components.reset(cells)}},{isComponent:function isComponent(el){var result="";if(el.tagName=="TR"){result={type:"row"}}return result}})}).call(exports,__webpack_require__(1))},function(module,exports,__webpack_require__){"use strict";(function(_){var Component=__webpack_require__(8);module.exports=Component.extend({defaults:_.extend({},Component.prototype.defaults,{droppable:false,editable:true}),toHTML:function toHTML(){return this.get("content")}},{isComponent:function isComponent(el){var result="";if(el.nodeType===3){result={type:"textnode",content:el.textContent}}return result}})}).call(exports,__webpack_require__(1))},function(module,exports,__webpack_require__){"use strict";(function(_){var Component=__webpack_require__(25);var OComponent=__webpack_require__(8);var yt="yt";var vi="vi";module.exports=Component.extend({defaults:_.extend({},Component.prototype.defaults,{type:"video",tagName:"video",videoId:"","void":0,provider:"",ytUrl:"https://www.youtube.com/embed/",viUrl:"https://player.vimeo.com/video/",loop:0,muted:0,autoplay:0,controls:1,color:"",sources:[],attributes:{allowfullscreen:"allowfullscreen"},toolbar:OComponent.prototype.defaults.toolbar}),initialize:function initialize(o,opt){var traits=[];var prov=this.get("provider");switch(prov){case yt:traits=this.getYoutubeTraits();break;case vi:traits=this.getVimeoTraits();break;default:traits=this.getSourceTraits()}if(this.get("src"))this.parseFromSrc();this.set("traits",traits);Component.prototype.initialize.apply(this,arguments);this.listenTo(this,"change:provider",this.updateTraits);this.listenTo(this,"change:videoId",this.updateSrc)},parseFromSrc:function parseFromSrc(){var prov=this.get("provider");var uri=this.parseUri(this.get("src"));var qr=uri.query;switch(prov){case yt:case vi:var videoId=uri.pathname.split("/").pop();this.set("videoId",videoId);if(qr.autoplay)this.set("autoplay",1);if(qr.loop)this.set("loop",1);if(parseInt(qr.controls)===0)this.set("controls",0);if(qr.color)this.set("color",qr.color);break;default:}},updateSrc:function updateSrc(){var prov=this.get("provider");switch(prov){case yt:this.set("src",this.getYoutubeSrc());break;case vi:this.set("src",this.getVimeoSrc());break}},getAttrToHTML:function getAttrToHTML(){for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}var attr=Component.prototype.getAttrToHTML.apply(this,args);var prov=this.get("provider");switch(prov){case yt:case vi:break;default:if(this.get("loop"))attr.loop="loop";if(this.get("autoplay"))attr.autoplay="autoplay";if(this.get("controls"))attr.controls="controls"}return attr},updateTraits:function updateTraits(){var prov=this.get("provider");var traits=this.getSourceTraits();switch(prov){case yt:this.set("tagName","iframe");traits=this.getYoutubeTraits();break;case vi:this.set("tagName","iframe");traits=this.getVimeoTraits();break;default:this.set("tagName","video")}this.loadTraits(traits);this.sm.trigger("change:selectedComponent")},getProviderTrait:function getProviderTrait(){return{type:"select",label:"Provider",name:"provider",changeProp:1,value:this.get("provider"),options:[{value:"so",name:"HTML5 Source"},{value:yt,name:"Youtube"},{value:vi,name:"Vimeo"}]}},getSourceTraits:function getSourceTraits(){return[this.getProviderTrait(),{label:"Source",name:"src",placeholder:"eg. ./media/video.mp4",changeProp:1},this.getAutoplayTrait(),this.getLoopTrait(),this.getControlsTrait()]},getYoutubeTraits:function getYoutubeTraits(){return[this.getProviderTrait(),{label:"Video ID",name:"videoId",placeholder:"eg. jNQXAC9IVRw",changeProp:1},this.getAutoplayTrait(),this.getLoopTrait(),this.getControlsTrait()]},getVimeoTraits:function getVimeoTraits(){return[this.getProviderTrait(),{label:"Video ID",name:"videoId",placeholder:"eg. 123456789",changeProp:1},{label:"Color",name:"color",placeholder:"eg. FF0000",changeProp:1},this.getAutoplayTrait(),this.getLoopTrait(),this.getControlsTrait()]},getAutoplayTrait:function getAutoplayTrait(){return{type:"checkbox",label:"Autoplay",name:"autoplay",changeProp:1}},getLoopTrait:function getLoopTrait(){return{type:"checkbox",label:"Loop",name:"loop",changeProp:1}},getControlsTrait:function getControlsTrait(){return{type:"checkbox",label:"Controls",name:"controls",changeProp:1}},getYoutubeSrc:function getYoutubeSrc(){var url=this.get("ytUrl");url+=this.get("videoId")+"?";url+=this.get("autoplay")?"&autoplay=1":"";url+=!this.get("controls")?"&controls=0":"";url+=this.get("loop")?"&loop=1":"";return url},getVimeoSrc:function getVimeoSrc(){var url=this.get("viUrl");url+=this.get("videoId")+"?";url+=this.get("autoplay")?"&autoplay=1":"";url+=this.get("loop")?"&loop=1":"";url+=!this.get("controls")?"&title=0&portrait=0&badge=0":"";url+=this.get("color")?"&color="+this.get("color"):"";return url}},{isComponent:function isComponent(el){var result="";var isYtProv=/youtube\.com\/embed/.test(el.src);var isViProv=/player\.vimeo\.com\/video/.test(el.src);var isExtProv=isYtProv||isViProv;if(el.tagName=="VIDEO"||el.tagName=="IFRAME"&&isExtProv){result={type:"video"};if(el.src)result.src=el.src;if(isExtProv){if(isYtProv)result.provider=yt;else if(isViProv)result.provider=vi}}return result}})}).call(exports,__webpack_require__(1))},function(module,exports,__webpack_require__){"use strict";(function(_){var Backbone=__webpack_require__(0);module.exports=Backbone.Collection.extend({initialize:function initialize(models,opt){this.on("add",this.onAdd);this.config=opt&&opt.config?opt.config:null;if(opt&&opt.sm)this.editor=opt.sm;this.model=function(attrs,options){var model;if(!options.sm&&opt&&opt.sm)options.sm=opt.sm;if(opt&&opt.config)options.config=opt.config;if(opt&&opt.defaultTypes)options.defaultTypes=opt.defaultTypes;if(opt&&opt.componentTypes)options.componentTypes=opt.componentTypes;var df=opt.defaultTypes;for(var it=0;it<df.length;it++){var dfId=df[it].id;if(dfId==attrs.type){model=df[it].model;break}}if(!model){model=df[df.length-1].model}return new model(attrs,options)}},add:function add(models,opt){if(typeof models==="string"){var parsed=this.editor.get("Parser").parseHtml(models);models=parsed.html;var cssc=this.editor.get("CssComposer");if(parsed.css&&cssc){var added=cssc.addCollection(parsed.css,{extend:1})}}return Backbone.Collection.prototype.add.apply(this,[models,opt])},onAdd:function onAdd(model,c,opts){var style=model.get("style");var em=this.editor;if(!_.isEmpty(style)&&em&&em.get("Config").forceClass){var cssC=this.editor.get("CssComposer");var newClass=this.editor.get("SelectorManager").add(model.cid);model.set({style:{}});model.get("classes").add(newClass);var rule=cssC.add(newClass);rule.set("style",style)}}})}).call(exports,__webpack_require__(1))},function(module,exports,__webpack_require__){"use strict";var Backbone=__webpack_require__(0);var ToolbarButton=__webpack_require__(156);module.exports=Backbone.Collection.extend({model:ToolbarButton})},function(module,exports,__webpack_require__){"use strict";var Backbone=__webpack_require__(0);module.exports=Backbone.Model.extend({defaults:{command:"",attributes:{}}})},function(module,exports,__webpack_require__){"use strict";var Backbone=__webpack_require__(0);var ComponentView=__webpack_require__(40);module.exports=ComponentView.extend({events:{dblclick:"enableEditing"},render:function render(){for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}ComponentView.prototype.render.apply(this,args);this.el.addEventListener("click",this.prevDef,true);return this}})},function(module,exports,__webpack_require__){"use strict";var Backbone=__webpack_require__(0);var ComponentView=__webpack_require__(20);module.exports=ComponentView.extend({tagName:"div",events:{},initialize:function initialize(o){ComponentView.prototype.initialize.apply(this,arguments);this.classEmpty=this.ppfx+"plh-map"},updateSrc:function updateSrc(){this.getIframe().src=this.model.get("src")},getIframe:function getIframe(){if(!this.iframe){var ifrm=document.createElement("iframe");ifrm.src=this.model.get("src");ifrm.frameBorder=0;ifrm.style.height="100%";ifrm.style.width="100%";ifrm.className=this.ppfx+"no-pointer";this.iframe=ifrm}return this.iframe},render:function render(){for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}ComponentView.prototype.render.apply(this,args);this.updateClasses();this.el.appendChild(this.getIframe());return this}})},function(module,exports,__webpack_require__){"use strict";var Backbone=__webpack_require__(0);var ComponentView=__webpack_require__(20);module.exports=ComponentView.extend({tagName:"script",events:{},render:function render(){var model=this.model;var src=model.get("src");var em=this.em;var scriptCount=em&&em.get("scriptCount")?em.get("scriptCount"):0;var content="";if(src){var onload=model.get("onload");var svar="script"+scriptCount;var svarNext="script"+(scriptCount+1);content="var "+svar+" = document.createElement('script');\n"+svar+".onload = function(){\n"+(onload?onload+"();\n":"")+"typeof "+svarNext+"Start == 'function' && "+svarNext+"Start();\n"+"};\n"+svar+".src = '"+src+"';\n"+"function "+svar+"Start() { document.body.appendChild("+svar+"); };\n"+(!scriptCount?svar+"Start();":"");if(em){em.set("scriptCount",scriptCount+1)}}else{content=model.get("content")}this.el.innerHTML=content;return this}})},function(module,exports,__webpack_require__){"use strict";var ComponentView=__webpack_require__(10);module.exports=ComponentView.extend({_createElement:function _createElement(tagName){return document.createElementNS("http://www.w3.org/2000/svg",tagName)}})},function(module,exports,__webpack_require__){"use strict";var Backbone=__webpack_require__(0);var ComponentView=__webpack_require__(10);module.exports=ComponentView.extend({})},function(module,exports,__webpack_require__){"use strict";var Backbone=__webpack_require__(0);var ComponentView=__webpack_require__(10);module.exports=ComponentView.extend({})},function(module,exports,__webpack_require__){"use strict";var Backbone=__webpack_require__(0);var ComponentView=__webpack_require__(10);module.exports=ComponentView.extend({events:{}})},function(module,exports,__webpack_require__){"use strict";var Backbone=__webpack_require__(0);module.exports=Backbone.View.extend({})},function(module,exports,__webpack_require__){"use strict";var Backbone=__webpack_require__(0);var ComponentView=__webpack_require__(20);module.exports=ComponentView.extend({tagName:"div",events:{},initialize:function initialize(o){ComponentView.prototype.initialize.apply(this,arguments);this.listenTo(this.model,"change:loop change:autoplay change:controls change:color",this.updateVideo);this.listenTo(this.model,"change:provider",this.updateProvider)},updateProvider:function updateProvider(){var prov=this.model.get("provider");this.el.innerHTML="";this.el.appendChild(this.renderByProvider(prov))},updateSrc:function updateSrc(){var prov=this.model.get("provider");var src=this.model.get("src");switch(prov){case"yt":src=this.model.getYoutubeSrc();break;case"vi":src=this.model.getVimeoSrc();break}this.videoEl.src=src},updateVideo:function updateVideo(){var prov=this.model.get("provider");var videoEl=this.videoEl;var md=this.model;switch(prov){case"yt":case"vi":this.model.trigger("change:videoId");break;default:videoEl.loop=md.get("loop");videoEl.autoplay=md.get("autoplay");videoEl.controls=md.get("controls")}},renderByProvider:function renderByProvider(prov){var videoEl;switch(prov){case"yt":videoEl=this.renderYoutube();break;case"vi":videoEl=this.renderVimeo();break;default:videoEl=this.renderSource()}this.videoEl=videoEl;return videoEl},renderSource:function renderSource(){var el=document.createElement("video");el.src=this.model.get("src");this.initVideoEl(el);return el},renderYoutube:function renderYoutube(){var el=document.createElement("iframe");el.src=this.model.getYoutubeSrc();el.frameBorder=0;el.setAttribute("allowfullscreen",true);
this.initVideoEl(el);return el},renderVimeo:function renderVimeo(){var el=document.createElement("iframe");el.src=this.model.getVimeoSrc();el.frameBorder=0;el.setAttribute("allowfullscreen",true);this.initVideoEl(el);return el},initVideoEl:function initVideoEl(el){el.className=this.ppfx+"no-pointer";el.style.height="100%";el.style.width="100%"},render:function render(){for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}ComponentView.prototype.render.apply(this,args);this.updateClasses();var prov=this.model.get("provider");this.el.appendChild(this.renderByProvider(prov));return this}})},function(module,exports,__webpack_require__){"use strict";var Backbone=__webpack_require__(0);module.exports=Backbone.View.extend({initialize:function initialize(o){this.opts=o||{};this.config=o.config||{};this.listenTo(this.collection,"add",this.addTo);this.listenTo(this.collection,"reset",this.render)},addTo:function addTo(model){var i=this.collection.indexOf(model);if(window.editor!==undefined){model.customid=model.cid+"_"+editor.md5prefix;console.error("ADDDDDDDDDED");console.error(model)}this.addToCollection(model,null,i);var em=this.config.em;if(em){em.trigger("add:component",model);em.trigger("component:add",model)}},addToCollection:function addToCollection(model,fragmentEl,index){if(!this.compView)this.compView=__webpack_require__(10);var fragment=fragmentEl||null,viewObject=this.compView;var dt=this.opts.defaultTypes;var ct=this.opts.componentTypes;var type=model.get("type");for(var it=0;it<dt.length;it++){var dtId=dt[it].id;if(dtId==type){viewObject=dt[it].view;break}}var view=new viewObject({model:model,config:this.config,defaultTypes:dt,componentTypes:ct});var rendered=view.render().el;if(view.model.get("type")=="textnode")rendered=document.createTextNode(view.model.get("content"));if(fragment){fragment.appendChild(rendered)}else{var p=this.$parent;var pc=p.children;if(typeof index!="undefined"){var method="before";if(pc&&p.children().length==index){index--;method="after"}if(index<0){p.append(rendered)}else{if(pc){p.children().eq(index)[method](rendered)}}}else{p.append(rendered)}}return rendered},render:function render($p){var fragment=document.createDocumentFragment();this.$parent=$p||this.$el;this.$el.empty();this.collection.each(function(model){this.addToCollection(model,fragment)},this);this.$el.append(fragment);return this}})},function(module,exports,__webpack_require__){"use strict";var Backbone=__webpack_require__(0);module.exports=Backbone.View.extend({events:{mousedown:"handleClick"},attributes:function attributes(){return this.model.get("attributes")},initialize:function initialize(opts){this.editor=opts.config.editor},handleClick:function handleClick(event){var opts={event:event};var command=this.model.get("command");if(typeof command==="function"){command(this.editor,null,opts)}if(typeof command==="string"){this.editor.runCommand(command,opts)}},render:function render(){var config=this.editor.getConfig();this.el.className+=" "+config.stylePrefix+"toolbar-item";return this}})},function(module,exports,__webpack_require__){"use strict";var Backbone=__webpack_require__(0);var DomainViews=__webpack_require__(43);var ToolbarButtonView=__webpack_require__(167);module.exports=DomainViews.extend({itemView:ToolbarButtonView,initialize:function initialize(opts){this.config={editor:opts.editor||""};this.listenTo(this.collection,"reset",this.render)}})},function(module,exports,__webpack_require__){"use strict";(function(_){var Backbone=__webpack_require__(0);module.exports=Backbone.View.extend({events:{change:"handleChange"},template:_.template("<span class='<%= holderClass %>'></span>"),initialize:function initialize(opts){var opt=opts||{};var ppfx=opt.ppfx||"";this.target=opt.target||{};this.inputClass=ppfx+"field";this.inputHolderClass=ppfx+"input-holder";this.ppfx=ppfx;this.listenTo(this.model,"change:value",this.handleModelChange)},handleChange:function handleChange(e){e.stopPropagation();this.setValue(this.getInputEl().value)},setValue:function setValue(value,opts){var opt=opts||{};var model=this.model;model.set({value:value||model.get("defaults")},opt);if(opt.silent){this.handleModelChange()}},handleModelChange:function handleModelChange(){this.getInputEl().value=this.model.get("value")},getInputEl:function getInputEl(){if(!this.inputEl){this.inputEl=$("<input>",{type:"text","class":this.inputCls,placeholder:this.model.get("defaults")})}return this.inputEl.get(0)},render:function render(){var el=this.$el;el.addClass(this.inputClass);el.html(this.template({holderClass:this.inputHolderClass,ppfx:this.ppfx}));el.find("."+this.inputHolderClass).html(this.getInputEl());return this}})}).call(exports,__webpack_require__(1))},function(module,exports,__webpack_require__){"use strict";var blkStyle='.blk-row::after{ content: ""; clear: both; display: block;} .blk-row{padding: 10px;}';module.exports={stylePrefix:"gjs-",components:"",copyPaste:true,noticeOnUnload:true,undoManager:true,showOffsets:false,locationprefix:"",showOffsetsSelected:false,clearOnRender:false,jsInHtml:true,forceClass:true,height:"900px",width:"100%",protectedCss:"",canvasCss:"",defaultCommand:"select-comp",showToolbar:1,allowScripts:0,showDevices:1,devicePreviewMode:0,loadCompsOnRender:1,el:"",assetManager:{},fileManager:{},canvas:{},layers:{},storageManager:{},rte:{},domComponents:{},modal:{},codeManager:{},panels:{},commands:{},cssComposer:{},selectorManager:{},deviceManager:{devices:[{name:"Desktop",width:""},{name:"Tablet",width:"992px"},{name:"Mobile landscape",width:"768px"},{name:"Mobile portrait",width:"480px"}]},hugoManager:{},styleManager:{sectors:[{name:"General",open:false,buildProps:["float","display","position","top","right","left","bottom"]},{name:"Dimension",open:false,buildProps:["width","height","max-width","min-height","margin","padding"]},{name:"Typography",open:false,buildProps:["font-family","font-size","font-weight","letter-spacing","color","line-height","text-align","text-shadow"],properties:[{property:"text-align",list:[{value:"left",className:"fa fa-align-left"},{value:"center",className:"fa fa-align-center"},{value:"right",className:"fa fa-align-right"},{value:"justify",className:"fa fa-align-justify"}]}]},{name:"Decorations",open:false,buildProps:["border-radius-c","background-color","border-radius","border","box-shadow","background"]},{name:"Extra",open:false,buildProps:["transition","perspective","transform"]}]},pageManager:{blocks:[{id:"create",label:"Create Html Page",category:"Pages",command:"create-file",attributes:{"class":"gjs-block-category"}},{id:"create",label:"Not yet implemented",category:"Dynamic Blocks",command:"create-partialfile",attributes:{"class":"gjs-block-category"}}]},blockManager:{}}},function(module,exports,__webpack_require__){"use strict";var _typeof=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(obj){return typeof obj}:function(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj};module.exports=function(config){var c=config||{},defaults=__webpack_require__(170),EditorModel=__webpack_require__(172),MD5Model=__webpack_require__(173),EditorView=__webpack_require__(174);for(var name in defaults){if(!(name in c))c[name]=defaults[name]}c.pStylePrefix=c.stylePrefix;var em=new EditorModel(c);var editorView=new EditorView({model:em,config:c});return{editor:em,md5:MD5Model,md5prefix:MD5Model(window.location.pathname).substring(0,5),DomComponents:em.get("DomComponents"),CssComposer:em.get("CssComposer"),StorageManager:em.get("StorageManager"),AssetManager:em.get("AssetManager"),FileManager:em.get("FileManager"),BlockManager:em.get("BlockManager"),PageManager:em.get("PageManager"),TraitManager:em.get("TraitManager"),SelectorManager:em.get("SelectorManager"),CodeManager:em.get("CodeManager"),Commands:em.get("Commands"),Modal:em.get("Modal"),Panels:em.get("Panels"),StyleManager:em.get("StyleManager"),Canvas:em.get("Canvas"),Leftmenu:em.get("Leftmenu"),UndoManager:em.get("UndoManager"),DeviceManager:em.get("DeviceManager"),HugoManager:em.get("HugoManager"),RichTextEditor:em.get("rte"),Utils:em.get("Utils"),Config:em.get("Config"),init:function init(){em.init(this);return this},getConfig:function getConfig(){return c},getHtml:function getHtml(){return em.getHtml()},getHead:function getHead(){console.error("EM:");console.error(em);return em.getHead()},getCss:function getCss(){return em.getCss()},getJs:function getJs(){return em.getJs()},getComponents:function getComponents(){return em.get("DomComponents").getComponents()},getHeadComponents:function getHeadComponents(){return em.get("DomComponents").getHeadComponents()},setComponents:function setComponents(components){em.setComponents(components);return this},setComponentsOrig:function setComponentsOrig(components){DomComponents.setComponentsOrig(components);return this},setHeadComponents:function setHeadComponents(components){em.setHeadComponents(components);return this},setHeadComponentsOrig:function setHeadComponentsOrig(components){DomComponents.setHeadComponentsOrig(components);return this},addComponents:function addComponents(components){return this.getComponents().add(components)},getStyle:function getStyle(){return em.get("CssComposer").getAll()},setStyle:function setStyle(style){em.setStyle(style);return this},getSelected:function getSelected(){return em.getSelected()},setDevice:function setDevice(name){return em.set("device",name)},getDevice:function getDevice(){return em.get("device")},runCommand:function runCommand(id,options){var result;var command=em.get("Commands").get(id);if(command){result=command.run(this,this,options);this.trigger("run:"+id)}return result},stopCommand:function stopCommand(id,options){var result;var command=em.get("Commands").get(id);if(command){result=command.stop(this,this,options);this.trigger("stop:"+id)}return result},store:function store(clb){return em.store(clb)},load:function load(){return em.load()},getContainer:function getContainer(){return c.el},refresh:function refresh(){em.refreshCanvas()},setCustomRte:function setCustomRte(obj){this.RichTextEditor.customRte=obj},on:function on(event,callback){return em.on(event,callback)},trigger:function trigger(event){return em.trigger(event)},getEl:function getEl(){return editorView.el},getModel:function getModel(){return em},getParameterByName:function getParameterByName(name,url){if(!url)url=window.location.href;name=name.replace(/[\[\]]/g,"\\$&");var regex=new RegExp("[?&]"+name+"(=([^&#]*)|&|#|$)"),results=regex.exec(url);if(!results)return null;if(!results[2])return"";return decodeURIComponent(results[2].replace(/\+/g," "))},afterLoaded:function afterLoaded(){console.log("window url is");console.log("window url is");console.log("window url is");console.log("window url is");console.log("window url is");console.log("window url is");console.log("window url is");console.log("window url is");console.log("window url is");console.log("window url is");console.log("window url is");console.log("window url is");console.log(window.location);console.log(this.getParameterByName("staticBlock"));if(this.getParameterByName("staticBlock")!==undefined){var staticBlock=this.getParameterByName("staticBlock");var allObj=this.PageManager.getAll().models;var allLen=allObj.length;for(var i=0;i<allLen;i++){if(allObj[i].get("ref")===staticBlock){console.log("GOT IT");console.log(allObj[i]);var commands=this.Commands;var commandName=allObj[i].get("command");var command;if(commands&&typeof commandName==="string"){command=commands.get(commandName)}else if(commandName!==null&&(typeof commandName==="undefined"?"undefined":_typeof(commandName))==="object"){command=commandName}else if(typeof commandName==="function"){command={run:commandName}}command.run(this,allObj[i],allObj[i].get("options"));this.trigger("run:"+commandName);return}}}},render:function render(){var tmp=editorView.render().el;window.editorInitialized=true;console.error("COP1");em.get("DomComponents").setComponentOrig(this.getComponents());em.get("DomComponents").setHeadComponentOrig(this.getHeadComponents())}}}},function(module,exports,__webpack_require__){"use strict";var deps=[__webpack_require__(258),__webpack_require__(227),__webpack_require__(139),__webpack_require__(183),__webpack_require__(210),__webpack_require__(223),__webpack_require__(190),__webpack_require__(104),__webpack_require__(204),__webpack_require__(216),__webpack_require__(55),__webpack_require__(84),__webpack_require__(176),__webpack_require__(134),__webpack_require__(144),__webpack_require__(186),__webpack_require__(98),__webpack_require__(112),__webpack_require__(90),__webpack_require__(196),__webpack_require__(247)];var Backbone=__webpack_require__(0);var UndoManager=__webpack_require__(259);var key=__webpack_require__(63);module.exports=Backbone.Model.extend({defaults:{clipboard:null,designerMode:false,selectedComponent:null,previousModel:null,changesCount:0,storables:[],toLoad:[],opened:{},device:""},initialize:function initialize(c){this.config=c;this.set("Config",c);if(c.el&&c.fromElement)this.config.components=c.el.innerHTML;deps.forEach(function(name){this.loadModule(name)},this);this.get("toLoad").forEach(function(M){M.onLoad()});this.initUndoManager();this.on("change:selectedComponent",this.componentSelected,this);this.on("change:changesCount",this.updateBeforeUnload,this)},updateBeforeUnload:function updateBeforeUnload(){var changes=this.get("changesCount");if(this.config.noticeOnUnload&&changes){window.onbeforeunload=function(e){return 1}}else{window.onbeforeunload=null}},loadModule:function loadModule(moduleName){var c=this.config;var M=new moduleName;var name=M.name.charAt(0).toLowerCase()+M.name.slice(1);var cfg=c[name]||c[M.name]||{};cfg.pStylePrefix=c.pStylePrefix||"";var sm=this.get("StorageManager");if(M.storageKey&&M.store&&M.load&&sm){cfg.stm=sm;var storables=this.get("storables");storables.push(M);this.set("storables",storables)}cfg.em=this;M.init(Object.create(cfg));if(!M.private)this.set(M.name,M);if(M.onLoad)this.get("toLoad").push(M);return this},init:function init(editor){this.set("Editor",editor)},listenRules:function listenRules(collection){this.stopListening(collection,"add remove",this.listenRule);this.listenTo(collection,"add remove",this.listenRule);collection.each(function(model){this.listenRule(model)},this)},listenRule:function listenRule(model){this.stopListening(model,"change:style",this.ruleUpdated);this.listenTo(model,"change:style",this.ruleUpdated)},ruleUpdated:function ruleUpdated(model,val,opt){var count=this.get("changesCount")+1,avSt=opt?opt.avoidStore:0;this.set("changesCount",count);var stm=this.get("StorageManager");if(stm.isAutosave()&&count<stm.getStepsBeforeSave())return;if(!avSt){this.store()}},initUndoManager:function initUndoManager(){if(this.um)return;var cmp=this.get("DomComponents");if(cmp&&this.config.undoManager){var that=this;this.um=new UndoManager({register:[cmp.getComponents(),this.get("CssComposer").getAll()],track:true});this.UndoManager=this.um;this.set("UndoManager",this.um);key("⌘+z, ctrl+z",function(){that.um.undo(true);that.trigger("component:update")});key("⌘+shift+z, ctrl+shift+z",function(){that.um.redo(true);that.trigger("component:update")});UndoManager.removeUndoType("change");var beforeCache;UndoManager.addUndoType("change:style",{on:function on(model,value,opts){var opt=opts||{};if(!beforeCache){beforeCache=model.previousAttributes()}if(opt&&opt.avoidStore){return}else{var obj={object:model,before:beforeCache,after:model.toJSON()};beforeCache=null;return obj}},undo:function undo(model,bf,af,opt){model.set(bf);that.trigger("change:selectedComponent")},redo:function redo(model,bf,af,opt){model.set(af);that.trigger("change:selectedComponent")}})}},componentsUpdated:function componentsUpdated(model,val,opt){var updatedCount=this.get("changesCount")+1,avSt=opt?opt.avoidStore:0;console.error("t changes count"+updatedCount+" for ");console.error(model);console.error(val);console.error(this);if(model!=undefined){model.set("changesCount",updatedCount)}else{}this.set("changesCount",updatedCount);var stm=this.get("StorageManager");if(stm.isAutosave()&&updatedCount<stm.getStepsBeforeSave()){return}if(!avSt){this.store()}},componentSelected:function componentSelected(model,val,options){if(!this.get("selectedComponent"))this.trigger("deselect-comp");else this.trigger("select-comp",[model,val,options])},updateComponents:function updateComponents(model,val,opt){var comps=model.get("components"),classes=model.get("classes"),avSt=opt?opt.avoidStore:0;if(this.um)this.um.register(comps);this.stopListening(comps,"add",this.updateComponents);this.stopListening(comps,"remove",this.rmComponents);this.listenTo(comps,"add",this.updateComponents);this.listenTo(comps,"remove",this.rmComponents);this.stopListening(classes,"add remove",this.componentsUpdated);this.listenTo(classes,"add remove",this.componentsUpdated);var evn="change:style change:content";this.stopListening(model,evn,this.componentsUpdated);this.listenTo(model,evn,this.componentsUpdated);if(!avSt)this.componentsUpdated();if(window.editorInitialized!==undefined){console.log("BB");if(window.editorInitialized==true){console.log("EE");try{jflsdjf()}catch(ew){console.error(ew.stack)}model.set("createdComponent",1);model.set("updatedCount",1)}}},initChildrenComp:function initChildrenComp(model){var comps=model.get("components");this.updateComponents(model,null,{avoidStore:1});comps.each(function(md){this.initChildrenComp(md);if(this.um)this.um.register(md)},this)},rmComponents:function rmComponents(model,val,opt){var avSt=opt?opt.avoidStore:0;var cmp=this.get("DomComponents");if(!avSt)this.componentsUpdated()},getSelected:function getSelected(){return this.get("selectedComponent")},setComponents:function setComponents(components){return this.get("DomComponents").setComponents(components)},getComponents:function getComponents(){var cmp=this.get("DomComponents");var cm=this.get("CodeManager");if(!cmp||!cm)return;var wrp=cmp.getComponents();return cm.getCode(wrp,"json")},setHeadComponents:function setHeadComponents(components){return this.get("DomComponents").setHeadComponents(components)},getHeadComponents:function getHeadComponents(){var cmp=this.get("DomComponents");var cm=this.get("CodeManager");if(!cmp||!cm)return;var wrp=cmp.getHeadComponents();return cm.getCode(wrp,"json")},setStyle:function setStyle(style){var rules=this.get("CssComposer").getAll();for(var i=0,len=rules.length;i<len;i++){rules.pop()}rules.add(style);return this},getStyle:function getStyle(){return this.get("CssComposer").getAll()},getHtml:function getHtml(){var js=this.config.jsInHtml?this.getJs():"";var wrp=this.get("DomComponents").getComponent();var html=this.get("CodeManager").getCode(wrp,"html");html+=js?"<script>"+js+"</script>":"";return html},getHead:function getHead(){var js="";var wrp=this.get("DomComponents").getHeadComponents();var html=this.get("CodeManager").getCode(wrp,"html");html+=js?"<script>"+js+"</script>":"";return html},getCss:function getCss(){var cssc=this.get("CssComposer");var wrp=this.get("DomComponents").getComponent();var protCss=this.config.protectedCss;return protCss+this.get("CodeManager").getCode(wrp,"css",cssc)},getJs:function getJs(){var wrp=this.get("DomComponents").getWrapper();return this.get("CodeManager").getCode(wrp,"js").trim()},store:function store(clb){var sm=this.get("StorageManager");var store={};if(!sm)return;this.get("storables").forEach(function(m){var obj=m.store(1);for(var el in obj){store[el]=obj[el]}});sm.store(store,clb);this.set("changesCount",0);this.trigger("storage:store",store);return store},load:function load(clb){var result=this.getCacheLoad(1);this.get("storables").forEach(function(m){m.load(result)});return result},getCacheLoad:function getCacheLoad(force){var f=force?1:0;if(this.cacheLoad&&!f)return this.cacheLoad;var sm=this.get("StorageManager");var load=[];if(!sm)return{};this.get("storables").forEach(function(m){var key=m.storageKey;key=typeof key==="function"?key():key;var keys=key instanceof Array?key:[key];keys.forEach(function(k){load.push(k)})});this.cacheLoad=sm.load(load);this.trigger("storage:load",this.cacheLoad);return this.cacheLoad},getDeviceModel:function getDeviceModel(){var name=this.get("device");return this.get("DeviceManager").get(name)},runDefault:function runDefault(){var command=this.get("Commands").get(this.config.defaultCommand);if(!command||this.defaultRunning)return;command.stop(this,this);command.run(this,this);this.defaultRunning=1},stopDefault:function stopDefault(){var command=this.get("Commands").get(this.config.defaultCommand);if(!command)return;command.stop(this,this);this.defaultRunning=0},refreshCanvas:function refreshCanvas(){this.set("canvasOffset",this.get("Canvas").getOffset())},clearSelection:function clearSelection(win){var w=win||window;w.getSelection().removeAllRanges()}})},function(module,exports,__webpack_require__){"use strict";module.exports=function(string){function RotateLeft(lValue,iShiftBits){return lValue<<iShiftBits|lValue>>>32-iShiftBits}function AddUnsigned(lX,lY){var lX4,lY4,lX8,lY8,lResult;lX8=lX&2147483648;lY8=lY&2147483648;lX4=lX&1073741824;lY4=lY&1073741824;lResult=(lX&1073741823)+(lY&1073741823);if(lX4&lY4){return lResult^2147483648^lX8^lY8}if(lX4|lY4){if(lResult&1073741824){return lResult^3221225472^lX8^lY8}else{return lResult^1073741824^lX8^lY8}}else{return lResult^lX8^lY8}}function F(x,y,z){return x&y|~x&z}function G(x,y,z){return x&z|y&~z}function H(x,y,z){return x^y^z}function I(x,y,z){return y^(x|~z)}function FF(a,b,c,d,x,s,ac){a=AddUnsigned(a,AddUnsigned(AddUnsigned(F(b,c,d),x),ac));return AddUnsigned(RotateLeft(a,s),b)}function GG(a,b,c,d,x,s,ac){a=AddUnsigned(a,AddUnsigned(AddUnsigned(G(b,c,d),x),ac));return AddUnsigned(RotateLeft(a,s),b)}function HH(a,b,c,d,x,s,ac){a=AddUnsigned(a,AddUnsigned(AddUnsigned(H(b,c,d),x),ac));return AddUnsigned(RotateLeft(a,s),b)}function II(a,b,c,d,x,s,ac){a=AddUnsigned(a,AddUnsigned(AddUnsigned(I(b,c,d),x),ac));return AddUnsigned(RotateLeft(a,s),b)}function ConvertToWordArray(string){var lWordCount;var lMessageLength=string.length;var lNumberOfWords_temp1=lMessageLength+8;var lNumberOfWords_temp2=(lNumberOfWords_temp1-lNumberOfWords_temp1%64)/64;var lNumberOfWords=(lNumberOfWords_temp2+1)*16;var lWordArray=Array(lNumberOfWords-1);var lBytePosition=0;var lByteCount=0;while(lByteCount<lMessageLength){lWordCount=(lByteCount-lByteCount%4)/4;lBytePosition=lByteCount%4*8;lWordArray[lWordCount]=lWordArray[lWordCount]|string.charCodeAt(lByteCount)<<lBytePosition;lByteCount++}lWordCount=(lByteCount-lByteCount%4)/4;lBytePosition=lByteCount%4*8;lWordArray[lWordCount]=lWordArray[lWordCount]|128<<lBytePosition;lWordArray[lNumberOfWords-2]=lMessageLength<<3;lWordArray[lNumberOfWords-1]=lMessageLength>>>29;return lWordArray}function WordToHex(lValue){var WordToHexValue="",WordToHexValue_temp="",lByte,lCount;for(lCount=0;lCount<=3;lCount++){lByte=lValue>>>lCount*8&255;WordToHexValue_temp="0"+lByte.toString(16);WordToHexValue=WordToHexValue+WordToHexValue_temp.substr(WordToHexValue_temp.length-2,2)}return WordToHexValue}function Utf8Encode(string){string=string.replace(/\r\n/g,"\n");var utftext="";for(var n=0;n<string.length;n++){var c=string.charCodeAt(n);if(c<128){utftext+=String.fromCharCode(c)}else if(c>127&&c<2048){utftext+=String.fromCharCode(c>>6|192);utftext+=String.fromCharCode(c&63|128)}else{utftext+=String.fromCharCode(c>>12|224);utftext+=String.fromCharCode(c>>6&63|128);utftext+=String.fromCharCode(c&63|128)}}return utftext}var x=Array();var k,AA,BB,CC,DD,a,b,c,d;var S11=7,S12=12,S13=17,S14=22;var S21=5,S22=9,S23=14,S24=20;var S31=4,S32=11,S33=16,S34=23;var S41=6,S42=10,S43=15,S44=21;string=Utf8Encode(string);x=ConvertToWordArray(string);a=1732584193;b=4023233417;c=2562383102;d=271733878;for(k=0;k<x.length;k+=16){AA=a;BB=b;CC=c;DD=d;a=FF(a,b,c,d,x[k+0],S11,3614090360);d=FF(d,a,b,c,x[k+1],S12,3905402710);c=FF(c,d,a,b,x[k+2],S13,606105819);b=FF(b,c,d,a,x[k+3],S14,3250441966);a=FF(a,b,c,d,x[k+4],S11,4118548399);d=FF(d,a,b,c,x[k+5],S12,1200080426);c=FF(c,d,a,b,x[k+6],S13,2821735955);b=FF(b,c,d,a,x[k+7],S14,4249261313);a=FF(a,b,c,d,x[k+8],S11,1770035416);d=FF(d,a,b,c,x[k+9],S12,2336552879);c=FF(c,d,a,b,x[k+10],S13,4294925233);b=FF(b,c,d,a,x[k+11],S14,2304563134);a=FF(a,b,c,d,x[k+12],S11,1804603682);d=FF(d,a,b,c,x[k+13],S12,4254626195);c=FF(c,d,a,b,x[k+14],S13,2792965006);b=FF(b,c,d,a,x[k+15],S14,1236535329);a=GG(a,b,c,d,x[k+1],S21,4129170786);d=GG(d,a,b,c,x[k+6],S22,3225465664);c=GG(c,d,a,b,x[k+11],S23,643717713);b=GG(b,c,d,a,x[k+0],S24,3921069994);a=GG(a,b,c,d,x[k+5],S21,3593408605);d=GG(d,a,b,c,x[k+10],S22,38016083);c=GG(c,d,a,b,x[k+15],S23,3634488961);b=GG(b,c,d,a,x[k+4],S24,3889429448);a=GG(a,b,c,d,x[k+9],S21,568446438);d=GG(d,a,b,c,x[k+14],S22,3275163606);c=GG(c,d,a,b,x[k+3],S23,4107603335);b=GG(b,c,d,a,x[k+8],S24,1163531501);a=GG(a,b,c,d,x[k+13],S21,2850285829);d=GG(d,a,b,c,x[k+2],S22,4243563512);c=GG(c,d,a,b,x[k+7],S23,1735328473);b=GG(b,c,d,a,x[k+12],S24,2368359562);a=HH(a,b,c,d,x[k+5],S31,4294588738);d=HH(d,a,b,c,x[k+8],S32,2272392833);c=HH(c,d,a,b,x[k+11],S33,1839030562);b=HH(b,c,d,a,x[k+14],S34,4259657740);a=HH(a,b,c,d,x[k+1],S31,2763975236);d=HH(d,a,b,c,x[k+4],S32,1272893353);c=HH(c,d,a,b,x[k+7],S33,4139469664);b=HH(b,c,d,a,x[k+10],S34,3200236656);a=HH(a,b,c,d,x[k+13],S31,681279174);d=HH(d,a,b,c,x[k+0],S32,3936430074);c=HH(c,d,a,b,x[k+3],S33,3572445317);b=HH(b,c,d,a,x[k+6],S34,76029189);a=HH(a,b,c,d,x[k+9],S31,3654602809);d=HH(d,a,b,c,x[k+12],S32,3873151461);c=HH(c,d,a,b,x[k+15],S33,530742520);b=HH(b,c,d,a,x[k+2],S34,3299628645);a=II(a,b,c,d,x[k+0],S41,4096336452);d=II(d,a,b,c,x[k+7],S42,1126891415);c=II(c,d,a,b,x[k+14],S43,2878612391);b=II(b,c,d,a,x[k+5],S44,4237533241);a=II(a,b,c,d,x[k+12],S41,1700485571);d=II(d,a,b,c,x[k+3],S42,2399980690);c=II(c,d,a,b,x[k+10],S43,4293915773);b=II(b,c,d,a,x[k+1],S44,2240044497);a=II(a,b,c,d,x[k+8],S41,1873313359);d=II(d,a,b,c,x[k+15],S42,4264355552);c=II(c,d,a,b,x[k+6],S43,2734768916);b=II(b,c,d,a,x[k+13],S44,1309151649);a=II(a,b,c,d,x[k+4],S41,4149444226);d=II(d,a,b,c,x[k+11],S42,3174756917);c=II(c,d,a,b,x[k+2],S43,718787259);b=II(b,c,d,a,x[k+9],S44,3951481745);a=AddUnsigned(a,AA);b=AddUnsigned(b,BB);c=AddUnsigned(c,CC);d=AddUnsigned(d,DD)}var temp=WordToHex(a)+WordToHex(b)+WordToHex(c)+WordToHex(d);return temp.toLowerCase()}},function(module,exports,__webpack_require__){"use strict";var Backbone=__webpack_require__(0);module.exports=Backbone.View.extend({initialize:function initialize(){this.pn=this.model.get("Panels");this.conf=this.model.config;this.className=this.conf.stylePrefix+"editor";this.model.on("loaded",function(){this.pn.active();this.model.runDefault();this.model.trigger("load")},this)},render:function render(){var model=this.model;var um=model.get("UndoManager");var dComps=model.get("DomComponents");var config=model.get("Config");if(config.loadCompsOnRender){if(config.clearOnRender){dComps.clear()}console.error("GOT CONFIG OCMONENTS?");console.error(config.components);dComps.getComponents().add(config.components);dComps.getHeadComponents().add(config.headers);um.clear();dComps.onLoad()}var conf=this.conf;var contEl=$(conf.el||"body "+conf.container);this.$el.empty();if(conf.width)contEl.css("width",conf.width);if(conf.height)contEl.css("height",conf.height);this.$el.append(model.get("Canvas").render());var styles=document.createElement("link");styles.rel="stylesheet";styles.type="text/css";styles.media="screen";styles.href=model.get("locationprefix")+"/css/grapes.min.css";this.$el.append(styles);this.$el.append(this.pn.render());this.$el.attr("class",this.className);contEl.addClass(conf.stylePrefix+"editor-cont");contEl.html(this.$el);return this}})},function(module,exports,__webpack_require__){"use strict";module.exports={assets:[],stylePrefix:"am-",upload:"/api/fileupload",uploadText:"Drop files here or click to upload",addBtnText:"Create file"}},function(module,exports,__webpack_require__){"use strict";module.exports=function(){var c={},Assets=__webpack_require__(178),AssetsView=__webpack_require__(179),assets,am,fu;return{name:"FileManager",storageKey:"assets",init:function init(config){c=config||{};var defaults=__webpack_require__(175);for(var name in defaults){if(!(name in c))c[name]=defaults[name]}var ppfx=c.pStylePrefix;if(ppfx)c.stylePrefix=ppfx+c.stylePrefix;assets=new Assets(c.assets);var obj={collection:assets,config:c};am=new AssetsView(obj);return this},add:function add(asset){return assets.add(asset)},get:function get(src){return assets.where({src:src})[0]},getAll:function getAll(){return assets},remove:function remove(src){var asset=this.get(src);this.getAll().remove(asset);return this},store:function store(noStore){var obj={};var assets=JSON.stringify(this.getAll().toJSON());obj[this.storageKey]=assets;if(!noStore&&c.stm)c.stm.store(obj);return obj},load:function load(data){var d=data||"";var name=this.storageKey;if(!d&&c.stm)d=c.stm.load(name);var assets=[];try{assets=JSON.parse(d[name])}catch(err){}this.getAll().add(assets);return assets},render:function render(f){if(!this.rendered||f){this.rendered=am.render().$el}return this.rendered},setTarget:function setTarget(m){am.collection.target=m},onSelect:function onSelect(f){am.collection.onSelect=f},onClick:function onClick(func){c.onClick=func},onDblClick:function onDblClick(func){c.onDblClick=func}}}},function(module,exports,__webpack_require__){"use strict";(function(_){var Backbone=__webpack_require__(0);var Asset=__webpack_require__(44);module.exports=Asset.extend({defaults:_.extend({},Asset.prototype.defaults,{type:"image",unitDim:"px",height:0,width:0})})}).call(exports,__webpack_require__(1))},function(module,exports,__webpack_require__){"use strict";var Backbone=__webpack_require__(0);var Asset=__webpack_require__(44);var AssetImage=__webpack_require__(177);module.exports=Backbone.Collection.extend({model:AssetImage,initialize:function initialize(models,opt){this.model=function(attrs,options){var model;switch(attrs.type){default:model=new AssetImage(attrs,options)}return model}},addImg:function addImg(url,opts){console.error("ADD RECEIVED");console.error(url);this.add({type:"image",src:url},opts);return this},add:function add(models,opt){var mods=[];models=models instanceof Array?models:[models];for(var i=0,len=models.length;i<len;i++){var model=models[i];if(typeof model==="string")model={src:model,type:"image"};if(!model||!model.src)continue;var found=this.where({src:model.src});if(!found.length)mods.push(model)}if(mods.length==1)mods=mods[0];return Backbone.Collection.prototype.add.apply(this,[mods,opt])}})},function(module,exports,__webpack_require__){"use strict";(function(_){var Backbone=__webpack_require__(0);var assetsTemplate='\n<div class="<%= pfx %>files-cont">\n  <div class="<%= pfx %>assets-header">\n    <form class="<%= pfx %>add-asset">\n      <div class="<%= ppfx %>label">Page title</div>\n      <br/>\n      <div class="<%= ppfx %>field <%= pfx %>add-field">\n        <input name="title" placeholder="Insert page title here"/>\n      </div>\n      <br/>\n      <br/>&nbsp;<br/>\n      <div class="<%= ppfx %>label">Filename</div>\n      <div class="<%= ppfx %>field <%= pfx %>add-field">\n        <input name="filename" placeholder="index.html"/>\n      </div>\n      <button class="<%= ppfx %>btn-prim"><%= btnText %></button>\n      <div style="clear:both"></div>\n    </form>\n    <div class="<%= pfx %>dips" style="display:none">\n      <button class="fa fa-th <%= ppfx %>btnt"></button>\n      <button class="fa fa-th-list <%= ppfx %>btnt"></button>\n    </div>\n  </div>\n  <div class="<%= pfx %>assets"></div>\n  <div style="clear:both"></div>\n</div>\n\n';module.exports=Backbone.View.extend({template:_.template(assetsTemplate),initialize:function initialize(o){this.options=o;this.config=o.config;this.pfx=this.config.stylePrefix||"";this.ppfx=this.config.pStylePrefix||"";this.listenTo(this.collection,"add",this.addToAsset);
this.listenTo(this.collection,"deselectAll",this.deselectAll);this.className=this.pfx+"assets";this.events={};this.events.submit="addFromStr";this.delegateEvents()},addFromStr:function addFromStr(e){console.error("ADD FROM STR");e.preventDefault();var title=this.getTitle();var input=this.getInputUrl();var url=input.value.trim();var titleStr=title.value.trim();if(!url)return;this.createFile(url,{title:titleStr});input.value="";title.value="";return this},createFile:function createFile(filetmp,opts){console.error("Received createFile for file :"+filetmp);console.error(opts);var file=filetmp;var ctr=0;while(filetmp[ctr++]=="/"){file=filetmp.substring(1)}console.error("Post data");console.error(postData);var postData={filename:file,headers:opts};$("#cms-save").text("Saving");$("#cms-save").prop("disabled",true);$.ajax({url:this.config.upload,type:"POST",data:JSON.stringify(postData),beforeSend:this.config.beforeSend,complete:this.config.onComplete,xhrFields:{onprogress:function onprogress(e){if(e.lengthComputable){}},onload:function onload(e){}},cache:false,contentType:"application/json",processData:false}).done(function(data){$("#cms-save").text("Reloading Page");$("#cms-save").prop("disabled",true);setTimeout(function(){window.location.href="/"+file},2e3)}).always(function(){$("#cms-save").text("Save");$("#cms-save").prop("disabled",false)})},getAssetsEl:function getAssetsEl(){this.assets=this.el.querySelector("."+this.pfx+"assets");return this.assets},getInputUrl:function getInputUrl(){if(!this.inputUrl||!this.inputUrl.value)this.inputUrl=this.el.querySelector("."+this.pfx+"add-asset input[name=filename]");return this.inputUrl},getTitle:function getTitle(){if(!this.title||!this.title.value)this.title=this.el.querySelector("."+this.pfx+"add-asset input[name=title]");return this.title},addToAsset:function addToAsset(model){this.addAsset(model)},addAsset:function addAsset(model,fragmentEl){console.log("add asset test");return null},deselectAll:function deselectAll(){this.$el.find("."+this.pfx+"highlight").removeClass(this.pfx+"highlight")},render:function render(){var fragment=document.createDocumentFragment();this.$el.empty();this.collection.each(function(model){this.addAsset(model,fragment)},this);this.$el.html(this.template({pfx:this.pfx,ppfx:this.ppfx,btnText:this.config.addBtnText}));this.$el.find("."+this.pfx+"assets").append(fragment);return this}})}).call(exports,__webpack_require__(1))},function(module,exports,__webpack_require__){"use strict";module.exports={autorender:1,container:"",components:"",style:"",fromElement:0,copyPaste:true,undoManager:true,storageManager:{},plugins:[],pluginsOpts:{}}},function(module,exports,__webpack_require__){"use strict";module.exports=function(config){var c=config||{},defaults=__webpack_require__(180),Editor=__webpack_require__(171),PluginManager=__webpack_require__(214);var plugins=new PluginManager;var editors=[];return{editors:editors,plugins:plugins,init:function init(config){var c=config||{};var els=c.container;for(var name in defaults){if(!(name in c))c[name]=defaults[name]}if(!els)throw new Error("'container' is required");c.el=document.querySelector(els);var editor=new Editor(c).init();var plugs=plugins.getAll();for(var id in plugs){if(c.plugins.indexOf(id)<0)continue;var opts=c.pluginsOpts[id]||{};var plug=plugins.get(id);plug(editor,opts)}if(c.autorender)editor.render();editors.push(editor);return editor}}}()},function(module,exports,__webpack_require__){"use strict";module.exports={saveLabel:"Save",fileupdate:"/api/fileupdate"}},function(module,exports,__webpack_require__){"use strict";module.exports=function(){var c={},defaults=__webpack_require__(182),HugoView=__webpack_require__(184);var view;return{name:"HugoManager",init:function init(config){console.error("a1");c=config||{};try{for(var name in defaults){if(!(name in c))c[name]=defaults[name]}view=new HugoView({config:c})}catch(ee){console.error(ee.stack)}return this},add:function add(name,width,opts){var obj=opts||{};console.log("get add?");return null},get:function get(name){console.log("get name");return name},getAll:function getAll(){console.log("get all");return null},render:function render(){console.log("render here");return view.render().el}}}},function(module,exports,__webpack_require__){"use strict";(function(_){var Backbone=__webpack_require__(0);module.exports=Backbone.View.extend({template:_.template('\n    <div class="<%= ppfx %>hugo-label"></div>\n    <button id=\'cms-save\' style="display:block" class="<%= ppfx %>add-trasp">Save</button>'),events:{click:"handleClick"},initialize:function initialize(o){this.config=o.config||{};this.em=this.config.em;this.ppfx=this.config.pStylePrefix||"";this.delegateEvents()},startAdd:function startAdd(){},handleClick:function handleClick(){var onClick=this.config.onClick;var model=this.model;$("#cms-save").text("Saving");$("#cms-save").prop("disabled",true);if(window.preventUpdates!==undefined){var headContent=editor.getHead();var htmlContent=editor.getHtml();var cssContent=editor.getCss();console.error("Will save of : "+window.window.preventUpdates.get("name"));this.updateCssFile(window.window.preventUpdates.get("name"),htmlContent,cssContent)}else{$("#cms-save").text("Save");$("#cms-save").prop("disabled",false);var headContent=editor.getHead();var htmlContent=editor.getHtml();var cssContent=editor.getCss();console.error(this);var lstModels=grapesjs.editors[0].DomComponents.getComponents().models;var len=lstModels.length;var modelsToSave=[];for(var i=0;i<len;i++){var modelTmp=lstModels[i];console.log("CREATED?");modelTmp.get("createdComponent");if(modelTmp.get("changesCount")>0){console.log("Model "+modelTmp.cid+" was updated. Will save.");modelsToSave.push(modelTmp)}}this.updateStaticFile(window.location.pathname,headContent,htmlContent,cssContent)}},updateStaticFile:function updateStaticFile(filetmp,headContent,htmlContent,cssContent){console.error("Received saveStaticFile for file :"+filetmp);var isOk=false;var file=filetmp;var ctr=0;while(filetmp[ctr++]=="/"){file=filetmp.substring(1)}console.error("Update Static data.");var postData={filename:file,head:headContent,html:htmlContent,css:cssContent,type:"static_html"};console.error(postData);$.ajax({url:this.config.fileupdate,type:"POST",data:JSON.stringify(postData),beforeSend:this.config.beforeSend,complete:function complete(e){},xhrFields:{onprogress:function onprogress(e){if(e.lengthComputable){}},onload:function onload(e){}},cache:false,contentType:"application/json",processData:false}).done(function(data){isOk=true;$("#cms-save").text("Reloading...");$("#cms-save").prop("disabled",true);setTimeout(function(){window.location.href=window.location.href},2e3)}).always(function(){if(!isOk){$("#cms-save").text("Save");$("#cms-save").prop("disabled",false)}})},updateCssFile:function updateCssFile(filetmp,htmlContent,cssContent){console.error("Received createFile for file :"+filetmp);var isOk=false;var file=filetmp;var ctr=0;while(filetmp[ctr++]=="/"){file=filetmp.substring(1)}console.error("Update Block data.");console.error(postData);var postData={filename:file,html:htmlContent,css:cssContent,type:"static_block"};$.ajax({url:this.config.fileupdate,type:"POST",data:JSON.stringify(postData),beforeSend:this.config.beforeSend,complete:function complete(e){},xhrFields:{onprogress:function onprogress(e){if(e.lengthComputable){}},onload:function onload(e){}},cache:false,contentType:"application/json",processData:false}).done(function(data){isOk=true;$("#cms-save").text("Reloading...");$("#cms-save").prop("disabled",true);setTimeout(function(){window.location.href=window.location.href},2e3)}).always(function(){if(!isOk){$("#cms-save").text("Save");$("#cms-save").prop("disabled",false)}})},getOptions:function getOptions(){var result="";this.collection.each(function(device){var name=device.get("name");result+='<option value="'+name+'">'+name+"</option>"});return result},render:function render(){var pfx=this.ppfx;this.$el.html(this.template({ppfx:pfx}));this.el.className=pfx+"hugo-c";return this}})}).call(exports,__webpack_require__(1))},function(module,exports,__webpack_require__){"use strict";module.exports={stylePrefix:"cv-",rulers:false,scripts:[]}},function(module,exports,__webpack_require__){"use strict";module.exports=function(){var c={},defaults=__webpack_require__(185),Leftmenu=__webpack_require__(187),LeftmenuView=__webpack_require__(188);var leftmenu;return{getLeftmenuView:function getLeftmenuView(){return LeftmenuView},name:"Leftmenu",init:function init(config){c=config||{};for(var name in defaults){if(!(name in c))c[name]=defaults[name]}var ppfx=c.pStylePrefix;if(ppfx)c.stylePrefix=ppfx+c.stylePrefix;leftmenu=new Leftmenu(config);LeftmenuView=new LeftmenuView({model:leftmenu,config:c});var cm=c.em.get("DomComponents");if(cm)this.setWrapper(cm);return this},setWrapper:function setWrapper(wrp){leftmenu.set("wrapper",wrp)},getElement:function getElement(){return LeftmenuView.el},render:function render(){return LeftmenuView.render().el},getOffset:function getOffset(){},offset:function offset(el){},getElementPos:function getElementPos(el,opts){return},getTargetToElementDim:function getTargetToElementDim(target,element,options){},getFrameWrapperEl:function getFrameWrapperEl(){return}}}},function(module,exports,__webpack_require__){"use strict";var Backbone=__webpack_require__(0);module.exports=Backbone.Model.extend({defaults:{wrapper:""},initialize:function initialize(config){var conf=this.conf||{}}})},function(module,exports,__webpack_require__){"use strict";(function(_){var Backbone=__webpack_require__(0);module.exports=Backbone.View.extend({template:_.template('\n    <div class="<%= ppfx %>leftmenu-label"></div>\n\n    '),initialize:function initialize(o){this.config=o.config||{};this.em=this.config.em||{};this.ppfx=this.config.pStylePrefix||"";this.className=this.config.stylePrefix+"leftmenu"},renderBody:function renderBody(){},offset:function offset(el){},clearOff:function clearOff(){this.frmOff=null;this.cvsOff=null},getFrameOffset:function getFrameOffset(){},render:function render(){var pfx=this.ppfx;this.$el.html(this.template({ppfx:pfx}));this.el.className=pfx+"pn-leftmenu";return this}})}).call(exports,__webpack_require__(1))},function(module,exports,__webpack_require__){"use strict";module.exports={stylePrefix:"mdl-",title:"",content:"",backdrop:true}},function(module,exports,__webpack_require__){"use strict";module.exports=function(){var c={},defaults=__webpack_require__(189),ModalM=__webpack_require__(191),ModalView=__webpack_require__(192);var model,modal;return{name:"Modal",init:function init(config){c=config||{};for(var name in defaults){if(!(name in c))c[name]=defaults[name]}var ppfx=c.pStylePrefix;if(ppfx)c.stylePrefix=ppfx+c.stylePrefix;model=new ModalM(c);modal=new ModalView({model:model,config:c});if(c.em)c.em.on("loaded",function(){this.render().appendTo(c.em.config.el||"body")},this);return this},open:function open(){modal.show();return this},close:function close(){modal.hide();return this},isOpen:function isOpen(){return!!model.get("open")},setTitle:function setTitle(title){model.set("title",title);return this},getTitle:function getTitle(){return model.get("title")},setContent:function setContent(content){model.set("content"," ");model.set("content",content);return this},getContent:function getContent(){return model.get("content")},getContentEl:function getContentEl(){return modal.getContent().get(0)},getModel:function getModel(){return model},render:function render(){return modal.render().$el}}}},function(module,exports,__webpack_require__){"use strict";var Backbone=__webpack_require__(0);module.exports=Backbone.Model.extend({defaults:{title:"",content:"",open:false}})},function(module,exports,__webpack_require__){"use strict";(function(_){var Backbone=__webpack_require__(0);module.exports=Backbone.View.extend({template:_.template('\n    <div class="<%= pfx %>dialog">\n      <div class="<%= pfx %>header">\n        <div class="<%= pfx %>title"><%= title %></div>\n        <div class="<%= pfx %>btn-close">&Cross;</div>\n      </div>\n      <div class="<%= pfx %>content">\n        <div id="<%= pfx %>c"> <%= content %> </div>\n        <div style="clear:both"></div>\n      </div>\n    </div>\n    <div class="<%= pfx %>backlayer"></div>\n    <div class="<%= pfx %>collector" style="display: none"></div>'),events:{},initialize:function initialize(o){this.config=o.config||{};this.pfx=this.config.stylePrefix||"";this.listenTo(this.model,"change:open",this.updateOpen);this.listenTo(this.model,"change:title",this.updateTitle);this.listenTo(this.model,"change:content",this.updateContent);this.events["click ."+this.pfx+"btn-close"]="hide";if(this.config.backdrop)this.events["click ."+this.pfx+"backlayer"]="hide";this.delegateEvents()},getCollector:function getCollector(){if(!this.$collector)this.$collector=this.$el.find("."+this.pfx+"collector");return this.$collector},getContent:function getContent(){if(!this.$content)this.$content=this.$el.find("."+this.pfx+"content #"+this.pfx+"c");return this.$content},getTitle:function getTitle(){if(!this.$title)this.$title=this.$el.find("."+this.pfx+"title");return this.$title.get(0)},updateContent:function updateContent(){var content=this.getContent();this.getCollector().append(content.children());content.html(this.model.get("content"))},updateTitle:function updateTitle(){var title=this.getTitle();if(title)title.innerHTML=this.model.get("title")},updateOpen:function updateOpen(){if(this.model.get("open"))this.$el.show();else this.$el.hide()},hide:function hide(){this.model.set("open",0)},show:function show(){this.model.set("open",1)},render:function render(){var obj=this.model.toJSON();obj.pfx=this.pfx;this.$el.html(this.template(obj));this.$el.attr("class",this.pfx+"container");this.updateOpen();return this}})}).call(exports,__webpack_require__(1))},function(module,exports,__webpack_require__){"use strict";module.exports={stylePrefix:"nv-",sortable:1,hidable:1,hideTextnode:1,containerId:"navigator",itemClass:"item",itemsClass:"items"}},function(module,exports,__webpack_require__){"use strict";(function(_){var Backbone=__webpack_require__(0);var ItemsView;module.exports=Backbone.View.extend({template:_.template('\n  <% if (hidable) { %>\n  	<i id="<%= prefix %>btn-eye" class="btn fa fa-eye <%= (visible ? \'\' : \'fa-eye-slash\') %>"></i>\n  <% } %>\n\n  <div class="<%= prefix %>title-c">\n    <div class="<%= prefix %>title <%= addClass %>">\n    	<i id="<%= prefix %>caret" class="fa fa-chevron-right <%= caretCls %>"></i>\n  		<i class="fa fa-pencil <%= editBtnCls %>"></i>\n  		<input class="<%= ppfx %>no-app <%= inputNameCls %>" value="<%= title %>" readonly>\n    </div>\n  </div>\n\n  <div id="<%= prefix %>counter"><%= (count ? count : \'\') %></div>\n\n  <div id="<%= prefix %>move">\n  	<i class="fa fa-arrows"></i>\n  </div>\n\n  <div class="<%= prefix %>children"></div>'),initialize:function initialize(o){this.opt=o;this.config=o.config;this.em=o.config.em;this.ppfx=this.em.get("Config").stylePrefix;this.sorter=o.sorter||{};this.pfx=this.config.stylePrefix;if(typeof this.model.get("open")=="undefined")this.model.set("open",false);this.listenTo(this.model.components,"remove add change reset",this.checkChildren);this.listenTo(this.model,"destroy remove",this.remove);this.listenTo(this.model,"change:status",this.updateStatus);this.listenTo(this.model,"change:open",this.updateOpening);this.className=this.pfx+"item no-select";this.editBtnCls=this.pfx+"nav-item-edit";this.inputNameCls=this.ppfx+"nav-comp-name";this.caretCls=this.ppfx+"nav-item-caret";this.titleCls=this.pfx+"title";this.customNameProp="custom-name";this.events={};this.events["click > #"+this.pfx+"btn-eye"]="toggleVisibility";this.events["click ."+this.caretCls]="toggleOpening";this.events["click ."+this.titleCls]="handleSelect";this.events["click ."+this.editBtnCls]="handleEdit";this.events["blur ."+this.inputNameCls]="handleEditEnd";this.$el.data("model",this.model);this.$el.data("collection",this.model.get("components"));if(o.config.sortable)this.events["mousedown > #"+this.pfx+"move"]="startSort";this.delegateEvents()},handleEdit:function handleEdit(e){e.stopPropagation();var inputName=this.getInputName();inputName.readOnly=false;inputName.focus()},handleEditEnd:function handleEditEnd(e){e.stopPropagation();var inputName=this.getInputName();inputName.readOnly=true;this.model.set(this.customNameProp,inputName.value);var attrs=_.clone(this.model.get("attributes"));attrs["custom-name"]=inputName.value;this.model.set("attributes",attrs)},getInputName:function getInputName(){if(!this.inputName){this.inputName=this.el.querySelector("."+this.inputNameCls)}return this.inputName},updateOpening:function updateOpening(){var opened=this.opt.opened||{};var model=this.model;if(model.get("open")){this.$el.addClass("open");this.$caret.addClass("fa-chevron-down");opened[model.cid]=model}else{this.$el.removeClass("open");this.$caret.removeClass("fa-chevron-down");delete opened[model.cid]}},toggleOpening:function toggleOpening(e){e.stopPropagation();if(!this.model.components.length)return;this.model.set("open",!this.model.get("open"))},handleSelect:function handleSelect(e){e.stopPropagation();var em=this.em;if(em){var model=em.get("selectedComponent");if(model){model.set("status","")}this.model.set("status","selected");em.set("selectedComponent",this.model)}},startSort:function startSort(e){if(this.sorter){this.sorter.startSort(e.target)}},freeze:function freeze(){this.$el.addClass(this.pfx+"opac50");this.model.set("open",0)},unfreeze:function unfreeze(){this.$el.removeClass(this.pfx+"opac50")},updateStatus:function updateStatus(e){var status=this.model.get("status");var cls=this.pfx+"selected";var el=this.$el;switch(status){case"selected":el.addClass(cls);break;case"moving":break;default:el.removeClass(cls)}},toggleVisibility:function toggleVisibility(e){if(!this.$eye)this.$eye=this.$el.find("> #"+this.pfx+"btn-eye");var cCss=_.clone(this.model.get("style")),hClass=this.pfx+"hide";if(this.isVisible()){this.$el.addClass(hClass);this.$eye.addClass("fa-eye-slash");cCss.display="none"}else{this.$el.removeClass(hClass);this.$eye.removeClass("fa-eye-slash");delete cCss.display}this.model.set("style",cCss)},isVisible:function isVisible(){var css=this.model.get("style"),pr=css.display;if(pr&&pr=="none")return;return 1},checkChildren:function checkChildren(){var c=this.countChildren(this.model),pfx=this.pfx,tC="> ."+pfx+"title-c > ."+pfx+"title";if(!this.$counter)this.$counter=this.$el.find("> #"+pfx+"counter");if(c){this.$el.find(tC).removeClass(pfx+"no-chld");this.$counter.html(c)}else{this.$el.find(tC).addClass(pfx+"no-chld");this.$counter.empty();this.model.set("open",0)}},countChildren:function countChildren(model){var count=0;model.components.each(function(m){var isCountable=this.opt.isCountable;var hide=this.config.hideTextnode;if(isCountable&&!isCountable(m,hide))return;count++},this);return count},render:function render(){var pfx=this.pfx;var vis=this.isVisible();var count=this.countChildren(this.model);var attr=this.model.get("attributes");this.$el.html(this.template({title:this.model.get(this.customNameProp)||attr[this.customNameProp]||this.model.getName()+"-"+this.model.cid,addClass:count?"":pfx+"no-chld",editBtnCls:this.editBtnCls,inputNameCls:this.inputNameCls,caretCls:this.caretCls,count:count,visible:vis,hidable:this.config.hidable,prefix:pfx,ppfx:this.ppfx}));if(typeof ItemsView=="undefined")ItemsView=__webpack_require__(46);this.$components=new ItemsView({collection:this.model.components,config:this.config,sorter:this.sorter,opened:this.opt.opened,parent:this.model}).render().$el;this.$el.find("."+pfx+"children").html(this.$components);this.$caret=this.$el.find("> ."+pfx+"title-c > ."+pfx+"title > #"+pfx+"caret");if(!this.model.get("draggable")||!this.config.sortable){this.$el.find("> #"+pfx+"move").detach()}if(!vis)this.className+=" "+pfx+"hide";this.$el.attr("class",_.result(this,"className"));this.updateOpening();this.updateStatus();return this}})}).call(exports,__webpack_require__(1))},function(module,exports,__webpack_require__){"use strict";module.exports={blocks:[],appendTo:""}},function(module,exports,__webpack_require__){"use strict";module.exports=function(){var c={},defaults=__webpack_require__(195),Blocks=__webpack_require__(198),BlockCategories=__webpack_require__(199),BlocksView=__webpack_require__(201);var blocks,view;var categories=[];return{name:"PageManager",init:function init(config){c=config||{};for(var name in defaults){if(!(name in c))c[name]=defaults[name]}blocks=new Blocks(c.blocks);console.error("zzz3a3a3");console.error(blocks);categories=new BlockCategories,view=new BlocksView({collection:blocks,categories:categories},c);return this},add:function add(id,opts){var obj=opts||{};obj.id=id;return blocks.add(obj)},get:function get(id){return blocks.get(id)},getAll:function getAll(){return blocks},getCategories:function getCategories(){return categories},render:function render(){return view.render().el}}}},function(module,exports,__webpack_require__){"use strict";var Backbone=__webpack_require__(0);var Category=__webpack_require__(47);module.exports=Backbone.Model.extend({defaults:{label:"",content:"",category:"",command:"",attributes:{}},initialize:function initialize(){var opts=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var category=this.get("category");if(category){if(typeof category=="string"){var catObj=new Category({id:category,label:category})}}}})},function(module,exports,__webpack_require__){"use strict";var Backbone=__webpack_require__(0);var Block=__webpack_require__(197);module.exports=Backbone.Collection.extend({model:Block})},function(module,exports,__webpack_require__){"use strict";var Backbone=__webpack_require__(0);module.exports=Backbone.Collection.extend({model:__webpack_require__(47)})},function(module,exports,__webpack_require__){"use strict";var _typeof=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(obj){return typeof obj}:function(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj};var Backbone=__webpack_require__(0);module.exports=Backbone.View.extend({events:{click:"click"},initialize:function initialize(o,config){console.error("TTTAAA");console.error(this);this.config=config||{};this.ppfx=this.config.pStylePrefix||"";var pfx=this.ppfx;this.em=this.config.em||{};if(this.em&&this.em.get)this.commands=this.em.get("Commands");if(this.em){this.config.getSorter=this.getSorter;this.canvas=this.em.get("Canvas")}this.listenTo(this.model,"destroy",this.remove);this.doc=$(document);this.delegateEvents()},getSorter:function getSorter(){if(!this.em)return;if(!this.sorter){var utils=this.em.get("Utils");var canvas=this.canvas;this.sorter=new utils.Sorter({container:canvas.getBody(),placer:canvas.getPlacerEl(),containerSel:"*",itemSel:"*",pfx:this.ppfx,onStart:this.onDrag,onEndMove:this.onDrop,onMove:this.onMove,document:canvas.getFrameEl().contentDocument,direction:"a",wmargin:1,nested:1,em:this.em,canvasRelative:1})}return this.sorter},onDrag:function onDrag(e){if(e.button!==0){return}if(!this.config.getSorter){return}this.config.em.refreshCanvas();var sorter=this.config.getSorter();sorter.setDragHelper(this.el,e);sorter.startSort(this.el);sorter.setDropContent(this.model.get("content"))},click:function click(){var model=this.model;console.error("GOT CLICK HERE");console.error(model);console.error(model.attributes);console.error(model.get("command"));console.error(this);var commandName=this.model.get("command");var command;console.error("COMMAND IS"+commandName);console.error(this.commands);if(this.commands&&typeof commandName==="string"){console.error("TEYP IS STRING");command=this.commands.get(commandName)}else if(commandName!==null&&(typeof commandName==="undefined"?"undefined":_typeof(commandName))==="object"){console.error("TEYP IS OBJ");command=commandName}else if(typeof commandName==="function"){console.error("TEYP IS FUNC");command={run:commandName}}command.run(editor,this.model,this.model.get("options"));editor.trigger("run:"+commandName)},render:function render(){var className=this.ppfx+"pagetitle";console.error("ADDING OF :"+className);this.$el.addClass(className);this.el.innerHTML='<div class="'+className+'-label">'+this.model.get("label")+"</div>";return this}})},function(module,exports,__webpack_require__){"use strict";var Backbone=__webpack_require__(0);var BlockView=__webpack_require__(200);var CategoryView=__webpack_require__(202);module.exports=Backbone.View.extend({initialize:function initialize(opts,config){this.config=config||{};this.categories=opts.categories||"";this.renderedCategories=[];var ppfx=this.config.pStylePrefix||"";this.ppfx=ppfx;this.noCatClass=ppfx+"blocks-no-cat";this.blockContClass=ppfx+"blocks-c";this.catsClass=ppfx+"block-categories";this.listenTo(this.collection,"add",this.addTo);this.em=this.config.em;this.tac="test-tac";this.grabbingCls=this.ppfx+"grabbing";if(this.em){this.config.getSorter=this.getSorter;this.canvas=this.em.get("Canvas")}},getSorter:function getSorter(){if(!this.em)return;if(!this.sorter){var utils=this.em.get("Utils");var canvas=this.canvas;this.sorter=new utils.Sorter({container:canvas.getBody(),placer:canvas.getPlacerEl(),containerSel:"*",itemSel:"*",pfx:this.ppfx,onStart:this.onDrag,onEndMove:this.onDrop,onMove:this.onMove,document:canvas.getFrameEl().contentDocument,direction:"a",wmargin:1,nested:1,em:this.em,canvasRelative:1})}return this.sorter},onDrag:function onDrag(e){this.em.stopDefault();this.em.trigger("block:drag:start",e)},onMove:function onMove(e){this.em.trigger("block:drag:move",e)},onDrop:function onDrop(model){this.em.runDefault();if(model&&model.get){if(model.get("activeOnRender")){model.trigger("active");model.set("activeOnRender",0)}this.em.initChildrenComp(model)}this.em.trigger("block:drag:stop",model)},addTo:function addTo(model){console.log("adding of model");console.log(model);this.add(model)},add:function add(model,fragment){var frag=fragment||null;console.error("TEST MODEL ADD");console.log(fragment);var view=new BlockView({model:model,attributes:model.get("attributes")},this.config);var rendered=view.render().el;console.error(rendered);var category=model.get("category");if(category&&this.categories){if(typeof category=="string"){category={id:category,label:category}}var catModel=this.categories.add(category);var catId=catModel.get("id");var catView=this.renderedCategories[catId];var categories=this.getCategoriesEl();model.set("category",catModel);if(!catView&&categories){catView=new CategoryView({model:catModel},this.config).render();this.renderedCategories[catId]=catView;categories.appendChild(catView.el)}catView&&catView.append(rendered);return}if(frag){frag.appendChild(rendered)}else{this.append(rendered)}},getCategoriesEl:function getCategoriesEl(){if(!this.catsEl){this.catsEl=this.el.querySelector("."+this.catsClass)}return this.catsEl},getBlocksEl:function getBlocksEl(){if(!this.blocksEl){this.blocksEl=this.el.querySelector("."+this.noCatClass+" ."+this.blockContClass)}return this.blocksEl},append:function append(el){var blocks=this.getBlocksEl();blocks&&blocks.appendChild(el)},render:function render(){var ppfx=this.ppfx;var frag=document.createDocumentFragment();this.catsEl=null;this.blocksEl=null;this.renderedCategories=[];this.el.innerHTML='\n      <div class="'+this.catsClass+'"></div>\n      <div class="'+this.noCatClass+'">\n        <div class="'+this.blockContClass+'"></div>\n      </div>\n    ';this.collection.each(function(model){this.add(model,frag)},this);this.append(frag);this.$el.addClass(this.blockContClass+"s");return this}})},function(module,exports,__webpack_require__){"use strict";(function(_){var Backbone=__webpack_require__(0);module.exports=Backbone.View.extend({template:_.template('\n  <div class="<%= pfx %>title">\n    <i class="<%= pfx %>caret-icon"></i>\n    <%= label %>\n  </div>\n  <div class="<%= pfx %>blocks-c"></div>\n  '),events:{},initialize:function initialize(){var o=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var config=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};this.config=config;var pfx=this.config.pStylePrefix||"";this.pfx=pfx;this.caretR="fa fa-caret-right";this.caretD="fa fa-caret-down";this.iconClass=pfx+"caret-icon";this.activeClass=pfx+"open";this.className=pfx+"block-category";this.events["click ."+pfx+"title"]="toggle";this.listenTo(this.model,"change:open",this.updateVisibility);this.delegateEvents()},updateVisibility:function updateVisibility(){if(this.model.get("open"))this.open();else this.close()},open:function open(){this.el.className=this.className+" "+this.activeClass;this.getIconEl().className=this.iconClass+" "+this.caretD;this.getBlocksEl().style.display=""},close:function close(){this.el.className=this.className;this.getIconEl().className=this.iconClass+" "+this.caretR;this.getBlocksEl().style.display="none"},toggle:function toggle(){var model=this.model;model.set("open",!model.get("open"))},getIconEl:function getIconEl(){if(!this.iconEl){this.iconEl=this.el.querySelector("."+this.iconClass)}return this.iconEl},getBlocksEl:function getBlocksEl(){if(!this.blocksEl){this.blocksEl=this.el.querySelector("."+this.pfx+"blocks-c")}return this.blocksEl},append:function append(el){this.getBlocksEl().appendChild(el)},render:function render(){this.el.innerHTML=this.template({pfx:this.pfx,label:this.model.get("label")});this.el.className=this.className;this.updateVisibility();return this}})}).call(exports,__webpack_require__(1))},function(module,exports,__webpack_require__){"use strict";var crc="create-comp";var mvc="move-comp";var swv="sw-visibility";var expt="export-template";var osm="open-sm";var otm="open-tm";var ola="open-layers";var obl="open-blocks";var lstpages="list-pages";var ful="fullscreen";var prv="preview";module.exports={stylePrefix:"pn-",defaults:[{id:"commands",buttons:[{}]},{id:"options",buttons:[{active:true,id:swv,className:"fa fa-square-o",command:swv,context:swv,attributes:{title:"View components"}},{id:prv,className:"fa fa-eye",command:prv,context:prv,attributes:{title:"Preview"}},{id:ful,className:"fa fa-arrows-alt",command:ful,context:ful,attributes:{title:"Fullscreen"}},{id:expt,className:"fa fa-code",command:expt,attributes:{title:"View code"}}]},{id:"views",buttons:[{id:osm,className:"fa fa-paint-brush",command:osm,active:true,attributes:{title:"Open Style Manager"}},{id:otm,className:"fa fa-cog",command:otm,attributes:{title:"Settings"}},{id:ola,className:"fa fa-bars",command:ola,attributes:{title:"Open Layer Manager"}},{id:obl,className:"fa fa-th-large",command:obl,attributes:{title:"Open Blocks"}}]}],em:null,delayBtnsShow:300}},function(module,exports,__webpack_require__){"use strict";module.exports=function(){var c={},defaults=__webpack_require__(203),Panel=__webpack_require__(49),Panels=__webpack_require__(206),PanelView=__webpack_require__(51),PanelsView=__webpack_require__(208);var panels,PanelsViewObj;return{name:"Panels",init:function init(config){c=config||{};for(var name in defaults){if(!(name in c))c[name]=defaults[name]}var ppfx=c.pStylePrefix;if(ppfx)c.stylePrefix=ppfx+c.stylePrefix;panels=new Panels(c.defaults);PanelsViewObj=new PanelsView({collection:panels,config:c});return this},getPanels:function getPanels(){return panels},getPanelsEl:function getPanelsEl(){return PanelsViewObj.el},addPanel:function addPanel(panel){return panels.add(panel)},getPanel:function getPanel(id){var res=panels.where({id:id});return res.length?res[0]:null},addButton:function addButton(panelId,button){var pn=this.getPanel(panelId);return pn?pn.get("buttons").add(button):null},getButton:function getButton(panelId,id){var pn=this.getPanel(panelId);if(pn){var res=pn.get("buttons").where({id:id});return res.length?res[0]:null}return null},render:function render(){return PanelsViewObj.render().el},active:function active(){this.getPanels().each(function(p){p.get("buttons").each(function(btn){if(btn.get("active"))btn.trigger("updateActive")
})})},Panel:Panel}}},function(module,exports,__webpack_require__){"use strict";var Backbone=__webpack_require__(0);module.exports=Backbone.Model.extend({defaults:{id:"",className:"",command:"",context:"",buttons:[],attributes:{},options:{},active:false,dragDrop:false,runDefaultCommand:true,stopDefaultCommand:false},initialize:function initialize(options){if(this.get("buttons").length){var Buttons=__webpack_require__(48);this.set("buttons",new Buttons(this.get("buttons")))}}})},function(module,exports,__webpack_require__){"use strict";var Backbone=__webpack_require__(0);var Panel=__webpack_require__(49);module.exports=Backbone.Collection.extend({model:Panel})},function(module,exports,__webpack_require__){"use strict";(function(_){var _typeof=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(obj){return typeof obj}:function(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj};var Backbone=__webpack_require__(0);module.exports=Backbone.View.extend({tagName:"span",initialize:function initialize(o){_.bindAll(this,"startTimer","stopTimer","showButtons","hideButtons","closeOnKeyPress","onDrop","initSorter","stopDrag");var cls=this.model.get("className");this.config=o.config||{};this.em=this.config.em||{};this.pfx=this.config.stylePrefix||"";this.ppfx=this.config.pStylePrefix||"";this.id=this.pfx+this.model.get("id");this.activeCls=this.pfx+"active";this.btnsVisCls=this.pfx+"visible";this.parentM=o.parentM||null;this.className=this.pfx+"btn"+(cls?" "+cls:"");this.listenTo(this.model,"change:active updateActive",this.updateActive);this.listenTo(this.model,"checkActive",this.checkActive);this.listenTo(this.model,"change:bntsVis",this.updateBtnsVis);this.listenTo(this.model,"change:attributes",this.updateAttributes);this.listenTo(this.model,"change:className",this.updateClassName);if(this.model.get("buttons").length){this.$el.on("mousedown",this.startTimer);this.$el.append($("<div>",{"class":this.pfx+"arrow-rd"}))}if(this.em&&this.em.get)this.commands=this.em.get("Commands");this.events={};if(this.model.get("dragDrop")){this.events.mousedown="initDrag";this.em.on("loaded",this.initSorter)}else this.events.click="clicked";this.delegateEvents()},initSorter:function initSorter(){if(this.em.Canvas){var canvas=this.em.Canvas;this.canvasEl=canvas.getBody();this.sorter=new this.em.Utils.Sorter({container:this.canvasEl,placer:canvas.getPlacerEl(),containerSel:"*",itemSel:"*",pfx:this.ppfx,onMove:this.onDrag,onEndMove:this.onDrop,document:canvas.getFrameEl().contentDocument,direction:"a",wmargin:1,nested:1});var offDim=canvas.getOffset();this.sorter.offTop=offDim.top;this.sorter.offLeft=offDim.left}},initDrag:function initDrag(){this.model.collection.deactivateAll(this.model.get("context"));this.sorter.startSort(this.el);this.sorter.setDropContent(this.model.get("options").content);this.canvasEl.style.cursor="grabbing";$(document).on("mouseup",this.stopDrag)},stopDrag:function stopDrag(){$(document).off("mouseup",this.stopDrag);this.sorter.endMove()},onDrag:function onDrag(e){},onDrop:function onDrop(e){this.canvasEl.style.cursor="default"},updateClassName:function updateClassName(){var cls=this.model.get("className");this.$el.attr("class",this.pfx+"btn"+(cls?" "+cls:""))},updateAttributes:function updateAttributes(){this.$el.attr(this.model.get("attributes"))},updateBtnsVis:function updateBtnsVis(){if(!this.$buttons)return;if(this.model.get("bntsVis"))this.$buttons.addClass(this.btnsVisCls);else this.$buttons.removeClass(this.btnsVisCls)},startTimer:function startTimer(){this.timeout=setTimeout(this.showButtons,this.config.delayBtnsShow);$(document).on("mouseup",this.stopTimer)},stopTimer:function stopTimer(){$(document).off("mouseup",this.stopTimer);if(this.timeout)clearTimeout(this.timeout)},showButtons:function showButtons(){clearTimeout(this.timeout);this.model.set("bntsVis",true);$(document).on("mousedown",this.hideButtons);$(document).on("keypress",this.closeOnKeyPress)},hideButtons:function hideButtons(e){if(e){$(e.target).trigger("click")}this.model.set("bntsVis",false);$(document).off("mousedown",this.hideButtons);$(document).off("keypress",this.closeOnKeyPress)},closeOnKeyPress:function closeOnKeyPress(e){var key=e.which||e.keyCode;if(key==27)this.hideButtons()},updateActive:function updateActive(){var command=null;var editor=this.em&&this.em.get?this.em.get("Editor"):null;var commandName=this.model.get("command");if(this.commands&&typeof commandName==="string"){command=this.commands.get(commandName)}else if(commandName!==null&&(typeof commandName==="undefined"?"undefined":_typeof(commandName))==="object"){command=commandName}else if(typeof commandName==="function"){command={run:commandName}}if(this.model.get("active")){this.model.collection.deactivateAll(this.model.get("context"));this.model.set("active",true,{silent:true}).trigger("checkActive");if(this.parentM)this.parentM.set("active",true,{silent:true}).trigger("checkActive");if(command&&command.run){command.run(editor,this.model,this.model.get("options"));editor.trigger("run:"+commandName)}}else{this.$el.removeClass(this.activeCls);this.model.collection.deactivateAll(this.model.get("context"));if(this.parentM)this.parentM.set("active",false,{silent:true}).trigger("checkActive");if(command&&command.stop){command.stop(editor,this.model,this.model.get("options"));editor.trigger("stop:"+commandName)}}},checkActive:function checkActive(){if(this.model.get("active"))this.$el.addClass(this.activeCls);else this.$el.removeClass(this.activeCls)},clicked:function clicked(e){if(this.model.get("bntsVis"))return;if(this.parentM)this.swapParent();var active=this.model.get("active");this.model.set("active",!active);var command=this.em.get("Commands").get("select-comp");if(active){if(this.model.get("runDefaultCommand"))this.em.runDefault()}else{if(this.model.get("stopDefaultCommand"))this.em.stopDefault()}},swapParent:function swapParent(){this.parentM.collection.deactivateAll(this.model.get("context"));this.parentM.set("attributes",this.model.get("attributes"));this.parentM.set("options",this.model.get("options"));this.parentM.set("command",this.model.get("command"));this.parentM.set("className",this.model.get("className"));this.parentM.set("active",true,{silent:true}).trigger("checkActive")},render:function render(){this.updateAttributes();this.$el.attr("class",this.className);if(this.model.get("buttons").length){var btnsView=__webpack_require__(50);var view=new btnsView({collection:this.model.get("buttons"),config:this.config,parentM:this.model});this.$buttons=view.render().$el;this.$buttons.append($("<div>",{"class":this.pfx+"arrow-l"}));this.$el.append(this.$buttons)}return this}})}).call(exports,__webpack_require__(1))},function(module,exports,__webpack_require__){"use strict";var Backbone=__webpack_require__(0);var PanelView=__webpack_require__(51);module.exports=Backbone.View.extend({initialize:function initialize(o){this.opt=o||{};this.config=this.opt.config||{};this.pfx=this.config.stylePrefix||"";this.listenTo(this.collection,"add",this.addTo);this.listenTo(this.collection,"reset",this.render);this.className=this.pfx+"panels"},addTo:function addTo(model){this.addToCollection(model)},addToCollection:function addToCollection(model,fragmentEl){var fragment=fragmentEl||null;var view=new PanelView({model:model,config:this.config});var rendered=view.render().el;var appendTo=model.get("appendTo");if(appendTo){var appendEl=document.querySelector(appendTo);appendEl.appendChild(rendered)}else{if(fragment){fragment.appendChild(rendered)}else{this.$el.append(rendered)}}view.initResize();return rendered},render:function render(){var fragment=document.createDocumentFragment();this.$el.empty();this.collection.each(function(model){this.addToCollection(model,fragment)},this);this.$el.append(fragment);this.$el.attr("class",this.className);return this}})},function(module,exports,__webpack_require__){"use strict";module.exports={textTags:["br","b","i","u"]}},function(module,exports,__webpack_require__){"use strict";module.exports=function(){var c={},defaults=__webpack_require__(209),parserCss=__webpack_require__(211),parserHtml=__webpack_require__(212);var pHtml,pCss;return{compTypes:"",name:"Parser",init:function init(config){c=config||{};for(var name in defaults){if(!(name in c))c[name]=defaults[name]}pHtml=new parserHtml(c);pCss=new parserCss(c);return this},parseHtml:function parseHtml(str){pHtml.compTypes=this.compTypes;return pHtml.parse(str,pCss)},parseCss:function parseCss(str){return pCss.parse(str)}}}},function(module,exports,__webpack_require__){"use strict";module.exports=function(config){return{parseSelector:function parseSelector(str){var add=[];var result=[];var sels=str.split(",");for(var i=0,len=sels.length;i<len;i++){var sel=sels[i].trim();if(/^(\.{1}[\w\-]+)+(:{1,2}[\w\-()]+)?$/gi.test(sel)){var cls=sel.split(".").filter(Boolean);result.push(cls)}else{add.push(sel)}}return{result:result,add:add}},parseNode:function parseNode(el){var result=[];var nodes=el.cssRules;for(var i=0,len=nodes.length;i<len;i++){var node=nodes[i];var sels=node.selectorText;var selsAdd=[];if(node.cssRules){var subRules=this.parseNode(node);var mediaText=node.media.mediaText;for(var s=0,lens=subRules.length;s<lens;s++){var subRule=subRules[s];subRule.mediaText=mediaText?mediaText.trim():""}result=result.concat(subRules)}if(!sels)continue;var selsParsed=this.parseSelector(sels);sels=selsParsed.result;selsAdd=selsParsed.add;var stl=node.style;var style={};for(var j=0,len2=stl.length;j<len2;j++){var propName=stl[j];var important=stl.getPropertyPriority(propName);style[propName]=stl[propName]+(important?" !"+important:"")}var lastRule="";for(var k=0,len3=sels.length;k<len3;k++){var selArr=sels[k];var model={};var stateArr=selArr[selArr.length-1].split(/:(.+)/);if(stateArr[1]){selArr[selArr.length-1]=stateArr[0];model.state=stateArr[1];stateArr.splice(stateArr.length-1,1)}model.selectors=selArr;model.style=style;lastRule=model;result.push(model)}if(selsAdd.length){var selsAddStr=selsAdd.join(", ");if(lastRule){lastRule.selectorsAdd=selsAddStr}else{result.push({selectors:[],selectorsAdd:selsAddStr,style:style})}}}return result},parse:function parse(str){var el=document.createElement("style");el.innerHTML=str;document.head.appendChild(el);var sheet=el.sheet;document.head.removeChild(el);var result=this.parseNode(sheet);if(result.length==1)result=result[0];return result}}}},function(module,exports,__webpack_require__){"use strict";module.exports=function(config){var TEXT_NODE="span";var c=config;var modelAttrStart="data-gjs-";return{compTypes:"",parseStyle:function parseStyle(str){var result={};var decls=str.split(";");for(var i=0,len=decls.length;i<len;i++){var decl=decls[i].trim();if(!decl)continue;var prop=decl.split(":");result[prop[0].trim()]=prop[1].trim()}return result},parseClass:function parseClass(str){var result=[];var cls=str.split(" ");for(var i=0,len=cls.length;i<len;i++){var cl=cls[i].trim();var reg=new RegExp("^"+c.pStylePrefix);if(!cl||reg.test(cl))continue;result.push(cl)}return result},parseNode:function parseNode(el){var result=[];var nodes=el.childNodes;for(var i=0,len=nodes.length;i<len;i++){var node=nodes[i];var model={};var attrs=node.attributes||[];var attrsLen=attrs.length;var prevI=result.length-1;var prevSib=result[prevI];var ct=this.compTypes;if(ct){var obj="";for(var it=0;it<ct.length;it++){var component=ct[it].model;obj=component.isComponent(node);if(obj)break}model=obj}if(!model.tagName)model.tagName=node.tagName?node.tagName.toLowerCase():"";if(attrsLen)model.attributes={};for(var j=0;j<attrsLen;j++){var nodeName=attrs[j].nodeName;var nodeValue=attrs[j].nodeValue;if(nodeName=="style")model.style=this.parseStyle(nodeValue);else if(nodeName=="class")model.classes=this.parseClass(nodeValue);else if(nodeName=="contenteditable")continue;else if(nodeName.indexOf(modelAttrStart)===0){var modelAttr=nodeName.replace(modelAttrStart,"");nodeValue=nodeValue==="true"?true:nodeValue;nodeValue=nodeValue==="false"?false:nodeValue;model[modelAttr]=nodeValue}else model.attributes[nodeName]=nodeValue}var nodeChild=node.childNodes.length;if(nodeChild&&!model.components){var firstChild=node.childNodes[0];if(nodeChild===1&&firstChild.nodeType===3){if(!model.type){model.type="text"}model.content=firstChild.nodeValue}else{var parsed=this.parseNode(node);if(parsed.length==1&&parsed[0].type=="text"&&parsed[0].tagName==TEXT_NODE){model.type="text";model.content=parsed[0].content}else model.components=parsed}}if(model.type=="textnode"){var prevIsText=prevSib&&prevSib.type=="textnode";if(prevIsText){prevSib.content+=model.content;continue}var content=node.nodeValue;if(content!=" "&&!content.trim()){continue}}var comps=model.components;if(!model.type&&comps){var allTxt=1;var foundTextNode=0;for(var ci=0;ci<comps.length;ci++){var comp=comps[ci];if(comp.type!="text"&&comp.type!="textnode"&&c.textTags.indexOf(comp.tagName)<0){allTxt=0;break}if(comp.type=="textnode")foundTextNode=1}if(allTxt&&foundTextNode)model.type="text"}if(!model.tagName&&model.type!="textnode")continue;result.push(model)}return result},parse:function parse(str,parserCss){var config=c.em&&c.em.get("Config")||{};var res={html:"",css:""};var el=document.createElement("div");el.innerHTML=str;var scripts=el.querySelectorAll("script");var i=scripts.length;if(!config.allowScripts){while(i--){scripts[i].parentNode.removeChild(scripts[i])}}if(parserCss){var styleStr="";var styles=el.querySelectorAll("style");var j=styles.length;while(j--){styleStr=styles[j].innerHTML+styleStr;styles[j].parentNode.removeChild(styles[j])}if(styleStr)res.css=parserCss.parse(styleStr)}var result=this.parseNode(el);if(result.length==1)result=result[0];res.html=result;return res}}}},function(module,exports,__webpack_require__){"use strict";module.exports={plugins:[]}},function(module,exports,__webpack_require__){"use strict";module.exports=function(config){var c=config||{},defaults=__webpack_require__(213);for(var name in defaults){if(!(name in c))c[name]=defaults[name]}var plugins={};return{add:function add(id,plugin){if(plugins[id])return this;plugins[id]=plugin;return this},get:function get(id){return plugins[id]},getAll:function getAll(){return plugins}}}},function(module,exports,__webpack_require__){"use strict";module.exports={stylePrefix:"rte-",toolbarId:"toolbar",containerId:"wrapper",commands:[{command:"bold",title:"Bold","class":"fa fa-bold"},{command:"italic",title:"Italic","class":"fa fa-italic"},{command:"underline",title:"Underline","class":"fa fa-underline"},{command:"strikethrough",title:"Strikethrough","class":"fa fa-strikethrough",group:"format"},{command:"insertHTML",title:"Link","class":"fa fa-link",args:'<a class="link" href="">${content}</a>'}]}},function(module,exports,__webpack_require__){"use strict";module.exports=function(){var c={},defaults=__webpack_require__(215),rte=__webpack_require__(221),CommandButtons=__webpack_require__(218),CommandButtonsView=__webpack_require__(220);var tlbPfx,toolbar,commands;var mainSelf;return{customRte:null,name:"rte",init:function init(config){mainSelf=this;c=config||{};for(var name in defaults){if(!(name in c))c[name]=defaults[name]}var ppfx=c.pStylePrefix;if(ppfx)c.stylePrefix=ppfx+c.stylePrefix;tlbPfx=c.stylePrefix;commands=new CommandButtons(c.commands);toolbar=new CommandButtonsView({collection:commands,config:c});return this},add:function add(command,opts){var obj=opts||{};obj.command=command;return commands.add(obj)},get:function get(command){return commands.where({command:command})[0]},getAll:function getAll(){return commands},udpatePosition:function udpatePosition(){var u="px";var canvas=c.em.get("Canvas");var pos=canvas.getTargetToElementDim(toolbar.el,this.lastEl,{event:"rteToolbarPosUpdate"});var toolbarStyle=toolbar.el.style;toolbarStyle.top=pos.top+u;toolbarStyle.left=pos.left+u},attach:function attach(view,rte){this.lastEl=view.el;var el=view.getChildrenContainer();var customRte=this.customRte;if(customRte){rte=customRte.enable(el,rte)}else{$(el).wysiwyg({}).focus()}this.show();if(c.em){setTimeout(this.udpatePosition.bind(this),0);c.em.off("change:canvasOffset",this.udpatePosition,this);c.em.on("change:canvasOffset",this.udpatePosition,this);c.em.off("canvasScroll",this.udpatePosition,this);c.em.on("canvasScroll",this.udpatePosition,this)}toolbar.$el.on("mousedown",this.disableProp);return rte},detach:function detach(view,rte){var customRte=this.customRte;var el=view.getChildrenContainer();if(customRte){view.model.set("content",el.innerHTML);customRte.disable(el,rte)}else{$(el).wysiwyg("destroy")}this.hide();toolbar.$el.off("mousedown",this.disableProp)},focus:function focus(view,rte){var customRte=this.customRte;var el=view.getChildrenContainer();if(customRte){if(customRte.focus)customRte.focus(el,rte)}else{this.attach(view)}},show:function show(){var toolbarStyle=toolbar.el.style;toolbarStyle.display="block"},hide:function hide(){toolbar.el.style.display="none"},disableProp:function disableProp(e){e.stopPropagation()},getToolbarEl:function getToolbarEl(){return toolbar.el},render:function render(){return toolbar.render().el}}}},function(module,exports,__webpack_require__){"use strict";var Backbone=__webpack_require__(0);module.exports=Backbone.Model.extend({idAttribute:"command",defaults:{command:"",type:"",title:"","class":"",options:[]},initialize:function initialize(){var opts=this.get("options");if(opts.length)this.set("type","select")}})},function(module,exports,__webpack_require__){"use strict";var Backbone=__webpack_require__(0);var CommandButton=__webpack_require__(217);module.exports=Backbone.Collection.extend({model:CommandButton})},function(module,exports,__webpack_require__){"use strict";var Backbone=__webpack_require__(0);var CommandButtonView=__webpack_require__(52);module.exports=CommandButtonView.extend({initialize:function initialize(o,config){CommandButtonView.prototype.initialize.apply(this,arguments)},getInput:function getInput(){var m=this.model;if(!this.input){var cmd=m.get("command");var input='<select data-edit="'+cmd+'">';var opts=m.get("options");var label=m.get("title")||m.get("command");input+="<option>"+label+"</option>";for(var i=0,len=opts.length;i<len;i++){var opt=opts[i];var value=opt.value;var name=opt.name||value;input+='<option value="'+value+'">'+name+"</option>"}input+="</select>";this.input=$(input)}return this.input},getInputCont:function getInputCont(){var input=this.getInput();var pfx=this.ppfx;var cont=$('<div class="'+pfx+"field "+pfx+'select"><div class="'+pfx+'sel-arrow"><div class="'+pfx+'d-s-arrow"></div></div></div>');return cont.append(input)},render:function render(){for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}CommandButtonView.prototype.render.apply(this,args);this.$el.html(this.getInputCont());return this}})},function(module,exports,__webpack_require__){"use strict";var Backbone=__webpack_require__(0);var CommandButtonView=__webpack_require__(52);var CommandButtonSelectView=__webpack_require__(219);module.exports=Backbone.View.extend({attributes:{"data-role":"editor-toolbar"},initialize:function initialize(o){this.config=o.config||{};var pfx=this.config.stylePrefix||"";this.id=pfx+this.config.toolbarId;this.listenTo(this.collection,"add",this.addTo);this.$el.data("helper",1)},addTo:function addTo(model){this.add(model)},add:function add(model,fragment){var frag=fragment||null;var viewObj=CommandButtonView;switch(model.get("type")){case"select":viewObj=CommandButtonSelectView;break}var args=model.get("args");var attrs={title:model.get("title"),"data-edit":model.get("command")};if(args)attrs["data-args"]=args;var view=new viewObj({model:model,attributes:attrs},this.config);var rendered=view.render().el;if(frag)frag.appendChild(rendered);else this.$el.append(rendered)},render:function render(){var frag=document.createDocumentFragment();this.$el.empty();this.collection.each(function(model){this.add(model,frag)},this);this.$el.append(frag);this.$el.attr("id",this.id);return this}})},function(module,exports,__webpack_require__){"use strict";var readFileIntoDataUrl=function readFileIntoDataUrl(fileInfo){var loader=$.Deferred(),fReader=new FileReader;fReader.onload=function(e){loader.resolve(e.target.result)};fReader.onerror=loader.reject;fReader.onprogress=loader.notify;fReader.readAsDataURL(fileInfo);return loader.promise()};$.fn.cleanHtml=function(){var html=$(this).html();return html&&html.replace(/(<br>|\s|<div><br><\/div>|&nbsp;)*$/,"")};$.fn.wysiwyg=function(userOptions){var editor=this,selectedRange,options,toolbarBtnSelector,updateToolbar=function updateToolbar(){var actCls=options.activeToolbarClass;if(actCls){$(options.toolbarSelector).find(toolbarBtnSelector).each(function(){var el=$(this);var command=el.data(options.commandRole);var doc=editor.get(0).ownerDocument;if(doc.queryCommandState(command)){el.addClass(actCls)}else{el.removeClass(actCls)}})}},execCommand=function execCommand(commandWithArgs,valueArg){var commandArr=commandWithArgs.split(" "),command=commandArr.shift(),args=commandArr.join(" ")+(valueArg||"");editor.get(0).ownerDocument.execCommand("styleWithCSS",false,true);editor.get(0).ownerDocument.execCommand(command,0,args);updateToolbar();editor.trigger("change")},getCurrentRange=function getCurrentRange(){var sel=window.getSelection();if(sel.getRangeAt&&sel.rangeCount){return sel.getRangeAt(0)}},saveSelection=function saveSelection(){selectedRange=getCurrentRange()},restoreSelection=function restoreSelection(){var selection=window.getSelection();if(selectedRange){try{selection.removeAllRanges()}catch(ex){document.body.createTextRange().select();document.selection.empty()}selection.addRange(selectedRange)}},insertFiles=function insertFiles(files){editor.focus();$.each(files,function(idx,fileInfo){if(/^image\//.test(fileInfo.type)){$.when(readFileIntoDataUrl(fileInfo)).done(function(dataUrl){execCommand("insertimage",dataUrl)}).fail(function(e){options.fileUploadError("file-reader",e)})}else{options.fileUploadError("unsupported-file-type",fileInfo.type)}})},markSelection=function markSelection(input,color){restoreSelection();if(document.queryCommandSupported("hiliteColor")){document.execCommand("hiliteColor",0,color||"transparent")}saveSelection();input.data(options.selectionMarker,color)},bindToolbar=function bindToolbar(toolbar,options){toolbar.find(toolbarBtnSelector).unbind().click(function(){restoreSelection();var doc=editor.get(0).ownerDocument;var el=$(this);var comm=el.data(options.commandRole);var args=el.data("args");if(args){args=args.replace("${content}",doc.getSelection());execCommand(comm,args)}else{doc.execCommand(comm)}saveSelection()});toolbar.find("[data-toggle=dropdown]").click(restoreSelection);var dName="[data-"+options.commandRole+"]";toolbar.find("select"+dName).on("webkitspeechchange change",function(){var newValue=this.value;restoreSelection();if(newValue){editor.focus();execCommand($(this).data(options.commandRole),newValue)}saveSelection()});toolbar.find("input[type=text]"+dName,", select"+dName).on("webkitspeechchange change",function(){var newValue=this.value;this.value="";restoreSelection();if(newValue){editor.focus();execCommand($(this).data(options.commandRole),newValue)}saveSelection()}).on("focus",function(){var input=$(this);if(!input.data(options.selectionMarker)){markSelection(input,options.selectionColor);input.focus()}}).on("blur",function(){var input=$(this);if(input.data(options.selectionMarker)){markSelection(input,false)}});toolbar.find("input[type=file][data-"+options.commandRole+"]").change(function(){restoreSelection();if(this.type==="file"&&this.files&&this.files.length>0){insertFiles(this.files)}saveSelection();this.value=""})},initFileDrops=function initFileDrops(){editor.on("dragenter dragover",false).on("drop",function(e){var dataTransfer=e.originalEvent.dataTransfer;e.stopPropagation();e.preventDefault();if(dataTransfer&&dataTransfer.files&&dataTransfer.files.length>0){insertFiles(dataTransfer.files)}})};if(typeof userOptions=="string"&&userOptions=="destroy"){editor.attr("contenteditable",false).unbind("mouseup keyup mouseout dragenter dragover");$(window).unbind("touchend");return this}options=$.extend({},$.fn.wysiwyg.defaults,userOptions);var dName="[data-"+options.commandRole+"]";toolbarBtnSelector="a"+dName+",button"+dName+",input[type=button]"+dName+", select"+dName;if(options.dragAndDropImages){initFileDrops()}bindToolbar($(options.toolbarSelector),options);editor.attr("contenteditable",true).on("mouseup keyup mouseout",function(){saveSelection();updateToolbar()});$(window).bind("touchend",function(e){var isInside=editor.is(e.target)||editor.has(e.target).length>0,currentRange=getCurrentRange(),clear=currentRange&&currentRange.startContainer===currentRange.endContainer&&currentRange.startOffset===currentRange.endOffset;if(!clear||isInside){saveSelection();updateToolbar()}});return this};$.fn.wysiwyg.defaults={toolbarSelector:"[data-role=editor-toolbar]",commandRole:"edit",activeToolbarClass:"btn-info",selectionMarker:"edit-focus-marker",selectionColor:"darkgrey",dragAndDropImages:true,fileUploadError:function fileUploadError(reason,detail){console.log("File upload error",reason,detail)}};module.exports=$},function(module,exports,__webpack_require__){"use strict";module.exports={stylePrefix:"clm-",selectors:[],label:"Classes",statesLabel:"- State -",states:[{name:"hover",label:"Hover"},{name:"active",label:"Click"},{name:"nth-of-type(2n)",label:"Even/Odd"}]}},function(module,exports,__webpack_require__){"use strict";module.exports=function(config){var c=config||{},defaults=__webpack_require__(222),Selectors=__webpack_require__(54),ClassTagsView=__webpack_require__(225);var selectors,selectorTags;return{name:"SelectorManager",init:function init(conf){c=conf||{};for(var name in defaults){if(!(name in c))c[name]=defaults[name]}var ppfx=c.pStylePrefix;if(ppfx)c.stylePrefix=ppfx+c.stylePrefix;selectors=new Selectors(c.selectors,{em:c.em,config:c});selectorTags=new ClassTagsView({collection:selectors,config:c});return this},add:function add(name,opts){var obj=opts||{};obj.name=name.name||name;return selectors.add(obj)},get:function get(name){return selectors.where({name:name})[0]},getAll:function getAll(){return selectors},render:function render(selectors){if(selectors){var view=new ClassTagsView({collection:new Selectors(selectors),config:c});return view.render().el}else return selectorTags.render().el}}}},function(module,exports,__webpack_require__){"use strict";(function(_){var Backbone=__webpack_require__(0);module.exports=Backbone.View.extend({template:_.template('\n  <span id="<%= pfx %>checkbox" class="fa"></span>\n  <span id="<%= pfx %>tag-label">\n      <input class="<%= ppfx %>no-app" value="<%= label %>" <%= inputProp %>/>\n  </span>\n  <span id="<%= pfx %>close">&Cross;</span>'),events:{},initialize:function initialize(o){this.config=o.config||{};this.coll=o.coll||null;this.pfx=this.config.stylePrefix||"";this.ppfx=this.config.pStylePrefix||"";this.inputProp="readonly";this.target=this.config.em;this.className=this.pfx+"tag";this.closeId=this.pfx+"close";this.chkId=this.pfx+"checkbox";this.labelId=this.pfx+"tag-label";this.events["click #"+this.closeId]="removeTag";this.events["click #"+this.chkId]="changeStatus";this.events["dblclick #"+this.labelId]="startEditTag";this.events["keypress #"+this.labelId+" input"]="updateInputLabel";this.events["blur #"+this.labelId+" input"]="endEditTag";this.listenTo(this.model,"change:active",this.updateStatus);this.delegateEvents()},startEditTag:function startEditTag(){this.$labelInput.prop(this.inputProp,false)},endEditTag:function endEditTag(){var value=this.$labelInput.val();var next=this.model.escapeName(value);if(this.target){var clsm=this.target.get("SelectorManager");if(clsm){if(clsm.get(next))this.$labelInput.val(this.model.get("label"));else this.model.set({name:next,label:value})}}this.$labelInput.prop(this.inputProp,true)},changeStatus:function changeStatus(){this.model.set("active",!this.model.get("active"));this.target.trigger("targetClassUpdated")},removeTag:function removeTag(e){var comp=this.target.get("selectedComponent");if(comp){alert("aaaa3");console.error("GET OF CLACCESS.. REMOVE...");console.error(this.model);comp.get("classes").remove(this.model)}if(this.coll){alert("all class remoe?");this.coll.remove(this.model);this.target.trigger("targetClassRemoved")}console.error("REMOVE THIS");console.error(this);this.remove()},updateStatus:function updateStatus(){if(!this.$chk)this.$chk=this.$el.find("#"+this.pfx+"checkbox");if(this.model.get("active")){this.$chk.removeClass("fa-circle-o").addClass("fa-dot-circle-o");this.$el.removeClass("opac50")}else{this.$chk.removeClass("fa-dot-circle-o").addClass("fa-circle-o");this.$el.addClass("opac50")}},updateInputLabel:function updateInputLabel(){if(!this.$labelInput)this.$labelInput=this.$el.find("input");var size=this.$labelInput.val().length-1;size=size<1?1:size;this.$labelInput.attr("size",size)},render:function render(){this.$el.html(this.template({label:this.model.get("label"),pfx:this.pfx,ppfx:this.ppfx,inputProp:this.inputProp}));this.updateStatus();this.$el.attr("class",this.className);this.updateInputLabel();return this}})}).call(exports,__webpack_require__(1))},function(module,exports,__webpack_require__){"use strict";(function(_){var Backbone=__webpack_require__(0);var ClassTagView=__webpack_require__(224);module.exports=Backbone.View.extend({template:_.template('\n  <div id="<%= pfx %>up">\n    <div id="<%= pfx %>label"><%= label %></div>\n    <div id="<%= pfx %>status-c">\n      <span id="<%= pfx %>input-c">\n        <div class="<%= ppfx %>field <%= ppfx %>select">\n          <span id="<%= ppfx %>input-holder">\n            <select id="<%= pfx %>states">\n              <option value=""><%= statesLabel %></option>\n            </select>\n          </span>\n          <div class="<%= ppfx %>sel-arrow">\n            <div class="<%= ppfx %>d-s-arrow"></div>\n          </div>\n        </div>\n      </span>\n    </div>\n  </div>\n  <div id="<%= pfx %>tags-field" class="<%= ppfx %>field">\n    <div id="<%= pfx %>tags-c"></div>\n    <input id="<%= pfx %>new" />\n    <span id="<%= pfx %>add-tag" class="fa fa-plus"></span>\n  </div>\n  <div id="<%= pfx %>sel-help">\n    <div id="<%= pfx %>label">Selected</div>\n    <div id="<%= pfx %>sel"></div>\n    <div style="clear:both"></div>\n  </div>'),events:{},initialize:function initialize(o){this.config=o.config||{};this.pfx=this.config.stylePrefix||"";this.ppfx=this.config.pStylePrefix||"";this.className=this.pfx+"tags";this.addBtnId=this.pfx+"add-tag";this.newInputId=this.pfx+"new";this.stateInputId=this.pfx+"states";this.stateInputC=this.pfx+"input-c";this.states=this.config.states||[];this.events["click #"+this.addBtnId]="startNewTag";this.events["blur #"+this.newInputId]="endNewTag";this.events["keyup #"+this.newInputId]="onInputKeyUp";this.events["change #"+this.stateInputId]="stateChanged";this.target=this.config.em;this.listenTo(this.target,"change:selectedComponent",this.componentChanged);this.listenTo(this.target,"targetClassUpdated",this.updateSelector);this.listenTo(this.collection,"add",this.addNew);this.listenTo(this.collection,"reset",this.renderClasses);this.listenTo(this.collection,"remove",this.tagRemoved);this.delegateEvents()},tagRemoved:function tagRemoved(model){this.updateStateVis()},getStateOptions:function getStateOptions(){var strInput="";for(var i=0;i<this.states.length;i++){strInput+='<option value="'+this.states[i].name+'">'+this.states[i].label+"</option>"}return strInput},addNew:function addNew(model){this.addToClasses(model)},startNewTag:function startNewTag(e){this.$addBtn.hide();this.$input.show().focus()},endNewTag:function endNewTag(e){this.$addBtn.show();this.$input.hide().val("")},onInputKeyUp:function onInputKeyUp(e){if(e.keyCode===13)this.addNewTag(this.$input.val());else if(e.keyCode===27)this.endNewTag()},componentChanged:function componentChanged(e){this.compTarget=this.target.get("selectedComponent");
if(this.compTarget)this.getStates().val(this.compTarget.get("state"));var models=this.compTarget?this.compTarget.get("classes").models:[];this.collection.reset(models);this.updateStateVis()},updateStateVis:function updateStateVis(){if(this.collection.length)this.getStatesC().css("display","block");else this.getStatesC().css("display","none");this.updateSelector()},updateSelector:function updateSelector(){this.compTarget=this.target.get("selectedComponent");if(!this.compTarget||!this.compTarget.get)return;var result="";var models=this.compTarget.get("classes");models.each(function(model){if(model.get("active"))result+="."+model.get("name")});var state=this.compTarget.get("state");result=state?result+":"+state:result;var el=this.el.querySelector("#"+this.pfx+"sel");if(el)el.innerHTML=result},stateChanged:function stateChanged(e){if(this.compTarget){this.compTarget.set("state",this.$states.val());if(this.target)this.target.trigger("targetStateUpdated");this.updateSelector()}},addNewTag:function addNewTag(name){if(!name)return;if(this.target){var cm=this.target.get("SelectorManager");var model=cm.add(name);if(this.compTarget){var targetCls=this.compTarget.get("classes");var lenB=targetCls.length;targetCls.add(model);var lenA=targetCls.length;this.collection.add(model);if(lenA>lenB)this.target.trigger("targetClassAdded");this.updateStateVis()}}this.endNewTag()},addToClasses:function addToClasses(model,fragmentEl){var fragment=fragmentEl||null;var view=new ClassTagView({model:model,config:this.config,coll:this.collection});var rendered=view.render().el;if(fragment)fragment.appendChild(rendered);else this.getClasses().append(rendered);return rendered},renderClasses:function renderClasses(){var fragment=document.createDocumentFragment();this.collection.each(function(model){this.addToClasses(model,fragment)},this);if(this.getClasses())this.getClasses().empty().append(fragment);return this},getClasses:function getClasses(){if(!this.$classes)this.$classes=this.$el.find("#"+this.pfx+"tags-c");return this.$classes},getStates:function getStates(){if(!this.$states)this.$states=this.$el.find("#"+this.stateInputId);return this.$states},getStatesC:function getStatesC(){if(!this.$statesC)this.$statesC=this.$el.find("#"+this.stateInputC);return this.$statesC},render:function render(){this.$el.html(this.template({label:this.config.label,statesLabel:this.config.statesLabel,pfx:this.pfx,ppfx:this.ppfx}));this.$input=this.$el.find("input#"+this.newInputId);this.$addBtn=this.$el.find("#"+this.addBtnId);this.$classes=this.$el.find("#"+this.pfx+"tags-c");this.$states=this.$el.find("#"+this.stateInputId);this.$statesC=this.$el.find("#"+this.stateInputC);this.$states.append(this.getStateOptions());this.renderClasses();this.$el.attr("class",this.className);return this}})}).call(exports,__webpack_require__(1))},function(module,exports,__webpack_require__){"use strict";module.exports={id:"gjs-",autosave:1,autoload:1,type:"local",stepsBeforeSave:1,storeComponents:false,storeStyles:false,storeHtml:true,storeCss:true,checkLocal:true,params:{},urlStore:"",urlLoad:"",beforeSend:function beforeSend(jqXHR,settings){},onComplete:function onComplete(jqXHR,status){},contentTypeJson:false}},function(module,exports,__webpack_require__){"use strict";module.exports=function(){var c={},defaults=__webpack_require__(226),LocalStorage=__webpack_require__(228),RemoteStorage=__webpack_require__(229);var storages={};var defaultStorages={};return{name:"StorageManager",init:function init(config){c=config||{};for(var name in defaults){if(!(name in c))c[name]=defaults[name]}defaultStorages.remote=new RemoteStorage(c);defaultStorages.local=new LocalStorage(c);c.currentStorage=c.type;return this},onLoad:function onLoad(){this.loadDefaultProviders().setCurrent(c.type)},isAutosave:function isAutosave(){return!!c.autosave},setAutosave:function setAutosave(v){c.autosave=!!v;return this},getStepsBeforeSave:function getStepsBeforeSave(){return c.stepsBeforeSave},setStepsBeforeSave:function setStepsBeforeSave(v){c.stepsBeforeSave=v;return this},add:function add(id,storage){storages[id]=storage;return this},get:function get(id){return storages[id]||null},getStorages:function getStorages(){return storages},getCurrent:function getCurrent(){return c.currentStorage},setCurrent:function setCurrent(id){c.currentStorage=id;return this},store:function store(data,clb){var st=this.get(this.getCurrent());var dataF={};for(var key in data){dataF[c.id+key]=data[key]}return st?st.store(dataF,clb):null},load:function load(keys){var st=this.get(this.getCurrent());var keysF=[];var result={};if(typeof keys==="string")keys=[keys];for(var i=0,len=keys.length;i<len;i++){keysF.push(c.id+keys[i])}var loaded=st?st.load(keysF):{};for(var itemKey in loaded){var reg=new RegExp("^"+c.id+"");var itemKeyR=itemKey.replace(reg,"");result[itemKeyR]=loaded[itemKey]}return result},loadDefaultProviders:function loadDefaultProviders(){for(var id in defaultStorages){this.add(id,defaultStorages[id])}return this},getConfig:function getConfig(){return c}}}},function(module,exports,__webpack_require__){"use strict";var Backbone=__webpack_require__(0);module.exports=Backbone.Model.extend({defaults:{checkLocal:true},store:function store(data,clb){this.checkStorageEnvironment();for(var key in data){localStorage.setItem(key,data[key])}if(typeof clb=="function"){clb()}},load:function load(keys){this.checkStorageEnvironment();var result={};for(var i=0,len=keys.length;i<len;i++){var value=localStorage.getItem(keys[i]);if(value)result[keys[i]]=value}return result},remove:function remove(keys){this.checkStorageEnvironment();for(var i=0,len=keys.length;i<len;i++){localStorage.removeItem(keys[i])}},checkStorageEnvironment:function checkStorageEnvironment(){if(this.get("checkLocal")&&!localStorage)console.warn("Your browser doesn't support localStorage")}})},function(module,exports,__webpack_require__){"use strict";var Backbone=__webpack_require__(0);module.exports=Backbone.Model.extend({defaults:{urlStore:"",urlLoad:"",params:{},beforeSend:function beforeSend(){},onComplete:function onComplete(){},contentTypeJson:false},store:function store(data,clb){var fd={},params=this.get("params");for(var k in data){fd[k]=data[k]}for(var key in params){fd[key]=params[key]}$.ajax({url:this.get("urlStore"),beforeSend:this.get("beforeSend"),complete:this.get("onComplete"),method:"POST",dataType:"json",contentType:this.get("contentTypeJson")?"application/json; charset=utf-8":"x-www-form-urlencoded",data:this.get("contentTypeJson")?JSON.stringify(fd):fd}).always(function(){if(typeof clb=="function"){clb()}})},load:function load(keys){var result={},fd={},params=this.get("params");for(var key in params){fd[key]=params[key]}fd.keys=keys;$.ajax({url:this.get("urlLoad"),beforeSend:this.get("beforeSend"),complete:this.get("onComplete"),data:fd,async:false,method:"GET"}).done(function(d){result=d});return result}})},function(module,exports,__webpack_require__){"use strict";module.exports={stylePrefix:"sm-",sectors:[],textNoElement:"Select an element before using Style Manager",hideNotStylable:true}},function(module,exports,__webpack_require__){"use strict";var Backbone=__webpack_require__(0);module.exports=Backbone.Model.extend({defaults:{index:"",value:"",values:{},active:true,preview:false},initialize:function initialize(){var value=this.get("value");if(!value){var val="";var values=this.get("values");for(var prop in values){val+=" "+values[prop]}this.set("value",val.trim())}}})},function(module,exports,__webpack_require__){"use strict";var Backbone=__webpack_require__(0);var Layers=__webpack_require__(56);module.exports=Backbone.Model.extend({defaults:{name:"",property:"",type:"",units:[],unit:"",defaults:"",info:"",value:"",icon:"",preview:false,detached:false,visible:true,functionName:"",properties:[],layers:[],list:[],fixedValues:["initial","inherit"]},initialize:function initialize(opt){var o=opt||{};var type=this.get("type");var name=this.get("name");var prop=this.get("property");var props=this.get("properties");if(!name)this.set("name",prop.charAt(0).toUpperCase()+prop.slice(1).replace(/-/g," "));if(props.length){var Properties=__webpack_require__(57);this.set("properties",new Properties(props))}switch(type){case"stack":this.set("layers",new Layers);break}},getValue:function getValue(){var result="";var type=this.get("type");switch(type){case"integer":result=this.get("value")+this.get("unit");break;default:result=this.get("value");break}return result}})},function(module,exports,__webpack_require__){"use strict";var Backbone=__webpack_require__(0);module.exports=function(){return{build:function build(props){var objs=[];var dftFixedValues=["initial","inherit"];if(typeof props==="string")props=[props];for(var i=0,len=props.length;i<len;i++){var obj={};var prop=props[i];obj.property=prop;switch(prop){case"border-radius-c":obj.property="border-radius";break}switch(prop){case"margin-top":case"margin-right":case"margin-bottom":case"margin-left":case"padding-top":case"padding-right":case"padding-bottom":case"padding-left":case"width":case"max-width":case"min-width":case"height":case"max-height":case"min-height":obj.fixedValues=["initial","inherit","auto"];break}switch(prop){case"float":case"position":case"text-align":obj.type="radio";break;case"display":case"font-family":case"font-weight":case"border-style":case"box-shadow-type":case"background-repeat":case"background-position":case"background-attachment":case"background-size":case"transition-property":case"transition-timing-function":case"cursor":case"overflow":obj.type="select";break;case"top":case"right":case"bottom":case"left":case"margin-top":case"margin-right":case"margin-bottom":case"margin-left":case"padding-top":case"padding-right":case"padding-bottom":case"padding-left":case"min-height":case"min-width":case"max-height":case"max-width":case"width":case"height":case"font-size":case"letter-spacing":case"line-height":case"text-shadow-h":case"text-shadow-v":case"text-shadow-blur":case"border-radius-c":case"border-top-left-radius":case"border-top-right-radius":case"border-bottom-left-radius":case"border-bottom-right-radius":case"border-width":case"box-shadow-h":case"box-shadow-v":case"box-shadow-blur":case"box-shadow-spread":case"transition-duration":case"perspective":case"transform-rotate-x":case"transform-rotate-y":case"transform-rotate-z":case"transform-scale-x":case"transform-scale-y":case"transform-scale-z":obj.type="integer";break;case"margin":case"padding":case"border-radius":case"border":case"transform":obj.type="composite";break;case"color":case"text-shadow-color":case"background-color":case"border-color":case"box-shadow-color":obj.type="color";break;case"text-shadow":case"box-shadow":case"background":case"transition":obj.type="stack";break;case"background-image":obj.type="file";break}switch(prop){case"float":case"background-color":case"background-image":obj.defaults="none";break;case"display":obj.defaults="block";break;case"position":obj.defaults="static";break;case"top":case"right":case"bottom":case"left":case"margin-top":case"margin-right":case"margin-bottom":case"margin-left":case"padding-top":case"padding-right":case"padding-bottom":case"padding-left":case"text-shadow-h":case"text-shadow-v":case"text-shadow-blur":case"border-radius-c":case"border-top-left-radius":case"border-top-right-radius":case"border-bottom-left-radius":case"border-bottom-right-radius":case"box-shadow-h":case"box-shadow-v":case"box-shadow-spread":case"perspective":case"transform-rotate-x":case"transform-rotate-y":case"transform-rotate-z":obj.defaults=0;break;case"transform-scale-x":case"transform-scale-y":case"transform-scale-z":obj.defaults=1;break;case"box-shadow-blur":obj.defaults=5;break;case"min-height":case"min-width":case"max-height":case"max-width":case"width":case"height":case"background-size":case"cursor":obj.defaults="auto";break;case"font-family":obj.defaults="Arial, Helvetica, sans-serif";break;case"font-size":case"border-width":obj.defaults="medium";break;case"font-weight":obj.defaults="400";break;case"letter-spacing":case"line-height":obj.defaults="normal";break;case"color":case"text-shadow-color":case"border-color":case"box-shadow-color":obj.defaults="black";break;case"text-align":obj.defaults="left";break;case"border-style":obj.defaults="solid";break;case"box-shadow-type":obj.defaults="";break;case"background-repeat":obj.defaults="repeat";break;case"background-position":obj.defaults="left top";break;case"background-attachment":obj.defaults="scroll";break;case"transition-property":obj.defaults="width";break;case"transition-duration":obj.defaults="2";break;case"transition-timing-function":obj.defaults="ease";break;case"overflow":obj.defaults="visible";break}switch(prop){case"top":case"right":case"bottom":case"left":case"margin-top":case"margin-right":case"margin-bottom":case"margin-left":case"padding-top":case"padding-right":case"padding-bottom":case"padding-left":case"min-height":case"min-width":case"max-height":case"max-width":case"width":case"height":case"text-shadow-h":case"text-shadow-v":case"text-shadow-blur":case"border-radius-c":case"border-top-left-radius":case"border-top-right-radius":case"border-bottom-left-radius":case"border-bottom-right-radius":case"box-shadow-h":case"box-shadow-v":obj.units=["px","%"];break;case"font-size":case"letter-spacing":case"line-height":obj.units=["px","em","rem","%"];break;case"border-width":obj.units=["px","em"];break;case"box-shadow-blur":case"box-shadow-spread":case"perspective":obj.units=["px"];break;case"transition-duration":obj.units=["s"];break;case"transform-rotate-x":case"transform-rotate-y":case"transform-rotate-z":obj.units=["deg"];break}switch(prop){case"min-height":case"min-width":case"max-height":case"max-width":case"width":case"height":case"font-size":case"text-shadow-blur":case"border-radius-c":case"border-top-left-radius":case"border-top-right-radius":case"border-bottom-left-radius":case"border-bottom-right-radius":case"border-width":case"box-shadow-blur":case"transition-duration":case"perspective":obj.min=0;break}switch(prop){case"text-shadow":case"box-shadow":case"background":obj.preview=true;break}switch(prop){case"background":obj.detached=true;break}switch(prop){case"transform-rotate-x":obj.functionName="rotateX";break;case"transform-rotate-y":obj.functionName="rotateY";break;case"transform-rotate-z":obj.functionName="rotateZ";break;case"transform-scale-x":obj.functionName="scaleX";break;case"transform-scale-y":obj.functionName="scaleY";break;case"transform-scale-z":obj.functionName="scaleZ";break;case"background-image":obj.functionName="url";break}switch(prop){case"float":obj.list=[{value:"none"},{value:"left"},{value:"right"}];break;case"display":obj.list=[{value:"block"},{value:"inline"},{value:"inline-block"},{value:"none"}];break;case"position":obj.list=[{value:"static"},{value:"relative"},{value:"absolute"},{value:"fixed"}];break;case"font-family":var ss=", sans-serif";var s=", serif";var fonts=["Arial, Helvetica"+ss,"Arial Black, Gadget"+ss,"Brush Script MT"+ss,"Comic Sans MS, cursive"+ss,"Courier New, Courier, monospace","Georgia, serif","Helvetica, serif","Impact, Charcoal"+ss,"Lucida Sans Unicode, Lucida Grande"+ss,"Tahoma, Geneva"+ss,"Times New Roman, Times, serif","Trebuchet MS, Helvetica"+ss,"Verdana, Geneva"+ss];obj.list=[];for(var j=0,l=fonts.length;j<l;j++){var font={};font.value=fonts[j];font.name=fonts[j].split(",")[0];font.style="font-family: "+fonts[j]+"; font-size:15px";obj.list.push(font)}break;case"font-weight":obj.list=[{value:"100",name:"Thin"},{value:"200",name:"Extra-Light"},{value:"300",name:"Light"},{value:"400",name:"Normal"},{value:"500",name:"Medium"},{value:"600",name:"Semi-Bold"},{value:"700",name:"Bold"},{value:"800",name:"Extra-Bold"},{value:"900",name:"Ultra-Bold"}];break;case"text-align":obj.list=[{value:"left"},{value:"center"},{value:"right"},{value:"justify"}];break;case"border-style":obj.list=[{value:"none"},{value:"solid"},{value:"dotted"},{value:"dashed"},{value:"double"},{value:"groove"},{value:"ridge"},{value:"inset"},{value:"outset"}];break;case"box-shadow-type":obj.list=[{value:"",name:"Outside"},{value:"inset",name:"Inside"}];break;case"background-repeat":obj.list=[{value:"repeat"},{value:"repeat-x"},{value:"repeat-y"},{value:"no-repeat"}];break;case"background-position":obj.list=[{value:"left top"},{value:"left center"},{value:"left bottom"},{value:"right top"},{value:"right center"},{value:"right bottom"},{value:"center top"},{value:"center center"},{value:"center bottom"}];break;case"background-attachment":obj.list=[{value:"scroll"},{value:"fixed"},{value:"local"}];break;case"background-size":obj.list=[{value:"auto"},{value:"cover"},{value:"contain"}];break;case"transition-property":obj.list=[{value:"all"},{value:"width"},{value:"height"},{value:"background-color"},{value:"transform"},{value:"box-shadow"},{value:"opacity"}];break;case"transition-timing-function":obj.list=[{value:"linear"},{value:"ease"},{value:"ease-in"},{value:"ease-out"},{value:"ease-in-out"}];break;case"cursor":obj.list=[{value:"auto"},{value:"pointer"},{value:"copy"},{value:"crosshair"},{value:"grab"},{value:"grabbing"},{value:"help"},{value:"move"},{value:"text"}];break;case"overflow":obj.list=[{value:"visible"},{value:"hidden"},{value:"scroll"},{value:"auto"}];break}switch(prop){case"margin":obj.properties=this.build(["margin-top","margin-right","margin-bottom","margin-left"]);break;case"padding":obj.properties=this.build(["padding-top","padding-right","padding-bottom","padding-left"]);break;case"text-shadow":obj.properties=this.build(["text-shadow-h","text-shadow-v","text-shadow-blur","text-shadow-color"]);break;case"border":obj.properties=this.build(["border-width","border-style","border-color"]);break;case"border-radius":obj.properties=this.build(["border-top-left-radius","border-top-right-radius","border-bottom-left-radius","border-bottom-right-radius"]);break;case"box-shadow":obj.properties=this.build(["box-shadow-h","box-shadow-v","box-shadow-blur","box-shadow-spread","box-shadow-color","box-shadow-type"]);break;case"background":obj.properties=this.build(["background-image","background-repeat","background-position","background-attachment","background-size"]);break;case"transition":obj.properties=this.build(["transition-property","transition-duration","transition-timing-function"]);break;case"transform":obj.properties=this.build(["transform-rotate-x","transform-rotate-y","transform-rotate-z","transform-scale-x","transform-scale-y","transform-scale-z"]);break}objs.push(obj)}return objs}}}},function(module,exports,__webpack_require__){"use strict";(function(_){var Backbone=__webpack_require__(0);var Properties=__webpack_require__(57);var PropertyFactory=__webpack_require__(233);module.exports=Backbone.Model.extend({defaults:{id:"",name:"",open:true,buildProps:"",extendBuilded:1,properties:[]},initialize:function initialize(opts){var o=opts||{};var props=[];var builded=this.buildProperties(o.buildProps);if(!builded)props=this.get("properties");else props=this.extendProperties(builded);var propsModel=new Properties(props);propsModel.sector=this;this.set("properties",propsModel)},extendProperties:function extendProperties(props,moProps,ex){var pLen=props.length;var mProps=moProps||this.get("properties");var ext=this.get("extendBuilded");var isolated=[];for(var i=0,len=mProps.length;i<len;i++){var mProp=mProps[i];var found=0;for(var j=0;j<pLen;j++){var prop=props[j];if(mProp.property==prop.property){var mPProps=mProp.properties;if(mPProps&&mPProps.length){mProp.properties=this.extendProperties(prop.properties,mPProps,1)}props[j]=ext?_.extend(prop,mProp):mProp;isolated[j]=props[j];found=1;continue}}if(!found){props.push(mProp);isolated.push(mProp)}}return ex?isolated:props},buildProperties:function buildProperties(props){var r;var buildP=props||[];if(!buildP.length)return;if(!this.propFactory)this.propFactory=new PropertyFactory;r=this.propFactory.build(buildP);return r}})}).call(exports,__webpack_require__(1))},function(module,exports,__webpack_require__){"use strict";var Backbone=__webpack_require__(0);var Sector=__webpack_require__(234);module.exports=Backbone.Collection.extend({model:Sector})},function(module,exports,__webpack_require__){"use strict";(function(_){var Backbone=__webpack_require__(0);module.exports=Backbone.View.extend({events:{click:"updateIndex"},template:_.template('\n  <div id="<%= pfx %>move">\n    <i class="fa fa-arrows"></i>\n  </div>\n  <div id="<%= pfx %>label"><%= label %></div>\n  <div id="<%= pfx %>preview-box">\n  	<div id="<%= pfx %>preview"></div>\n  </div>\n  <div id="<%= pfx %>close-layer" class="<%= pfx %>btn-close">&Cross;</div>\n  <div id="<%= pfx %>inputs"></div>\n  <div style="clear:both"></div>'),initialize:function initialize(o){this.stackModel=o.stackModel||{};this.config=o.config||{};this.pfx=this.config.stylePrefix||"";this.className=this.pfx+"layer";this.sorter=o.sorter||null;this.listenTo(this.model,"destroy remove",this.remove);this.listenTo(this.model,"change:value",this.valueChanged);this.listenTo(this.model,"change:props",this.showProps);this.events["click #"+this.pfx+"close-layer"]="remove";this.events["mousedown > #"+this.pfx+"move"]="initSorter";if(!this.model.get("preview")){this.$el.addClass(this.pfx+"no-preview")}this.$el.data("model",this.model);this.delegateEvents()},initSorter:function initSorter(e){if(this.sorter)this.sorter.startSort(this.el)},getProps:function getProps(){if(this.stackModel.get)return this.stackModel.get("properties");else return null},valueChanged:function valueChanged(){var preview=this.model.get("preview");if(!preview)return;if(!this.$preview)this.$preview=this.$el.find("#"+this.pfx+"preview");var prw="";var props=this.getProps();var previewEl=this.$preview;if(typeof preview==="function"){preview(props,previewEl)}else{this.onPreview(props,previewEl)}},onPreview:function onPreview(props,$el){var aV=this.model.get("value").split(" ");var lim=3;var nV="";props.each(function(p,index){var v=aV[index]||"";if(v){if(p.get("type")=="integer"){var vI=parseInt(v,10),u=v.replace(vI,"");vI=!isNaN(vI)?vI:0;if(vI>lim)vI=lim;if(vI<-lim)vI=-lim;v=vI+u}}nV+=v+" "});if(this.stackModel.get){var property=this.stackModel.get("property");if(property)this.$preview.get(0).style[property]=nV}},showProps:function showProps(){this.$props=this.model.get("props");this.$el.find("#"+this.pfx+"inputs").html(this.$props.show());this.model.set({props:null},{silent:true})},remove:function remove(e){if(this.$props)this.$props.detach();if(e&&e.stopPropagation)e.stopPropagation();Backbone.View.prototype.remove.apply(this,arguments);if(this.model.collection.contains(this.model))this.model.collection.remove(this.model);if(this.stackModel&&this.stackModel.set){this.stackModel.set({stackIndex:null},{silent:true});this.stackModel.trigger("updateValue")}},updateIndex:function updateIndex(e){var i=this.getIndex();this.stackModel.set("stackIndex",i);if(this.model.collection)this.model.collection.trigger("deselectAll");this.$el.addClass(this.pfx+"active")},getIndex:function getIndex(){var index=0;var model=this.model;if(model.collection){index=model.collection.indexOf(model)}return index},render:function render(){this.$el.html(this.template({label:"Layer "+this.model.get("index"),pfx:this.pfx}));this.$el.attr("class",this.className);this.valueChanged();return this}})}).call(exports,__webpack_require__(1))},function(module,exports,__webpack_require__){"use strict";var Backbone=__webpack_require__(0);var LayerView=__webpack_require__(236);module.exports=Backbone.View.extend({initialize:function initialize(o){this.config=o.config||{};this.stackModel=o.stackModel;this.preview=o.preview;this.pfx=this.config.stylePrefix||"";this.ppfx=this.config.pStylePrefix||"";this.className=this.pfx+"layers "+this.ppfx+"field";this.listenTo(this.collection,"add",this.addTo);this.listenTo(this.collection,"deselectAll",this.deselectAll);this.listenTo(this.collection,"reset",this.render);var em=this.config.em||"";var utils=em?em.get("Utils"):"";this.sorter=utils?new utils.Sorter({container:this.el,containerSel:"."+this.pfx+"layers",itemSel:"."+this.pfx+"layer",pfx:this.config.pStylePrefix}):"";this.$el.data("model",{});this.$el.data("collection",this.collection)},addTo:function addTo(model){var i=this.collection.indexOf(model);this.addToCollection(model,null,i)},addToCollection:function addToCollection(model,fragmentEl,index){var fragment=fragmentEl||null;var viewObject=LayerView;if(typeof this.preview!=="undefined"){model.set("preview",this.preview)}var view=new viewObject({model:model,stackModel:this.stackModel,config:this.config,sorter:this.sorter});var rendered=view.render().el;if(fragment){fragment.appendChild(rendered)}else{if(typeof index!="undefined"){var method="before";if(this.$el.children().length==index){index--;method="after"}if(index<0){this.$el.append(rendered)}else this.$el.children().eq(index)[method](rendered)}else this.$el.append(rendered)}return rendered},deselectAll:function deselectAll(){this.$el.find("."+this.pfx+"layer").removeClass(this.pfx+"active")},render:function render(){var fragment=document.createDocumentFragment();this.$el.empty();this.collection.each(function(model){this.addToCollection(model,fragment)},this);this.$el.append(fragment);this.$el.attr("class",this.className);if(this.sorter)this.sorter.plh=null;return this}})},function(module,exports,__webpack_require__){"use strict";var Backbone=__webpack_require__(0);var PropertyView=__webpack_require__(12);var InputColor=__webpack_require__(41);module.exports=PropertyView.extend({renderTemplate:function renderTemplate(){},renderInput:function renderInput(){if(!this.input){var inputColor=new InputColor({target:this.target,model:this.model,ppfx:this.ppfx});this.input=inputColor.render();this.$el.append(this.input.$el);this.$input=this.input.inputEl;this.$color=this.input.colorEl}this.setValue(this.componentValue)},setValue:function setValue(value){this.input.setValue(value,{silent:1})}})},function(module,exports,__webpack_require__){"use strict";(function(_){var Backbone=__webpack_require__(0);var PropertyView=__webpack_require__(12);module.exports=PropertyView.extend({template:_.template('<div class="<%= pfx %>field <%= pfx %>file">\n    <div id=\'<%= pfx %>input-holder\'>\n      <div class="<%= pfx %>btn-c">\n        <button class="<%= pfx %>btn" id="<%= pfx %>images" type="button"><%= assets %></button>\n      </div>\n      <div style="clear:both;"></div>\n    </div>\n    <div id="<%= pfx %>preview-box">\n      <div id="<%= pfx %>preview-file"></div>\n      <div id="<%= pfx %>close">&Cross;</div>\n    </div>\n  </div>\n  <div style="clear:both"></div>'),initialize:function initialize(options){PropertyView.prototype.initialize.apply(this,arguments);this.assets=this.target.get("assets");this.modal=this.target.get("Modal");this.am=this.target.get("AssetManager");this.className=this.className+" "+this.pfx+"file";this.events["click #"+this.pfx+"close"]="removeFile";this.events["click #"+this.pfx+"images"]="openAssetManager";this.delegateEvents()},renderInput:function renderInput(){if(!this.$input){this.$input=$("<input>",{placeholder:this.defaultValue,type:"text"})}if(!this.$preview){this.$preview=this.$el.find("#"+this.pfx+"preview-file")}if(!this.$previewBox){this.$previewBox=this.$el.find("#"+this.pfx+"preview-box")}if(!this.componentValue||this.componentValue==this.defaultValue)this.setPreviewView(0);else this.setPreviewView(1);this.setValue(this.componentValue,0)},setPreviewView:function setPreviewView(v){if(!this.$previewBox)return;if(v)this.$previewBox.addClass(this.pfx+"show");else this.$previewBox.removeClass(this.pfx+"show")},spreadUrl:function spreadUrl(url){this.setValue(url);this.setPreviewView(1)},setPreview:function setPreview(url){if(this.$preview)this.$preview.css("background-image","url("+url+")")},setValue:function setValue(value,f){PropertyView.prototype.setValue.apply(this,arguments);this.setPreview(value)},renderTemplate:function renderTemplate(){this.$el.append(this.template({upload:"Upload",assets:"Images",pfx:this.pfx}))},cleanValue:function cleanValue(){this.setPreviewView(0);this.model.set({value:""},{silent:true})},removeFile:function removeFile(){this.model.set("value",this.defaultValue);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}PropertyView.prototype.cleanValue.apply(this,args);this.setPreviewView(0)},openAssetManager:function openAssetManager(e){var that=this;if(this.modal&&this.am){this.modal.setTitle("Select image");this.modal.setContent(this.am.render());this.am.setTarget(null);this.modal.open();this.am.onSelect(function(model){that.modal.close();that.spreadUrl(model.get("src"));that.valueChanged(e)})}}})}).call(exports,__webpack_require__(1))},function(module,exports,__webpack_require__){"use strict";var Backbone=__webpack_require__(0);var PropertyView=__webpack_require__(12);var InputNumber=__webpack_require__(42);module.exports=PropertyView.extend({initialize:function initialize(options){PropertyView.prototype.initialize.apply(this,arguments);this.listenTo(this.model,"change:unit",this.valueChanged)},getValueForTarget:function getValueForTarget(){var model=this.model;return model.get("value")+model.get("unit")},renderInput:function renderInput(){if(!this.input){var inputNumber=new InputNumber({model:this.model,ppfx:this.ppfx});this.input=inputNumber.render();this.$el.append(this.input.$el);this.$input=this.input.inputEl;this.$unit=this.input.unitEl}this.setValue(this.componentValue)},renderTemplate:function renderTemplate(){},setValue:function setValue(value){this.input.setValue(value,{silent:1})}})},function(module,exports,__webpack_require__){"use strict";(function(_){var Backbone=__webpack_require__(0);var PropertyView=__webpack_require__(12);module.exports=PropertyView.extend({template:_.template('\n  <div class="<%= ppfx %>field <%= ppfx %>field-radio">\n    <span id=\'<%= pfx %>input-holder\'></span>\n  </div>\n  <div style="clear:both"></div>'),initialize:function initialize(options){PropertyView.prototype.initialize.apply(this,arguments);this.list=this.model.get("list")||[];this.className=this.className+" "+this.pfx+"list"},renderInput:function renderInput(){var pfx=this.pfx;var ppfx=this.ppfx;var itemCls=ppfx+"radio-item-label";var prop=this.property;if(!this.$input){if(this.list&&this.list.length){var input="";_.each(this.list,function(el){var cl=el.className?el.className+" "+pfx+"icon "+itemCls:"",id=prop+"-"+el.value,labelTxt=el.name?el.name:el.value;var titleAttr=el.title?'title="'+el.title+'"':"";input+='<div class="'+ppfx+'radio-item">'+'<input class="'+pfx+'radio" type="radio" id="'+id+'" name="'+prop+'" value="'+el.value+'" />'+'<label class="'+(cl?cl:itemCls)+'" '+titleAttr+' for="'+id+'">'+(cl?"":labelTxt)+"</label></div>"});this.input=input;this.$inputEl=$(this.input);this.$el.find("#"+pfx+"input-holder").html(this.$inputEl);this.$input=this.$inputEl.find('input[name="'+this.property+'"]')}}this.setValue(this.componentValue)},getInputValue:function getInputValue(){return this.$input?this.$el.find("input:checked").val():""},setValue:function setValue(value){var v=this.model.get("value")||this.defaultValue;if(value)v=value;if(this.$input)this.$input.filter('[value="'+v+'"]').prop("checked",true);this.model.set({value:v},{silent:true})}})}).call(exports,__webpack_require__(1))},function(module,exports,__webpack_require__){"use strict";(function(_){var Backbone=__webpack_require__(0);var PropertyView=__webpack_require__(12);module.exports=PropertyView.extend({template:_.template('\n  <div class="<%= ppfx %>field <%= ppfx %>select">\n    <span id=\'<%= pfx %>input-holder\'></span>\n    <div class="<%= ppfx %>sel-arrow">\n      <div class="<%= ppfx %>d-s-arrow"></div>\n    </div>\n  </div>\n  <div style="clear:both"></div>'),initialize:function initialize(options){PropertyView.prototype.initialize.apply(this,arguments);this.list=this.model.get("list")||[]},renderInput:function renderInput(){var pfx=this.pfx;
if(!this.$input){var input="<select>";if(this.list&&this.list.length){_.each(this.list,function(el){var name=el.name?el.name:el.value;var style=el.style?el.style.replace(/"/g,"&quot;"):"";var styleAttr=style?'style="'+style+'"':"";input+='<option value="'+el.value.replace(/"/g,"&quot;")+'" '+styleAttr+">"+name+"</option>"})}input+="</select>";this.input=input;this.$input=$(this.input);this.$el.find("#"+pfx+"input-holder").html(this.$input)}this.setValue(this.componentValue,0)}})}).call(exports,__webpack_require__(1))},function(module,exports,__webpack_require__){"use strict";(function(_){var Backbone=__webpack_require__(0);var PropertyCompositeView=__webpack_require__(59);var Layers=__webpack_require__(56);var LayersView=__webpack_require__(237);module.exports=PropertyCompositeView.extend({template:_.template("\n  <div class=\"<%= pfx %>field <%= pfx %>stack\">\n    <button id='<%= pfx %>add'>+</button>\n    <span id='<%= pfx %>input-holder'></span>\n  </div>\n  <div style=\"clear:both\"></div>"),initialize:function initialize(o){PropertyCompositeView.prototype.initialize.apply(this,arguments);this.model.set("stackIndex",null);this.className=this.pfx+"property "+this.pfx+"stack";this.events["click #"+this.pfx+"add"]="addLayer";this.listenTo(this.model,"change:stackIndex",this.indexChanged);this.listenTo(this.model,"updateValue",this.valueUpdated);this.delegateEvents()},targetUpdated:function targetUpdated(){for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}if(!this.model.get("detached"))PropertyCompositeView.prototype.targetUpdated.apply(this,args);else{this.checkVisibility();this.refreshLayers()}},getLayers:function getLayers(){return this.model.get("layers")},indexChanged:function indexChanged(e){var model=this.model;var layer=this.getLayers().at(model.get("stackIndex"));layer.set("props",this.$props);model.get("properties").each(function(prop){prop.trigger("targetUpdated")})},getStackValues:function getStackValues(){return this.getLayers().pluck("value")},getPropsConfig:function getPropsConfig(opts){var that=this;var result=PropertyCompositeView.prototype.getPropsConfig.apply(this,arguments);result.onChange=function(el,view,opt){var model=view.model;var result=that.build();if(that.model.get("detached")){var propVal="";var index=model.collection.indexOf(model);that.getLayers().each(function(layer){var val=layer.get("values")[model.get("property")];if(val)propVal+=(propVal?",":"")+val});view.updateTargetStyle(propVal,null,opt)}else that.model.set("value",result,opt)};return result},valueOnIndex:function valueOnIndex(index,propView){var result=null;var layerIndex=this.model.get("stackIndex");if(this.model.get("detached")){var targetValue=propView.getTargetValue();var valist=(targetValue+"").split(",");result=valist[layerIndex];result=result?result.trim():propView.getDefaultValue();result=propView.tryFetchFromFunction(result)}else{var aStack=this.getStackValues();var strVar=aStack[layerIndex];if(!strVar)return;var a=strVar.split(" ");if(a.length&&a[index]){result=a[index]}}return result},build:function build(){var stackIndex=this.model.get("stackIndex");if(stackIndex===null)return;for(var _len2=arguments.length,args=Array(_len2),_key2=0;_key2<_len2;_key2++){args[_key2]=arguments[_key2]}var result=PropertyCompositeView.prototype.build.apply(this,args);var model=this.getLayers().at(stackIndex);if(!model)return;var valObj={};this.model.get("properties").each(function(prop){var v=prop.getValue(),func=prop.get("functionName");if(func)v=func+"("+v+")";valObj[prop.get("property")]=v});model.set("values",valObj);model.set("value",result);return this.createValue()},addLayer:function addLayer(e){if(this.getTarget()){var layers=this.getLayers();var layer=layers.add({name:"test"});var index=layers.indexOf(layer);layer.set("value",this.getDefaultValue());this.valueUpdated();this.model.set("stackIndex",index);return layer}},valueUpdated:function valueUpdated(){var model=this.model;if(!model.get("detached")){model.set("value",this.createValue())}else{model.get("properties").each(function(prop){prop.trigger("change:value")})}},createValue:function createValue(){return this.getStackValues().join(", ")},renderLayers:function renderLayers(){if(!this.$field)this.$field=this.$el.find("> ."+this.pfx+"field");if(!this.$layers)this.$layers=new LayersView({collection:this.getLayers(),stackModel:this.model,preview:this.model.get("preview"),config:this.config});this.$field.append(this.$layers.render().el);this.$props.hide();return this},renderInput:function renderInput(){for(var _len3=arguments.length,args=Array(_len3),_key3=0;_key3<_len3;_key3++){args[_key3]=arguments[_key3]}PropertyCompositeView.prototype.renderInput.apply(this,args);this.refreshLayers()},getLayersFromTarget:function getLayersFromTarget(){var arr=[];var target=this.getTarget();if(!target)return arr;var trgStyle=target.get("style");this.model.get("properties").each(function(prop){var style=trgStyle[prop.get("property")];if(style){var list=style.split(",");for(var i=0,len=list.length;i<len;i++){var val=list[i].trim();if(arr[i]){arr[i][prop.get("property")]=val}else{var vals={};vals[prop.get("property")]=val;arr[i]=vals}}}});return arr},refreshLayers:function refreshLayers(){var n=[];var a=[];var fieldName="value";var detached=this.model.get("detached");if(detached){fieldName="values";a=this.getLayersFromTarget()}else{var v=this.getComponentValue();if(v){v.replace(/\(([\w\s,.]*)\)/g,function(match){var cleaned=match.replace(/,\s*/g,",");v=v.replace(match,cleaned)});a=v.split(", ")}}_.each(a,function(e){var o={};o[fieldName]=e;n.push(o)},this);this.$props.detach();var layers=this.getLayers();layers.reset();layers.add(n);if(!detached){this.valueUpdated()}this.model.set({stackIndex:null},{silent:true})},render:function render(){this.renderLabel();this.renderField();this.renderLayers();this.$el.attr("class",this.className);return this}})}).call(exports,__webpack_require__(1))},function(module,exports,__webpack_require__){"use strict";(function(_){var Backbone=__webpack_require__(0);var PropertiesView=__webpack_require__(58);module.exports=Backbone.View.extend({template:_.template('\n  <div class="<%= pfx %>title">\n    <i id="<%= pfx %>caret" class="fa"></i>\n    <%= label %>\n  </div>'),events:{},initialize:function initialize(o){this.config=o.config||{};this.pfx=this.config.stylePrefix||"";this.target=o.target||{};this.propTarget=o.propTarget||{};this.open=this.model.get("open");this.caretR="fa-caret-right";this.caretD="fa-caret-down";this.listenTo(this.model,"change:open",this.updateOpen);this.listenTo(this.model,"updateVisibility",this.updateVisibility);this.events["click ."+this.pfx+"title"]="toggle";this.delegateEvents()},updateVisibility:function updateVisibility(){var show;this.model.get("properties").each(function(prop){if(prop.get("visible")){show=1}});this.el.style.display=show?"block":"none"},updateOpen:function updateOpen(){if(this.model.get("open"))this.show();else this.hide()},show:function show(){this.$el.addClass(this.pfx+"open");this.$el.find("."+this.pfx+"properties").show();this.$caret.removeClass(this.caretR).addClass(this.caretD)},hide:function hide(){this.$el.removeClass(this.pfx+"open");this.$el.find("."+this.pfx+"properties").hide();this.$caret.removeClass(this.caretD).addClass(this.caretR)},toggle:function toggle(){var v=this.model.get("open")?0:1;this.model.set("open",v)},render:function render(){this.$el.html(this.template({pfx:this.pfx,label:this.model.get("name")}));this.$caret=this.$el.find("#"+this.pfx+"caret");this.renderProperties();this.$el.attr("class",this.pfx+"sector no-select");this.updateOpen();return this},renderProperties:function renderProperties(){var objs=this.model.get("properties");if(objs){var view=new PropertiesView({collection:objs,target:this.target,propTarget:this.propTarget,config:this.config});this.$el.append(view.render().el)}}})}).call(exports,__webpack_require__(1))},function(module,exports,__webpack_require__){"use strict";(function(_){var Backbone=__webpack_require__(0);var SectorView=__webpack_require__(244);module.exports=Backbone.View.extend({initialize:function initialize(o){this.config=o.config||{};this.pfx=this.config.stylePrefix||"";this.target=o.target||{};this.propTarget={};_.extend(this.propTarget,Backbone.Events);this.listenTo(this.collection,"add",this.addTo);this.listenTo(this.collection,"reset",this.render);this.listenTo(this.target,"change:selectedComponent targetClassAdded targetClassRemoved targetClassUpdated "+"targetStateUpdated targetStyleUpdated change:device",this.targetUpdated)},addTo:function addTo(model){this.addToCollection(model)},targetUpdated:function targetUpdated(){var el=this.target.get("selectedComponent");if(!el)return;var previewMode=this.target.get("Config").devicePreviewMode;var classes=el.get("classes");var pt=this.propTarget;var device=this.target.getDeviceModel();var state=!previewMode?el.get("state"):"";var mediaText=device&&!previewMode&&device.get("width")?"(max-width: "+device.get("width")+")":"";pt.helper=null;if(classes.length){var cssC=this.target.get("CssComposer");var valid=_.filter(classes.models,function(item){return item.get("active")});var iContainer=cssC.get(valid,state,mediaText);if(!iContainer){iContainer=cssC.add(valid,state,mediaText);iContainer.set("style",el.get("style"));el.set("style",{})}else{}if(state){var clm=this.target.get("SelectorManager");var helperClass=clm.add("hc-state");var helperRule=cssC.get([helperClass]);if(!helperRule)helperRule=cssC.add([helperClass]);else{cssC.getAll().remove(helperRule);cssC.getAll().add(helperRule)}helperRule.set("style",iContainer.get("style"));pt.helper=helperRule}pt.model=iContainer;pt.trigger("update");return}pt.model=el;pt.trigger("update")},addToCollection:function addToCollection(model,fragmentEl){var fragment=fragmentEl||null;var viewObject=SectorView;var view=new viewObject({model:model,id:this.pfx+model.get("name").replace(" ","_").toLowerCase(),name:model.get("name"),properties:model.get("properties"),target:this.target,propTarget:this.propTarget,config:this.config});var rendered=view.render().el;if(fragment){fragment.appendChild(rendered)}else{this.$el.append(rendered)}return rendered},render:function render(){var fragment=document.createDocumentFragment();this.$el.empty();this.collection.each(function(model){this.addToCollection(model,fragment)},this);this.$el.attr("id",this.pfx+"sectors");this.$el.append(fragment);return this}})}).call(exports,__webpack_require__(1))},function(module,exports,__webpack_require__){"use strict";module.exports={stylePrefix:"trt-",labelContainer:"Component settings"}},function(module,exports,__webpack_require__){"use strict";module.exports=function(){var c={},defaults=__webpack_require__(246),Traits=__webpack_require__(60),TraitsView=__webpack_require__(254);var TraitsViewer;return{TraitsView:TraitsView,name:"TraitManager",getConfig:function getConfig(){return c},init:function init(config){c=config||{};for(var name in defaults){if(!(name in c))c[name]=defaults[name]}var ppfx=c.pStylePrefix;if(ppfx)c.stylePrefix=ppfx+c.stylePrefix;TraitsViewer=new TraitsView({collection:[],editor:c.em,config:c});return this},getTraitsViewer:function getTraitsViewer(){return TraitsViewer},addType:function addType(name,trait){var itemView=TraitsViewer.itemView;TraitsViewer.itemsView[name]=itemView.extend(trait)},getType:function getType(name){return TraitsViewer.itemsView[name]}}}},function(module,exports,__webpack_require__){"use strict";var Backbone=__webpack_require__(0);module.exports=Backbone.Model.extend({defaults:{type:"text",label:"",name:"",min:"",max:"",value:"",target:"","default":"",placeholder:"",changeProp:0,options:[]},initialize:function initialize(){if(this.get("target")){this.target=this.get("target");this.unset("target")}}})},function(module,exports,__webpack_require__){"use strict";var Backbone=__webpack_require__(0);module.exports=function(){return{build:function build(props){var objs=[];if(typeof props==="string")props=[props];for(var i=0;i<props.length;i++){var obj={};var prop=props[i];obj.name=prop;switch(prop){case"target":obj.type="select";break}switch(prop){case"title":case"alt":obj.placeholder="eg. Text here";break;case"href":obj.placeholder="eg. https://google.com";break}switch(prop){case"target":obj.options=[{value:"",name:"This window"},{value:"_blank",name:"New window"}];break}objs.push(obj)}return objs}}}()},function(module,exports,__webpack_require__){"use strict";var TraitView=__webpack_require__(16);module.exports=TraitView.extend({initialize:function initialize(o){TraitView.prototype.initialize.apply(this,arguments);var iconCls=this.ppfx+"chk-icon";this.tmpl='<div class="'+this.fieldClass+'"><label class="'+this.inputhClass+'"><i class="'+iconCls+'"></i></label></div>'},onChange:function onChange(){this.model.set("value",this.getInputEl().checked)},getInputEl:function getInputEl(){var first;if(!this.$input)first=1;for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}var el=TraitView.prototype.getInputEl.apply(this,args);if(first){var md=this.model;var name=md.get("name");var target=this.target;if(md.get("changeProp")){el.checked=target.get(name)}else{var attrs=target.get("attributes");el.checked=!!attrs[name]}}return el}})},function(module,exports,__webpack_require__){"use strict";var TraitView=__webpack_require__(16);var InputColor=__webpack_require__(41);module.exports=TraitView.extend({getInputEl:function getInputEl(){if(!this.$input){var value=this.getModelValue();var inputNumber=new InputColor({contClass:this.ppfx+"field-color",model:this.model,ppfx:this.ppfx});this.input=inputNumber.render();this.$input=this.input.colorEl;value=value||"";this.model.set("value",value).trigger("change:value")}return this.$input.get(0)},renderField:function renderField(){if(!this.$input){this.getInputEl();this.$el.append(this.input.el)}}})},function(module,exports,__webpack_require__){"use strict";var TraitView=__webpack_require__(16);var InputNumber=__webpack_require__(42);module.exports=TraitView.extend({getValueForTarget:function getValueForTarget(){var model=this.model;var value=model.get("value");var unit=model.get("unit");return value?value+unit:""},getInputEl:function getInputEl(){if(!this.$input){var value=this.getModelValue();var inputNumber=new InputNumber({contClass:this.ppfx+"field-int",model:this.model,ppfx:this.ppfx});this.input=inputNumber.render();this.$input=this.input.inputEl;this.$unit=this.input.unitEl;this.model.set("value",value);this.$input.val(value)}return this.$input.get(0)},renderField:function renderField(){if(!this.$input){this.$el.append(this.tmpl);this.getInputEl();this.$el.find("."+this.inputhClass).prepend(this.input.el)}}})},function(module,exports,__webpack_require__){"use strict";(function(_){var Backbone=__webpack_require__(0);var TraitView=__webpack_require__(16);module.exports=TraitView.extend({initialize:function initialize(o){TraitView.prototype.initialize.apply(this,arguments);var ppfx=this.ppfx;this.tmpl='<div class="'+this.fieldClass+'"><div class="'+this.inputhClass+'"></div>'+'<div class="'+ppfx+'sel-arrow"><div class="'+ppfx+'d-s-arrow"></div></div> </div>'},getInputEl:function getInputEl(){if(!this.$input){var md=this.model;var opts=md.get("options")||[];var input="<select>";if(opts.length){_.each(opts,function(el){var name,value,style;var attrs="";if(typeof el==="string"){name=el;value=el}else{name=el.name?el.name:el.value;value=el.value.replace(/"/g,"&quot;");style=el.style?el.style.replace(/"/g,"&quot;"):"";attrs+=style?'style="'+style+'"':""}input+='<option value="'+value+'" '+attrs+">"+name+"</option>"})}input+="</select>";this.input=input;this.$input=$(this.input);var target=this.target;var name=md.get("name");var val=md.get("value");if(md.get("changeProp")){val=val||target.get(name)}else{var attrs=target.get("attributes");val=attrs[name]}if(val)this.$input.val(val)}return this.$input.get(0)}})}).call(exports,__webpack_require__(1))},function(module,exports,__webpack_require__){"use strict";var DomainViews=__webpack_require__(43);var TraitView=__webpack_require__(16);var TraitSelectView=__webpack_require__(253);var TraitCheckboxView=__webpack_require__(250);var TraitNumberView=__webpack_require__(252);var TraitColorView=__webpack_require__(251);module.exports=DomainViews.extend({itemView:TraitView,itemsView:{text:TraitView,number:TraitNumberView,select:TraitSelectView,checkbox:TraitCheckboxView,color:TraitColorView},initialize:function initialize(o){this.config=o.config||{};this.em=o.editor;this.pfx=this.config.stylePrefix||"";this.className=this.pfx+"traits";this.listenTo(this.em,"change:selectedComponent",this.updatedCollection);this.updatedCollection()},updatedCollection:function updatedCollection(){this.el.className=this.className;var comp=this.em.get("selectedComponent");if(comp){this.collection=comp.get("traits");this.render()}}})},function(module,exports,__webpack_require__){"use strict";var getBoundingRect=function getBoundingRect(el,win){var w=win||window;var rect=el.getBoundingClientRect();return{left:rect.left+w.pageXOffset,top:rect.top+w.pageYOffset,width:rect.width,height:rect.height}};module.exports={setKey:function setKey(keys,command){},getElementRect:function getElementRect(el){var posFetcher=this.opts.posFetcher||"";return posFetcher?posFetcher(el,{avoidFrameOffset:1}):getBoundingRect(el)},init:function init(opts){this.setOptions(opts);this.handleMouseDown=this.handleMouseDown.bind(this);this.drag=this.drag.bind(this);this.move=this.move.bind(this);this.stop=this.stop.bind(this);this.setKey("up, right, down, left",this.handleKey);return this},setOptions:function setOptions(opts){this.opts=opts||{}},focus:function focus(el){if(el&&el===this.el){return}this.getDocumentEl(el);this.blur();this.el=el;this.handlers=this.opts.dragHandlers||[el];var elRect=this.getElementRect(el);this.elRect=elRect;this.startTop=elRect.top;this.startLeft=elRect.left;this.getDocumentEl().on("mousedown",this.handleMouseDown)},blur:function blur(){this.getDocumentEl().off("mousedown",this.handleMouseDown);this.el=null},start:function start(e){this.startPos=this.getMousePos(e);var docs=this.getDocumentEl();docs.on("mousemove",this.drag);docs.on("mouseup",this.stop);var onStart=this.opts.onStart;if(typeof onStart==="function"){onStart(e,{docs:docs,el:this.el,start:this.startPos,elRect:this.elRect})}this.drag(e)},stop:function stop(e){var docs=this.getDocumentEl();docs.off("mousemove",this.drag);docs.off("mouseup",this.stop);this.lockedAxis=null;var onEnd=this.opts.onEnd;if(typeof onEnd==="function"){onEnd(e,{docs:docs,delta:this.delta,end:{x:this.startLeft+this.delta.x,y:this.startTop+this.delta.y}})}},handleMouseDown:function handleMouseDown(e){var el=e.target;if(this.isHandler(el)){this.start(e)}},isHandler:function isHandler(el){var handlers=this.handlers;for(var n in handlers){if(handlers[n]===el)return true}return false},handleKey:function handleKey(e,handler){switch(handler.shortcut){case"up":this.move(0,-1);break;case"right":this.move(1,0);break;case"down":this.move(0,1);break;case"left":this.move(-1,0);break}},getDocumentEl:function getDocumentEl(el){var el=el||this.el;if(!this.$doc){var docs=[document];if(el){docs.push(el.ownerDocument)}this.$doc=$(docs)}return this.$doc},getMousePos:function getMousePos(e){var mouseFetch=this.opts.mousePosFetcher;return mouseFetch?mouseFetch(e):{x:e.clientX,y:e.clientY}},drag:function drag(e){var lockedAxis=this.lockedAxis;var currentPos=this.getMousePos(e);var delta={x:currentPos.x-this.startPos.x,y:currentPos.y-this.startPos.y};if(e.shiftKey){if(!lockedAxis){var relX=delta.x;var relY=delta.y;var absX=Math.abs(relX);var absY=Math.abs(relY);if(relY>=absX||relY<=-absX){lockedAxis="x"}else if(relX>absY||relX<-absY){lockedAxis="y"}}}else{lockedAxis=null}if(lockedAxis==="x"){delta.x=this.startPos.x}if(lockedAxis==="y"){delta.y=this.startPos.y}this.lockedAxis=lockedAxis;this.delta=delta;this.move(delta.x,delta.y);var onDrag=this.opts.onDrag;if(typeof onDrag==="function"){onDrag(e,{delta:delta,current:{x:this.startLeft+delta.x,y:this.startTop+delta.y},lockedAxis:lockedAxis})}if(e.which===0){this.stop(e)}},move:function move(x,y){this.moveX(x);this.moveY(y)},moveX:function moveX(x){var el=this.el;var opts=this.opts;var xPos=this.startLeft+x;var setX=this.opts.setX;if(typeof setX==="function"){setX(xPos,{el:el,start:this.startLeft,delta:x})}else{el.style.left=xPos+"px"}},moveY:function moveY(y){var el=this.el;var opts=this.opts;var yPos=this.startTop+y;var setY=this.opts.setY;if(typeof setY==="function"){setY(yPos,{el:el,start:this.startTop,delta:y})}else{el.style.top=yPos+"px"}}}},function(module,exports,__webpack_require__){"use strict";var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var defaults={mousePosFetcher:null,updateTarget:null,ratioDefault:0,posFetcher:null,onStart:null,onMove:null,onEnd:null,tl:1,tc:1,tr:1,cl:1,cr:1,bl:1,bc:1,br:1};var createHandler=function createHandler(name,opts){var pfx=opts.prefix||"";var el=document.createElement("i");el.className=pfx+"resizer-h "+pfx+"resizer-h-"+name;el.setAttribute("data-"+pfx+"handler",name);return el};var getBoundingRect=function getBoundingRect(el,win){var w=win||window;var rect=el.getBoundingClientRect();return{left:rect.left+w.pageXOffset,top:rect.top+w.pageYOffset,width:rect.width,height:rect.height}};var Resizer=function(){function Resizer(){var opts=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};_classCallCheck(this,Resizer);var pfx=opts.prefix||"";var appendTo=opts.appendTo||document.body;for(var name in defaults){if(!(name in opts))opts[name]=defaults[name]}var container=document.createElement("div");container.className=pfx+"resizer-c";appendTo.appendChild(container);var handlers={tl:opts.tl?createHandler("tl",opts):"",tc:opts.tc?createHandler("tc",opts):"",tr:opts.tr?createHandler("tr",opts):"",cl:opts.cl?createHandler("cl",opts):"",cr:opts.cr?createHandler("cr",opts):"",bl:opts.bl?createHandler("bl",opts):"",bc:opts.bc?createHandler("bc",opts):"",br:opts.br?createHandler("br",opts):""};for(var n in handlers){if(handlers[n])container.appendChild(handlers[n])}this.container=container;this.handlers=handlers;this.opts=opts;this.handleKeyDown=this.handleKeyDown.bind(this);this.handleMouseDown=this.handleMouseDown.bind(this);this.move=this.move.bind(this);this.stop=this.stop.bind(this);this.mousePosFetcher=opts.mousePosFetcher;this.updateTarget=opts.updateTarget;this.posFetcher=opts.posFetcher;this.onStart=opts.onStart;this.onMove=opts.onMove;this.onEnd=opts.onEnd;return this}_createClass(Resizer,[{key:"setOptions",value:function setOptions(options){var opts=options||{};for(var opt in opts){if(opt in defaults){this[opt]=opts[opt]}}}},{key:"isHandler",value:function isHandler(el){var handlers=this.handlers;for(var n in handlers){if(handlers[n]===el)return true}return false}},{key:"getFocusedEl",value:function getFocusedEl(){return this.el}},{key:"getDocumentEl",value:function getDocumentEl(){if(!this.$doc){this.$doc=$([this.el.ownerDocument,document])}return this.$doc}},{key:"getElementPos",value:function getElementPos(el){var posFetcher=this.posFetcher||"";return posFetcher?posFetcher(el):getBoundingRect(el)}},{key:"focus",value:function focus(el){if(el&&el===this.el){return}this.el=el;var rect=this.getElementPos(el);var container=this.container;var contStyle=container.style;var unit="px";contStyle.left=rect.left+unit;contStyle.top=rect.top+unit;contStyle.width=rect.width+unit;contStyle.height=rect.height+unit;this.container.style.display="block";this.getDocumentEl().on("mousedown",this.handleMouseDown)}},{key:"blur",value:function blur(){this.container.style.display="none";if(this.el){var doc=$([this.el.ownerDocument,document]);this.getDocumentEl().off("mousedown",this.handleMouseDown);this.el=null}}},{key:"start",value:function start(e){if(e.button!==0){return}e.preventDefault();e.stopPropagation();var opts=this.opts||{};var attrName="data-"+opts.prefix+"handler";var rect=this.getElementPos(this.el);this.handlerAttr=e.target.getAttribute(attrName);this.clickedHandler=e.target;this.startDim={t:rect.top,l:rect.left,w:rect.width,h:rect.height};this.rectDim={t:rect.top,l:rect.left,w:rect.width,h:rect.height};this.startPos={x:e.clientX,y:e.clientY};var doc=this.getDocumentEl();doc.on("mousemove",this.move);doc.on("keydown",this.handleKeyDown);doc.on("mouseup",this.stop);this.move(e);if(typeof this.onStart==="function"){this.onStart(e,{docs:doc})}}},{key:"move",value:function move(e){var mouseFetch=this.mousePosFetcher;var currentPos=mouseFetch?mouseFetch(e):{x:e.clientX,y:e.clientY};this.currentPos=currentPos;this.delta={x:currentPos.x-this.startPos.x,y:currentPos.y-this.startPos.y};this.keys={shift:e.shiftKey,ctrl:e.ctrlKey,alt:e.altKey};this.rectDim=this.calc(this);this.updateRect(0);if(typeof this.onMove==="function"){this.onMove(e)}if(e.which===0){this.stop(e)}}},{key:"stop",value:function stop(e){var doc=this.getDocumentEl();doc.off("mousemove",this.move);doc.off("keydown",this.handleKeyDown);doc.off("mouseup",this.stop);this.updateRect(1);if(typeof this.onEnd==="function"){this.onEnd(e,{docs:doc})}}},{key:"updateRect",value:function updateRect(store){var elStyle=this.el.style;var conStyle=this.container.style;var rect=this.rectDim;if(typeof this.updateTarget==="function"){this.updateTarget(this.el,rect,store)}else{elStyle.width=rect.w+"px";elStyle.height=rect.h+"px"}var rectEl=this.getElementPos(this.el);var unit="px";conStyle.left=rectEl.left+unit;conStyle.top=rectEl.top+unit;conStyle.width=rectEl.width+unit;conStyle.height=rectEl.height+unit}},{key:"handleKeyDown",value:function handleKeyDown(e){if(e.keyCode===27){this.rectDim=this.startDim;this.stop(e)}}},{key:"handleMouseDown",value:function handleMouseDown(e){var el=e.target;if(this.isHandler(el)){this.start(e)}else if(el!==this.el){this.blur()}}},{key:"calc",value:function calc(data){var opts=this.opts||{};var startDim=this.startDim;var box={t:0,l:0,w:startDim.w,h:startDim.h};if(!data)return;var attr=data.handlerAttr;if(~attr.indexOf("r")){box.w=Math.max(32,startDim.w+data.delta.x)}if(~attr.indexOf("b")){box.h=Math.max(32,startDim.h+data.delta.y)}if(~attr.indexOf("l")){box.w=Math.max(32,startDim.w-data.delta.x)}if(~attr.indexOf("t")){box.h=Math.max(32,startDim.h-data.delta.y)}var ratioActive=opts.ratioDefault?!data.keys.shift:data.keys.shift;if(attr.indexOf("c")<0&&ratioActive){var ratio=startDim.w/startDim.h;if(box.w/box.h>ratio){box.h=Math.round(box.w/ratio)}else{box.w=Math.round(box.h*ratio)}}if(~attr.indexOf("l")){box.l=startDim.w-box.w}if(~attr.indexOf("t")){box.t=startDim.h-box.h}return box}}]);return Resizer}();module.exports={init:function init(opts){return new Resizer(opts)}}},function(module,exports,__webpack_require__){"use strict";(function(_){var Backbone=__webpack_require__(0);module.exports=Backbone.View.extend({initialize:function initialize(opt){this.opt=opt||{};_.bindAll(this,"startSort","onMove","endMove","rollback","udpateOffset","moveDragHelper");var o=opt||{};this.elT=0;this.elL=0;this.borderOffset=o.borderOffset||10;var el=o.container;this.el=typeof el==="string"?document.querySelector(el):el;this.$el=$(this.el);this.containerSel=o.containerSel||"div";this.itemSel=o.itemSel||"div";this.draggable=o.draggable||true;this.nested=o.nested||0;this.pfx=o.pfx||"";this.ppfx=o.ppfx||"";this.freezeClass=o.freezeClass||this.pfx+"freezed";this.onStart=o.onStart||"";this.onEndMove=o.onEndMove||"";this.direction=o.direction||"v";this.onMoveClb=o.onMove||"";this.relative=o.relative||0;this.plh=o.placer||"";this.wmargin=o.wmargin||0;this.offTop=o.offsetTop||0;this.offLeft=o.offsetLeft||0;this.document=o.document||document;this.$document=$(this.document);this.dropContent=null;this.em=o.em||"";this.dragHelper=null;this.canvasRelative=o.canvasRelative||0;if(this.em&&this.em.on){this.em.on("change:canvasOffset",this.udpateOffset);this.udpateOffset()}},getContainerEl:function getContainerEl(){if(!this.el){var el=this.opt.container;this.el=typeof el==="string"?document.querySelector(el):el;this.$el=$(this.el)}return this.el},udpateOffset:function udpateOffset(){var offset=this.em.get("canvasOffset");this.offTop=offset.top;this.offLeft=offset.left},setDropContent:function setDropContent(content){this.dropContent=content},toggleSortCursor:function toggleSortCursor(active){var em=this.em;var body=document.body;var pfx=this.ppfx||this.pfx;var sortCls=pfx+"grabbing";var emBody=em?em.get("Canvas").getBody():"";if(active){body.className+=" "+sortCls;if(em){emBody.className+=" "+sortCls}}else{body.className=body.className.replace(sortCls,"").trim();if(em){emBody.className=emBody.className.replace(sortCls,"").trim()}}},setDragHelper:function setDragHelper(el,event){var ev=event||"";var clonedEl=el.cloneNode(1);var style="";var o=getComputedStyle(el);for(var i=0;i<o.length;i++){style+=o[i]+":"+o.getPropertyValue(o[i])+";"}clonedEl.setAttribute("style",style);clonedEl.className+=" "+this.pfx+"bdrag";document.body.appendChild(clonedEl);this.dragHelper=clonedEl;if(ev){this.moveDragHelper(ev)}if(this.em){$(this.em.get("Canvas").getBody().ownerDocument).off("mousemove",this.moveDragHelper).on("mousemove",this.moveDragHelper)}$(document).off("mousemove",this.moveDragHelper).on("mousemove",this.moveDragHelper)},moveDragHelper:function moveDragHelper(e){if(!this.dragHelper){return}var doc=e.target.ownerDocument;var win=doc.defaultView||doc.parentWindow;var addTop=0;var addLeft=0;var frame=win.frameElement;if(frame){var frameRect=frame.getBoundingClientRect();addTop=frameRect.top||0;addLeft=frameRect.left||0}var hStyle=this.dragHelper.style;hStyle.left=e.pageX-win.pageXOffset+addLeft+"px";hStyle.top=e.pageY-win.pageYOffset+addTop+"px"},matches:function matches(el,selector,useBody){var startEl=el.parentNode||document.body;var els=startEl.querySelectorAll(selector);var i=0;while(els[i]&&els[i]!==el){++i}return!!els[i]},closest:function closest(el,selector){if(!el)return;var elem=el.parentNode;while(elem&&elem.nodeType===1){if(this.matches(elem,selector))return elem;elem=elem.parentNode}return null},offset:function offset(el){var rect=el.getBoundingClientRect();return{top:rect.top+document.body.scrollTop,left:rect.left+document.body.scrollLeft}},createPlaceholder:function createPlaceholder(){var pfx=this.pfx;var el=document.createElement("div");var ins=document.createElement("div");el.className=pfx+"placeholder";el.style.display="none";el.style["pointer-events"]="none";ins.className=pfx+"placeholder-int";el.appendChild(ins);return el},startSort:function startSort(trg){this.moved=0;this.eV=trg;if(trg&&!this.matches(trg,this.itemSel+","+this.containerSel))this.eV=this.closest(trg,this.itemSel);if(!this.plh){this.plh=this.createPlaceholder();this.getContainerEl().appendChild(this.plh)}if(trg){var className=trg.getAttribute("class");trg.setAttribute("class",className+" "+this.freezeClass);this.$document.on("mouseup",this.endMove)}this.$el.on("mousemove",this.onMove);$(document).on("keydown",this.rollback);this.$document.on("keydown",this.rollback);if(typeof this.onStart==="function")this.onStart();if(this.em){this.em.clearSelection()}this.toggleSortCursor(1)},onMove:function onMove(e){this.moved=1;var plh=this.plh;var dsp=plh.style.display;if(!dsp||dsp==="none")plh.style.display="block";var eO=this.offset(this.el);this.elT=this.wmargin?Math.abs(eO.top):eO.top;this.elL=this.wmargin?Math.abs(eO.left):eO.left;
var rY=e.pageY-this.elT+this.el.scrollTop;var rX=e.pageX-this.elL+this.el.scrollLeft;if(this.canvasRelative&&this.em){var mousePos=this.em.get("Canvas").getMouseRelativeCanvas(e);rX=mousePos.x;rY=mousePos.y}var dims=this.dimsFromTarget(e.target,rX,rY);this.lastDims=dims;var pos=this.findPosition(dims,rX,rY);if(!this.lastPos||this.lastPos.index!=pos.index||this.lastPos.method!=pos.method){this.movePlaceholder(this.plh,dims,pos,this.prevTargetDim);if(!this.$plh)this.$plh=$(this.plh);if(!this.canvasRelative){if(this.offTop)this.$plh.css("top","+="+this.offTop+"px");if(this.offLeft)this.$plh.css("left","+="+this.offLeft+"px")}this.lastPos=pos}if(typeof this.onMoveClb==="function")this.onMoveClb(e)},isInFlow:function isInFlow(el,parent){if(!el)return false;parent=parent||document.body;var ch=-1,h;var elem=el;h=elem.offsetHeight;if(!this.styleInFlow(elem,parent))return false;else return true},styleInFlow:function styleInFlow(el,parent){var style=el.style;var $el=$(el);if(style.overflow&&style.overflow!=="visible")return;if($el.css("float")!=="none")return;if(parent&&$(parent).css("display")=="flex")return;switch(style.position){case"static":case"relative":case"":break;default:return}switch(el.tagName){case"TR":case"TBODY":case"THEAD":case"TFOOT":return true}switch($el.css("display")){case"block":case"list-item":case"table":case"flex":return true}return},dimsFromTarget:function dimsFromTarget(target,rX,rY){var dims=[];if(!this.matches(target,this.itemSel+","+this.containerSel))target=this.closest(target,this.itemSel);if(this.draggable instanceof Array){target=this.closest(target,this.draggable.join(","))}if(!target)return dims;if(this.prevTarget){if(this.prevTarget!=target){this.prevTarget=null}}if(!this.prevTarget){this.targetP=this.closest(target,this.containerSel);this.prevTarget=target;this.prevTargetDim=this.getDim(target);this.cacheDimsP=this.getChildrenDim(this.targetP);this.cacheDims=this.getChildrenDim(target)}if(this.prevTarget==target)dims=this.cacheDims;this.target=this.prevTarget;if(this.nearBorders(this.prevTargetDim,rX,rY)||!this.nested&&!this.cacheDims.length){dims=this.cacheDimsP;this.target=this.targetP}this.lastPos=null;return dims},getDim:function getDim(el){var top,left,height,width;if(this.canvasRelative&&this.em){var pos=this.em.get("Canvas").getElementPos(el);top=pos.top;left=pos.left;height=pos.height;width=pos.width}else{var o=this.offset(el);top=this.relative?el.offsetTop:o.top-(this.wmargin?-1:1)*this.elT;left=this.relative?el.offsetLeft:o.left-(this.wmargin?-1:1)*this.elL;height=el.offsetHeight;width=el.offsetWidth}return[top,left,height,width]},getChildrenDim:function getChildrenDim(elem){var dims=[];if(!elem)return dims;var $elem=$(elem);var elemData=$elem.data("model");if(elemData&&elemData.view){elem=elemData.view.getChildrenContainer()}var ch=elem.children;for(var i=0,len=ch.length;i<len;i++){var el=ch[i];if(!this.matches(el,this.itemSel))continue;var dim=this.getDim(el);var dir=this.direction;if(dir=="v")dir=true;else if(dir=="h")dir=false;else dir=this.isInFlow(el,elem);dim.push(dir);dim.push(el);dims.push(dim)}return dims},nearBorders:function nearBorders(dim,rX,rY){var result=0;var off=this.borderOffset;var x=rX||0;var y=rY||0;var t=dim[0];var l=dim[1];var h=dim[2];var w=dim[3];if(t+off>y||y>t+h-off||l+off>x||x>l+w-off)result=1;return!!result},findPosition:function findPosition(dims,posX,posY){var result={index:0,method:"before"};var leftLimit=0,xLimit=0,dimRight=0,yLimit=0,xCenter=0,yCenter=0,dimDown=0,dim=0;for(var i=0,len=dims.length;i<len;i++){dim=dims[i];dimRight=dim[1]+dim[3];dimDown=dim[0]+dim[2];xCenter=dim[1]+dim[3]/2;yCenter=dim[0]+dim[2]/2;if(xLimit&&dim[1]>xLimit||yLimit&&yCenter>=yLimit||leftLimit&&dimRight<leftLimit)continue;result.index=i;if(!dim[4]){if(posY<dimDown)yLimit=dimDown;if(posX<xCenter){xLimit=xCenter;result.method="before"}else{leftLimit=xCenter;result.method="after"}}else{if(posY<yCenter){result.method="before";break}else result.method="after"}}return result},movePlaceholder:function movePlaceholder(plh,dims,pos,trgDim){var marg=0,t=0,l=0,w=0,h=0,un="px",margI=5,brdCol="#62c462",brd=3,method=pos.method;var elDim=dims[pos.index];plh.style.borderColor="transparent "+brdCol;plh.style.borderWidth=brd+un+" "+(brd+2)+un;plh.style.margin="-"+brd+"px 0 0";if(elDim){if(!elDim[4]){w="auto";h=elDim[2]-marg*2+un;t=elDim[0]+marg;l=method=="before"?elDim[1]-marg:elDim[1]+elDim[3]-marg;plh.style.borderColor=brdCol+" transparent";plh.style.borderWidth=brd+2+un+" "+brd+un;plh.style.margin="0 0 0 -"+brd+"px"}else{w=elDim[3]+un;h="auto";t=method=="before"?elDim[0]-marg:elDim[0]+elDim[2]-marg;l=elDim[1]}}else{if(!this.nested){plh.style.display="none";return}if(trgDim){t=trgDim[0]+margI;l=trgDim[1]+margI;w=parseInt(trgDim[3])-margI*2+un;h="auto"}}plh.style.top=t+un;plh.style.left=l+un;if(w)plh.style.width=w;if(h)plh.style.height=h},endMove:function endMove(e){var created;this.$el.off("mousemove",this.onMove);this.$document.off("mouseup",this.endMove);this.$document.off("keydown",this.rollback);this.plh.style.display="none";var clsReg=new RegExp("(?:^|\\s)"+this.freezeClass+"(?!\\S)","gi");var trg=this.eV;if(trg){var className=(trg.getAttribute("class")+"").replace(clsReg,"");trg.setAttribute("class",className)}if(this.moved)created=this.move(this.target,trg,this.lastPos);if(this.plh)this.plh.style.display="none";if(typeof this.onEndMove==="function")this.onEndMove(created);var dragHelper=this.dragHelper;if(dragHelper){dragHelper.remove();this.dragHelper=null}this.toggleSortCursor()},move:function move(dst,src,pos){var em=this.em;if(em)em.trigger("component:dragEnd:before",dst,src,pos);var warns=[];var modelToDrop,modelTemp,created;var index=pos.index;var model=$(src).data("model");var $dst=$(dst);var targetModel;while($dst.length&&!targetModel){targetModel=$dst.data("model");dst=$dst.get(0);if(targetModel&&targetModel.view)dst=targetModel.view.el;if(!targetModel)$dst=$dst.parent()}var targetCollection=$dst.data("collection");var drag=model&&model.get("draggable");var draggable=typeof drag!=="undefined"?drag:1;var toDrag=draggable;if(this.dropContent instanceof Object){draggable=this.dropContent.draggable;draggable=typeof draggable!=="undefined"?draggable:1}else if(typeof this.dropContent==="string"&&targetCollection){var sandboxOpts={silent:true};var sandboxModel=targetCollection.add(this.dropContent,sandboxOpts);draggable=sandboxModel.get&&sandboxModel.get("draggable");draggable=typeof draggable!=="undefined"?draggable:1;targetCollection.remove(sandboxModel,sandboxOpts)}if(draggable instanceof Array){toDrag=draggable.join(", ");draggable=this.matches(dst,toDrag)}else if(typeof draggable==="string"){toDrag=draggable;draggable=this.matches(dst,toDrag,1)}var accepted=1;var droppable=targetModel&&targetModel.get?targetModel.get("droppable"):1;var toDrop=draggable;if(droppable instanceof Array){toDrop=droppable.join(", ");accepted=this.matches(src,toDrop)}else if(typeof droppable==="string"){toDrop=droppable;accepted=this.matches(src,toDrop)}if(targetCollection&&droppable&&accepted&&draggable){index=pos.method==="after"?index+1:index;var opts={at:index,noIncrement:1};if(!this.dropContent){modelTemp=targetCollection.add({},opts);if(model)modelToDrop=model.collection.remove(model)}else{modelToDrop=this.dropContent;opts.silent=false}created=targetCollection.add(modelToDrop,opts);if(!this.dropContent){targetCollection.remove(modelTemp)}else{this.dropContent=null}this.prevTarget=null}else{if(!targetCollection){warns.push("target collection not found")}if(!droppable){warns.push("target is not droppable")}if(!draggable){warns.push("component not draggable, accepted only by ["+toDrag+"]")}if(!accepted){warns.push("target accepts only ["+toDrop+"]")}console.warn("Invalid target position: "+warns.join(", "))}if(em)em.trigger("component:dragEnd",targetCollection,modelToDrop,warns);return created},rollback:function rollback(e){$(document).off("keydown",this.rollback);this.$document.off("keydown",this.rollback);var key=e.which||e.keyCode;if(key==27){this.moved=false;this.endMove()}return}})}).call(exports,__webpack_require__(1))},function(module,exports,__webpack_require__){"use strict";module.exports=function(){var Sorter=__webpack_require__(257);var Resizer=__webpack_require__(256);var Dragger=__webpack_require__(255);return{name:"Utils",init:function init(){return this},Sorter:Sorter,Resizer:Resizer,Dragger:Dragger}}},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;(function(factory){if(true){!(__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__(1),__webpack_require__(260)],__WEBPACK_AMD_DEFINE_FACTORY__=factory,__WEBPACK_AMD_DEFINE_RESULT__=typeof __WEBPACK_AMD_DEFINE_FACTORY__==="function"?__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__):__WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_RESULT__!==undefined&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))}else if(typeof exports!=="undefined"){module.exports=factory(require("underscore"),require("backbone"))}else{factory(_,Backbone)}})(function(_,Backbone){var core_slice=Array.prototype.slice;function apply(fn,ctx,args){return args.length<=4?fn.call(ctx,args[0],args[1],args[2],args[3]):fn.apply(ctx,args)}function slice(arr,index){return core_slice.call(arr,index)}function hasKeys(obj,keys){if(obj==null)return false;if(!_.isArray(keys)){keys=slice(arguments,1)}return _.all(keys,function(key){return key in obj})}var getMagicFusionIndex=function(){var callstackWasIndexed=false,magicFusionIndex=-1;function indexCycle(){magicFusionIndex++;callstackWasIndexed=true;_.defer(function(){callstackWasIndexed=false})}return function(){if(!callstackWasIndexed){indexCycle()}return magicFusionIndex}}();function ObjectRegistry(){this.registeredObjects=[];this.cidIndexes=[]}ObjectRegistry.prototype={isRegistered:function(obj){return obj&&obj.cid?this.registeredObjects[obj.cid]:_.contains(this.registeredObjects,obj)},register:function(obj){if(!this.isRegistered(obj)){if(obj&&obj.cid){this.registeredObjects[obj.cid]=obj;this.cidIndexes.push(obj.cid)}else{this.registeredObjects.push(obj)}return true}return false},unregister:function(obj){if(this.isRegistered(obj)){if(obj&&obj.cid){delete this.registeredObjects[obj.cid];this.cidIndexes.splice(_.indexOf(this.cidIndexes,obj.cid),1)}else{var i=_.indexOf(this.registeredObjects,obj);this.registeredObjects.splice(i,1)}return true}return false},get:function(){return _.map(this.cidIndexes,function(cid){return this.registeredObjects[cid]},this).concat(this.registeredObjects)}};function onoff(which,objects,fn,ctx){for(var i=0,l=objects.length,obj;i<l;i++){obj=objects[i];if(!obj)continue;if(which==="on"){if(!ctx.objectRegistry.register(obj)){continue}}else{if(!ctx.objectRegistry.unregister(obj)){continue}}if(_.isFunction(obj[which])){obj[which]("all",fn,ctx)}}}function actionUndoRedo(which,action){var type=action.type,undoTypes=action.undoTypes,fn=!undoTypes[type]||undoTypes[type][which];if(_.isFunction(fn)){fn(action.object,action.before,action.after,action.options)}}function managerUndoRedo(which,manager,stack,magic,everything){if(stack.isCurrentlyUndoRedoing||which==="undo"&&stack.pointer===-1||which==="redo"&&stack.pointer===stack.length-1){return}stack.isCurrentlyUndoRedoing=true;var action,actions,isUndo=which==="undo";if(everything){actions=isUndo&&stack.pointer===stack.length-1||!isUndo&&stack.pointer===-1?_.clone(stack.models):core_slice.apply(stack.models,isUndo?[0,stack.pointer]:[stack.pointer,stack.length-1])}else{action=stack.at(isUndo?stack.pointer:stack.pointer+1);actions=magic?stack.where({magicFusionIndex:action.get("magicFusionIndex")}):[action]}stack.pointer+=(isUndo?-1:1)*actions.length;while(action=isUndo?actions.pop():actions.shift()){action[which]()}stack.isCurrentlyUndoRedoing=false;manager.trigger(which,manager)}function validateUndoActionCreation(undoTypesType,args){var condition=undoTypesType.condition,type=typeof condition;return type==="function"?!!apply(condition,undoTypesType,args):type==="boolean"?condition:true}function addToStack(stack,type,args,undoTypes){if(stack.track&&!stack.isCurrentlyUndoRedoing&&type in undoTypes&&validateUndoActionCreation(undoTypes[type],args)){var res=apply(undoTypes[type]["on"],undoTypes[type],args),diff;if(hasKeys(res,"object","before","after")){res.type=type;res.magicFusionIndex=getMagicFusionIndex();res.undoTypes=undoTypes;if(stack.pointer<stack.length-1){var diff=stack.length-stack.pointer-1;while(diff--){stack.pop()}}stack.pointer=stack.length;stack.add(res);if(stack.length>stack.maximumStackLength){stack.shift();stack.pointer--}}}}var UndoTypes={add:{undo:function(collection,ignore,model,options){collection.remove(model,options)},redo:function(collection,ignore,model,options){if(options.index){options.at=options.index}collection.add(model,options)},on:function(model,collection,options){return{object:collection,before:undefined,after:model,options:_.clone(options)}}},remove:{undo:function(collection,model,ignore,options){if("index"in options){options.at=options.index}collection.add(model,options)},redo:function(collection,model,ignore,options){collection.remove(model,options)},on:function(model,collection,options){return{object:collection,before:model,after:undefined,options:_.clone(options)}}},change:{undo:function(model,before,after,options){if(_.isEmpty(before)){_.each(_.keys(after),model.unset,model)}else{model.set(before);if(options&&options.unsetData&&options.unsetData.before&&options.unsetData.before.length){_.each(options.unsetData.before,model.unset,model)}}},redo:function(model,before,after,options){if(_.isEmpty(after)){_.each(_.keys(before),model.unset,model)}else{model.set(after);if(options&&options.unsetData&&options.unsetData.after&&options.unsetData.after.length){_.each(options.unsetData.after,model.unset,model)}}},on:function(model,options){var afterAttributes=model.changedAttributes(),keysAfter=_.keys(afterAttributes),previousAttributes=_.pick(model.previousAttributes(),keysAfter),keysPrevious=_.keys(previousAttributes),unsetData=(options||(options={})).unsetData={after:[],before:[]};if(keysAfter.length!=keysPrevious.length){if(keysAfter.length>keysPrevious.length){_.each(keysAfter,function(val){if(!(val in previousAttributes)){unsetData.before.push(val)}},this)}else{_.each(keysPrevious,function(val){if(!(val in afterAttributes)){unsetData.after.push(val)}})}}return{object:model,before:previousAttributes,after:afterAttributes,options:_.clone(options)}}},reset:{undo:function(collection,before,after){collection.reset(before)},redo:function(collection,before,after){collection.reset(after)},on:function(collection,options){return{object:collection,before:options.previousModels,after:_.clone(collection.models)}}}};function OwnedUndoTypes(){}OwnedUndoTypes.prototype=UndoTypes;function manipulateUndoType(manipType,undoType,fns,undoTypesInstance){if(typeof undoType==="object"){return _.each(undoType,function(val,key){if(manipType===2){manipulateUndoType(manipType,val,fns,undoTypesInstance)}else{manipulateUndoType(manipType,key,val,fns)}})}switch(manipType){case 0:if(hasKeys(fns,"undo","redo","on")&&_.all(_.pick(fns,"undo","redo","on"),_.isFunction)){undoTypesInstance[undoType]=fns}break;case 1:if(undoTypesInstance[undoType]&&_.isObject(fns)){undoTypesInstance[undoType]=_.extend({},undoTypesInstance[undoType],fns)}break;case 2:delete undoTypesInstance[undoType];break}return this}var Action=Backbone.Model.extend({defaults:{type:null,object:null,before:null,after:null,magicFusionIndex:null},undo:function(undoTypes){actionUndoRedo("undo",this.attributes)},redo:function(undoTypes){actionUndoRedo("redo",this.attributes)}}),UndoStack=Backbone.Collection.extend({model:Action,pointer:-1,track:false,isCurrentlyUndoRedoing:false,maximumStackLength:Infinity,setMaxLength:function(val){this.maximumStackLength=val}}),UndoManager=Backbone.Model.extend({defaults:{maximumStackLength:Infinity,track:false},initialize:function(attr){this.stack=new UndoStack;this.objectRegistry=new ObjectRegistry;this.undoTypes=new OwnedUndoTypes;this.stack.setMaxLength(this.get("maximumStackLength"));this.on("change:maximumStackLength",function(model,value){this.stack.setMaxLength(value)},this);if(attr&&attr.track){this.startTracking()}if(attr&&attr.register){if(_.isArray(attr.register)||_.isArguments(attr.register)){apply(this.register,this,attr.register)}else{this.register(attr.register)}}},startTracking:function(){this.set("track",true);this.stack.track=true},stopTracking:function(){this.set("track",false);this.stack.track=false},isTracking:function(){return this.get("track")},_addToStack:function(type){addToStack(this.stack,type,slice(arguments,1),this.undoTypes)},register:function(){onoff("on",arguments,this._addToStack,this)},unregister:function(){onoff("off",arguments,this._addToStack,this)},unregisterAll:function(){apply(this.unregister,this,this.objectRegistry.get())},undo:function(magic){managerUndoRedo("undo",this,this.stack,magic)},undoAll:function(){managerUndoRedo("undo",this,this.stack,false,true)},redo:function(magic){managerUndoRedo("redo",this,this.stack,magic)},redoAll:function(){managerUndoRedo("redo",this,this.stack,false,true)},isAvailable:function(type){var s=this.stack,l=s.length;switch(type){case"undo":return l>0&&s.pointer>-1;case"redo":return l>0&&s.pointer<l-1;default:return false}},merge:function(undoManager){var args=_.isArray(undoManager)?undoManager:slice(arguments),manager;while(manager=args.pop()){if(manager instanceof UndoManager&&manager.stack instanceof UndoStack){manager.stack=this.stack}}},addUndoType:function(type,fns){manipulateUndoType(0,type,fns,this.undoTypes)},changeUndoType:function(type,fns){manipulateUndoType(1,type,fns,this.undoTypes)},removeUndoType:function(type){manipulateUndoType(2,type,undefined,this.undoTypes)},clear:function(){this.stack.reset();this.stack.pointer=-1}});_.extend(UndoManager,{defaults:function(defaultAttributes){_.extend(UndoManager.prototype.defaults,defaultAttributes)},addUndoType:function(type,fns){manipulateUndoType(0,type,fns,UndoTypes)},changeUndoType:function(type,fns){manipulateUndoType(1,type,fns,UndoTypes)},removeUndoType:function(type){manipulateUndoType(2,type,undefined,UndoTypes)}});return Backbone.UndoManager=UndoManager})},function(module,exports,__webpack_require__){(function(global){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;(function(factory){var root=typeof self=="object"&&self.self==self&&self||typeof global=="object"&&global.global==global&&global;if(true){!(__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__(1),__webpack_require__(30),exports],__WEBPACK_AMD_DEFINE_RESULT__=function(_,$,exports){root.Backbone=factory(root,exports,_,$)}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),__WEBPACK_AMD_DEFINE_RESULT__!==undefined&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))}else if(typeof exports!=="undefined"){var _=require("underscore"),$;try{$=require("jquery")}catch(e){}factory(root,exports,_,$)}else{root.Backbone=factory(root,{},root._,root.jQuery||root.Zepto||root.ender||root.$)}})(function(root,Backbone,_,$){var previousBackbone=root.Backbone;var slice=[].slice;Backbone.VERSION="1.2.1";Backbone.$=$;Backbone.noConflict=function(){root.Backbone=previousBackbone;return this};Backbone.emulateHTTP=false;Backbone.emulateJSON=false;var addMethod=function(length,method,attribute){switch(length){case 1:return function(){return _[method](this[attribute])};case 2:return function(value){return _[method](this[attribute],value)};case 3:return function(iteratee,context){return _[method](this[attribute],iteratee,context)};case 4:return function(iteratee,defaultVal,context){return _[method](this[attribute],iteratee,defaultVal,context)};default:return function(){var args=slice.call(arguments);args.unshift(this[attribute]);return _[method].apply(_,args)}}};var addUnderscoreMethods=function(Class,methods,attribute){_.each(methods,function(length,method){if(_[method])Class.prototype[method]=addMethod(length,method,attribute)})};var Events=Backbone.Events={};var eventSplitter=/\s+/;var eventsApi=function(iteratee,memo,name,callback,opts){var i=0,names;if(name&&typeof name==="object"){if(callback!==void 0&&"context"in opts&&opts.context===void 0)opts.context=callback;for(names=_.keys(name);i<names.length;i++){memo=iteratee(memo,names[i],name[names[i]],opts)}}else if(name&&eventSplitter.test(name)){for(names=name.split(eventSplitter);i<names.length;i++){memo=iteratee(memo,names[i],callback,opts)}}else{memo=iteratee(memo,name,callback,opts)}return memo};Events.on=function(name,callback,context){return internalOn(this,name,callback,context)};var internalOn=function(obj,name,callback,context,listening){obj._events=eventsApi(onApi,obj._events||{},name,callback,{context:context,ctx:obj,listening:listening});if(listening){var listeners=obj._listeners||(obj._listeners={});listeners[listening.id]=listening}return obj};Events.listenTo=function(obj,name,callback){if(!obj)return this;var id=obj._listenId||(obj._listenId=_.uniqueId("l"));var listeningTo=this._listeningTo||(this._listeningTo={});var listening=listeningTo[id];if(!listening){var thisId=this._listenId||(this._listenId=_.uniqueId("l"));listening=listeningTo[id]={obj:obj,objId:id,id:thisId,listeningTo:listeningTo,count:0}}internalOn(obj,name,callback,this,listening);return this};var onApi=function(events,name,callback,options){if(callback){var handlers=events[name]||(events[name]=[]);var context=options.context,ctx=options.ctx,listening=options.listening;if(listening)listening.count++;handlers.push({callback:callback,context:context,ctx:context||ctx,listening:listening})}return events};Events.off=function(name,callback,context){if(!this._events)return this;this._events=eventsApi(offApi,this._events,name,callback,{context:context,listeners:this._listeners});return this};Events.stopListening=function(obj,name,callback){var listeningTo=this._listeningTo;if(!listeningTo)return this;var ids=obj?[obj._listenId]:_.keys(listeningTo);for(var i=0;i<ids.length;i++){var listening=listeningTo[ids[i]];if(!listening)break;listening.obj.off(name,callback,this)}if(_.isEmpty(listeningTo))this._listeningTo=void 0;return this};var offApi=function(events,name,callback,options){if(!events)return;var i=0,listening;var context=options.context,listeners=options.listeners;if(!name&&!callback&&!context){var ids=_.keys(listeners);for(;i<ids.length;i++){listening=listeners[ids[i]];delete listeners[listening.id];delete listening.listeningTo[listening.objId]}return}var names=name?[name]:_.keys(events);for(;i<names.length;i++){name=names[i];var handlers=events[name];if(!handlers)break;var remaining=[];for(var j=0;j<handlers.length;j++){var handler=handlers[j];if(callback&&callback!==handler.callback&&callback!==handler.callback._callback||context&&context!==handler.context){remaining.push(handler)}else{listening=handler.listening;if(listening&&--listening.count===0){delete listeners[listening.id];delete listening.listeningTo[listening.objId]}}}if(remaining.length){events[name]=remaining}else{delete events[name]}}if(_.size(events))return events};Events.once=function(name,callback,context){var events=eventsApi(onceMap,{},name,callback,_.bind(this.off,this));return this.on(events,void 0,context)};Events.listenToOnce=function(obj,name,callback){var events=eventsApi(onceMap,{},name,callback,_.bind(this.stopListening,this,obj));return this.listenTo(obj,events)};var onceMap=function(map,name,callback,offer){if(callback){var once=map[name]=_.once(function(){offer(name,once);callback.apply(this,arguments)});once._callback=callback}return map};Events.trigger=function(name){if(!this._events)return this;var length=Math.max(0,arguments.length-1);var args=Array(length);for(var i=0;i<length;i++)args[i]=arguments[i+1];eventsApi(triggerApi,this._events,name,void 0,args);return this};var triggerApi=function(objEvents,name,cb,args){if(objEvents){var events=objEvents[name];var allEvents=objEvents.all;if(events&&allEvents)allEvents=allEvents.slice();if(events)triggerEvents(events,args);if(allEvents)triggerEvents(allEvents,[name].concat(args))}return objEvents};var triggerEvents=function(events,args){var ev,i=-1,l=events.length,a1=args[0],a2=args[1],a3=args[2];switch(args.length){case 0:while(++i<l)(ev=events[i]).callback.call(ev.ctx);return;case 1:while(++i<l)(ev=events[i]).callback.call(ev.ctx,a1);return;case 2:while(++i<l)(ev=events[i]).callback.call(ev.ctx,a1,a2);return;case 3:while(++i<l)(ev=events[i]).callback.call(ev.ctx,a1,a2,a3);return;default:while(++i<l)(ev=events[i]).callback.apply(ev.ctx,args);return}};Events.bind=Events.on;Events.unbind=Events.off;_.extend(Backbone,Events);var Model=Backbone.Model=function(attributes,options){var attrs=attributes||{};options||(options={});this.cid=_.uniqueId(this.cidPrefix);this.attributes={};if(options.collection)this.collection=options.collection;if(options.parse)attrs=this.parse(attrs,options)||{};attrs=_.defaults({},attrs,_.result(this,"defaults"));this.set(attrs,options);this.changed={};this.initialize.apply(this,arguments)};_.extend(Model.prototype,Events,{changed:null,validationError:null,idAttribute:"id",cidPrefix:"c",initialize:function(){},toJSON:function(options){return _.clone(this.attributes)},sync:function(){return Backbone.sync.apply(this,arguments)},get:function(attr){return this.attributes[attr]},escape:function(attr){return _.escape(this.get(attr))},has:function(attr){return this.get(attr)!=null},matches:function(attrs){return!!_.iteratee(attrs,this)(this.attributes)},set:function(key,val,options){if(key==null)return this;var attrs;if(typeof key==="object"){attrs=key;options=val}else{(attrs={})[key]=val}options||(options={});if(!this._validate(attrs,options))return false;var unset=options.unset;var silent=options.silent;var changes=[];var changing=this._changing;this._changing=true;if(!changing){this._previousAttributes=_.clone(this.attributes);this.changed={}}var current=this.attributes;var changed=this.changed;var prev=this._previousAttributes;if(this.idAttribute in attrs)this.id=attrs[this.idAttribute];for(var attr in attrs){val=attrs[attr];if(!_.isEqual(current[attr],val))changes.push(attr);if(!_.isEqual(prev[attr],val)){changed[attr]=val}else{delete changed[attr]}unset?delete current[attr]:current[attr]=val}if(!silent){if(changes.length)this._pending=options;for(var i=0;i<changes.length;i++){this.trigger("change:"+changes[i],this,current[changes[i]],options)}}if(changing)return this;if(!silent){while(this._pending){options=this._pending;this._pending=false;this.trigger("change",this,options)}}this._pending=false;this._changing=false;return this},unset:function(attr,options){return this.set(attr,void 0,_.extend({},options,{unset:true}))},clear:function(options){var attrs={};for(var key in this.attributes)attrs[key]=void 0;return this.set(attrs,_.extend({},options,{unset:true}))},hasChanged:function(attr){if(attr==null)return!_.isEmpty(this.changed);return _.has(this.changed,attr)},changedAttributes:function(diff){if(!diff)return this.hasChanged()?_.clone(this.changed):false;var old=this._changing?this._previousAttributes:this.attributes;var changed={};for(var attr in diff){var val=diff[attr];if(_.isEqual(old[attr],val))continue;changed[attr]=val}return _.size(changed)?changed:false},previous:function(attr){if(attr==null||!this._previousAttributes)return null;return this._previousAttributes[attr]},previousAttributes:function(){return _.clone(this._previousAttributes)},fetch:function(options){options=_.extend({parse:true},options);var model=this;var success=options.success;options.success=function(resp){var serverAttrs=options.parse?model.parse(resp,options):resp;if(!model.set(serverAttrs,options))return false;if(success)success.call(options.context,model,resp,options);model.trigger("sync",model,resp,options)};wrapError(this,options);return this.sync("read",this,options)},save:function(key,val,options){var attrs;if(key==null||typeof key==="object"){attrs=key;options=val}else{(attrs={})[key]=val}options=_.extend({validate:true,parse:true},options);var wait=options.wait;if(attrs&&!wait){if(!this.set(attrs,options))return false}else{if(!this._validate(attrs,options))return false}var model=this;var success=options.success;var attributes=this.attributes;options.success=function(resp){model.attributes=attributes;var serverAttrs=options.parse?model.parse(resp,options):resp;if(wait)serverAttrs=_.extend({},attrs,serverAttrs);if(serverAttrs&&!model.set(serverAttrs,options))return false;if(success)success.call(options.context,model,resp,options);model.trigger("sync",model,resp,options)};wrapError(this,options);if(attrs&&wait)this.attributes=_.extend({},attributes,attrs);var method=this.isNew()?"create":options.patch?"patch":"update";if(method==="patch"&&!options.attrs)options.attrs=attrs;var xhr=this.sync(method,this,options);this.attributes=attributes;return xhr},destroy:function(options){options=options?_.clone(options):{};var model=this;var success=options.success;var wait=options.wait;var destroy=function(){model.stopListening();model.trigger("destroy",model,model.collection,options)};options.success=function(resp){if(wait)destroy();if(success)success.call(options.context,model,resp,options);if(!model.isNew())model.trigger("sync",model,resp,options)};var xhr=false;if(this.isNew()){_.defer(options.success)}else{wrapError(this,options);xhr=this.sync("delete",this,options)}if(!wait)destroy();return xhr},url:function(){var base=_.result(this,"urlRoot")||_.result(this.collection,"url")||urlError();if(this.isNew())return base;var id=this.get(this.idAttribute);return base.replace(/[^\/]$/,"$&/")+encodeURIComponent(id)},parse:function(resp,options){return resp},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(options){return this._validate({},_.defaults({validate:true},options))},_validate:function(attrs,options){if(!options.validate||!this.validate)return true;attrs=_.extend({},this.attributes,attrs);var error=this.validationError=this.validate(attrs,options)||null;if(!error)return true;this.trigger("invalid",this,error,_.extend(options,{validationError:error}));return false}});var modelMethods={keys:1,values:1,pairs:1,invert:1,pick:0,omit:0,chain:1,isEmpty:1};addUnderscoreMethods(Model,modelMethods,"attributes");var Collection=Backbone.Collection=function(models,options){options||(options={});if(options.model)this.model=options.model;if(options.comparator!==void 0)this.comparator=options.comparator;this._reset();this.initialize.apply(this,arguments);if(models)this.reset(models,_.extend({silent:true},options))};var setOptions={add:true,remove:true,merge:true};var addOptions={add:true,remove:false};_.extend(Collection.prototype,Events,{model:Model,initialize:function(){},toJSON:function(options){return this.map(function(model){return model.toJSON(options)})},sync:function(){return Backbone.sync.apply(this,arguments)},add:function(models,options){return this.set(models,_.extend({merge:false},options,addOptions))},remove:function(models,options){options=_.extend({},options);var singular=!_.isArray(models);models=singular?[models]:_.clone(models);var removed=this._removeModels(models,options);if(!options.silent&&removed)this.trigger("update",this,options);return singular?removed[0]:removed},set:function(models,options){options=_.defaults({},options,setOptions);if(options.parse&&!this._isModel(models))models=this.parse(models,options);var singular=!_.isArray(models);models=singular?models?[models]:[]:models.slice();var id,model,attrs,existing,sort;var at=options.at;if(at!=null)at=+at;if(at<0)at+=this.length+1;var sortable=this.comparator&&at==null&&options.sort!==false;var sortAttr=_.isString(this.comparator)?this.comparator:null;var toAdd=[],toRemove=[],modelMap={};var add=options.add,merge=options.merge,remove=options.remove;var order=!sortable&&add&&remove?[]:false;var orderChanged=false;for(var i=0;i<models.length;i++){attrs=models[i];
if(existing=this.get(attrs)){if(remove)modelMap[existing.cid]=true;if(merge&&attrs!==existing){attrs=this._isModel(attrs)?attrs.attributes:attrs;if(options.parse)attrs=existing.parse(attrs,options);existing.set(attrs,options);if(sortable&&!sort&&existing.hasChanged(sortAttr))sort=true}models[i]=existing}else if(add){model=models[i]=this._prepareModel(attrs,options);if(!model)continue;toAdd.push(model);this._addReference(model,options)}model=existing||model;if(!model)continue;id=this.modelId(model.attributes);if(order&&(model.isNew()||!modelMap[id])){order.push(model);orderChanged=orderChanged||!this.models[i]||model.cid!==this.models[i].cid}modelMap[id]=true}if(remove){for(var i=0;i<this.length;i++){if(!modelMap[(model=this.models[i]).cid])toRemove.push(model)}if(toRemove.length)this._removeModels(toRemove,options)}if(toAdd.length||orderChanged){if(sortable)sort=true;this.length+=toAdd.length;if(at!=null){for(var i=0;i<toAdd.length;i++){this.models.splice(at+i,0,toAdd[i])}}else{if(order)this.models.length=0;var orderedModels=order||toAdd;for(var i=0;i<orderedModels.length;i++){this.models.push(orderedModels[i])}}}if(sort)this.sort({silent:true});if(!options.silent){var addOpts=at!=null?_.clone(options):options;for(var i=0;i<toAdd.length;i++){if(at!=null)addOpts.index=at+i;(model=toAdd[i]).trigger("add",model,this,addOpts)}if(sort||orderChanged)this.trigger("sort",this,options);if(toAdd.length||toRemove.length)this.trigger("update",this,options)}return singular?models[0]:models},reset:function(models,options){options=options?_.clone(options):{};for(var i=0;i<this.models.length;i++){this._removeReference(this.models[i],options)}options.previousModels=this.models;this._reset();models=this.add(models,_.extend({silent:true},options));if(!options.silent)this.trigger("reset",this,options);return models},push:function(model,options){return this.add(model,_.extend({at:this.length},options))},pop:function(options){var model=this.at(this.length-1);return this.remove(model,options)},unshift:function(model,options){return this.add(model,_.extend({at:0},options))},shift:function(options){var model=this.at(0);return this.remove(model,options)},slice:function(){return slice.apply(this.models,arguments)},get:function(obj){if(obj==null)return void 0;var id=this.modelId(this._isModel(obj)?obj.attributes:obj);return this._byId[obj]||this._byId[id]||this._byId[obj.cid]},at:function(index){if(index<0)index+=this.length;return this.models[index]},where:function(attrs,first){var matches=_.matches(attrs);return this[first?"find":"filter"](function(model){return matches(model.attributes)})},findWhere:function(attrs){return this.where(attrs,true)},sort:function(options){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");options||(options={});if(_.isString(this.comparator)||this.comparator.length===1){this.models=this.sortBy(this.comparator,this)}else{this.models.sort(_.bind(this.comparator,this))}if(!options.silent)this.trigger("sort",this,options);return this},pluck:function(attr){return _.invoke(this.models,"get",attr)},fetch:function(options){options=_.extend({parse:true},options);var success=options.success;var collection=this;options.success=function(resp){var method=options.reset?"reset":"set";collection[method](resp,options);if(success)success.call(options.context,collection,resp,options);collection.trigger("sync",collection,resp,options)};wrapError(this,options);return this.sync("read",this,options)},create:function(model,options){options=options?_.clone(options):{};var wait=options.wait;model=this._prepareModel(model,options);if(!model)return false;if(!wait)this.add(model,options);var collection=this;var success=options.success;options.success=function(model,resp,callbackOpts){if(wait)collection.add(model,callbackOpts);if(success)success.call(callbackOpts.context,model,resp,callbackOpts)};model.save(null,options);return model},parse:function(resp,options){return resp},clone:function(){return new this.constructor(this.models,{model:this.model,comparator:this.comparator})},modelId:function(attrs){return attrs[this.model.prototype.idAttribute||"id"]},_reset:function(){this.length=0;this.models=[];this._byId={}},_prepareModel:function(attrs,options){if(this._isModel(attrs)){if(!attrs.collection)attrs.collection=this;return attrs}options=options?_.clone(options):{};options.collection=this;var model=new this.model(attrs,options);if(!model.validationError)return model;this.trigger("invalid",this,model.validationError,options);return false},_removeModels:function(models,options){var removed=[];for(var i=0;i<models.length;i++){var model=this.get(models[i]);if(!model)continue;var index=this.indexOf(model);this.models.splice(index,1);this.length--;if(!options.silent){options.index=index;model.trigger("remove",model,this,options)}removed.push(model);this._removeReference(model,options)}return removed.length?removed:false},_isModel:function(model){return model instanceof Model},_addReference:function(model,options){this._byId[model.cid]=model;var id=this.modelId(model.attributes);if(id!=null)this._byId[id]=model;model.on("all",this._onModelEvent,this)},_removeReference:function(model,options){delete this._byId[model.cid];var id=this.modelId(model.attributes);if(id!=null)delete this._byId[id];if(this===model.collection)delete model.collection;model.off("all",this._onModelEvent,this)},_onModelEvent:function(event,model,collection,options){if((event==="add"||event==="remove")&&collection!==this)return;if(event==="destroy")this.remove(model,options);if(event==="change"){var prevId=this.modelId(model.previousAttributes());var id=this.modelId(model.attributes);if(prevId!==id){if(prevId!=null)delete this._byId[prevId];if(id!=null)this._byId[id]=model}}this.trigger.apply(this,arguments)}});var collectionMethods={forEach:3,each:3,map:3,collect:3,reduce:4,foldl:4,inject:4,reduceRight:4,foldr:4,find:3,detect:3,filter:3,select:3,reject:3,every:3,all:3,some:3,any:3,include:2,contains:2,invoke:0,max:3,min:3,toArray:1,size:1,first:3,head:3,take:3,initial:3,rest:3,tail:3,drop:3,last:3,without:0,difference:0,indexOf:3,shuffle:1,lastIndexOf:3,isEmpty:1,chain:1,sample:3,partition:3};addUnderscoreMethods(Collection,collectionMethods,"models");var attributeMethods=["groupBy","countBy","sortBy","indexBy"];_.each(attributeMethods,function(method){if(!_[method])return;Collection.prototype[method]=function(value,context){var iterator=_.isFunction(value)?value:function(model){return model.get(value)};return _[method](this.models,iterator,context)}});var View=Backbone.View=function(options){this.cid=_.uniqueId("view");_.extend(this,_.pick(options,viewOptions));this._ensureElement();this.initialize.apply(this,arguments)};var delegateEventSplitter=/^(\S+)\s*(.*)$/;var viewOptions=["model","collection","el","id","attributes","className","tagName","events"];_.extend(View.prototype,Events,{tagName:"div",$:function(selector){return this.$el.find(selector)},initialize:function(){},render:function(){return this},remove:function(){this._removeElement();this.stopListening();return this},_removeElement:function(){this.$el.remove()},setElement:function(element){this.undelegateEvents();this._setElement(element);this.delegateEvents();return this},_setElement:function(el){this.$el=el instanceof Backbone.$?el:Backbone.$(el);this.el=this.$el[0]},delegateEvents:function(events){events||(events=_.result(this,"events"));if(!events)return this;this.undelegateEvents();for(var key in events){var method=events[key];if(!_.isFunction(method))method=this[method];if(!method)continue;var match=key.match(delegateEventSplitter);this.delegate(match[1],match[2],_.bind(method,this))}return this},delegate:function(eventName,selector,listener){this.$el.on(eventName+".delegateEvents"+this.cid,selector,listener);return this},undelegateEvents:function(){if(this.$el)this.$el.off(".delegateEvents"+this.cid);return this},undelegate:function(eventName,selector,listener){this.$el.off(eventName+".delegateEvents"+this.cid,selector,listener);return this},_createElement:function(tagName){return document.createElement(tagName)},_ensureElement:function(){if(!this.el){var attrs=_.extend({},_.result(this,"attributes"));if(this.id)attrs.id=_.result(this,"id");if(this.className)attrs["class"]=_.result(this,"className");this.setElement(this._createElement(_.result(this,"tagName")));this._setAttributes(attrs)}else{this.setElement(_.result(this,"el"))}},_setAttributes:function(attributes){this.$el.attr(attributes)}});Backbone.sync=function(method,model,options){var type=methodMap[method];_.defaults(options||(options={}),{emulateHTTP:Backbone.emulateHTTP,emulateJSON:Backbone.emulateJSON});var params={type:type,dataType:"json"};if(!options.url){params.url=_.result(model,"url")||urlError()}if(options.data==null&&model&&(method==="create"||method==="update"||method==="patch")){params.contentType="application/json";params.data=JSON.stringify(options.attrs||model.toJSON(options))}if(options.emulateJSON){params.contentType="application/x-www-form-urlencoded";params.data=params.data?{model:params.data}:{}}if(options.emulateHTTP&&(type==="PUT"||type==="DELETE"||type==="PATCH")){params.type="POST";if(options.emulateJSON)params.data._method=type;var beforeSend=options.beforeSend;options.beforeSend=function(xhr){xhr.setRequestHeader("X-HTTP-Method-Override",type);if(beforeSend)return beforeSend.apply(this,arguments)}}if(params.type!=="GET"&&!options.emulateJSON){params.processData=false}var error=options.error;options.error=function(xhr,textStatus,errorThrown){options.textStatus=textStatus;options.errorThrown=errorThrown;if(error)error.call(options.context,xhr,textStatus,errorThrown)};var xhr=options.xhr=Backbone.ajax(_.extend(params,options));model.trigger("request",model,xhr,options);return xhr};var methodMap={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};Backbone.ajax=function(){return Backbone.$.ajax.apply(Backbone.$,arguments)};var Router=Backbone.Router=function(options){options||(options={});if(options.routes)this.routes=options.routes;this._bindRoutes();this.initialize.apply(this,arguments)};var optionalParam=/\((.*?)\)/g;var namedParam=/(\(\?)?:\w+/g;var splatParam=/\*\w+/g;var escapeRegExp=/[\-{}\[\]+?.,\\\^$|#\s]/g;_.extend(Router.prototype,Events,{initialize:function(){},route:function(route,name,callback){if(!_.isRegExp(route))route=this._routeToRegExp(route);if(_.isFunction(name)){callback=name;name=""}if(!callback)callback=this[name];var router=this;Backbone.history.route(route,function(fragment){var args=router._extractParameters(route,fragment);if(router.execute(callback,args,name)!==false){router.trigger.apply(router,["route:"+name].concat(args));router.trigger("route",name,args);Backbone.history.trigger("route",router,name,args)}});return this},execute:function(callback,args,name){if(callback)callback.apply(this,args)},navigate:function(fragment,options){Backbone.history.navigate(fragment,options);return this},_bindRoutes:function(){if(!this.routes)return;this.routes=_.result(this,"routes");var route,routes=_.keys(this.routes);while((route=routes.pop())!=null){this.route(route,this.routes[route])}},_routeToRegExp:function(route){route=route.replace(escapeRegExp,"\\$&").replace(optionalParam,"(?:$1)?").replace(namedParam,function(match,optional){return optional?match:"([^/?]+)"}).replace(splatParam,"([^?]*?)");return new RegExp("^"+route+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(route,fragment){var params=route.exec(fragment).slice(1);return _.map(params,function(param,i){if(i===params.length-1)return param||null;return param?decodeURIComponent(param):null})}});var History=Backbone.History=function(){this.handlers=[];_.bindAll(this,"checkUrl");if(typeof window!=="undefined"){this.location=window.location;this.history=window.history}};var routeStripper=/^[#\/]|\s+$/g;var rootStripper=/^\/+|\/+$/g;var pathStripper=/#.*$/;History.started=false;_.extend(History.prototype,Events,{interval:50,atRoot:function(){var path=this.location.pathname.replace(/[^\/]$/,"$&/");return path===this.root&&!this.getSearch()},matchRoot:function(){var path=this.decodeFragment(this.location.pathname);var root=path.slice(0,this.root.length-1)+"/";return root===this.root},decodeFragment:function(fragment){return decodeURI(fragment.replace(/%25/g,"%2525"))},getSearch:function(){var match=this.location.href.replace(/#.*/,"").match(/\?.+/);return match?match[0]:""},getHash:function(window){var match=(window||this).location.href.match(/#(.*)$/);return match?match[1]:""},getPath:function(){var path=this.decodeFragment(this.location.pathname+this.getSearch()).slice(this.root.length-1);return path.charAt(0)==="/"?path.slice(1):path},getFragment:function(fragment){if(fragment==null){if(this._usePushState||!this._wantsHashChange){fragment=this.getPath()}else{fragment=this.getHash()}}return fragment.replace(routeStripper,"")},start:function(options){if(History.started)throw new Error("Backbone.history has already been started");History.started=true;this.options=_.extend({root:"/"},this.options,options);this.root=this.options.root;this._wantsHashChange=this.options.hashChange!==false;this._hasHashChange="onhashchange"in window;this._useHashChange=this._wantsHashChange&&this._hasHashChange;this._wantsPushState=!!this.options.pushState;this._hasPushState=!!(this.history&&this.history.pushState);this._usePushState=this._wantsPushState&&this._hasPushState;this.fragment=this.getFragment();this.root=("/"+this.root+"/").replace(rootStripper,"/");if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot()){var root=this.root.slice(0,-1)||"/";this.location.replace(root+"#"+this.getPath());return true}else if(this._hasPushState&&this.atRoot()){this.navigate(this.getHash(),{replace:true})}}if(!this._hasHashChange&&this._wantsHashChange&&!this._usePushState){this.iframe=document.createElement("iframe");this.iframe.src="javascript:0";this.iframe.style.display="none";this.iframe.tabIndex=-1;var body=document.body;var iWindow=body.insertBefore(this.iframe,body.firstChild).contentWindow;iWindow.document.open();iWindow.document.close();iWindow.location.hash="#"+this.fragment}var addEventListener=window.addEventListener||function(eventName,listener){return attachEvent("on"+eventName,listener)};if(this._usePushState){addEventListener("popstate",this.checkUrl,false)}else if(this._useHashChange&&!this.iframe){addEventListener("hashchange",this.checkUrl,false)}else if(this._wantsHashChange){this._checkUrlInterval=setInterval(this.checkUrl,this.interval)}if(!this.options.silent)return this.loadUrl()},stop:function(){var removeEventListener=window.removeEventListener||function(eventName,listener){return detachEvent("on"+eventName,listener)};if(this._usePushState){removeEventListener("popstate",this.checkUrl,false)}else if(this._useHashChange&&!this.iframe){removeEventListener("hashchange",this.checkUrl,false)}if(this.iframe){document.body.removeChild(this.iframe);this.iframe=null}if(this._checkUrlInterval)clearInterval(this._checkUrlInterval);History.started=false},route:function(route,callback){this.handlers.unshift({route:route,callback:callback})},checkUrl:function(e){var current=this.getFragment();if(current===this.fragment&&this.iframe){current=this.getHash(this.iframe.contentWindow)}if(current===this.fragment)return false;if(this.iframe)this.navigate(current);this.loadUrl()},loadUrl:function(fragment){if(!this.matchRoot())return false;fragment=this.fragment=this.getFragment(fragment);return _.any(this.handlers,function(handler){if(handler.route.test(fragment)){handler.callback(fragment);return true}})},navigate:function(fragment,options){if(!History.started)return false;if(!options||options===true)options={trigger:!!options};fragment=this.getFragment(fragment||"");var root=this.root;if(fragment===""||fragment.charAt(0)==="?"){root=root.slice(0,-1)||"/"}var url=root+fragment;fragment=this.decodeFragment(fragment.replace(pathStripper,""));if(this.fragment===fragment)return;this.fragment=fragment;if(this._usePushState){this.history[options.replace?"replaceState":"pushState"]({},document.title,url)}else if(this._wantsHashChange){this._updateHash(this.location,fragment,options.replace);if(this.iframe&&fragment!==this.getHash(this.iframe.contentWindow)){var iWindow=this.iframe.contentWindow;if(!options.replace){iWindow.document.open();iWindow.document.close()}this._updateHash(iWindow.location,fragment,options.replace)}}else{return this.location.assign(url)}if(options.trigger)return this.loadUrl(fragment)},_updateHash:function(location,fragment,replace){if(replace){var href=location.href.replace(/(javascript:|#).*$/,"");location.replace(href+"#"+fragment)}else{location.hash="#"+fragment}}});Backbone.history=new History;var extend=function(protoProps,staticProps){var parent=this;var child;if(protoProps&&_.has(protoProps,"constructor")){child=protoProps.constructor}else{child=function(){return parent.apply(this,arguments)}}_.extend(child,parent,staticProps);var Surrogate=function(){this.constructor=child};Surrogate.prototype=parent.prototype;child.prototype=new Surrogate;if(protoProps)_.extend(child.prototype,protoProps);child.__super__=parent.prototype;return child};Model.extend=Collection.extend=Router.extend=View.extend=History.extend=extend;var urlError=function(){throw new Error('A "url" property or function must be specified')};var wrapError=function(model,options){var error=options.error;options.error=function(resp){if(error)error.call(options.context,model,resp,options);model.trigger("error",model,resp,options)}};return Backbone})}).call(exports,__webpack_require__(3))},function(module,exports,__webpack_require__){(function(mod){if(true)mod(__webpack_require__(13));else if(typeof define=="function"&&define.amd)define(["codemirror/lib/codemirror"],mod);else mod(CodeMirror)})(function(CodeMirror){CodeMirror.extendMode("css",{commentStart:"/*",commentEnd:"*/",newlineAfterToken:function(_type,content){return/^[;{}]$/.test(content)}});CodeMirror.extendMode("javascript",{commentStart:"/*",commentEnd:"*/",newlineAfterToken:function(_type,content,textAfter,state){if(this.jsonMode){return/^[\[,{]$/.test(content)||/^}/.test(textAfter)}else{if(content==";"&&state.lexical&&state.lexical.type==")")return false;return/^[;{}]$/.test(content)&&!/^;/.test(textAfter)}}});var inlineElements=/^(a|abbr|acronym|area|base|bdo|big|br|button|caption|cite|code|col|colgroup|dd|del|dfn|em|frame|hr|iframe|img|input|ins|kbd|label|legend|link|map|object|optgroup|option|param|q|samp|script|select|small|span|strong|sub|sup|textarea|tt|var)$/;CodeMirror.extendMode("xml",{commentStart:"<!--",commentEnd:"-->",newlineAfterToken:function(type,content,textAfter,state){var inline=false;if(this.configuration=="html")inline=state.context?inlineElements.test(state.context.tagName):false;return!inline&&(type=="tag"&&/>$/.test(content)&&state.context||/^</.test(textAfter))}});CodeMirror.defineExtension("commentRange",function(isComment,from,to){var cm=this,curMode=CodeMirror.innerMode(cm.getMode(),cm.getTokenAt(from).state).mode;cm.operation(function(){if(isComment){cm.replaceRange(curMode.commentEnd,to);cm.replaceRange(curMode.commentStart,from);if(from.line==to.line&&from.ch==to.ch)cm.setCursor(from.line,from.ch+curMode.commentStart.length)}else{var selText=cm.getRange(from,to);var startIndex=selText.indexOf(curMode.commentStart);var endIndex=selText.lastIndexOf(curMode.commentEnd);if(startIndex>-1&&endIndex>-1&&endIndex>startIndex){selText=selText.substr(0,startIndex)+selText.substring(startIndex+curMode.commentStart.length,endIndex)+selText.substr(endIndex+curMode.commentEnd.length)}cm.replaceRange(selText,from,to)}})});CodeMirror.defineExtension("autoIndentRange",function(from,to){var cmInstance=this;this.operation(function(){for(var i=from.line;i<=to.line;i++){cmInstance.indentLine(i,"smart")}})});CodeMirror.defineExtension("autoFormatRange",function(from,to){var cm=this;var outer=cm.getMode(),text=cm.getRange(from,to).split("\n");var state=CodeMirror.copyState(outer,cm.getTokenAt(from).state);var tabSize=cm.getOption("tabSize");var out="",lines=0,atSol=from.ch===0;function newline(){out+="\n";atSol=true;++lines}for(var i=0;i<text.length;++i){var stream=new CodeMirror.StringStream(text[i],tabSize);while(!stream.eol()){var inner=CodeMirror.innerMode(outer,state);var style=outer.token(stream,state),cur=stream.current();stream.start=stream.pos;if(!atSol||/\S/.test(cur)){out+=cur;atSol=false}if(!atSol&&inner.mode.newlineAfterToken&&inner.mode.newlineAfterToken(style,cur,stream.string.slice(stream.pos)||text[i+1]||"",inner.state))newline()}if(!stream.pos&&outer.blankLine)outer.blankLine(state);if(!atSol&&i<text.length-1)newline()}cm.operation(function(){cm.replaceRange(out,from,to);for(var cur=from.line+1,end=from.line+lines;cur<=end;++cur)cm.indentLine(cur,"smart");cm.setSelection(from,cm.getCursor(false))})})})},function(module,exports,__webpack_require__){(function(mod){if(true)mod(__webpack_require__(13),__webpack_require__(264),__webpack_require__(263),__webpack_require__(61));else if(typeof define=="function"&&define.amd)define(["../../lib/codemirror","../xml/xml","../javascript/javascript","../css/css"],mod);else mod(CodeMirror)})(function(CodeMirror){"use strict";var defaultTags={script:[["lang",/(javascript|babel)/i,"javascript"],["type",/^(?:text|application)\/(?:x-)?(?:java|ecma)script$|^module$|^$/i,"javascript"],["type",/./,"text/plain"],[null,null,"javascript"]],style:[["lang",/^css$/i,"css"],["type",/^(text\/)?(x-)?(stylesheet|css)$/i,"css"],["type",/./,"text/plain"],[null,null,"css"]]};function maybeBackup(stream,pat,style){var cur=stream.current(),close=cur.search(pat);if(close>-1){stream.backUp(cur.length-close)}else if(cur.match(/<\/?$/)){stream.backUp(cur.length);if(!stream.match(pat,false))stream.match(cur)}return style}var attrRegexpCache={};function getAttrRegexp(attr){var regexp=attrRegexpCache[attr];if(regexp)return regexp;return attrRegexpCache[attr]=new RegExp("\\s+"+attr+"\\s*=\\s*('|\")?([^'\"]+)('|\")?\\s*")}function getAttrValue(text,attr){var match=text.match(getAttrRegexp(attr));return match?/^\s*(.*?)\s*$/.exec(match[2])[1]:""}function getTagRegexp(tagName,anchored){return new RegExp((anchored?"^":"")+"</s*"+tagName+"s*>","i")}function addTags(from,to){for(var tag in from){var dest=to[tag]||(to[tag]=[]);var source=from[tag];for(var i=source.length-1;i>=0;i--)dest.unshift(source[i])}}function findMatchingMode(tagInfo,tagText){for(var i=0;i<tagInfo.length;i++){var spec=tagInfo[i];if(!spec[0]||spec[1].test(getAttrValue(tagText,spec[0])))return spec[2]}}CodeMirror.defineMode("htmlmixed",function(config,parserConfig){var htmlMode=CodeMirror.getMode(config,{name:"xml",htmlMode:true,multilineTagIndentFactor:parserConfig.multilineTagIndentFactor,multilineTagIndentPastTag:parserConfig.multilineTagIndentPastTag});var tags={};var configTags=parserConfig&&parserConfig.tags,configScript=parserConfig&&parserConfig.scriptTypes;addTags(defaultTags,tags);if(configTags)addTags(configTags,tags);if(configScript)for(var i=configScript.length-1;i>=0;i--)tags.script.unshift(["type",configScript[i].matches,configScript[i].mode]);function html(stream,state){var style=htmlMode.token(stream,state.htmlState),tag=/\btag\b/.test(style),tagName;if(tag&&!/[<>\s\/]/.test(stream.current())&&(tagName=state.htmlState.tagName&&state.htmlState.tagName.toLowerCase())&&tags.hasOwnProperty(tagName)){state.inTag=tagName+" "}else if(state.inTag&&tag&&/>$/.test(stream.current())){var inTag=/^([\S]+) (.*)/.exec(state.inTag);state.inTag=null;var modeSpec=stream.current()==">"&&findMatchingMode(tags[inTag[1]],inTag[2]);var mode=CodeMirror.getMode(config,modeSpec);var endTagA=getTagRegexp(inTag[1],true),endTag=getTagRegexp(inTag[1],false);state.token=function(stream,state){if(stream.match(endTagA,false)){state.token=html;state.localState=state.localMode=null;return null}return maybeBackup(stream,endTag,state.localMode.token(stream,state.localState))};state.localMode=mode;state.localState=CodeMirror.startState(mode,htmlMode.indent(state.htmlState,""))}else if(state.inTag){state.inTag+=stream.current();if(stream.eol())state.inTag+=" "}return style}return{startState:function(){var state=CodeMirror.startState(htmlMode);return{token:html,inTag:null,localMode:null,localState:null,htmlState:state}},copyState:function(state){var local;if(state.localState){local=CodeMirror.copyState(state.localMode,state.localState)}return{token:state.token,inTag:state.inTag,localMode:state.localMode,localState:local,htmlState:CodeMirror.copyState(htmlMode,state.htmlState)}},token:function(stream,state){return state.token(stream,state)},indent:function(state,textAfter,line){if(!state.localMode||/^\s*<\//.test(textAfter))return htmlMode.indent(state.htmlState,textAfter);else if(state.localMode.indent)return state.localMode.indent(state.localState,textAfter,line);else return CodeMirror.Pass},innerMode:function(state){return{state:state.localState||state.htmlState,mode:state.localMode||htmlMode}}}},"xml","javascript","css");CodeMirror.defineMIME("text/html","htmlmixed")})},function(module,exports,__webpack_require__){(function(mod){if(true)mod(__webpack_require__(13));else if(typeof define=="function"&&define.amd)define(["../../lib/codemirror"],mod);else mod(CodeMirror)})(function(CodeMirror){"use strict";function expressionAllowed(stream,state,backUp){return/^(?:operator|sof|keyword c|case|new|export|default|[\[{}\(,;:]|=>)$/.test(state.lastType)||state.lastType=="quasi"&&/\{\s*$/.test(stream.string.slice(0,stream.pos-(backUp||0)))}CodeMirror.defineMode("javascript",function(config,parserConfig){var indentUnit=config.indentUnit;var statementIndent=parserConfig.statementIndent;var jsonldMode=parserConfig.jsonld;var jsonMode=parserConfig.json||jsonldMode;var isTS=parserConfig.typescript;var wordRE=parserConfig.wordCharacters||/[\w$\xa1-\uffff]/;var keywords=function(){function kw(type){return{type:type,style:"keyword"}}var A=kw("keyword a"),B=kw("keyword b"),C=kw("keyword c");var operator=kw("operator"),atom={type:"atom",style:"atom"};var jsKeywords={"if":kw("if"),"while":A,"with":A,"else":B,"do":B,"try":B,"finally":B,"return":C,"break":C,"continue":C,"new":kw("new"),"delete":C,"throw":C,"debugger":C,"var":kw("var"),"const":kw("var"),let:kw("var"),"function":kw("function"),"catch":kw("catch"),"for":kw("for"),"switch":kw("switch"),"case":kw("case"),"default":kw("default"),"in":operator,"typeof":operator,"instanceof":operator,"true":atom,"false":atom,"null":atom,undefined:atom,NaN:atom,Infinity:atom,"this":kw("this"),"class":kw("class"),"super":kw("atom"),"yield":C,"export":kw("export"),"import":kw("import"),"extends":C,await:C,async:kw("async")};if(isTS){var type={type:"variable",style:"variable-3"};var tsKeywords={"interface":kw("class"),"implements":C,namespace:C,module:kw("module"),"enum":kw("module"),"public":kw("modifier"),"private":kw("modifier"),"protected":kw("modifier"),"abstract":kw("modifier"),as:operator,string:type,number:type,"boolean":type,any:type};for(var attr in tsKeywords){jsKeywords[attr]=tsKeywords[attr]}}return jsKeywords}();var isOperatorChar=/[+\-*&%=<>!?|~^@]/;var isJsonldKeyword=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/;function readRegexp(stream){var escaped=false,next,inSet=false;while((next=stream.next())!=null){if(!escaped){if(next=="/"&&!inSet)return;if(next=="[")inSet=true;else if(inSet&&next=="]")inSet=false}escaped=!escaped&&next=="\\"}}var type,content;function ret(tp,style,cont){type=tp;content=cont;return style}function tokenBase(stream,state){var ch=stream.next();if(ch=='"'||ch=="'"){state.tokenize=tokenString(ch);return state.tokenize(stream,state)}else if(ch=="."&&stream.match(/^\d+(?:[eE][+\-]?\d+)?/)){return ret("number","number")}else if(ch=="."&&stream.match("..")){return ret("spread","meta")}else if(/[\[\]{}\(\),;\:\.]/.test(ch)){return ret(ch)}else if(ch=="="&&stream.eat(">")){return ret("=>","operator")}else if(ch=="0"&&stream.eat(/x/i)){stream.eatWhile(/[\da-f]/i);return ret("number","number")}else if(ch=="0"&&stream.eat(/o/i)){stream.eatWhile(/[0-7]/i);return ret("number","number")}else if(ch=="0"&&stream.eat(/b/i)){stream.eatWhile(/[01]/i);return ret("number","number")}else if(/\d/.test(ch)){stream.match(/^\d*(?:\.\d*)?(?:[eE][+\-]?\d+)?/);return ret("number","number")}else if(ch=="/"){if(stream.eat("*")){state.tokenize=tokenComment;return tokenComment(stream,state)}else if(stream.eat("/")){stream.skipToEnd();return ret("comment","comment")}else if(expressionAllowed(stream,state,1)){readRegexp(stream);stream.match(/^\b(([gimyu])(?![gimyu]*\2))+\b/);return ret("regexp","string-2")}else{stream.eatWhile(isOperatorChar);return ret("operator","operator",stream.current())}}else if(ch=="`"){state.tokenize=tokenQuasi;return tokenQuasi(stream,state)}else if(ch=="#"){stream.skipToEnd();return ret("error","error")}else if(isOperatorChar.test(ch)){if(ch!=">"||!state.lexical||state.lexical.type!=">")stream.eatWhile(isOperatorChar);return ret("operator","operator",stream.current())}else if(wordRE.test(ch)){stream.eatWhile(wordRE);var word=stream.current(),known=keywords.propertyIsEnumerable(word)&&keywords[word];return known&&state.lastType!="."?ret(known.type,known.style,word):ret("variable","variable",word)}}function tokenString(quote){return function(stream,state){var escaped=false,next;if(jsonldMode&&stream.peek()=="@"&&stream.match(isJsonldKeyword)){state.tokenize=tokenBase;return ret("jsonld-keyword","meta")}while((next=stream.next())!=null){if(next==quote&&!escaped)break;escaped=!escaped&&next=="\\"}if(!escaped)state.tokenize=tokenBase;return ret("string","string")}}function tokenComment(stream,state){var maybeEnd=false,ch;while(ch=stream.next()){if(ch=="/"&&maybeEnd){state.tokenize=tokenBase;break}maybeEnd=ch=="*"}return ret("comment","comment")}function tokenQuasi(stream,state){var escaped=false,next;while((next=stream.next())!=null){if(!escaped&&(next=="`"||next=="$"&&stream.eat("{"))){state.tokenize=tokenBase;break}escaped=!escaped&&next=="\\"}return ret("quasi","string-2",stream.current())}var brackets="([{}])";function findFatArrow(stream,state){if(state.fatArrowAt)state.fatArrowAt=null;var arrow=stream.string.indexOf("=>",stream.start);if(arrow<0)return;if(isTS){var m=/:\s*(?:\w+(?:<[^>]*>|\[\])?|\{[^}]*\})\s*$/.exec(stream.string.slice(stream.start,arrow));if(m)arrow=m.index}var depth=0,sawSomething=false;for(var pos=arrow-1;pos>=0;--pos){var ch=stream.string.charAt(pos);var bracket=brackets.indexOf(ch);if(bracket>=0&&bracket<3){if(!depth){++pos;break}if(--depth==0){if(ch=="(")sawSomething=true;break}}else if(bracket>=3&&bracket<6){++depth}else if(wordRE.test(ch)){sawSomething=true}else if(/["'\/]/.test(ch)){return}else if(sawSomething&&!depth){++pos;break}}if(sawSomething&&!depth)state.fatArrowAt=pos}var atomicTypes={atom:true,number:true,variable:true,string:true,regexp:true,"this":true,"jsonld-keyword":true};function JSLexical(indented,column,type,align,prev,info){this.indented=indented;this.column=column;this.type=type;this.prev=prev;this.info=info;if(align!=null)this.align=align}function inScope(state,varname){for(var v=state.localVars;v;v=v.next)if(v.name==varname)return true;for(var cx=state.context;cx;cx=cx.prev){for(var v=cx.vars;v;v=v.next)if(v.name==varname)return true}}function parseJS(state,style,type,content,stream){var cc=state.cc;cx.state=state;cx.stream=stream;cx.marked=null,cx.cc=cc;cx.style=style;if(!state.lexical.hasOwnProperty("align"))state.lexical.align=true;while(true){var combinator=cc.length?cc.pop():jsonMode?expression:statement;if(combinator(type,content)){while(cc.length&&cc[cc.length-1].lex)cc.pop()();if(cx.marked)return cx.marked;if(type=="variable"&&inScope(state,content))return"variable-2";return style}}}var cx={state:null,column:null,marked:null,cc:null};function pass(){for(var i=arguments.length-1;i>=0;i--)cx.cc.push(arguments[i])}function cont(){pass.apply(null,arguments);return true}function register(varname){function inList(list){for(var v=list;v;v=v.next)if(v.name==varname)return true;
return false}var state=cx.state;cx.marked="def";if(state.context){if(inList(state.localVars))return;state.localVars={name:varname,next:state.localVars}}else{if(inList(state.globalVars))return;if(parserConfig.globalVars)state.globalVars={name:varname,next:state.globalVars}}}var defaultVars={name:"this",next:{name:"arguments"}};function pushcontext(){cx.state.context={prev:cx.state.context,vars:cx.state.localVars};cx.state.localVars=defaultVars}function popcontext(){cx.state.localVars=cx.state.context.vars;cx.state.context=cx.state.context.prev}function pushlex(type,info){var result=function(){var state=cx.state,indent=state.indented;if(state.lexical.type=="stat")indent=state.lexical.indented;else for(var outer=state.lexical;outer&&outer.type==")"&&outer.align;outer=outer.prev)indent=outer.indented;state.lexical=new JSLexical(indent,cx.stream.column(),type,null,state.lexical,info)};result.lex=true;return result}function poplex(){var state=cx.state;if(state.lexical.prev){if(state.lexical.type==")")state.indented=state.lexical.indented;state.lexical=state.lexical.prev}}poplex.lex=true;function expect(wanted){function exp(type){if(type==wanted)return cont();else if(wanted==";")return pass();else return cont(exp)}return exp}function statement(type,value){if(type=="var")return cont(pushlex("vardef",value.length),vardef,expect(";"),poplex);if(type=="keyword a")return cont(pushlex("form"),parenExpr,statement,poplex);if(type=="keyword b")return cont(pushlex("form"),statement,poplex);if(type=="{")return cont(pushlex("}"),block,poplex);if(type==";")return cont();if(type=="if"){if(cx.state.lexical.info=="else"&&cx.state.cc[cx.state.cc.length-1]==poplex)cx.state.cc.pop()();return cont(pushlex("form"),parenExpr,statement,poplex,maybeelse)}if(type=="function")return cont(functiondef);if(type=="for")return cont(pushlex("form"),forspec,statement,poplex);if(type=="variable"){if(isTS&&value=="type"){cx.marked="keyword";return cont(typeexpr,expect("operator"),typeexpr,expect(";"))}else{return cont(pushlex("stat"),maybelabel)}}if(type=="switch")return cont(pushlex("form"),parenExpr,expect("{"),pushlex("}","switch"),block,poplex,poplex);if(type=="case")return cont(expression,expect(":"));if(type=="default")return cont(expect(":"));if(type=="catch")return cont(pushlex("form"),pushcontext,expect("("),funarg,expect(")"),statement,poplex,popcontext);if(type=="class")return cont(pushlex("form"),className,poplex);if(type=="export")return cont(pushlex("stat"),afterExport,poplex);if(type=="import")return cont(pushlex("stat"),afterImport,poplex);if(type=="module")return cont(pushlex("form"),pattern,expect("{"),pushlex("}"),block,poplex,poplex);if(type=="async")return cont(statement);if(value=="@")return cont(expression,statement);return pass(pushlex("stat"),expression,expect(";"),poplex)}function expression(type){return expressionInner(type,false)}function expressionNoComma(type){return expressionInner(type,true)}function parenExpr(type){if(type!="(")return pass();return cont(pushlex(")"),expression,expect(")"),poplex)}function expressionInner(type,noComma){if(cx.state.fatArrowAt==cx.stream.start){var body=noComma?arrowBodyNoComma:arrowBody;if(type=="(")return cont(pushcontext,pushlex(")"),commasep(pattern,")"),poplex,expect("=>"),body,popcontext);else if(type=="variable")return pass(pushcontext,pattern,expect("=>"),body,popcontext)}var maybeop=noComma?maybeoperatorNoComma:maybeoperatorComma;if(atomicTypes.hasOwnProperty(type))return cont(maybeop);if(type=="function")return cont(functiondef,maybeop);if(type=="class")return cont(pushlex("form"),classExpression,poplex);if(type=="keyword c"||type=="async")return cont(noComma?maybeexpressionNoComma:maybeexpression);if(type=="(")return cont(pushlex(")"),maybeexpression,expect(")"),poplex,maybeop);if(type=="operator"||type=="spread")return cont(noComma?expressionNoComma:expression);if(type=="[")return cont(pushlex("]"),arrayLiteral,poplex,maybeop);if(type=="{")return contCommasep(objprop,"}",null,maybeop);if(type=="quasi")return pass(quasi,maybeop);if(type=="new")return cont(maybeTarget(noComma));return cont()}function maybeexpression(type){if(type.match(/[;\}\)\],]/))return pass();return pass(expression)}function maybeexpressionNoComma(type){if(type.match(/[;\}\)\],]/))return pass();return pass(expressionNoComma)}function maybeoperatorComma(type,value){if(type==",")return cont(expression);return maybeoperatorNoComma(type,value,false)}function maybeoperatorNoComma(type,value,noComma){var me=noComma==false?maybeoperatorComma:maybeoperatorNoComma;var expr=noComma==false?expression:expressionNoComma;if(type=="=>")return cont(pushcontext,noComma?arrowBodyNoComma:arrowBody,popcontext);if(type=="operator"){if(/\+\+|--/.test(value))return cont(me);if(value=="?")return cont(expression,expect(":"),expr);return cont(expr)}if(type=="quasi"){return pass(quasi,me)}if(type==";")return;if(type=="(")return contCommasep(expressionNoComma,")","call",me);if(type==".")return cont(property,me);if(type=="[")return cont(pushlex("]"),maybeexpression,expect("]"),poplex,me)}function quasi(type,value){if(type!="quasi")return pass();if(value.slice(value.length-2)!="${")return cont(quasi);return cont(expression,continueQuasi)}function continueQuasi(type){if(type=="}"){cx.marked="string-2";cx.state.tokenize=tokenQuasi;return cont(quasi)}}function arrowBody(type){findFatArrow(cx.stream,cx.state);return pass(type=="{"?statement:expression)}function arrowBodyNoComma(type){findFatArrow(cx.stream,cx.state);return pass(type=="{"?statement:expressionNoComma)}function maybeTarget(noComma){return function(type){if(type==".")return cont(noComma?targetNoComma:target);else return pass(noComma?expressionNoComma:expression)}}function target(_,value){if(value=="target"){cx.marked="keyword";return cont(maybeoperatorComma)}}function targetNoComma(_,value){if(value=="target"){cx.marked="keyword";return cont(maybeoperatorNoComma)}}function maybelabel(type){if(type==":")return cont(poplex,statement);return pass(maybeoperatorComma,expect(";"),poplex)}function property(type){if(type=="variable"){cx.marked="property";return cont()}}function objprop(type,value){if(type=="async"){cx.marked="property";return cont(objprop)}else if(type=="variable"||cx.style=="keyword"){cx.marked="property";if(value=="get"||value=="set")return cont(getterSetter);return cont(afterprop)}else if(type=="number"||type=="string"){cx.marked=jsonldMode?"property":cx.style+" property";return cont(afterprop)}else if(type=="jsonld-keyword"){return cont(afterprop)}else if(type=="modifier"){return cont(objprop)}else if(type=="["){return cont(expression,expect("]"),afterprop)}else if(type=="spread"){return cont(expression)}else if(type==":"){return pass(afterprop)}}function getterSetter(type){if(type!="variable")return pass(afterprop);cx.marked="property";return cont(functiondef)}function afterprop(type){if(type==":")return cont(expressionNoComma);if(type=="(")return pass(functiondef)}function commasep(what,end,sep){function proceed(type,value){if(sep?sep.indexOf(type)>-1:type==","){var lex=cx.state.lexical;if(lex.info=="call")lex.pos=(lex.pos||0)+1;return cont(function(type,value){if(type==end||value==end)return pass();return pass(what)},proceed)}if(type==end||value==end)return cont();return cont(expect(end))}return function(type,value){if(type==end||value==end)return cont();return pass(what,proceed)}}function contCommasep(what,end,info){for(var i=3;i<arguments.length;i++)cx.cc.push(arguments[i]);return cont(pushlex(end,info),commasep(what,end),poplex)}function block(type){if(type=="}")return cont();return pass(statement,block)}function maybetype(type,value){if(isTS){if(type==":")return cont(typeexpr);if(value=="?")return cont(maybetype)}}function typeexpr(type){if(type=="variable"){cx.marked="variable-3";return cont(afterType)}if(type=="string"||type=="number"||type=="atom")return cont(afterType);if(type=="{")return cont(pushlex("}"),commasep(typeprop,"}",",;"),poplex,afterType);if(type=="(")return cont(commasep(typearg,")"),maybeReturnType)}function maybeReturnType(type){if(type=="=>")return cont(typeexpr)}function typeprop(type,value){if(type=="variable"||cx.style=="keyword"){cx.marked="property";return cont(typeprop)}else if(value=="?"){return cont(typeprop)}else if(type==":"){return cont(typeexpr)}else if(type=="["){return cont(expression,maybetype,expect("]"),typeprop)}}function typearg(type){if(type=="variable")return cont(typearg);else if(type==":")return cont(typeexpr)}function afterType(type,value){if(value=="<")return cont(pushlex(">"),commasep(typeexpr,">"),poplex,afterType);if(value=="|"||type==".")return cont(typeexpr);if(type=="[")return cont(expect("]"),afterType);if(value=="extends")return cont(typeexpr)}function vardef(){return pass(pattern,maybetype,maybeAssign,vardefCont)}function pattern(type,value){if(type=="modifier")return cont(pattern);if(type=="variable"){register(value);return cont()}if(type=="spread")return cont(pattern);if(type=="[")return contCommasep(pattern,"]");if(type=="{")return contCommasep(proppattern,"}")}function proppattern(type,value){if(type=="variable"&&!cx.stream.match(/^\s*:/,false)){register(value);return cont(maybeAssign)}if(type=="variable")cx.marked="property";if(type=="spread")return cont(pattern);if(type=="}")return pass();return cont(expect(":"),pattern,maybeAssign)}function maybeAssign(_type,value){if(value=="=")return cont(expressionNoComma)}function vardefCont(type){if(type==",")return cont(vardef)}function maybeelse(type,value){if(type=="keyword b"&&value=="else")return cont(pushlex("form","else"),statement,poplex)}function forspec(type){if(type=="(")return cont(pushlex(")"),forspec1,expect(")"),poplex)}function forspec1(type){if(type=="var")return cont(vardef,expect(";"),forspec2);if(type==";")return cont(forspec2);if(type=="variable")return cont(formaybeinof);return pass(expression,expect(";"),forspec2)}function formaybeinof(_type,value){if(value=="in"||value=="of"){cx.marked="keyword";return cont(expression)}return cont(maybeoperatorComma,forspec2)}function forspec2(type,value){if(type==";")return cont(forspec3);if(value=="in"||value=="of"){cx.marked="keyword";return cont(expression)}return pass(expression,expect(";"),forspec3)}function forspec3(type){if(type!=")")cont(expression)}function functiondef(type,value){if(value=="*"){cx.marked="keyword";return cont(functiondef)}if(type=="variable"){register(value);return cont(functiondef)}if(type=="(")return cont(pushcontext,pushlex(")"),commasep(funarg,")"),poplex,maybetype,statement,popcontext);if(isTS&&value=="<")return cont(pushlex(">"),commasep(typeexpr,">"),poplex,functiondef)}function funarg(type){if(type=="spread")return cont(funarg);return pass(pattern,maybetype,maybeAssign)}function classExpression(type,value){if(type=="variable")return className(type,value);return classNameAfter(type,value)}function className(type,value){if(type=="variable"){register(value);return cont(classNameAfter)}}function classNameAfter(type,value){if(value=="<")return cont(pushlex(">"),commasep(typeexpr,">"),poplex,classNameAfter);if(value=="extends"||value=="implements"||isTS&&type==",")return cont(isTS?typeexpr:expression,classNameAfter);if(type=="{")return cont(pushlex("}"),classBody,poplex)}function classBody(type,value){if(type=="variable"||cx.style=="keyword"){if((value=="async"||value=="static"||value=="get"||value=="set"||isTS&&(value=="public"||value=="private"||value=="protected"||value=="readonly"||value=="abstract"))&&cx.stream.match(/^\s+[\w$\xa1-\uffff]/,false)){cx.marked="keyword";return cont(classBody)}cx.marked="property";return cont(isTS?classfield:functiondef,classBody)}if(type=="[")return cont(expression,expect("]"),isTS?classfield:functiondef,classBody);if(value=="*"){cx.marked="keyword";return cont(classBody)}if(type==";")return cont(classBody);if(type=="}")return cont();if(value=="@")return cont(expression,classBody)}function classfield(type,value){if(value=="?")return cont(classfield);if(type==":")return cont(typeexpr,maybeAssign);if(value=="=")return cont(expressionNoComma);return pass(functiondef)}function afterExport(type,value){if(value=="*"){cx.marked="keyword";return cont(maybeFrom,expect(";"))}if(value=="default"){cx.marked="keyword";return cont(expression,expect(";"))}if(type=="{")return cont(commasep(exportField,"}"),maybeFrom,expect(";"));return pass(statement)}function exportField(type,value){if(value=="as"){cx.marked="keyword";return cont(expect("variable"))}if(type=="variable")return pass(expressionNoComma,exportField)}function afterImport(type){if(type=="string")return cont();return pass(importSpec,maybeMoreImports,maybeFrom)}function importSpec(type,value){if(type=="{")return contCommasep(importSpec,"}");if(type=="variable")register(value);if(value=="*")cx.marked="keyword";return cont(maybeAs)}function maybeMoreImports(type){if(type==",")return cont(importSpec,maybeMoreImports)}function maybeAs(_type,value){if(value=="as"){cx.marked="keyword";return cont(importSpec)}}function maybeFrom(_type,value){if(value=="from"){cx.marked="keyword";return cont(expression)}}function arrayLiteral(type){if(type=="]")return cont();return pass(commasep(expressionNoComma,"]"))}function isContinuedStatement(state,textAfter){return state.lastType=="operator"||state.lastType==","||isOperatorChar.test(textAfter.charAt(0))||/[,.]/.test(textAfter.charAt(0))}return{startState:function(basecolumn){var state={tokenize:tokenBase,lastType:"sof",cc:[],lexical:new JSLexical((basecolumn||0)-indentUnit,0,"block",false),localVars:parserConfig.localVars,context:parserConfig.localVars&&{vars:parserConfig.localVars},indented:basecolumn||0};if(parserConfig.globalVars&&typeof parserConfig.globalVars=="object")state.globalVars=parserConfig.globalVars;return state},token:function(stream,state){if(stream.sol()){if(!state.lexical.hasOwnProperty("align"))state.lexical.align=false;state.indented=stream.indentation();findFatArrow(stream,state)}if(state.tokenize!=tokenComment&&stream.eatSpace())return null;var style=state.tokenize(stream,state);if(type=="comment")return style;state.lastType=type=="operator"&&(content=="++"||content=="--")?"incdec":type;return parseJS(state,style,type,content,stream)},indent:function(state,textAfter){if(state.tokenize==tokenComment)return CodeMirror.Pass;if(state.tokenize!=tokenBase)return 0;var firstChar=textAfter&&textAfter.charAt(0),lexical=state.lexical,top;if(!/^\s*else\b/.test(textAfter))for(var i=state.cc.length-1;i>=0;--i){var c=state.cc[i];if(c==poplex)lexical=lexical.prev;else if(c!=maybeelse)break}while((lexical.type=="stat"||lexical.type=="form")&&(firstChar=="}"||(top=state.cc[state.cc.length-1])&&(top==maybeoperatorComma||top==maybeoperatorNoComma)&&!/^[,\.=+\-*:?[\(]/.test(textAfter)))lexical=lexical.prev;if(statementIndent&&lexical.type==")"&&lexical.prev.type=="stat")lexical=lexical.prev;var type=lexical.type,closing=firstChar==type;if(type=="vardef")return lexical.indented+(state.lastType=="operator"||state.lastType==","?lexical.info+1:0);else if(type=="form"&&firstChar=="{")return lexical.indented;else if(type=="form")return lexical.indented+indentUnit;else if(type=="stat")return lexical.indented+(isContinuedStatement(state,textAfter)?statementIndent||indentUnit:0);else if(lexical.info=="switch"&&!closing&&parserConfig.doubleIndentSwitch!=false)return lexical.indented+(/^(?:case|default)\b/.test(textAfter)?indentUnit:2*indentUnit);else if(lexical.align)return lexical.column+(closing?0:1);else return lexical.indented+(closing?0:indentUnit)},electricInput:/^\s*(?:case .*?:|default:|\{|\})$/,blockCommentStart:jsonMode?null:"/*",blockCommentEnd:jsonMode?null:"*/",lineComment:jsonMode?null:"//",fold:"brace",closeBrackets:"()[]{}''\"\"``",helperType:jsonMode?"json":"javascript",jsonldMode:jsonldMode,jsonMode:jsonMode,expressionAllowed:expressionAllowed,skipExpression:function(state){var top=state.cc[state.cc.length-1];if(top==expression||top==expressionNoComma)state.cc.pop()}}});CodeMirror.registerHelper("wordChars","javascript",/[\w$]/);CodeMirror.defineMIME("text/javascript","javascript");CodeMirror.defineMIME("text/ecmascript","javascript");CodeMirror.defineMIME("application/javascript","javascript");CodeMirror.defineMIME("application/x-javascript","javascript");CodeMirror.defineMIME("application/ecmascript","javascript");CodeMirror.defineMIME("application/json",{name:"javascript",json:true});CodeMirror.defineMIME("application/x-json",{name:"javascript",json:true});CodeMirror.defineMIME("application/ld+json",{name:"javascript",jsonld:true});CodeMirror.defineMIME("text/typescript",{name:"javascript",typescript:true});CodeMirror.defineMIME("application/typescript",{name:"javascript",typescript:true})})},function(module,exports,__webpack_require__){(function(mod){if(true)mod(__webpack_require__(13));else if(typeof define=="function"&&define.amd)define(["../../lib/codemirror"],mod);else mod(CodeMirror)})(function(CodeMirror){"use strict";var htmlConfig={autoSelfClosers:{area:true,base:true,br:true,col:true,command:true,embed:true,frame:true,hr:true,img:true,input:true,keygen:true,link:true,meta:true,param:true,source:true,track:true,wbr:true,menuitem:true},implicitlyClosed:{dd:true,li:true,optgroup:true,option:true,p:true,rp:true,rt:true,tbody:true,td:true,tfoot:true,th:true,tr:true},contextGrabbers:{dd:{dd:true,dt:true},dt:{dd:true,dt:true},li:{li:true},option:{option:true,optgroup:true},optgroup:{optgroup:true},p:{address:true,article:true,aside:true,blockquote:true,dir:true,div:true,dl:true,fieldset:true,footer:true,form:true,h1:true,h2:true,h3:true,h4:true,h5:true,h6:true,header:true,hgroup:true,hr:true,menu:true,nav:true,ol:true,p:true,pre:true,section:true,table:true,ul:true},rp:{rp:true,rt:true},rt:{rp:true,rt:true},tbody:{tbody:true,tfoot:true},td:{td:true,th:true},tfoot:{tbody:true},th:{td:true,th:true},thead:{tbody:true,tfoot:true},tr:{tr:true}},doNotIndent:{pre:true},allowUnquoted:true,allowMissing:true,caseFold:true};var xmlConfig={autoSelfClosers:{},implicitlyClosed:{},contextGrabbers:{},doNotIndent:{},allowUnquoted:false,allowMissing:false,caseFold:false};CodeMirror.defineMode("xml",function(editorConf,config_){var indentUnit=editorConf.indentUnit;var config={};var defaults=config_.htmlMode?htmlConfig:xmlConfig;for(var prop in defaults)config[prop]=defaults[prop];for(var prop in config_)config[prop]=config_[prop];var type,setStyle;function inText(stream,state){function chain(parser){state.tokenize=parser;return parser(stream,state)}var ch=stream.next();if(ch=="<"){if(stream.eat("!")){if(stream.eat("[")){if(stream.match("CDATA["))return chain(inBlock("atom","]]>"));else return null}else if(stream.match("--")){return chain(inBlock("comment","-->"))}else if(stream.match("DOCTYPE",true,true)){stream.eatWhile(/[\w\._\-]/);return chain(doctype(1))}else{return null}}else if(stream.eat("?")){stream.eatWhile(/[\w\._\-]/);state.tokenize=inBlock("meta","?>");return"meta"}else{type=stream.eat("/")?"closeTag":"openTag";state.tokenize=inTag;return"tag bracket"}}else if(ch=="&"){var ok;if(stream.eat("#")){if(stream.eat("x")){ok=stream.eatWhile(/[a-fA-F\d]/)&&stream.eat(";")}else{ok=stream.eatWhile(/[\d]/)&&stream.eat(";")}}else{ok=stream.eatWhile(/[\w\.\-:]/)&&stream.eat(";")}return ok?"atom":"error"}else{stream.eatWhile(/[^&<]/);return null}}inText.isInText=true;function inTag(stream,state){var ch=stream.next();if(ch==">"||ch=="/"&&stream.eat(">")){state.tokenize=inText;type=ch==">"?"endTag":"selfcloseTag";return"tag bracket"}else if(ch=="="){type="equals";return null}else if(ch=="<"){state.tokenize=inText;state.state=baseState;state.tagName=state.tagStart=null;var next=state.tokenize(stream,state);return next?next+" tag error":"tag error"}else if(/[\'\"]/.test(ch)){state.tokenize=inAttribute(ch);state.stringStartCol=stream.column();return state.tokenize(stream,state)}else{stream.match(/^[^\s\u00a0=<>\"\']*[^\s\u00a0=<>\"\'\/]/);return"word"}}function inAttribute(quote){var closure=function(stream,state){while(!stream.eol()){if(stream.next()==quote){state.tokenize=inTag;break}}return"string"};closure.isInAttribute=true;return closure}function inBlock(style,terminator){return function(stream,state){while(!stream.eol()){if(stream.match(terminator)){state.tokenize=inText;break}stream.next()}return style}}function doctype(depth){return function(stream,state){var ch;while((ch=stream.next())!=null){if(ch=="<"){state.tokenize=doctype(depth+1);return state.tokenize(stream,state)}else if(ch==">"){if(depth==1){state.tokenize=inText;break}else{state.tokenize=doctype(depth-1);return state.tokenize(stream,state)}}}return"meta"}}function Context(state,tagName,startOfLine){this.prev=state.context;this.tagName=tagName;this.indent=state.indented;this.startOfLine=startOfLine;if(config.doNotIndent.hasOwnProperty(tagName)||state.context&&state.context.noIndent)this.noIndent=true}function popContext(state){if(state.context)state.context=state.context.prev}function maybePopContext(state,nextTagName){var parentTagName;while(true){if(!state.context){return}parentTagName=state.context.tagName;if(!config.contextGrabbers.hasOwnProperty(parentTagName)||!config.contextGrabbers[parentTagName].hasOwnProperty(nextTagName)){return}popContext(state)}}function baseState(type,stream,state){if(type=="openTag"){state.tagStart=stream.column();return tagNameState}else if(type=="closeTag"){return closeTagNameState}else{return baseState}}function tagNameState(type,stream,state){if(type=="word"){state.tagName=stream.current();setStyle="tag";return attrState}else{setStyle="error";return tagNameState}}function closeTagNameState(type,stream,state){if(type=="word"){var tagName=stream.current();if(state.context&&state.context.tagName!=tagName&&config.implicitlyClosed.hasOwnProperty(state.context.tagName))popContext(state);if(state.context&&state.context.tagName==tagName||config.matchClosing===false){setStyle="tag";return closeState}else{setStyle="tag error";return closeStateErr}}else{setStyle="error";return closeStateErr}}function closeState(type,_stream,state){if(type!="endTag"){setStyle="error";return closeState}popContext(state);return baseState}function closeStateErr(type,stream,state){setStyle="error";return closeState(type,stream,state)}function attrState(type,_stream,state){if(type=="word"){setStyle="attribute";return attrEqState}else if(type=="endTag"||type=="selfcloseTag"){var tagName=state.tagName,tagStart=state.tagStart;state.tagName=state.tagStart=null;if(type=="selfcloseTag"||config.autoSelfClosers.hasOwnProperty(tagName)){maybePopContext(state,tagName)}else{maybePopContext(state,tagName);state.context=new Context(state,tagName,tagStart==state.indented)}return baseState}setStyle="error";return attrState}function attrEqState(type,stream,state){if(type=="equals")return attrValueState;if(!config.allowMissing)setStyle="error";return attrState(type,stream,state)}function attrValueState(type,stream,state){if(type=="string")return attrContinuedState;if(type=="word"&&config.allowUnquoted){setStyle="string";return attrState}setStyle="error";return attrState(type,stream,state)}function attrContinuedState(type,stream,state){if(type=="string")return attrContinuedState;return attrState(type,stream,state)}return{startState:function(baseIndent){var state={tokenize:inText,state:baseState,indented:baseIndent||0,tagName:null,tagStart:null,context:null};if(baseIndent!=null)state.baseIndent=baseIndent;return state},token:function(stream,state){if(!state.tagName&&stream.sol())state.indented=stream.indentation();if(stream.eatSpace())return null;type=null;var style=state.tokenize(stream,state);if((style||type)&&style!="comment"){setStyle=null;state.state=state.state(type||style,stream,state);if(setStyle)style=setStyle=="error"?style+" error":setStyle}return style},indent:function(state,textAfter,fullLine){var context=state.context;if(state.tokenize.isInAttribute){if(state.tagStart==state.indented)return state.stringStartCol+1;else return state.indented+indentUnit}if(context&&context.noIndent)return CodeMirror.Pass;if(state.tokenize!=inTag&&state.tokenize!=inText)return fullLine?fullLine.match(/^(\s*)/)[0].length:0;if(state.tagName){if(config.multilineTagIndentPastTag!==false)return state.tagStart+state.tagName.length+2;else return state.tagStart+indentUnit*(config.multilineTagIndentFactor||1)}if(config.alignCDATA&&/<!\[CDATA\[/.test(textAfter))return 0;var tagAfter=textAfter&&/^<(\/)?([\w_:\.-]*)/.exec(textAfter);if(tagAfter&&tagAfter[1]){while(context){if(context.tagName==tagAfter[2]){context=context.prev;break}else if(config.implicitlyClosed.hasOwnProperty(context.tagName)){context=context.prev}else{break}}}else if(tagAfter){while(context){var grabbers=config.contextGrabbers[context.tagName];if(grabbers&&grabbers.hasOwnProperty(tagAfter[2]))context=context.prev;else break}}while(context&&context.prev&&!context.startOfLine)context=context.prev;if(context)return context.indent+indentUnit;else return state.baseIndent||0},electricInput:/<\/[\s\w:]+>$/,blockCommentStart:"<!--",blockCommentEnd:"-->",configuration:config.htmlMode?"html":"xml",helperType:config.htmlMode?"html":"xml",skipAttribute:function(state){if(state.state==attrValueState)state.state=attrState}}});CodeMirror.defineMIME("text/xml","xml");CodeMirror.defineMIME("application/xml","xml");if(!CodeMirror.mimeModes.hasOwnProperty("text/html"))CodeMirror.defineMIME("text/html",{name:"xml",htmlMode:true})})},function(module,exports,__webpack_require__){exports=module.exports=createDebug.debug=createDebug["default"]=createDebug;exports.coerce=coerce;exports.disable=disable;exports.enable=enable;exports.enabled=enabled;exports.humanize=__webpack_require__(270);exports.names=[];exports.skips=[];exports.formatters={};var prevTime;function selectColor(namespace){var hash=0,i;for(i in namespace){hash=(hash<<5)-hash+namespace.charCodeAt(i);hash|=0}return exports.colors[Math.abs(hash)%exports.colors.length]}function createDebug(namespace){function debug(){if(!debug.enabled)return;var self=debug;var curr=+new Date;var ms=curr-(prevTime||curr);self.diff=ms;self.prev=prevTime;self.curr=curr;prevTime=curr;var args=new Array(arguments.length);for(var i=0;i<args.length;i++){args[i]=arguments[i]}args[0]=exports.coerce(args[0]);if("string"!==typeof args[0]){args.unshift("%O")}var index=0;args[0]=args[0].replace(/%([a-zA-Z%])/g,function(match,format){if(match==="%%")return match;index++;var formatter=exports.formatters[format];if("function"===typeof formatter){var val=args[index];match=formatter.call(self,val);args.splice(index,1);index--}return match});exports.formatArgs.call(self,args);var logFn=debug.log||exports.log||console.log.bind(console);logFn.apply(self,args)}debug.namespace=namespace;debug.enabled=exports.enabled(namespace);debug.useColors=exports.useColors();debug.color=selectColor(namespace);if("function"===typeof exports.init){exports.init(debug)}return debug}function enable(namespaces){exports.save(namespaces);exports.names=[];exports.skips=[];var split=(typeof namespaces==="string"?namespaces:"").split(/[\s,]+/);var len=split.length;for(var i=0;i<len;i++){if(!split[i])continue;namespaces=split[i].replace(/\*/g,".*?");if(namespaces[0]==="-"){exports.skips.push(new RegExp("^"+namespaces.substr(1)+"$"))}else{exports.names.push(new RegExp("^"+namespaces+"$"))}}}function disable(){exports.enable("")}function enabled(name){var i,len;for(i=0,len=exports.skips.length;i<len;i++){if(exports.skips[i].test(name)){return false}}for(i=0,len=exports.names.length;i<len;i++){if(exports.names[i].test(name)){return true}}return false}function coerce(val){if(val instanceof Error)return val.stack||val.message;return val}},function(module,exports){function EventEmitter(){this._events=this._events||{};this._maxListeners=this._maxListeners||undefined}module.exports=EventEmitter;EventEmitter.EventEmitter=EventEmitter;EventEmitter.prototype._events=undefined;EventEmitter.prototype._maxListeners=undefined;EventEmitter.defaultMaxListeners=10;EventEmitter.prototype.setMaxListeners=function(n){if(!isNumber(n)||n<0||isNaN(n))throw TypeError("n must be a positive number");this._maxListeners=n;return this};EventEmitter.prototype.emit=function(type){var er,handler,len,args,i,listeners;if(!this._events)this._events={};if(type==="error"){if(!this._events.error||isObject(this._events.error)&&!this._events.error.length){er=arguments[1];if(er instanceof Error){throw er}else{var err=new Error('Uncaught, unspecified "error" event. ('+er+")");err.context=er;throw err}}}handler=this._events[type];if(isUndefined(handler))return false;if(isFunction(handler)){switch(arguments.length){case 1:handler.call(this);break;case 2:handler.call(this,arguments[1]);break;case 3:handler.call(this,arguments[1],arguments[2]);break;default:args=Array.prototype.slice.call(arguments,1);handler.apply(this,args)}}else if(isObject(handler)){args=Array.prototype.slice.call(arguments,1);listeners=handler.slice();len=listeners.length;for(i=0;i<len;i++)listeners[i].apply(this,args)}return true};EventEmitter.prototype.addListener=function(type,listener){var m;if(!isFunction(listener))throw TypeError("listener must be a function");if(!this._events)this._events={};if(this._events.newListener)this.emit("newListener",type,isFunction(listener.listener)?listener.listener:listener);if(!this._events[type])this._events[type]=listener;else if(isObject(this._events[type]))this._events[type].push(listener);else this._events[type]=[this._events[type],listener];if(isObject(this._events[type])&&!this._events[type].warned){if(!isUndefined(this._maxListeners)){m=this._maxListeners}else{m=EventEmitter.defaultMaxListeners}if(m&&m>0&&this._events[type].length>m){this._events[type].warned=true;console.error("(node) warning: possible EventEmitter memory "+"leak detected. %d listeners added. "+"Use emitter.setMaxListeners() to increase limit.",this._events[type].length);if(typeof console.trace==="function"){console.trace()}}}return this};EventEmitter.prototype.on=EventEmitter.prototype.addListener;EventEmitter.prototype.once=function(type,listener){if(!isFunction(listener))throw TypeError("listener must be a function");var fired=false;function g(){this.removeListener(type,g);if(!fired){fired=true;listener.apply(this,arguments)}}g.listener=listener;this.on(type,g);return this};EventEmitter.prototype.removeListener=function(type,listener){var list,position,length,i;if(!isFunction(listener))throw TypeError("listener must be a function");if(!this._events||!this._events[type])return this;list=this._events[type];length=list.length;position=-1;if(list===listener||isFunction(list.listener)&&list.listener===listener){delete this._events[type];if(this._events.removeListener)this.emit("removeListener",type,listener)}else if(isObject(list)){for(i=length;i-->0;){if(list[i]===listener||list[i].listener&&list[i].listener===listener){position=i;break}}if(position<0)return this;if(list.length===1){list.length=0;delete this._events[type]}else{list.splice(position,1)}if(this._events.removeListener)this.emit("removeListener",type,listener)}return this};EventEmitter.prototype.removeAllListeners=function(type){var key,listeners;if(!this._events)return this;if(!this._events.removeListener){if(arguments.length===0)this._events={};else if(this._events[type])delete this._events[type];return this}if(arguments.length===0){for(key in this._events){if(key==="removeListener")continue;this.removeAllListeners(key)}this.removeAllListeners("removeListener");this._events={};return this}listeners=this._events[type];if(isFunction(listeners)){this.removeListener(type,listeners)}else if(listeners){while(listeners.length)this.removeListener(type,listeners[listeners.length-1])}delete this._events[type];return this};EventEmitter.prototype.listeners=function(type){var ret;if(!this._events||!this._events[type])ret=[];else if(isFunction(this._events[type]))ret=[this._events[type]];else ret=this._events[type].slice();return ret};EventEmitter.prototype.listenerCount=function(type){if(this._events){var evlistener=this._events[type];if(isFunction(evlistener))return 1;else if(evlistener)return evlistener.length
}return 0};EventEmitter.listenerCount=function(emitter,type){return emitter.listenerCount(type)};function isFunction(arg){return typeof arg==="function"}function isNumber(arg){return typeof arg==="number"}function isObject(arg){return typeof arg==="object"&&arg!==null}function isUndefined(arg){return arg===void 0}},function(module,exports,__webpack_require__){module.exports={XmlEntities:__webpack_require__(269),Html4Entities:__webpack_require__(268),Html5Entities:__webpack_require__(62),AllHtmlEntities:__webpack_require__(62)}},function(module,exports){var HTML_ALPHA=["apos","nbsp","iexcl","cent","pound","curren","yen","brvbar","sect","uml","copy","ordf","laquo","not","shy","reg","macr","deg","plusmn","sup2","sup3","acute","micro","para","middot","cedil","sup1","ordm","raquo","frac14","frac12","frac34","iquest","Agrave","Aacute","Acirc","Atilde","Auml","Aring","Aelig","Ccedil","Egrave","Eacute","Ecirc","Euml","Igrave","Iacute","Icirc","Iuml","ETH","Ntilde","Ograve","Oacute","Ocirc","Otilde","Ouml","times","Oslash","Ugrave","Uacute","Ucirc","Uuml","Yacute","THORN","szlig","agrave","aacute","acirc","atilde","auml","aring","aelig","ccedil","egrave","eacute","ecirc","euml","igrave","iacute","icirc","iuml","eth","ntilde","ograve","oacute","ocirc","otilde","ouml","divide","oslash","ugrave","uacute","ucirc","uuml","yacute","thorn","yuml","quot","amp","lt","gt","OElig","oelig","Scaron","scaron","Yuml","circ","tilde","ensp","emsp","thinsp","zwnj","zwj","lrm","rlm","ndash","mdash","lsquo","rsquo","sbquo","ldquo","rdquo","bdquo","dagger","Dagger","permil","lsaquo","rsaquo","euro","fnof","Alpha","Beta","Gamma","Delta","Epsilon","Zeta","Eta","Theta","Iota","Kappa","Lambda","Mu","Nu","Xi","Omicron","Pi","Rho","Sigma","Tau","Upsilon","Phi","Chi","Psi","Omega","alpha","beta","gamma","delta","epsilon","zeta","eta","theta","iota","kappa","lambda","mu","nu","xi","omicron","pi","rho","sigmaf","sigma","tau","upsilon","phi","chi","psi","omega","thetasym","upsih","piv","bull","hellip","prime","Prime","oline","frasl","weierp","image","real","trade","alefsym","larr","uarr","rarr","darr","harr","crarr","lArr","uArr","rArr","dArr","hArr","forall","part","exist","empty","nabla","isin","notin","ni","prod","sum","minus","lowast","radic","prop","infin","ang","and","or","cap","cup","int","there4","sim","cong","asymp","ne","equiv","le","ge","sub","sup","nsub","sube","supe","oplus","otimes","perp","sdot","lceil","rceil","lfloor","rfloor","lang","rang","loz","spades","clubs","hearts","diams"];var HTML_CODES=[39,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255,34,38,60,62,338,339,352,353,376,710,732,8194,8195,8201,8204,8205,8206,8207,8211,8212,8216,8217,8218,8220,8221,8222,8224,8225,8240,8249,8250,8364,402,913,914,915,916,917,918,919,920,921,922,923,924,925,926,927,928,929,931,932,933,934,935,936,937,945,946,947,948,949,950,951,952,953,954,955,956,957,958,959,960,961,962,963,964,965,966,967,968,969,977,978,982,8226,8230,8242,8243,8254,8260,8472,8465,8476,8482,8501,8592,8593,8594,8595,8596,8629,8656,8657,8658,8659,8660,8704,8706,8707,8709,8711,8712,8713,8715,8719,8721,8722,8727,8730,8733,8734,8736,8743,8744,8745,8746,8747,8756,8764,8773,8776,8800,8801,8804,8805,8834,8835,8836,8838,8839,8853,8855,8869,8901,8968,8969,8970,8971,9001,9002,9674,9824,9827,9829,9830];var alphaIndex={};var numIndex={};var i=0;var length=HTML_ALPHA.length;while(i<length){var a=HTML_ALPHA[i];var c=HTML_CODES[i];alphaIndex[a]=String.fromCharCode(c);numIndex[c]=a;i++}function Html4Entities(){}Html4Entities.prototype.decode=function(str){if(!str||!str.length){return""}return str.replace(/&(#?[\w\d]+);?/g,function(s,entity){var chr;if(entity.charAt(0)==="#"){var code=entity.charAt(1).toLowerCase()==="x"?parseInt(entity.substr(2),16):parseInt(entity.substr(1));if(!(isNaN(code)||code<-32768||code>65535)){chr=String.fromCharCode(code)}}else{chr=alphaIndex[entity]}return chr||s})};Html4Entities.decode=function(str){return(new Html4Entities).decode(str)};Html4Entities.prototype.encode=function(str){if(!str||!str.length){return""}var strLength=str.length;var result="";var i=0;while(i<strLength){var alpha=numIndex[str.charCodeAt(i)];result+=alpha?"&"+alpha+";":str.charAt(i);i++}return result};Html4Entities.encode=function(str){return(new Html4Entities).encode(str)};Html4Entities.prototype.encodeNonUTF=function(str){if(!str||!str.length){return""}var strLength=str.length;var result="";var i=0;while(i<strLength){var cc=str.charCodeAt(i);var alpha=numIndex[cc];if(alpha){result+="&"+alpha+";"}else if(cc<32||cc>126){result+="&#"+cc+";"}else{result+=str.charAt(i)}i++}return result};Html4Entities.encodeNonUTF=function(str){return(new Html4Entities).encodeNonUTF(str)};Html4Entities.prototype.encodeNonASCII=function(str){if(!str||!str.length){return""}var strLength=str.length;var result="";var i=0;while(i<strLength){var c=str.charCodeAt(i);if(c<=255){result+=str[i++];continue}result+="&#"+c+";";i++}return result};Html4Entities.encodeNonASCII=function(str){return(new Html4Entities).encodeNonASCII(str)};module.exports=Html4Entities},function(module,exports){var ALPHA_INDEX={"&lt":"<","&gt":">","&quot":'"',"&apos":"'","&amp":"&","&lt;":"<","&gt;":">","&quot;":'"',"&apos;":"'","&amp;":"&"};var CHAR_INDEX={60:"lt",62:"gt",34:"quot",39:"apos",38:"amp"};var CHAR_S_INDEX={"<":"&lt;",">":"&gt;",'"':"&quot;","'":"&apos;","&":"&amp;"};function XmlEntities(){}XmlEntities.prototype.encode=function(str){if(!str||!str.length){return""}return str.replace(/<|>|"|'|&/g,function(s){return CHAR_S_INDEX[s]})};XmlEntities.encode=function(str){return(new XmlEntities).encode(str)};XmlEntities.prototype.decode=function(str){if(!str||!str.length){return""}return str.replace(/&#?[0-9a-zA-Z]+;?/g,function(s){if(s.charAt(1)==="#"){var code=s.charAt(2).toLowerCase()==="x"?parseInt(s.substr(3),16):parseInt(s.substr(2));if(isNaN(code)||code<-32768||code>65535){return""}return String.fromCharCode(code)}return ALPHA_INDEX[s]||s})};XmlEntities.decode=function(str){return(new XmlEntities).decode(str)};XmlEntities.prototype.encodeNonUTF=function(str){if(!str||!str.length){return""}var strLength=str.length;var result="";var i=0;while(i<strLength){var c=str.charCodeAt(i);var alpha=CHAR_INDEX[c];if(alpha){result+="&"+alpha+";";i++;continue}if(c<32||c>126){result+="&#"+c+";"}else{result+=str.charAt(i)}i++}return result};XmlEntities.encodeNonUTF=function(str){return(new XmlEntities).encodeNonUTF(str)};XmlEntities.prototype.encodeNonASCII=function(str){if(!str||!str.length){return""}var strLenght=str.length;var result="";var i=0;while(i<strLenght){var c=str.charCodeAt(i);if(c<=255){result+=str[i++];continue}result+="&#"+c+";";i++}return result};XmlEntities.encodeNonASCII=function(str){return(new XmlEntities).encodeNonASCII(str)};module.exports=XmlEntities},function(module,exports){var s=1e3;var m=s*60;var h=m*60;var d=h*24;var y=d*365.25;module.exports=function(val,options){options=options||{};var type=typeof val;if(type==="string"&&val.length>0){return parse(val)}else if(type==="number"&&isNaN(val)===false){return options.long?fmtLong(val):fmtShort(val)}throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(val))};function parse(str){str=String(str);if(str.length>100){return}var match=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(str);if(!match){return}var n=parseFloat(match[1]);var type=(match[2]||"ms").toLowerCase();switch(type){case"years":case"year":case"yrs":case"yr":case"y":return n*y;case"days":case"day":case"d":return n*d;case"hours":case"hour":case"hrs":case"hr":case"h":return n*h;case"minutes":case"minute":case"mins":case"min":case"m":return n*m;case"seconds":case"second":case"secs":case"sec":case"s":return n*s;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return undefined}}function fmtShort(ms){if(ms>=d){return Math.round(ms/d)+"d"}if(ms>=h){return Math.round(ms/h)+"h"}if(ms>=m){return Math.round(ms/m)+"m"}if(ms>=s){return Math.round(ms/s)+"s"}return ms+"ms"}function fmtLong(ms){return plural(ms,d,"day")||plural(ms,h,"hour")||plural(ms,m,"minute")||plural(ms,s,"second")||ms+" ms"}function plural(ms,n,name){if(ms<n){return}if(ms<n*1.5){return Math.floor(ms/n)+" "+name}return Math.ceil(ms/n)+" "+name+"s"}},function(module,exports,__webpack_require__){(function(module,global){var __WEBPACK_AMD_DEFINE_RESULT__;(function(root){var freeExports=typeof exports=="object"&&exports&&!exports.nodeType&&exports;var freeModule=typeof module=="object"&&module&&!module.nodeType&&module;var freeGlobal=typeof global=="object"&&global;if(freeGlobal.global===freeGlobal||freeGlobal.window===freeGlobal||freeGlobal.self===freeGlobal){root=freeGlobal}var punycode,maxInt=2147483647,base=36,tMin=1,tMax=26,skew=38,damp=700,initialBias=72,initialN=128,delimiter="-",regexPunycode=/^xn--/,regexNonASCII=/[^\x20-\x7E]/,regexSeparators=/[\x2E\u3002\uFF0E\uFF61]/g,errors={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},baseMinusTMin=base-tMin,floor=Math.floor,stringFromCharCode=String.fromCharCode,key;function error(type){throw new RangeError(errors[type])}function map(array,fn){var length=array.length;var result=[];while(length--){result[length]=fn(array[length])}return result}function mapDomain(string,fn){var parts=string.split("@");var result="";if(parts.length>1){result=parts[0]+"@";string=parts[1]}string=string.replace(regexSeparators,".");var labels=string.split(".");var encoded=map(labels,fn).join(".");return result+encoded}function ucs2decode(string){var output=[],counter=0,length=string.length,value,extra;while(counter<length){value=string.charCodeAt(counter++);if(value>=55296&&value<=56319&&counter<length){extra=string.charCodeAt(counter++);if((extra&64512)==56320){output.push(((value&1023)<<10)+(extra&1023)+65536)}else{output.push(value);counter--}}else{output.push(value)}}return output}function ucs2encode(array){return map(array,function(value){var output="";if(value>65535){value-=65536;output+=stringFromCharCode(value>>>10&1023|55296);value=56320|value&1023}output+=stringFromCharCode(value);return output}).join("")}function basicToDigit(codePoint){if(codePoint-48<10){return codePoint-22}if(codePoint-65<26){return codePoint-65}if(codePoint-97<26){return codePoint-97}return base}function digitToBasic(digit,flag){return digit+22+75*(digit<26)-((flag!=0)<<5)}function adapt(delta,numPoints,firstTime){var k=0;delta=firstTime?floor(delta/damp):delta>>1;delta+=floor(delta/numPoints);for(;delta>baseMinusTMin*tMax>>1;k+=base){delta=floor(delta/baseMinusTMin)}return floor(k+(baseMinusTMin+1)*delta/(delta+skew))}function decode(input){var output=[],inputLength=input.length,out,i=0,n=initialN,bias=initialBias,basic,j,index,oldi,w,k,digit,t,baseMinusT;basic=input.lastIndexOf(delimiter);if(basic<0){basic=0}for(j=0;j<basic;++j){if(input.charCodeAt(j)>=128){error("not-basic")}output.push(input.charCodeAt(j))}for(index=basic>0?basic+1:0;index<inputLength;){for(oldi=i,w=1,k=base;;k+=base){if(index>=inputLength){error("invalid-input")}digit=basicToDigit(input.charCodeAt(index++));if(digit>=base||digit>floor((maxInt-i)/w)){error("overflow")}i+=digit*w;t=k<=bias?tMin:k>=bias+tMax?tMax:k-bias;if(digit<t){break}baseMinusT=base-t;if(w>floor(maxInt/baseMinusT)){error("overflow")}w*=baseMinusT}out=output.length+1;bias=adapt(i-oldi,out,oldi==0);if(floor(i/out)>maxInt-n){error("overflow")}n+=floor(i/out);i%=out;output.splice(i++,0,n)}return ucs2encode(output)}function encode(input){var n,delta,handledCPCount,basicLength,bias,j,m,q,k,t,currentValue,output=[],inputLength,handledCPCountPlusOne,baseMinusT,qMinusT;input=ucs2decode(input);inputLength=input.length;n=initialN;delta=0;bias=initialBias;for(j=0;j<inputLength;++j){currentValue=input[j];if(currentValue<128){output.push(stringFromCharCode(currentValue))}}handledCPCount=basicLength=output.length;if(basicLength){output.push(delimiter)}while(handledCPCount<inputLength){for(m=maxInt,j=0;j<inputLength;++j){currentValue=input[j];if(currentValue>=n&&currentValue<m){m=currentValue}}handledCPCountPlusOne=handledCPCount+1;if(m-n>floor((maxInt-delta)/handledCPCountPlusOne)){error("overflow")}delta+=(m-n)*handledCPCountPlusOne;n=m;for(j=0;j<inputLength;++j){currentValue=input[j];if(currentValue<n&&++delta>maxInt){error("overflow")}if(currentValue==n){for(q=delta,k=base;;k+=base){t=k<=bias?tMin:k>=bias+tMax?tMax:k-bias;if(q<t){break}qMinusT=q-t;baseMinusT=base-t;output.push(stringFromCharCode(digitToBasic(t+qMinusT%baseMinusT,0)));q=floor(qMinusT/baseMinusT)}output.push(stringFromCharCode(digitToBasic(q,0)));bias=adapt(delta,handledCPCountPlusOne,handledCPCount==basicLength);delta=0;++handledCPCount}}++delta;++n}return output.join("")}function toUnicode(input){return mapDomain(input,function(string){return regexPunycode.test(string)?decode(string.slice(4).toLowerCase()):string})}function toASCII(input){return mapDomain(input,function(string){return regexNonASCII.test(string)?"xn--"+encode(string):string})}punycode={version:"1.4.1",ucs2:{decode:ucs2decode,encode:ucs2encode},decode:decode,encode:encode,toASCII:toASCII,toUnicode:toUnicode};if(true){!(__WEBPACK_AMD_DEFINE_RESULT__=function(){return punycode}.call(exports,__webpack_require__,exports,module),__WEBPACK_AMD_DEFINE_RESULT__!==undefined&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))}else if(freeExports&&freeModule){if(module.exports==freeExports){freeModule.exports=punycode}else{for(key in punycode){punycode.hasOwnProperty(key)&&(freeExports[key]=punycode[key])}}}else{root.punycode=punycode}})(this)}).call(exports,__webpack_require__(78)(module),__webpack_require__(3))},function(module,exports,__webpack_require__){"use strict";function hasOwnProperty(obj,prop){return Object.prototype.hasOwnProperty.call(obj,prop)}module.exports=function(qs,sep,eq,options){sep=sep||"&";eq=eq||"=";var obj={};if(typeof qs!=="string"||qs.length===0){return obj}var regexp=/\+/g;qs=qs.split(sep);var maxKeys=1e3;if(options&&typeof options.maxKeys==="number"){maxKeys=options.maxKeys}var len=qs.length;if(maxKeys>0&&len>maxKeys){len=maxKeys}for(var i=0;i<len;++i){var x=qs[i].replace(regexp,"%20"),idx=x.indexOf(eq),kstr,vstr,k,v;if(idx>=0){kstr=x.substr(0,idx);vstr=x.substr(idx+1)}else{kstr=x;vstr=""}k=decodeURIComponent(kstr);v=decodeURIComponent(vstr);if(!hasOwnProperty(obj,k)){obj[k]=v}else if(isArray(obj[k])){obj[k].push(v)}else{obj[k]=[obj[k],v]}}return obj};var isArray=Array.isArray||function(xs){return Object.prototype.toString.call(xs)==="[object Array]"}},function(module,exports,__webpack_require__){"use strict";var stringifyPrimitive=function(v){switch(typeof v){case"string":return v;case"boolean":return v?"true":"false";case"number":return isFinite(v)?v:"";default:return""}};module.exports=function(obj,sep,eq,name){sep=sep||"&";eq=eq||"=";if(obj===null){obj=undefined}if(typeof obj==="object"){return map(objectKeys(obj),function(k){var ks=encodeURIComponent(stringifyPrimitive(k))+eq;if(isArray(obj[k])){return map(obj[k],function(v){return ks+encodeURIComponent(stringifyPrimitive(v))}).join(sep)}else{return ks+encodeURIComponent(stringifyPrimitive(obj[k]))}}).join(sep)}if(!name)return"";return encodeURIComponent(stringifyPrimitive(name))+eq+encodeURIComponent(stringifyPrimitive(obj))};var isArray=Array.isArray||function(xs){return Object.prototype.toString.call(xs)==="[object Array]"};function map(xs,f){if(xs.map)return xs.map(f);var res=[];for(var i=0;i<xs.length;i++){res.push(f(xs[i],i))}return res}var objectKeys=Object.keys||function(obj){var res=[];for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))res.push(key)}return res}},function(module,exports,__webpack_require__){"use strict";exports.decode=exports.parse=__webpack_require__(272);exports.encode=exports.stringify=__webpack_require__(273)},function(module,exports,__webpack_require__){"use strict";module.exports=function required(port,protocol){protocol=protocol.split(":")[0];port=+port;if(!port)return false;switch(protocol){case"http":case"ws":return port!==80;case"https":case"wss":return port!==443;case"ftp":return port!==21;case"gopher":return port!==70;case"file":return false}return port!==0}},function(module,exports,__webpack_require__){"use strict";(function(global){var transportList=__webpack_require__(285);module.exports=__webpack_require__(283)(transportList);if("_sockjs_onload"in global){setTimeout(global._sockjs_onload,1)}}).call(exports,__webpack_require__(3))},function(module,exports,__webpack_require__){"use strict";var inherits=__webpack_require__(2),Event=__webpack_require__(26);function CloseEvent(){Event.call(this);this.initEvent("close",false,false);this.wasClean=false;this.code=0;this.reason=""}inherits(CloseEvent,Event);module.exports=CloseEvent},function(module,exports,__webpack_require__){"use strict";var inherits=__webpack_require__(2),Event=__webpack_require__(26);function TransportMessageEvent(data){Event.call(this);this.initEvent("message",false,false);this.data=data}inherits(TransportMessageEvent,Event);module.exports=TransportMessageEvent},function(module,exports,__webpack_require__){"use strict";var JSON3=__webpack_require__(9),iframeUtils=__webpack_require__(19);function FacadeJS(transport){this._transport=transport;transport.on("message",this._transportMessage.bind(this));transport.on("close",this._transportClose.bind(this))}FacadeJS.prototype._transportClose=function(code,reason){iframeUtils.postMessage("c",JSON3.stringify([code,reason]))};FacadeJS.prototype._transportMessage=function(frame){iframeUtils.postMessage("t",frame)};FacadeJS.prototype._send=function(data){this._transport.send(data)};FacadeJS.prototype._close=function(){this._transport.close();this._transport.removeAllListeners()};module.exports=FacadeJS},function(module,exports,__webpack_require__){"use strict";(function(process){var urlUtils=__webpack_require__(7),eventUtils=__webpack_require__(11),JSON3=__webpack_require__(9),FacadeJS=__webpack_require__(279),InfoIframeReceiver=__webpack_require__(66),iframeUtils=__webpack_require__(19),loc=__webpack_require__(67);var debug=function(){};if(process.env.NODE_ENV!=="production"){debug=__webpack_require__(5)("sockjs-client:iframe-bootstrap")}module.exports=function(SockJS,availableTransports){var transportMap={};availableTransports.forEach(function(at){if(at.facadeTransport){transportMap[at.facadeTransport.transportName]=at.facadeTransport}});transportMap[InfoIframeReceiver.transportName]=InfoIframeReceiver;var parentOrigin;SockJS.bootstrap_iframe=function(){var facade;iframeUtils.currentWindowId=loc.hash.slice(1);var onMessage=function(e){if(e.source!==parent){return}if(typeof parentOrigin==="undefined"){parentOrigin=e.origin}if(e.origin!==parentOrigin){return}var iframeMessage;try{iframeMessage=JSON3.parse(e.data)}catch(ignored){debug("bad json",e.data);return}if(iframeMessage.windowId!==iframeUtils.currentWindowId){return}switch(iframeMessage.type){case"s":var p;try{p=JSON3.parse(iframeMessage.data)}catch(ignored){debug("bad json",iframeMessage.data);break}var version=p[0];var transport=p[1];var transUrl=p[2];var baseUrl=p[3];debug(version,transport,transUrl,baseUrl);if(version!==SockJS.version){throw new Error("Incompatible SockJS! Main site uses:"+' "'+version+'", the iframe:'+' "'+SockJS.version+'".')}if(!urlUtils.isOriginEqual(transUrl,loc.href)||!urlUtils.isOriginEqual(baseUrl,loc.href)){throw new Error("Can't connect to different domain from within an "+"iframe. ("+loc.href+", "+transUrl+", "+baseUrl+")")}facade=new FacadeJS(new transportMap[transport](transUrl,baseUrl));break;case"m":facade._send(iframeMessage.data);break;case"c":if(facade){facade._close()}facade=null;break}};eventUtils.attachEvent("message",onMessage);iframeUtils.postMessage("s")}}}).call(exports,__webpack_require__(4))},function(module,exports,__webpack_require__){"use strict";(function(process,global){var EventEmitter=__webpack_require__(6).EventEmitter,inherits=__webpack_require__(2),JSON3=__webpack_require__(9),utils=__webpack_require__(11),IframeTransport=__webpack_require__(72),InfoReceiverIframe=__webpack_require__(66);var debug=function(){};if(process.env.NODE_ENV!=="production"){debug=__webpack_require__(5)("sockjs-client:info-iframe")}function InfoIframe(baseUrl,url){var self=this;EventEmitter.call(this);var go=function(){var ifr=self.ifr=new IframeTransport(InfoReceiverIframe.transportName,url,baseUrl);ifr.once("message",function(msg){if(msg){var d;try{d=JSON3.parse(msg)}catch(e){debug("bad json",msg);self.emit("finish");self.close();return}var info=d[0],rtt=d[1];self.emit("finish",info,rtt)}self.close()});ifr.once("close",function(){self.emit("finish");self.close()})};if(!global.document.body){utils.attachEvent("load",go)}else{go()}}inherits(InfoIframe,EventEmitter);InfoIframe.enabled=function(){return IframeTransport.enabled()};InfoIframe.prototype.close=function(){if(this.ifr){this.ifr.close()}this.removeAllListeners();this.ifr=null};module.exports=InfoIframe}).call(exports,__webpack_require__(4),__webpack_require__(3))},function(module,exports,__webpack_require__){"use strict";(function(process){var EventEmitter=__webpack_require__(6).EventEmitter,inherits=__webpack_require__(2),urlUtils=__webpack_require__(7),XDR=__webpack_require__(28),XHRCors=__webpack_require__(22),XHRLocal=__webpack_require__(17),XHRFake=__webpack_require__(294),InfoIframe=__webpack_require__(281),InfoAjax=__webpack_require__(65);var debug=function(){};if(process.env.NODE_ENV!=="production"){debug=__webpack_require__(5)("sockjs-client:info-receiver")}function InfoReceiver(baseUrl,urlInfo){debug(baseUrl);var self=this;EventEmitter.call(this);setTimeout(function(){self.doXhr(baseUrl,urlInfo)},0)}inherits(InfoReceiver,EventEmitter);InfoReceiver._getReceiver=function(baseUrl,url,urlInfo){if(urlInfo.sameOrigin){return new InfoAjax(url,XHRLocal)}if(XHRCors.enabled){return new InfoAjax(url,XHRCors)}if(XDR.enabled&&urlInfo.sameScheme){return new InfoAjax(url,XDR)}if(InfoIframe.enabled()){return new InfoIframe(baseUrl,url)}return new InfoAjax(url,XHRFake)};InfoReceiver.prototype.doXhr=function(baseUrl,urlInfo){var self=this,url=urlUtils.addPath(baseUrl,"/info");debug("doXhr",url);this.xo=InfoReceiver._getReceiver(baseUrl,url,urlInfo);this.timeoutRef=setTimeout(function(){debug("timeout");self._cleanup(false);self.emit("finish")},InfoReceiver.timeout);this.xo.once("finish",function(info,rtt){debug("finish",info,rtt);self._cleanup(true);self.emit("finish",info,rtt)})};InfoReceiver.prototype._cleanup=function(wasClean){debug("_cleanup");clearTimeout(this.timeoutRef);this.timeoutRef=null;if(!wasClean&&this.xo){this.xo.close()}this.xo=null};InfoReceiver.prototype.close=function(){debug("close");this.removeAllListeners();this._cleanup(false)};InfoReceiver.timeout=8e3;module.exports=InfoReceiver}).call(exports,__webpack_require__(4))},function(module,exports,__webpack_require__){"use strict";(function(process,global){__webpack_require__(284);var URL=__webpack_require__(77),inherits=__webpack_require__(2),JSON3=__webpack_require__(9),random=__webpack_require__(15),escape=__webpack_require__(299),urlUtils=__webpack_require__(7),eventUtils=__webpack_require__(11),transport=__webpack_require__(301),objectUtils=__webpack_require__(29),browser=__webpack_require__(18),log=__webpack_require__(300),Event=__webpack_require__(26),EventTarget=__webpack_require__(64),loc=__webpack_require__(67),CloseEvent=__webpack_require__(277),TransportMessageEvent=__webpack_require__(278),InfoReceiver=__webpack_require__(282);var debug=function(){};if(process.env.NODE_ENV!=="production"){debug=__webpack_require__(5)("sockjs-client:main")}var transports;function SockJS(url,protocols,options){if(!(this instanceof SockJS)){return new SockJS(url,protocols,options)}if(arguments.length<1){throw new TypeError("Failed to construct 'SockJS: 1 argument required, but only 0 present")}EventTarget.call(this);this.readyState=SockJS.CONNECTING;this.extensions="";this.protocol="";options=options||{};if(options.protocols_whitelist){log.warn("'protocols_whitelist' is DEPRECATED. Use 'transports' instead.")}this._transportsWhitelist=options.transports;this._transportOptions=options.transportOptions||{};var sessionId=options.sessionId||8;if(typeof sessionId==="function"){this._generateSessionId=sessionId}else if(typeof sessionId==="number"){this._generateSessionId=function(){return random.string(sessionId)}}else{throw new TypeError("If sessionId is used in the options, it needs to be a number or a function.")}this._server=options.server||random.numberString(1e3);var parsedUrl=new URL(url);if(!parsedUrl.host||!parsedUrl.protocol){throw new SyntaxError("The URL '"+url+"' is invalid")}else if(parsedUrl.hash){throw new SyntaxError("The URL must not contain a fragment")}else if(parsedUrl.protocol!=="http:"&&parsedUrl.protocol!=="https:"){throw new SyntaxError("The URL's scheme must be either 'http:' or 'https:'. '"+parsedUrl.protocol+"' is not allowed.")}var secure=parsedUrl.protocol==="https:";if(loc.protocol==="https"&&!secure){throw new Error("SecurityError: An insecure SockJS connection may not be initiated from a page loaded over HTTPS")}if(!protocols){protocols=[]}else if(!Array.isArray(protocols)){protocols=[protocols]}var sortedProtocols=protocols.sort();sortedProtocols.forEach(function(proto,i){if(!proto){throw new SyntaxError("The protocols entry '"+proto+"' is invalid.")}if(i<sortedProtocols.length-1&&proto===sortedProtocols[i+1]){throw new SyntaxError("The protocols entry '"+proto+"' is duplicated.")}});var o=urlUtils.getOrigin(loc.href);this._origin=o?o.toLowerCase():null;parsedUrl.set("pathname",parsedUrl.pathname.replace(/\/+$/,""));this.url=parsedUrl.href;debug("using url",this.url);this._urlInfo={nullOrigin:!browser.hasDomain(),sameOrigin:urlUtils.isOriginEqual(this.url,loc.href),sameScheme:urlUtils.isSchemeEqual(this.url,loc.href)};this._ir=new InfoReceiver(this.url,this._urlInfo);this._ir.once("finish",this._receiveInfo.bind(this))}inherits(SockJS,EventTarget);function userSetCode(code){return code===1e3||code>=3e3&&code<=4999}SockJS.prototype.close=function(code,reason){if(code&&!userSetCode(code)){throw new Error("InvalidAccessError: Invalid code")}if(reason&&reason.length>123){throw new SyntaxError("reason argument has an invalid length")}if(this.readyState===SockJS.CLOSING||this.readyState===SockJS.CLOSED){return}var wasClean=true;this._close(code||1e3,reason||"Normal closure",wasClean)};SockJS.prototype.send=function(data){if(typeof data!=="string"){data=""+data}if(this.readyState===SockJS.CONNECTING){throw new Error("InvalidStateError: The connection has not been established yet")}if(this.readyState!==SockJS.OPEN){return}this._transport.send(escape.quote(data))};SockJS.version=__webpack_require__(76);SockJS.CONNECTING=0;SockJS.OPEN=1;SockJS.CLOSING=2;SockJS.CLOSED=3;SockJS.prototype._receiveInfo=function(info,rtt){debug("_receiveInfo",rtt);this._ir=null;if(!info){this._close(1002,"Cannot connect to server");return}this._rto=this.countRTO(rtt);this._transUrl=info.base_url?info.base_url:this.url;info=objectUtils.extend(info,this._urlInfo);debug("info",info);var enabledTransports=transports.filterToEnabled(this._transportsWhitelist,info);this._transports=enabledTransports.main;debug(this._transports.length+" enabled transports");this._connect()};SockJS.prototype._connect=function(){for(var Transport=this._transports.shift();Transport;Transport=this._transports.shift()){debug("attempt",Transport.transportName);if(Transport.needBody){if(!global.document.body||typeof global.document.readyState!=="undefined"&&global.document.readyState!=="complete"&&global.document.readyState!=="interactive"){debug("waiting for body");this._transports.unshift(Transport);eventUtils.attachEvent("load",this._connect.bind(this));return}}var timeoutMs=this._rto*Transport.roundTrips||5e3;this._transportTimeoutId=setTimeout(this._transportTimeout.bind(this),timeoutMs);debug("using timeout",timeoutMs);var transportUrl=urlUtils.addPath(this._transUrl,"/"+this._server+"/"+this._generateSessionId());var options=this._transportOptions[Transport.transportName];debug("transport url",transportUrl);var transportObj=new Transport(transportUrl,this._transUrl,options);transportObj.on("message",this._transportMessage.bind(this));transportObj.once("close",this._transportClose.bind(this));transportObj.transportName=Transport.transportName;this._transport=transportObj;return}this._close(2e3,"All transports failed",false)};SockJS.prototype._transportTimeout=function(){debug("_transportTimeout");if(this.readyState===SockJS.CONNECTING){this._transportClose(2007,"Transport timed out")}};SockJS.prototype._transportMessage=function(msg){debug("_transportMessage",msg);var self=this,type=msg.slice(0,1),content=msg.slice(1),payload;switch(type){case"o":this._open();return;case"h":this.dispatchEvent(new Event("heartbeat"));debug("heartbeat",this.transport);return}if(content){try{payload=JSON3.parse(content)}catch(e){debug("bad json",content)}}if(typeof payload==="undefined"){debug("empty payload",content);return}switch(type){case"a":if(Array.isArray(payload)){payload.forEach(function(p){debug("message",self.transport,p);self.dispatchEvent(new TransportMessageEvent(p))})}break;case"m":debug("message",this.transport,payload);this.dispatchEvent(new TransportMessageEvent(payload));break;case"c":if(Array.isArray(payload)&&payload.length===2){this._close(payload[0],payload[1],true)}break}};SockJS.prototype._transportClose=function(code,reason){debug("_transportClose",this.transport,code,reason);if(this._transport){this._transport.removeAllListeners();this._transport=null;this.transport=null}if(!userSetCode(code)&&code!==2e3&&this.readyState===SockJS.CONNECTING){this._connect();return}this._close(code,reason)};SockJS.prototype._open=function(){debug("_open",this._transport.transportName,this.readyState);if(this.readyState===SockJS.CONNECTING){if(this._transportTimeoutId){clearTimeout(this._transportTimeoutId);this._transportTimeoutId=null}this.readyState=SockJS.OPEN;this.transport=this._transport.transportName;this.dispatchEvent(new Event("open"));debug("connected",this.transport)}else{this._close(1006,"Server lost session")}};SockJS.prototype._close=function(code,reason,wasClean){debug("_close",this.transport,code,reason,wasClean,this.readyState);var forceFail=false;if(this._ir){forceFail=true;this._ir.close();this._ir=null}if(this._transport){this._transport.close();this._transport=null;this.transport=null}if(this.readyState===SockJS.CLOSED){throw new Error("InvalidStateError: SockJS has already been closed")}this.readyState=SockJS.CLOSING;setTimeout(function(){this.readyState=SockJS.CLOSED;if(forceFail){this.dispatchEvent(new Event("error"))}var e=new CloseEvent("close");e.wasClean=wasClean||false;e.code=code||1e3;e.reason=reason;this.dispatchEvent(e);this.onmessage=this.onclose=this.onerror=null;debug("disconnected")}.bind(this),0)};SockJS.prototype.countRTO=function(rtt){if(rtt>100){return 4*rtt}return 300+rtt};module.exports=function(availableTransports){transports=transport(availableTransports);__webpack_require__(280)(SockJS,availableTransports);return SockJS}}).call(exports,__webpack_require__(4),__webpack_require__(3))},function(module,exports,__webpack_require__){"use strict";var ArrayPrototype=Array.prototype;var ObjectPrototype=Object.prototype;var FunctionPrototype=Function.prototype;var StringPrototype=String.prototype;var array_slice=ArrayPrototype.slice;var _toString=ObjectPrototype.toString;var isFunction=function(val){return ObjectPrototype.toString.call(val)==="[object Function]"};var isArray=function isArray(obj){return _toString.call(obj)==="[object Array]"
};var isString=function isString(obj){return _toString.call(obj)==="[object String]"};var supportsDescriptors=Object.defineProperty&&function(){try{Object.defineProperty({},"x",{});return true}catch(e){return false}}();var defineProperty;if(supportsDescriptors){defineProperty=function(object,name,method,forceAssign){if(!forceAssign&&name in object){return}Object.defineProperty(object,name,{configurable:true,enumerable:false,writable:true,value:method})}}else{defineProperty=function(object,name,method,forceAssign){if(!forceAssign&&name in object){return}object[name]=method}}var defineProperties=function(object,map,forceAssign){for(var name in map){if(ObjectPrototype.hasOwnProperty.call(map,name)){defineProperty(object,name,map[name],forceAssign)}}};var toObject=function(o){if(o==null){throw new TypeError("can't convert "+o+" to object")}return Object(o)};function toInteger(num){var n=+num;if(n!==n){n=0}else if(n!==0&&n!==1/0&&n!==-(1/0)){n=(n>0||-1)*Math.floor(Math.abs(n))}return n}function ToUint32(x){return x>>>0}function Empty(){}defineProperties(FunctionPrototype,{bind:function bind(that){var target=this;if(!isFunction(target)){throw new TypeError("Function.prototype.bind called on incompatible "+target)}var args=array_slice.call(arguments,1);var binder=function(){if(this instanceof bound){var result=target.apply(this,args.concat(array_slice.call(arguments)));if(Object(result)===result){return result}return this}else{return target.apply(that,args.concat(array_slice.call(arguments)))}};var boundLength=Math.max(0,target.length-args.length);var boundArgs=[];for(var i=0;i<boundLength;i++){boundArgs.push("$"+i)}var bound=Function("binder","return function ("+boundArgs.join(",")+"){ return binder.apply(this, arguments); }")(binder);if(target.prototype){Empty.prototype=target.prototype;bound.prototype=new Empty;Empty.prototype=null}return bound}});defineProperties(Array,{isArray:isArray});var boxedString=Object("a");var splitString=boxedString[0]!=="a"||!(0 in boxedString);var properlyBoxesContext=function properlyBoxed(method){var properlyBoxesNonStrict=true;var properlyBoxesStrict=true;if(method){method.call("foo",function(_,__,context){if(typeof context!=="object"){properlyBoxesNonStrict=false}});method.call([1],function(){"use strict";properlyBoxesStrict=typeof this==="string"},"x")}return!!method&&properlyBoxesNonStrict&&properlyBoxesStrict};defineProperties(ArrayPrototype,{forEach:function forEach(fun){var object=toObject(this),self=splitString&&isString(this)?this.split(""):object,thisp=arguments[1],i=-1,length=self.length>>>0;if(!isFunction(fun)){throw new TypeError}while(++i<length){if(i in self){fun.call(thisp,self[i],i,object)}}}},!properlyBoxesContext(ArrayPrototype.forEach));var hasFirefox2IndexOfBug=Array.prototype.indexOf&&[0,1].indexOf(1,2)!==-1;defineProperties(ArrayPrototype,{indexOf:function indexOf(sought){var self=splitString&&isString(this)?this.split(""):toObject(this),length=self.length>>>0;if(!length){return-1}var i=0;if(arguments.length>1){i=toInteger(arguments[1])}i=i>=0?i:Math.max(0,length+i);for(;i<length;i++){if(i in self&&self[i]===sought){return i}}return-1}},hasFirefox2IndexOfBug);var string_split=StringPrototype.split;if("ab".split(/(?:ab)*/).length!==2||".".split(/(.?)(.?)/).length!==4||"tesst".split(/(s)*/)[1]==="t"||"test".split(/(?:)/,-1).length!==4||"".split(/.?/).length||".".split(/()()/).length>1){(function(){var compliantExecNpcg=/()??/.exec("")[1]===void 0;StringPrototype.split=function(separator,limit){var string=this;if(separator===void 0&&limit===0){return[]}if(_toString.call(separator)!=="[object RegExp]"){return string_split.call(this,separator,limit)}var output=[],flags=(separator.ignoreCase?"i":"")+(separator.multiline?"m":"")+(separator.extended?"x":"")+(separator.sticky?"y":""),lastLastIndex=0,separator2,match,lastIndex,lastLength;separator=new RegExp(separator.source,flags+"g");string+="";if(!compliantExecNpcg){separator2=new RegExp("^"+separator.source+"$(?!\\s)",flags)}limit=limit===void 0?-1>>>0:ToUint32(limit);while(match=separator.exec(string)){lastIndex=match.index+match[0].length;if(lastIndex>lastLastIndex){output.push(string.slice(lastLastIndex,match.index));if(!compliantExecNpcg&&match.length>1){match[0].replace(separator2,function(){for(var i=1;i<arguments.length-2;i++){if(arguments[i]===void 0){match[i]=void 0}}})}if(match.length>1&&match.index<string.length){ArrayPrototype.push.apply(output,match.slice(1))}lastLength=match[0].length;lastLastIndex=lastIndex;if(output.length>=limit){break}}if(separator.lastIndex===match.index){separator.lastIndex++}}if(lastLastIndex===string.length){if(lastLength||!separator.test("")){output.push("")}}else{output.push(string.slice(lastLastIndex))}return output.length>limit?output.slice(0,limit):output}})()}else if("0".split(void 0,0).length){StringPrototype.split=function split(separator,limit){if(separator===void 0&&limit===0){return[]}return string_split.call(this,separator,limit)}}var string_substr=StringPrototype.substr;var hasNegativeSubstrBug="".substr&&"0b".substr(-1)!=="b";defineProperties(StringPrototype,{substr:function substr(start,length){return string_substr.call(this,start<0?(start=this.length+start)<0?0:start:start,length)}},hasNegativeSubstrBug)},function(module,exports,__webpack_require__){"use strict";module.exports=[__webpack_require__(295),__webpack_require__(297),__webpack_require__(74),__webpack_require__(70),__webpack_require__(27)(__webpack_require__(70)),__webpack_require__(71),__webpack_require__(27)(__webpack_require__(71)),__webpack_require__(75),__webpack_require__(296),__webpack_require__(27)(__webpack_require__(75)),__webpack_require__(287)]},function(module,exports,__webpack_require__){"use strict";(function(global){var Driver=global.WebSocket||global.MozWebSocket;if(Driver){module.exports=function WebSocketBrowserDriver(url){return new Driver(url)}}else{module.exports=undefined}}).call(exports,__webpack_require__(3))},function(module,exports,__webpack_require__){"use strict";(function(global){var inherits=__webpack_require__(2),SenderReceiver=__webpack_require__(73),JsonpReceiver=__webpack_require__(292),jsonpSender=__webpack_require__(293);function JsonPTransport(transUrl){if(!JsonPTransport.enabled()){throw new Error("Transport created when disabled")}SenderReceiver.call(this,transUrl,"/jsonp",jsonpSender,JsonpReceiver)}inherits(JsonPTransport,SenderReceiver);JsonPTransport.enabled=function(){return!!global.document};JsonPTransport.transportName="jsonp-polling";JsonPTransport.roundTrips=1;JsonPTransport.needBody=true;module.exports=JsonPTransport}).call(exports,__webpack_require__(3))},function(module,exports,__webpack_require__){"use strict";(function(process){var inherits=__webpack_require__(2),EventEmitter=__webpack_require__(6).EventEmitter;var debug=function(){};if(process.env.NODE_ENV!=="production"){debug=__webpack_require__(5)("sockjs-client:buffered-sender")}function BufferedSender(url,sender){debug(url);EventEmitter.call(this);this.sendBuffer=[];this.sender=sender;this.url=url}inherits(BufferedSender,EventEmitter);BufferedSender.prototype.send=function(message){debug("send",message);this.sendBuffer.push(message);if(!this.sendStop){this.sendSchedule()}};BufferedSender.prototype.sendScheduleWait=function(){debug("sendScheduleWait");var self=this;var tref;this.sendStop=function(){debug("sendStop");self.sendStop=null;clearTimeout(tref)};tref=setTimeout(function(){debug("timeout");self.sendStop=null;self.sendSchedule()},25)};BufferedSender.prototype.sendSchedule=function(){debug("sendSchedule",this.sendBuffer.length);var self=this;if(this.sendBuffer.length>0){var payload="["+this.sendBuffer.join(",")+"]";this.sendStop=this.sender(this.url,payload,function(err){self.sendStop=null;if(err){debug("error",err);self.emit("close",err.code||1006,"Sending error: "+err);self.close()}else{self.sendScheduleWait()}});this.sendBuffer=[]}};BufferedSender.prototype._cleanup=function(){debug("_cleanup");this.removeAllListeners()};BufferedSender.prototype.close=function(){debug("close");this._cleanup();if(this.sendStop){this.sendStop();this.sendStop=null}};module.exports=BufferedSender}).call(exports,__webpack_require__(4))},function(module,exports,__webpack_require__){"use strict";(function(process){var inherits=__webpack_require__(2),EventEmitter=__webpack_require__(6).EventEmitter;var debug=function(){};if(process.env.NODE_ENV!=="production"){debug=__webpack_require__(5)("sockjs-client:polling")}function Polling(Receiver,receiveUrl,AjaxObject){debug(receiveUrl);EventEmitter.call(this);this.Receiver=Receiver;this.receiveUrl=receiveUrl;this.AjaxObject=AjaxObject;this._scheduleReceiver()}inherits(Polling,EventEmitter);Polling.prototype._scheduleReceiver=function(){debug("_scheduleReceiver");var self=this;var poll=this.poll=new this.Receiver(this.receiveUrl,this.AjaxObject);poll.on("message",function(msg){debug("message",msg);self.emit("message",msg)});poll.once("close",function(code,reason){debug("close",code,reason,self.pollIsClosing);self.poll=poll=null;if(!self.pollIsClosing){if(reason==="network"){self._scheduleReceiver()}else{self.emit("close",code||1006,reason);self.removeAllListeners()}}})};Polling.prototype.abort=function(){debug("abort");this.removeAllListeners();this.pollIsClosing=true;if(this.poll){this.poll.abort()}};module.exports=Polling}).call(exports,__webpack_require__(4))},function(module,exports,__webpack_require__){"use strict";(function(process){var inherits=__webpack_require__(2),EventEmitter=__webpack_require__(6).EventEmitter,EventSourceDriver=__webpack_require__(69);var debug=function(){};if(process.env.NODE_ENV!=="production"){debug=__webpack_require__(5)("sockjs-client:receiver:eventsource")}function EventSourceReceiver(url){debug(url);EventEmitter.call(this);var self=this;var es=this.es=new EventSourceDriver(url);es.onmessage=function(e){debug("message",e.data);self.emit("message",decodeURI(e.data))};es.onerror=function(e){debug("error",es.readyState,e);var reason=es.readyState!==2?"network":"permanent";self._cleanup();self._close(reason)}}inherits(EventSourceReceiver,EventEmitter);EventSourceReceiver.prototype.abort=function(){debug("abort");this._cleanup();this._close("user")};EventSourceReceiver.prototype._cleanup=function(){debug("cleanup");var es=this.es;if(es){es.onmessage=es.onerror=null;es.close();this.es=null}};EventSourceReceiver.prototype._close=function(reason){debug("close",reason);var self=this;setTimeout(function(){self.emit("close",null,reason);self.removeAllListeners()},200)};module.exports=EventSourceReceiver}).call(exports,__webpack_require__(4))},function(module,exports,__webpack_require__){"use strict";(function(process,global){var inherits=__webpack_require__(2),iframeUtils=__webpack_require__(19),urlUtils=__webpack_require__(7),EventEmitter=__webpack_require__(6).EventEmitter,random=__webpack_require__(15);var debug=function(){};if(process.env.NODE_ENV!=="production"){debug=__webpack_require__(5)("sockjs-client:receiver:htmlfile")}function HtmlfileReceiver(url){debug(url);EventEmitter.call(this);var self=this;iframeUtils.polluteGlobalNamespace();this.id="a"+random.string(6);url=urlUtils.addQuery(url,"c="+decodeURIComponent(iframeUtils.WPrefix+"."+this.id));debug("using htmlfile",HtmlfileReceiver.htmlfileEnabled);var constructFunc=HtmlfileReceiver.htmlfileEnabled?iframeUtils.createHtmlfile:iframeUtils.createIframe;global[iframeUtils.WPrefix][this.id]={start:function(){debug("start");self.iframeObj.loaded()},message:function(data){debug("message",data);self.emit("message",data)},stop:function(){debug("stop");self._cleanup();self._close("network")}};this.iframeObj=constructFunc(url,function(){debug("callback");self._cleanup();self._close("permanent")})}inherits(HtmlfileReceiver,EventEmitter);HtmlfileReceiver.prototype.abort=function(){debug("abort");this._cleanup();this._close("user")};HtmlfileReceiver.prototype._cleanup=function(){debug("_cleanup");if(this.iframeObj){this.iframeObj.cleanup();this.iframeObj=null}delete global[iframeUtils.WPrefix][this.id]};HtmlfileReceiver.prototype._close=function(reason){debug("_close",reason);this.emit("close",null,reason);this.removeAllListeners()};HtmlfileReceiver.htmlfileEnabled=false;var axo=["Active"].concat("Object").join("X");if(axo in global){try{HtmlfileReceiver.htmlfileEnabled=!!new global[axo]("htmlfile")}catch(x){}}HtmlfileReceiver.enabled=HtmlfileReceiver.htmlfileEnabled||iframeUtils.iframeEnabled;module.exports=HtmlfileReceiver}).call(exports,__webpack_require__(4),__webpack_require__(3))},function(module,exports,__webpack_require__){"use strict";(function(process,global){var utils=__webpack_require__(19),random=__webpack_require__(15),browser=__webpack_require__(18),urlUtils=__webpack_require__(7),inherits=__webpack_require__(2),EventEmitter=__webpack_require__(6).EventEmitter;var debug=function(){};if(process.env.NODE_ENV!=="production"){debug=__webpack_require__(5)("sockjs-client:receiver:jsonp")}function JsonpReceiver(url){debug(url);var self=this;EventEmitter.call(this);utils.polluteGlobalNamespace();this.id="a"+random.string(6);var urlWithId=urlUtils.addQuery(url,"c="+encodeURIComponent(utils.WPrefix+"."+this.id));global[utils.WPrefix][this.id]=this._callback.bind(this);this._createScript(urlWithId);this.timeoutId=setTimeout(function(){debug("timeout");self._abort(new Error("JSONP script loaded abnormally (timeout)"))},JsonpReceiver.timeout)}inherits(JsonpReceiver,EventEmitter);JsonpReceiver.prototype.abort=function(){debug("abort");if(global[utils.WPrefix][this.id]){var err=new Error("JSONP user aborted read");err.code=1e3;this._abort(err)}};JsonpReceiver.timeout=35e3;JsonpReceiver.scriptErrorTimeout=1e3;JsonpReceiver.prototype._callback=function(data){debug("_callback",data);this._cleanup();if(this.aborting){return}if(data){debug("message",data);this.emit("message",data)}this.emit("close",null,"network");this.removeAllListeners()};JsonpReceiver.prototype._abort=function(err){debug("_abort",err);this._cleanup();this.aborting=true;this.emit("close",err.code,err.message);this.removeAllListeners()};JsonpReceiver.prototype._cleanup=function(){debug("_cleanup");clearTimeout(this.timeoutId);if(this.script2){this.script2.parentNode.removeChild(this.script2);this.script2=null}if(this.script){var script=this.script;script.parentNode.removeChild(script);script.onreadystatechange=script.onerror=script.onload=script.onclick=null;this.script=null}delete global[utils.WPrefix][this.id]};JsonpReceiver.prototype._scriptError=function(){debug("_scriptError");var self=this;if(this.errorTimer){return}this.errorTimer=setTimeout(function(){if(!self.loadedOkay){self._abort(new Error("JSONP script loaded abnormally (onerror)"))}},JsonpReceiver.scriptErrorTimeout)};JsonpReceiver.prototype._createScript=function(url){debug("_createScript",url);var self=this;var script=this.script=global.document.createElement("script");var script2;script.id="a"+random.string(8);script.src=url;script.type="text/javascript";script.charset="UTF-8";script.onerror=this._scriptError.bind(this);script.onload=function(){debug("onload");self._abort(new Error("JSONP script loaded abnormally (onload)"))};script.onreadystatechange=function(){debug("onreadystatechange",script.readyState);if(/loaded|closed/.test(script.readyState)){if(script&&script.htmlFor&&script.onclick){self.loadedOkay=true;try{script.onclick()}catch(x){}}if(script){self._abort(new Error("JSONP script loaded abnormally (onreadystatechange)"))}}};if(typeof script.async==="undefined"&&global.document.attachEvent){if(!browser.isOpera()){try{script.htmlFor=script.id;script.event="onclick"}catch(x){}script.async=true}else{script2=this.script2=global.document.createElement("script");script2.text="try{var a = document.getElementById('"+script.id+"'); if(a)a.onerror();}catch(x){};";script.async=script2.async=false}}if(typeof script.async!=="undefined"){script.async=true}var head=global.document.getElementsByTagName("head")[0];head.insertBefore(script,head.firstChild);if(script2){head.insertBefore(script2,head.firstChild)}};module.exports=JsonpReceiver}).call(exports,__webpack_require__(4),__webpack_require__(3))},function(module,exports,__webpack_require__){"use strict";(function(process,global){var random=__webpack_require__(15),urlUtils=__webpack_require__(7);var debug=function(){};if(process.env.NODE_ENV!=="production"){debug=__webpack_require__(5)("sockjs-client:sender:jsonp")}var form,area;function createIframe(id){debug("createIframe",id);try{return global.document.createElement('<iframe name="'+id+'">')}catch(x){var iframe=global.document.createElement("iframe");iframe.name=id;return iframe}}function createForm(){debug("createForm");form=global.document.createElement("form");form.style.display="none";form.style.position="absolute";form.method="POST";form.enctype="application/x-www-form-urlencoded";form.acceptCharset="UTF-8";area=global.document.createElement("textarea");area.name="d";form.appendChild(area);global.document.body.appendChild(form)}module.exports=function(url,payload,callback){debug(url,payload);if(!form){createForm()}var id="a"+random.string(8);form.target=id;form.action=urlUtils.addQuery(urlUtils.addPath(url,"/jsonp_send"),"i="+id);var iframe=createIframe(id);iframe.id=id;iframe.style.display="none";form.appendChild(iframe);try{area.value=payload}catch(e){}form.submit();var completed=function(err){debug("completed",id,err);if(!iframe.onerror){return}iframe.onreadystatechange=iframe.onerror=iframe.onload=null;setTimeout(function(){debug("cleaning up",id);iframe.parentNode.removeChild(iframe);iframe=null},500);area.value="";callback(err)};iframe.onerror=function(){debug("onerror",id);completed()};iframe.onload=function(){debug("onload",id);completed()};iframe.onreadystatechange=function(e){debug("onreadystatechange",id,iframe.readyState,e);if(iframe.readyState==="complete"){completed()}};return function(){debug("aborted",id);completed(new Error("Aborted"))}}}).call(exports,__webpack_require__(4),__webpack_require__(3))},function(module,exports,__webpack_require__){"use strict";var EventEmitter=__webpack_require__(6).EventEmitter,inherits=__webpack_require__(2);function XHRFake(){var self=this;EventEmitter.call(this);this.to=setTimeout(function(){self.emit("finish",200,"{}")},XHRFake.timeout)}inherits(XHRFake,EventEmitter);XHRFake.prototype.close=function(){clearTimeout(this.to)};XHRFake.timeout=2e3;module.exports=XHRFake},function(module,exports,__webpack_require__){"use strict";(function(process){var utils=__webpack_require__(11),urlUtils=__webpack_require__(7),inherits=__webpack_require__(2),EventEmitter=__webpack_require__(6).EventEmitter,WebsocketDriver=__webpack_require__(286);var debug=function(){};if(process.env.NODE_ENV!=="production"){debug=__webpack_require__(5)("sockjs-client:websocket")}function WebSocketTransport(transUrl,ignore,options){if(!WebSocketTransport.enabled()){throw new Error("Transport created when disabled")}EventEmitter.call(this);debug("constructor",transUrl);var self=this;var url=urlUtils.addPath(transUrl,"/websocket");if(url.slice(0,5)==="https"){url="wss"+url.slice(5)}else{url="ws"+url.slice(4)}this.url=url;this.ws=new WebsocketDriver(this.url,[],options);this.ws.onmessage=function(e){debug("message event",e.data);self.emit("message",e.data)};this.unloadRef=utils.unloadAdd(function(){debug("unload");self.ws.close()});this.ws.onclose=function(e){debug("close event",e.code,e.reason);self.emit("close",e.code,e.reason);self._cleanup()};this.ws.onerror=function(e){debug("error event",e);self.emit("close",1006,"WebSocket connection broken");self._cleanup()}}inherits(WebSocketTransport,EventEmitter);WebSocketTransport.prototype.send=function(data){var msg="["+data+"]";debug("send",msg);this.ws.send(msg)};WebSocketTransport.prototype.close=function(){debug("close");var ws=this.ws;this._cleanup();if(ws){ws.close()}};WebSocketTransport.prototype._cleanup=function(){debug("_cleanup");var ws=this.ws;if(ws){ws.onmessage=ws.onclose=ws.onerror=null}utils.unloadDel(this.unloadRef);this.unloadRef=this.ws=null;this.removeAllListeners()};WebSocketTransport.enabled=function(){debug("enabled");return!!WebsocketDriver};WebSocketTransport.transportName="websocket";WebSocketTransport.roundTrips=2;module.exports=WebSocketTransport}).call(exports,__webpack_require__(4))},function(module,exports,__webpack_require__){"use strict";var inherits=__webpack_require__(2),AjaxBasedTransport=__webpack_require__(14),XdrStreamingTransport=__webpack_require__(74),XhrReceiver=__webpack_require__(21),XDRObject=__webpack_require__(28);function XdrPollingTransport(transUrl){if(!XDRObject.enabled){throw new Error("Transport created when disabled")}AjaxBasedTransport.call(this,transUrl,"/xhr",XhrReceiver,XDRObject)}inherits(XdrPollingTransport,AjaxBasedTransport);XdrPollingTransport.enabled=XdrStreamingTransport.enabled;XdrPollingTransport.transportName="xdr-polling";XdrPollingTransport.roundTrips=2;module.exports=XdrPollingTransport},function(module,exports,__webpack_require__){"use strict";(function(global){var inherits=__webpack_require__(2),AjaxBasedTransport=__webpack_require__(14),XhrReceiver=__webpack_require__(21),XHRCorsObject=__webpack_require__(22),XHRLocalObject=__webpack_require__(17),browser=__webpack_require__(18);function XhrStreamingTransport(transUrl){if(!XHRLocalObject.enabled&&!XHRCorsObject.enabled){throw new Error("Transport created when disabled")}AjaxBasedTransport.call(this,transUrl,"/xhr_streaming",XhrReceiver,XHRCorsObject)}inherits(XhrStreamingTransport,AjaxBasedTransport);XhrStreamingTransport.enabled=function(info){if(info.nullOrigin){return false}if(browser.isOpera()){return false}return XHRCorsObject.enabled};XhrStreamingTransport.transportName="xhr-streaming";XhrStreamingTransport.roundTrips=2;XhrStreamingTransport.needBody=!!global.document;module.exports=XhrStreamingTransport}).call(exports,__webpack_require__(3))},function(module,exports,__webpack_require__){"use strict";(function(global){if(global.crypto&&global.crypto.getRandomValues){module.exports.randomBytes=function(length){var bytes=new Uint8Array(length);global.crypto.getRandomValues(bytes);return bytes}}else{module.exports.randomBytes=function(length){var bytes=new Array(length);for(var i=0;i<length;i++){bytes[i]=Math.floor(Math.random()*256)}return bytes}}}).call(exports,__webpack_require__(3))},function(module,exports,__webpack_require__){"use strict";var JSON3=__webpack_require__(9);var extraEscapable=/[\x00-\x1f\ud800-\udfff\ufffe\uffff\u0300-\u0333\u033d-\u0346\u034a-\u034c\u0350-\u0352\u0357-\u0358\u035c-\u0362\u0374\u037e\u0387\u0591-\u05af\u05c4\u0610-\u0617\u0653-\u0654\u0657-\u065b\u065d-\u065e\u06df-\u06e2\u06eb-\u06ec\u0730\u0732-\u0733\u0735-\u0736\u073a\u073d\u073f-\u0741\u0743\u0745\u0747\u07eb-\u07f1\u0951\u0958-\u095f\u09dc-\u09dd\u09df\u0a33\u0a36\u0a59-\u0a5b\u0a5e\u0b5c-\u0b5d\u0e38-\u0e39\u0f43\u0f4d\u0f52\u0f57\u0f5c\u0f69\u0f72-\u0f76\u0f78\u0f80-\u0f83\u0f93\u0f9d\u0fa2\u0fa7\u0fac\u0fb9\u1939-\u193a\u1a17\u1b6b\u1cda-\u1cdb\u1dc0-\u1dcf\u1dfc\u1dfe\u1f71\u1f73\u1f75\u1f77\u1f79\u1f7b\u1f7d\u1fbb\u1fbe\u1fc9\u1fcb\u1fd3\u1fdb\u1fe3\u1feb\u1fee-\u1fef\u1ff9\u1ffb\u1ffd\u2000-\u2001\u20d0-\u20d1\u20d4-\u20d7\u20e7-\u20e9\u2126\u212a-\u212b\u2329-\u232a\u2adc\u302b-\u302c\uaab2-\uaab3\uf900-\ufa0d\ufa10\ufa12\ufa15-\ufa1e\ufa20\ufa22\ufa25-\ufa26\ufa2a-\ufa2d\ufa30-\ufa6d\ufa70-\ufad9\ufb1d\ufb1f\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufb4e\ufff0-\uffff]/g,extraLookup;var unrollLookup=function(escapable){var i;var unrolled={};var c=[];for(i=0;i<65536;i++){c.push(String.fromCharCode(i))}escapable.lastIndex=0;c.join("").replace(escapable,function(a){unrolled[a]="\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4);return""});escapable.lastIndex=0;return unrolled};module.exports={quote:function(string){var quoted=JSON3.stringify(string);extraEscapable.lastIndex=0;if(!extraEscapable.test(quoted)){return quoted}if(!extraLookup){extraLookup=unrollLookup(extraEscapable)}return quoted.replace(extraEscapable,function(a){return extraLookup[a]})}}},function(module,exports,__webpack_require__){"use strict";(function(global){var logObject={};["log","debug","warn"].forEach(function(level){var levelExists;try{levelExists=global.console&&global.console[level]&&global.console[level].apply}catch(e){}logObject[level]=levelExists?function(){return global.console[level].apply(global.console,arguments)}:level==="log"?function(){}:logObject.log});module.exports=logObject}).call(exports,__webpack_require__(3))},function(module,exports,__webpack_require__){"use strict";(function(process){var debug=function(){};if(process.env.NODE_ENV!=="production"){debug=__webpack_require__(5)("sockjs-client:utils:transport")}module.exports=function(availableTransports){return{filterToEnabled:function(transportsWhitelist,info){var transports={main:[],facade:[]};if(!transportsWhitelist){transportsWhitelist=[]}else if(typeof transportsWhitelist==="string"){transportsWhitelist=[transportsWhitelist]}availableTransports.forEach(function(trans){if(!trans){return}if(trans.transportName==="websocket"&&info.websocket===false){debug("disabled from server","websocket");return}if(transportsWhitelist.length&&transportsWhitelist.indexOf(trans.transportName)===-1){debug("not in whitelist",trans.transportName);return}if(trans.enabled(info)){debug("enabled",trans.transportName);transports.main.push(trans);if(trans.facadeTransport){transports.facade.push(trans.facadeTransport)}}else{debug("disabled",trans.transportName)}});return transports}}}}).call(exports,__webpack_require__(4))},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;(function(factory){"use strict";if(true){!(__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__(30)],__WEBPACK_AMD_DEFINE_FACTORY__=factory,__WEBPACK_AMD_DEFINE_RESULT__=typeof __WEBPACK_AMD_DEFINE_FACTORY__==="function"?__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__):__WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_RESULT__!==undefined&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))}else if(typeof exports=="object"&&typeof module=="object"){module.exports=factory(require("jquery"))}else{factory(jQuery)}})(function($,undefined){"use strict";var defaultOpts={beforeShow:noop,move:noop,change:noop,show:noop,hide:noop,color:false,flat:false,showInput:false,allowEmpty:false,showButtons:true,clickoutFiresChange:true,showInitial:false,showPalette:false,showPaletteOnly:false,hideAfterPaletteSelect:false,togglePaletteOnly:false,showSelectionPalette:true,localStorageKey:false,appendTo:"body",maxSelectionSize:7,cancelText:"cancel",chooseText:"choose",togglePaletteMoreText:"more",togglePaletteLessText:"less",clearText:"Clear Color Selection",noColorSelectedText:"No Color Selected",preferredFormat:false,className:"",containerClassName:"",replacerClassName:"",showAlpha:false,theme:"sp-light",palette:[["#ffffff","#000000","#ff0000","#ff8000","#ffff00","#008000","#0000ff","#4b0082","#9400d3"]],selectionPalette:[],disabled:false,offset:null},spectrums=[],IE=!!/msie/i.exec(window.navigator.userAgent),rgbaSupport=function(){function contains(str,substr){return!!~(""+str).indexOf(substr)}var elem=document.createElement("div");var style=elem.style;style.cssText="background-color:rgba(0,0,0,.5)";return contains(style.backgroundColor,"rgba")||contains(style.backgroundColor,"hsla")}(),replaceInput=["<div class='sp-replacer'>","<div class='sp-preview'><div class='sp-preview-inner'></div></div>","<div class='sp-dd'>&#9660;</div>","</div>"].join(""),markup=function(){var gradientFix="";if(IE){for(var i=1;i<=6;i++){gradientFix+="<div class='sp-"+i+"'></div>"}}return["<div class='sp-container sp-hidden'>","<div class='sp-palette-container'>","<div class='sp-palette sp-thumb sp-cf'></div>","<div class='sp-palette-button-container sp-cf'>","<button type='button' class='sp-palette-toggle'></button>","</div>","</div>","<div class='sp-picker-container'>","<div class='sp-top sp-cf'>","<div class='sp-fill'></div>","<div class='sp-top-inner'>","<div class='sp-color'>","<div class='sp-sat'>","<div class='sp-val'>","<div class='sp-dragger'></div>","</div>","</div>","</div>","<div class='sp-clear sp-clear-display'>","</div>","<div class='sp-hue'>","<div class='sp-slider'></div>",gradientFix,"</div>","</div>","<div class='sp-alpha'><div class='sp-alpha-inner'><div class='sp-alpha-handle'></div></div></div>","</div>","<div class='sp-input-container sp-cf'>","<input class='sp-input' type='text' spellcheck='false'  />","</div>","<div class='sp-initial sp-thumb sp-cf'></div>","<div class='sp-button-container sp-cf'>","<a class='sp-cancel' href='#'></a>","<button type='button' class='sp-choose'></button>","</div>","</div>","</div>"].join("")}();function paletteTemplate(p,color,className,opts){var html=[];for(var i=0;i<p.length;i++){var current=p[i];if(current){var tiny=tinycolor(current);var c=tiny.toHsl().l<.5?"sp-thumb-el sp-thumb-dark":"sp-thumb-el sp-thumb-light";c+=tinycolor.equals(color,current)?" sp-thumb-active":"";var formattedString=tiny.toString(opts.preferredFormat||"rgb");var swatchStyle=rgbaSupport?"background-color:"+tiny.toRgbString():"filter:"+tiny.toFilter();html.push('<span title="'+formattedString+'" data-color="'+tiny.toRgbString()+'" class="'+c+'"><span class="sp-thumb-inner" style="'+swatchStyle+';" /></span>')}else{var cls="sp-clear-display";html.push($("<div />").append($('<span data-color="" style="background-color:transparent;" class="'+cls+'"></span>').attr("title",opts.noColorSelectedText)).html())}}return"<div class='sp-cf "+className+"'>"+html.join("")+"</div>"}function hideAll(){for(var i=0;i<spectrums.length;i++){if(spectrums[i]){spectrums[i].hide()}}}function instanceOptions(o,callbackContext){var opts=$.extend({},defaultOpts,o);opts.callbacks={move:bind(opts.move,callbackContext),change:bind(opts.change,callbackContext),show:bind(opts.show,callbackContext),hide:bind(opts.hide,callbackContext),beforeShow:bind(opts.beforeShow,callbackContext)};return opts}function spectrum(element,o){var opts=instanceOptions(o,element),flat=opts.flat,showSelectionPalette=opts.showSelectionPalette,localStorageKey=opts.localStorageKey,theme=opts.theme,callbacks=opts.callbacks,resize=throttle(reflow,10),visible=false,isDragging=false,dragWidth=0,dragHeight=0,dragHelperHeight=0,slideHeight=0,slideWidth=0,alphaWidth=0,alphaSlideHelperWidth=0,slideHelperHeight=0,currentHue=0,currentSaturation=0,currentValue=0,currentAlpha=1,palette=[],paletteArray=[],paletteLookup={},selectionPalette=opts.selectionPalette.slice(0),maxSelectionSize=opts.maxSelectionSize,draggingClass="sp-dragging",shiftMovementDirection=null;var doc=element.ownerDocument,body=doc.body,boundElement=$(element),disabled=false,container=$(markup,doc).addClass(theme),pickerContainer=container.find(".sp-picker-container"),dragger=container.find(".sp-color"),dragHelper=container.find(".sp-dragger"),slider=container.find(".sp-hue"),slideHelper=container.find(".sp-slider"),alphaSliderInner=container.find(".sp-alpha-inner"),alphaSlider=container.find(".sp-alpha"),alphaSlideHelper=container.find(".sp-alpha-handle"),textInput=container.find(".sp-input"),paletteContainer=container.find(".sp-palette"),initialColorContainer=container.find(".sp-initial"),cancelButton=container.find(".sp-cancel"),clearButton=container.find(".sp-clear"),chooseButton=container.find(".sp-choose"),toggleButton=container.find(".sp-palette-toggle"),isInput=boundElement.is("input"),isInputTypeColor=isInput&&boundElement.attr("type")==="color"&&inputTypeColorSupport(),shouldReplace=isInput&&!flat,replacer=shouldReplace?$(replaceInput).addClass(theme).addClass(opts.className).addClass(opts.replacerClassName):$([]),offsetElement=shouldReplace?replacer:boundElement,previewElement=replacer.find(".sp-preview-inner"),initialColor=opts.color||isInput&&boundElement.val(),colorOnShow=false,currentPreferredFormat=opts.preferredFormat,clickoutFiresChange=!opts.showButtons||opts.clickoutFiresChange,isEmpty=!initialColor,allowEmpty=opts.allowEmpty&&!isInputTypeColor;
function applyOptions(){if(opts.showPaletteOnly){opts.showPalette=true}toggleButton.text(opts.showPaletteOnly?opts.togglePaletteMoreText:opts.togglePaletteLessText);if(opts.palette){palette=opts.palette.slice(0);paletteArray=$.isArray(palette[0])?palette:[palette];paletteLookup={};for(var i=0;i<paletteArray.length;i++){for(var j=0;j<paletteArray[i].length;j++){var rgb=tinycolor(paletteArray[i][j]).toRgbString();paletteLookup[rgb]=true}}}container.toggleClass("sp-flat",flat);container.toggleClass("sp-input-disabled",!opts.showInput);container.toggleClass("sp-alpha-enabled",opts.showAlpha);container.toggleClass("sp-clear-enabled",allowEmpty);container.toggleClass("sp-buttons-disabled",!opts.showButtons);container.toggleClass("sp-palette-buttons-disabled",!opts.togglePaletteOnly);container.toggleClass("sp-palette-disabled",!opts.showPalette);container.toggleClass("sp-palette-only",opts.showPaletteOnly);container.toggleClass("sp-initial-disabled",!opts.showInitial);container.addClass(opts.className).addClass(opts.containerClassName);reflow()}function initialize(){if(IE){container.find("*:not(input)").attr("unselectable","on")}applyOptions();if(shouldReplace){boundElement.after(replacer).hide()}if(!allowEmpty){clearButton.hide()}if(flat){boundElement.after(container).hide()}else{var appendTo=opts.appendTo==="parent"?boundElement.parent():$(opts.appendTo);if(appendTo.length!==1){appendTo=$("body")}appendTo.append(container)}updateSelectionPaletteFromStorage();offsetElement.bind("click.spectrum touchstart.spectrum",function(e){if(!disabled){toggle()}e.stopPropagation();if(!$(e.target).is("input")){e.preventDefault()}});if(boundElement.is(":disabled")||opts.disabled===true){disable()}container.click(stopPropagation);textInput.change(setFromTextInput);textInput.bind("paste",function(){setTimeout(setFromTextInput,1)});textInput.keydown(function(e){if(e.keyCode==13){setFromTextInput()}});cancelButton.text(opts.cancelText);cancelButton.bind("click.spectrum",function(e){e.stopPropagation();e.preventDefault();revert();hide()});clearButton.attr("title",opts.clearText);clearButton.bind("click.spectrum",function(e){e.stopPropagation();e.preventDefault();isEmpty=true;move();if(flat){updateOriginalInput(true)}});chooseButton.text(opts.chooseText);chooseButton.bind("click.spectrum",function(e){e.stopPropagation();e.preventDefault();if(IE&&textInput.is(":focus")){textInput.trigger("change")}if(isValid()){updateOriginalInput(true);hide()}});toggleButton.text(opts.showPaletteOnly?opts.togglePaletteMoreText:opts.togglePaletteLessText);toggleButton.bind("click.spectrum",function(e){e.stopPropagation();e.preventDefault();opts.showPaletteOnly=!opts.showPaletteOnly;if(!opts.showPaletteOnly&&!flat){container.css("left","-="+(pickerContainer.outerWidth(true)+5))}applyOptions()});draggable(alphaSlider,function(dragX,dragY,e){currentAlpha=dragX/alphaWidth;isEmpty=false;if(e.shiftKey){currentAlpha=Math.round(currentAlpha*10)/10}move()},dragStart,dragStop);draggable(slider,function(dragX,dragY){currentHue=parseFloat(dragY/slideHeight);isEmpty=false;if(!opts.showAlpha){currentAlpha=1}move()},dragStart,dragStop);draggable(dragger,function(dragX,dragY,e){if(!e.shiftKey){shiftMovementDirection=null}else if(!shiftMovementDirection){var oldDragX=currentSaturation*dragWidth;var oldDragY=dragHeight-currentValue*dragHeight;var furtherFromX=Math.abs(dragX-oldDragX)>Math.abs(dragY-oldDragY);shiftMovementDirection=furtherFromX?"x":"y"}var setSaturation=!shiftMovementDirection||shiftMovementDirection==="x";var setValue=!shiftMovementDirection||shiftMovementDirection==="y";if(setSaturation){currentSaturation=parseFloat(dragX/dragWidth)}if(setValue){currentValue=parseFloat((dragHeight-dragY)/dragHeight)}isEmpty=false;if(!opts.showAlpha){currentAlpha=1}move()},dragStart,dragStop);if(!!initialColor){set(initialColor);updateUI();currentPreferredFormat=opts.preferredFormat||tinycolor(initialColor).format;addColorToSelectionPalette(initialColor)}else{updateUI()}if(flat){show()}function paletteElementClick(e){if(e.data&&e.data.ignore){set($(e.target).closest(".sp-thumb-el").data("color"));move()}else{set($(e.target).closest(".sp-thumb-el").data("color"));move();updateOriginalInput(true);if(opts.hideAfterPaletteSelect){hide()}}return false}var paletteEvent=IE?"mousedown.spectrum":"click.spectrum touchstart.spectrum";paletteContainer.delegate(".sp-thumb-el",paletteEvent,paletteElementClick);initialColorContainer.delegate(".sp-thumb-el:nth-child(1)",paletteEvent,{ignore:true},paletteElementClick)}function updateSelectionPaletteFromStorage(){if(localStorageKey&&window.localStorage){try{var oldPalette=window.localStorage[localStorageKey].split(",#");if(oldPalette.length>1){delete window.localStorage[localStorageKey];$.each(oldPalette,function(i,c){addColorToSelectionPalette(c)})}}catch(e){}try{selectionPalette=window.localStorage[localStorageKey].split(";")}catch(e){}}}function addColorToSelectionPalette(color){if(showSelectionPalette){var rgb=tinycolor(color).toRgbString();if(!paletteLookup[rgb]&&$.inArray(rgb,selectionPalette)===-1){selectionPalette.push(rgb);while(selectionPalette.length>maxSelectionSize){selectionPalette.shift()}}if(localStorageKey&&window.localStorage){try{window.localStorage[localStorageKey]=selectionPalette.join(";")}catch(e){}}}}function getUniqueSelectionPalette(){var unique=[];if(opts.showPalette){for(var i=0;i<selectionPalette.length;i++){var rgb=tinycolor(selectionPalette[i]).toRgbString();if(!paletteLookup[rgb]){unique.push(selectionPalette[i])}}}return unique.reverse().slice(0,opts.maxSelectionSize)}function drawPalette(){var currentColor=get();var html=$.map(paletteArray,function(palette,i){return paletteTemplate(palette,currentColor,"sp-palette-row sp-palette-row-"+i,opts)});updateSelectionPaletteFromStorage();if(selectionPalette){html.push(paletteTemplate(getUniqueSelectionPalette(),currentColor,"sp-palette-row sp-palette-row-selection",opts))}paletteContainer.html(html.join(""))}function drawInitial(){if(opts.showInitial){var initial=colorOnShow;var current=get();initialColorContainer.html(paletteTemplate([initial,current],current,"sp-palette-row-initial",opts))}}function dragStart(){if(dragHeight<=0||dragWidth<=0||slideHeight<=0){reflow()}isDragging=true;container.addClass(draggingClass);shiftMovementDirection=null;boundElement.trigger("dragstart.spectrum",[get()])}function dragStop(){isDragging=false;container.removeClass(draggingClass);boundElement.trigger("dragstop.spectrum",[get()])}function setFromTextInput(){var value=textInput.val();if((value===null||value==="")&&allowEmpty){set(null);updateOriginalInput(true)}else{var tiny=tinycolor(value);if(tiny.isValid()){set(tiny);updateOriginalInput(true)}else{textInput.addClass("sp-validation-error")}}}function toggle(){if(visible){hide()}else{show()}}function show(){var event=$.Event("beforeShow.spectrum");if(visible){reflow();return}boundElement.trigger(event,[get()]);if(callbacks.beforeShow(get())===false||event.isDefaultPrevented()){return}hideAll();visible=true;$(doc).bind("keydown.spectrum",onkeydown);$(doc).bind("click.spectrum",clickout);$(window).bind("resize.spectrum",resize);replacer.addClass("sp-active");container.removeClass("sp-hidden");reflow();updateUI();colorOnShow=get();drawInitial();callbacks.show(colorOnShow);boundElement.trigger("show.spectrum",[colorOnShow])}function onkeydown(e){if(e.keyCode===27){hide()}}function clickout(e){if(e.button==2){return}if(isDragging){return}if(clickoutFiresChange){updateOriginalInput(true)}else{revert()}hide()}function hide(){if(!visible||flat){return}visible=false;$(doc).unbind("keydown.spectrum",onkeydown);$(doc).unbind("click.spectrum",clickout);$(window).unbind("resize.spectrum",resize);replacer.removeClass("sp-active");container.addClass("sp-hidden");callbacks.hide(get());boundElement.trigger("hide.spectrum",[get()])}function revert(){set(colorOnShow,true)}function set(color,ignoreFormatChange){if(tinycolor.equals(color,get())){updateUI();return}var newColor,newHsv;if(!color&&allowEmpty){isEmpty=true}else{isEmpty=false;newColor=tinycolor(color);newHsv=newColor.toHsv();currentHue=newHsv.h%360/360;currentSaturation=newHsv.s;currentValue=newHsv.v;currentAlpha=newHsv.a}updateUI();if(newColor&&newColor.isValid()&&!ignoreFormatChange){currentPreferredFormat=opts.preferredFormat||newColor.getFormat()}}function get(opts){opts=opts||{};if(allowEmpty&&isEmpty){return null}return tinycolor.fromRatio({h:currentHue,s:currentSaturation,v:currentValue,a:Math.round(currentAlpha*100)/100},{format:opts.format||currentPreferredFormat})}function isValid(){return!textInput.hasClass("sp-validation-error")}function move(){updateUI();callbacks.move(get());boundElement.trigger("move.spectrum",[get()])}function updateUI(){textInput.removeClass("sp-validation-error");updateHelperLocations();var flatColor=tinycolor.fromRatio({h:currentHue,s:1,v:1});dragger.css("background-color",flatColor.toHexString());var format=currentPreferredFormat;if(currentAlpha<1&&!(currentAlpha===0&&format==="name")){if(format==="hex"||format==="hex3"||format==="hex6"||format==="name"){format="rgb"}}var realColor=get({format:format}),displayColor="";previewElement.removeClass("sp-clear-display");previewElement.css("background-color","transparent");if(!realColor&&allowEmpty){previewElement.addClass("sp-clear-display")}else{var realHex=realColor.toHexString(),realRgb=realColor.toRgbString();if(rgbaSupport||realColor.alpha===1){previewElement.css("background-color",realRgb)}else{previewElement.css("background-color","transparent");previewElement.css("filter",realColor.toFilter())}if(opts.showAlpha){var rgb=realColor.toRgb();rgb.a=0;var realAlpha=tinycolor(rgb).toRgbString();var gradient="linear-gradient(left, "+realAlpha+", "+realHex+")";if(IE){alphaSliderInner.css("filter",tinycolor(realAlpha).toFilter({gradientType:1},realHex))}else{alphaSliderInner.css("background","-webkit-"+gradient);alphaSliderInner.css("background","-moz-"+gradient);alphaSliderInner.css("background","-ms-"+gradient);alphaSliderInner.css("background","linear-gradient(to right, "+realAlpha+", "+realHex+")")}}displayColor=realColor.toString(format)}if(opts.showInput){textInput.val(displayColor)}if(opts.showPalette){drawPalette()}drawInitial()}function updateHelperLocations(){var s=currentSaturation;var v=currentValue;if(allowEmpty&&isEmpty){alphaSlideHelper.hide();slideHelper.hide();dragHelper.hide()}else{alphaSlideHelper.show();slideHelper.show();dragHelper.show();var dragX=s*dragWidth;var dragY=dragHeight-v*dragHeight;dragX=Math.max(-dragHelperHeight,Math.min(dragWidth-dragHelperHeight,dragX-dragHelperHeight));dragY=Math.max(-dragHelperHeight,Math.min(dragHeight-dragHelperHeight,dragY-dragHelperHeight));dragHelper.css({top:dragY+"px",left:dragX+"px"});var alphaX=currentAlpha*alphaWidth;alphaSlideHelper.css({left:alphaX-alphaSlideHelperWidth/2+"px"});var slideY=currentHue*slideHeight;slideHelper.css({top:slideY-slideHelperHeight+"px"})}}function updateOriginalInput(fireCallback){var color=get(),displayColor="",hasChanged=!tinycolor.equals(color,colorOnShow);if(color){displayColor=color.toString(currentPreferredFormat);addColorToSelectionPalette(color)}if(isInput){boundElement.val(displayColor)}if(fireCallback&&hasChanged){callbacks.change(color);boundElement.trigger("change",[color])}}function reflow(){if(!visible){return}dragWidth=dragger.width();dragHeight=dragger.height();dragHelperHeight=dragHelper.height();slideWidth=slider.width();slideHeight=slider.height();slideHelperHeight=slideHelper.height();alphaWidth=alphaSlider.width();alphaSlideHelperWidth=alphaSlideHelper.width();if(!flat){container.css("position","absolute");if(opts.offset){container.offset(opts.offset)}else{container.offset(getOffset(container,offsetElement))}}updateHelperLocations();if(opts.showPalette){drawPalette()}boundElement.trigger("reflow.spectrum")}function destroy(){boundElement.show();offsetElement.unbind("click.spectrum touchstart.spectrum");container.remove();replacer.remove();spectrums[spect.id]=null}function option(optionName,optionValue){if(optionName===undefined){return $.extend({},opts)}if(optionValue===undefined){return opts[optionName]}opts[optionName]=optionValue;if(optionName==="preferredFormat"){currentPreferredFormat=opts.preferredFormat}applyOptions()}function enable(){disabled=false;boundElement.attr("disabled",false);offsetElement.removeClass("sp-disabled")}function disable(){hide();disabled=true;boundElement.attr("disabled",true);offsetElement.addClass("sp-disabled")}function setOffset(coord){opts.offset=coord;reflow()}initialize();var spect={show:show,hide:hide,toggle:toggle,reflow:reflow,option:option,enable:enable,disable:disable,offset:setOffset,set:function(c){set(c);updateOriginalInput()},get:get,destroy:destroy,container:container};spect.id=spectrums.push(spect)-1;return spect}function getOffset(picker,input){var extraY=0;var dpWidth=picker.outerWidth();var dpHeight=picker.outerHeight();var inputHeight=input.outerHeight();var doc=picker[0].ownerDocument;var docElem=doc.documentElement;var viewWidth=docElem.clientWidth+$(doc).scrollLeft();var viewHeight=docElem.clientHeight+$(doc).scrollTop();var offset=input.offset();offset.top+=inputHeight;offset.left-=Math.min(offset.left,offset.left+dpWidth>viewWidth&&viewWidth>dpWidth?Math.abs(offset.left+dpWidth-viewWidth):0);offset.top-=Math.min(offset.top,offset.top+dpHeight>viewHeight&&viewHeight>dpHeight?Math.abs(dpHeight+inputHeight-extraY):extraY);return offset}function noop(){}function stopPropagation(e){e.stopPropagation()}function bind(func,obj){var slice=Array.prototype.slice;var args=slice.call(arguments,2);return function(){return func.apply(obj,args.concat(slice.call(arguments)))}}function draggable(element,onmove,onstart,onstop){onmove=onmove||function(){};onstart=onstart||function(){};onstop=onstop||function(){};var doc=document;var dragging=false;var offset={};var maxHeight=0;var maxWidth=0;var hasTouch="ontouchstart"in window;var duringDragEvents={};duringDragEvents["selectstart"]=prevent;duringDragEvents["dragstart"]=prevent;duringDragEvents["touchmove mousemove"]=move;duringDragEvents["touchend mouseup"]=stop;function prevent(e){if(e.stopPropagation){e.stopPropagation()}if(e.preventDefault){e.preventDefault()}e.returnValue=false}function move(e){if(dragging){if(IE&&doc.documentMode<9&&!e.button){return stop()}var t0=e.originalEvent&&e.originalEvent.touches&&e.originalEvent.touches[0];var pageX=t0&&t0.pageX||e.pageX;var pageY=t0&&t0.pageY||e.pageY;var dragX=Math.max(0,Math.min(pageX-offset.left,maxWidth));var dragY=Math.max(0,Math.min(pageY-offset.top,maxHeight));if(hasTouch){prevent(e)}onmove.apply(element,[dragX,dragY,e])}}function start(e){var rightclick=e.which?e.which==3:e.button==2;if(!rightclick&&!dragging){if(onstart.apply(element,arguments)!==false){dragging=true;maxHeight=$(element).height();maxWidth=$(element).width();offset=$(element).offset();$(doc).bind(duringDragEvents);$(doc.body).addClass("sp-dragging");move(e);prevent(e)}}}function stop(){if(dragging){$(doc).unbind(duringDragEvents);$(doc.body).removeClass("sp-dragging");setTimeout(function(){onstop.apply(element,arguments)},0)}dragging=false}$(element).bind("touchstart mousedown",start)}function throttle(func,wait,debounce){var timeout;return function(){var context=this,args=arguments;var throttler=function(){timeout=null;func.apply(context,args)};if(debounce)clearTimeout(timeout);if(debounce||!timeout)timeout=setTimeout(throttler,wait)}}function inputTypeColorSupport(){return $.fn.spectrum.inputTypeColorSupport()}var dataID="spectrum.id";$.fn.spectrum=function(opts,extra){if(typeof opts=="string"){var returnValue=this;var args=Array.prototype.slice.call(arguments,1);this.each(function(){var spect=spectrums[$(this).data(dataID)];if(spect){var method=spect[opts];if(!method){throw new Error("Spectrum: no such method: '"+opts+"'")}if(opts=="get"){returnValue=spect.get()}else if(opts=="container"){returnValue=spect.container}else if(opts=="option"){returnValue=spect.option.apply(spect,args)}else if(opts=="destroy"){spect.destroy();$(this).removeData(dataID)}else{method.apply(spect,args)}}});return returnValue}return this.spectrum("destroy").each(function(){var options=$.extend({},opts,$(this).data());var spect=spectrum(this,options);$(this).data(dataID,spect.id)})};$.fn.spectrum.load=true;$.fn.spectrum.loadOpts={};$.fn.spectrum.draggable=draggable;$.fn.spectrum.defaults=defaultOpts;$.fn.spectrum.inputTypeColorSupport=function inputTypeColorSupport(){if(typeof inputTypeColorSupport._cachedResult==="undefined"){var colorInput=$("<input type='color'/>")[0];inputTypeColorSupport._cachedResult=colorInput.type==="color"&&colorInput.value!==""}return inputTypeColorSupport._cachedResult};$.spectrum={};$.spectrum.localization={};$.spectrum.palettes={};$.fn.spectrum.processNativeColorInputs=function(){var colorInputs=$("input[type=color]");if(colorInputs.length&&!inputTypeColorSupport()){colorInputs.spectrum({preferredFormat:"hex6"})}};(function(){var trimLeft=/^[\s,#]+/,trimRight=/\s+$/,tinyCounter=0,math=Math,mathRound=math.round,mathMin=math.min,mathMax=math.max,mathRandom=math.random;var tinycolor=function(color,opts){color=color?color:"";opts=opts||{};if(color instanceof tinycolor){return color}if(!(this instanceof tinycolor)){return new tinycolor(color,opts)}var rgb=inputToRGB(color);this._originalInput=color,this._r=rgb.r,this._g=rgb.g,this._b=rgb.b,this._a=rgb.a,this._roundA=mathRound(100*this._a)/100,this._format=opts.format||rgb.format;this._gradientType=opts.gradientType;if(this._r<1){this._r=mathRound(this._r)}if(this._g<1){this._g=mathRound(this._g)}if(this._b<1){this._b=mathRound(this._b)}this._ok=rgb.ok;this._tc_id=tinyCounter++};tinycolor.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var rgb=this.toRgb();return(rgb.r*299+rgb.g*587+rgb.b*114)/1e3},setAlpha:function(value){this._a=boundAlpha(value);this._roundA=mathRound(100*this._a)/100;return this},toHsv:function(){var hsv=rgbToHsv(this._r,this._g,this._b);return{h:hsv.h*360,s:hsv.s,v:hsv.v,a:this._a}},toHsvString:function(){var hsv=rgbToHsv(this._r,this._g,this._b);var h=mathRound(hsv.h*360),s=mathRound(hsv.s*100),v=mathRound(hsv.v*100);return this._a==1?"hsv("+h+", "+s+"%, "+v+"%)":"hsva("+h+", "+s+"%, "+v+"%, "+this._roundA+")"},toHsl:function(){var hsl=rgbToHsl(this._r,this._g,this._b);return{h:hsl.h*360,s:hsl.s,l:hsl.l,a:this._a}},toHslString:function(){var hsl=rgbToHsl(this._r,this._g,this._b);var h=mathRound(hsl.h*360),s=mathRound(hsl.s*100),l=mathRound(hsl.l*100);return this._a==1?"hsl("+h+", "+s+"%, "+l+"%)":"hsla("+h+", "+s+"%, "+l+"%, "+this._roundA+")"},toHex:function(allow3Char){return rgbToHex(this._r,this._g,this._b,allow3Char)},toHexString:function(allow3Char){return"#"+this.toHex(allow3Char)},toHex8:function(){return rgbaToHex(this._r,this._g,this._b,this._a)},toHex8String:function(){return"#"+this.toHex8()},toRgb:function(){return{r:mathRound(this._r),g:mathRound(this._g),b:mathRound(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+mathRound(this._r)+", "+mathRound(this._g)+", "+mathRound(this._b)+")":"rgba("+mathRound(this._r)+", "+mathRound(this._g)+", "+mathRound(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:mathRound(bound01(this._r,255)*100)+"%",g:mathRound(bound01(this._g,255)*100)+"%",b:mathRound(bound01(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+mathRound(bound01(this._r,255)*100)+"%, "+mathRound(bound01(this._g,255)*100)+"%, "+mathRound(bound01(this._b,255)*100)+"%)":"rgba("+mathRound(bound01(this._r,255)*100)+"%, "+mathRound(bound01(this._g,255)*100)+"%, "+mathRound(bound01(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){if(this._a===0){return"transparent"}if(this._a<1){return false}return hexNames[rgbToHex(this._r,this._g,this._b,true)]||false},toFilter:function(secondColor){var hex8String="#"+rgbaToHex(this._r,this._g,this._b,this._a);var secondHex8String=hex8String;var gradientType=this._gradientType?"GradientType = 1, ":"";if(secondColor){var s=tinycolor(secondColor);secondHex8String=s.toHex8String()}return"progid:DXImageTransform.Microsoft.gradient("+gradientType+"startColorstr="+hex8String+",endColorstr="+secondHex8String+")"},toString:function(format){var formatSet=!!format;format=format||this._format;var formattedString=false;var hasAlpha=this._a<1&&this._a>=0;var needsAlphaFormat=!formatSet&&hasAlpha&&(format==="hex"||format==="hex6"||format==="hex3"||format==="name");if(needsAlphaFormat){if(format==="name"&&this._a===0){return this.toName()}return this.toRgbString()}if(format==="rgb"){formattedString=this.toRgbString()}if(format==="prgb"){formattedString=this.toPercentageRgbString()}if(format==="hex"||format==="hex6"){formattedString=this.toHexString()}if(format==="hex3"){formattedString=this.toHexString(true)}if(format==="hex8"){formattedString=this.toHex8String()}if(format==="name"){formattedString=this.toName()}if(format==="hsl"){formattedString=this.toHslString()}if(format==="hsv"){formattedString=this.toHsvString()}return formattedString||this.toHexString()},_applyModification:function(fn,args){var color=fn.apply(null,[this].concat([].slice.call(args)));this._r=color._r;this._g=color._g;this._b=color._b;this.setAlpha(color._a);return this},lighten:function(){return this._applyModification(lighten,arguments)},brighten:function(){return this._applyModification(brighten,arguments)},darken:function(){return this._applyModification(darken,arguments)},desaturate:function(){return this._applyModification(desaturate,arguments)},saturate:function(){return this._applyModification(saturate,arguments)},greyscale:function(){return this._applyModification(greyscale,arguments)},spin:function(){return this._applyModification(spin,arguments)},_applyCombination:function(fn,args){return fn.apply(null,[this].concat([].slice.call(args)))},analogous:function(){return this._applyCombination(analogous,arguments)},complement:function(){return this._applyCombination(complement,arguments)},monochromatic:function(){return this._applyCombination(monochromatic,arguments)},splitcomplement:function(){return this._applyCombination(splitcomplement,arguments)},triad:function(){return this._applyCombination(triad,arguments)},tetrad:function(){return this._applyCombination(tetrad,arguments)}};tinycolor.fromRatio=function(color,opts){if(typeof color=="object"){var newColor={};for(var i in color){if(color.hasOwnProperty(i)){if(i==="a"){newColor[i]=color[i]}else{newColor[i]=convertToPercentage(color[i])}}}color=newColor}return tinycolor(color,opts)};function inputToRGB(color){var rgb={r:0,g:0,b:0};var a=1;var ok=false;var format=false;if(typeof color=="string"){color=stringInputToObject(color)}if(typeof color=="object"){if(color.hasOwnProperty("r")&&color.hasOwnProperty("g")&&color.hasOwnProperty("b")){rgb=rgbToRgb(color.r,color.g,color.b);ok=true;format=String(color.r).substr(-1)==="%"?"prgb":"rgb"}else if(color.hasOwnProperty("h")&&color.hasOwnProperty("s")&&color.hasOwnProperty("v")){color.s=convertToPercentage(color.s);color.v=convertToPercentage(color.v);rgb=hsvToRgb(color.h,color.s,color.v);ok=true;format="hsv"}else if(color.hasOwnProperty("h")&&color.hasOwnProperty("s")&&color.hasOwnProperty("l")){color.s=convertToPercentage(color.s);color.l=convertToPercentage(color.l);rgb=hslToRgb(color.h,color.s,color.l);ok=true;format="hsl"}if(color.hasOwnProperty("a")){a=color.a}}a=boundAlpha(a);return{ok:ok,format:color.format||format,r:mathMin(255,mathMax(rgb.r,0)),g:mathMin(255,mathMax(rgb.g,0)),b:mathMin(255,mathMax(rgb.b,0)),a:a}}function rgbToRgb(r,g,b){return{r:bound01(r,255)*255,g:bound01(g,255)*255,b:bound01(b,255)*255}}function rgbToHsl(r,g,b){r=bound01(r,255);g=bound01(g,255);b=bound01(b,255);var max=mathMax(r,g,b),min=mathMin(r,g,b);var h,s,l=(max+min)/2;if(max==min){h=s=0}else{var d=max-min;s=l>.5?d/(2-max-min):d/(max+min);switch(max){case r:h=(g-b)/d+(g<b?6:0);break;case g:h=(b-r)/d+2;break;case b:h=(r-g)/d+4;break}h/=6}return{h:h,s:s,l:l}}function hslToRgb(h,s,l){var r,g,b;h=bound01(h,360);s=bound01(s,100);l=bound01(l,100);function hue2rgb(p,q,t){if(t<0)t+=1;if(t>1)t-=1;if(t<1/6)return p+(q-p)*6*t;if(t<1/2)return q;if(t<2/3)return p+(q-p)*(2/3-t)*6;return p}if(s===0){r=g=b=l}else{var q=l<.5?l*(1+s):l+s-l*s;var p=2*l-q;r=hue2rgb(p,q,h+1/3);g=hue2rgb(p,q,h);b=hue2rgb(p,q,h-1/3)}return{r:r*255,g:g*255,b:b*255}}function rgbToHsv(r,g,b){r=bound01(r,255);g=bound01(g,255);b=bound01(b,255);var max=mathMax(r,g,b),min=mathMin(r,g,b);var h,s,v=max;var d=max-min;s=max===0?0:d/max;if(max==min){h=0}else{switch(max){case r:h=(g-b)/d+(g<b?6:0);break;case g:h=(b-r)/d+2;break;case b:h=(r-g)/d+4;break}h/=6}return{h:h,s:s,v:v}}function hsvToRgb(h,s,v){h=bound01(h,360)*6;s=bound01(s,100);v=bound01(v,100);var i=math.floor(h),f=h-i,p=v*(1-s),q=v*(1-f*s),t=v*(1-(1-f)*s),mod=i%6,r=[v,q,p,p,t,v][mod],g=[t,v,v,q,p,p][mod],b=[p,p,t,v,v,q][mod];return{r:r*255,g:g*255,b:b*255}}function rgbToHex(r,g,b,allow3Char){var hex=[pad2(mathRound(r).toString(16)),pad2(mathRound(g).toString(16)),pad2(mathRound(b).toString(16))];if(allow3Char&&hex[0].charAt(0)==hex[0].charAt(1)&&hex[1].charAt(0)==hex[1].charAt(1)&&hex[2].charAt(0)==hex[2].charAt(1)){return hex[0].charAt(0)+hex[1].charAt(0)+hex[2].charAt(0)}return hex.join("")}function rgbaToHex(r,g,b,a){var hex=[pad2(convertDecimalToHex(a)),pad2(mathRound(r).toString(16)),pad2(mathRound(g).toString(16)),pad2(mathRound(b).toString(16))];return hex.join("")}tinycolor.equals=function(color1,color2){if(!color1||!color2){return false}return tinycolor(color1).toRgbString()==tinycolor(color2).toRgbString()};tinycolor.random=function(){return tinycolor.fromRatio({r:mathRandom(),g:mathRandom(),b:mathRandom()})};function desaturate(color,amount){amount=amount===0?0:amount||10;var hsl=tinycolor(color).toHsl();hsl.s-=amount/100;hsl.s=clamp01(hsl.s);return tinycolor(hsl)}function saturate(color,amount){amount=amount===0?0:amount||10;var hsl=tinycolor(color).toHsl();hsl.s+=amount/100;hsl.s=clamp01(hsl.s);return tinycolor(hsl)}function greyscale(color){return tinycolor(color).desaturate(100)}function lighten(color,amount){amount=amount===0?0:amount||10;var hsl=tinycolor(color).toHsl();hsl.l+=amount/100;hsl.l=clamp01(hsl.l);return tinycolor(hsl)}function brighten(color,amount){amount=amount===0?0:amount||10;var rgb=tinycolor(color).toRgb();rgb.r=mathMax(0,mathMin(255,rgb.r-mathRound(255*-(amount/100))));rgb.g=mathMax(0,mathMin(255,rgb.g-mathRound(255*-(amount/100))));rgb.b=mathMax(0,mathMin(255,rgb.b-mathRound(255*-(amount/100))));return tinycolor(rgb)}function darken(color,amount){amount=amount===0?0:amount||10;var hsl=tinycolor(color).toHsl();hsl.l-=amount/100;hsl.l=clamp01(hsl.l);return tinycolor(hsl)}function spin(color,amount){var hsl=tinycolor(color).toHsl();var hue=(mathRound(hsl.h)+amount)%360;hsl.h=hue<0?360+hue:hue;return tinycolor(hsl)}function complement(color){var hsl=tinycolor(color).toHsl();hsl.h=(hsl.h+180)%360;return tinycolor(hsl)}function triad(color){var hsl=tinycolor(color).toHsl();var h=hsl.h;return[tinycolor(color),tinycolor({h:(h+120)%360,s:hsl.s,l:hsl.l}),tinycolor({h:(h+240)%360,s:hsl.s,l:hsl.l})]}function tetrad(color){var hsl=tinycolor(color).toHsl();var h=hsl.h;return[tinycolor(color),tinycolor({h:(h+90)%360,s:hsl.s,l:hsl.l}),tinycolor({h:(h+180)%360,s:hsl.s,l:hsl.l}),tinycolor({h:(h+270)%360,s:hsl.s,l:hsl.l})]}function splitcomplement(color){var hsl=tinycolor(color).toHsl();var h=hsl.h;return[tinycolor(color),tinycolor({h:(h+72)%360,s:hsl.s,l:hsl.l}),tinycolor({h:(h+216)%360,s:hsl.s,l:hsl.l})]}function analogous(color,results,slices){results=results||6;slices=slices||30;var hsl=tinycolor(color).toHsl();var part=360/slices;var ret=[tinycolor(color)];for(hsl.h=(hsl.h-(part*results>>1)+720)%360;--results;){hsl.h=(hsl.h+part)%360;ret.push(tinycolor(hsl))}return ret}function monochromatic(color,results){results=results||6;var hsv=tinycolor(color).toHsv();var h=hsv.h,s=hsv.s,v=hsv.v;var ret=[];var modification=1/results;while(results--){ret.push(tinycolor({h:h,s:s,v:v}));v=(v+modification)%1}return ret}tinycolor.mix=function(color1,color2,amount){amount=amount===0?0:amount||50;var rgb1=tinycolor(color1).toRgb();var rgb2=tinycolor(color2).toRgb();var p=amount/100;var w=p*2-1;var a=rgb2.a-rgb1.a;var w1;if(w*a==-1){w1=w}else{w1=(w+a)/(1+w*a)}w1=(w1+1)/2;var w2=1-w1;var rgba={r:rgb2.r*w1+rgb1.r*w2,g:rgb2.g*w1+rgb1.g*w2,b:rgb2.b*w1+rgb1.b*w2,a:rgb2.a*p+rgb1.a*(1-p)};return tinycolor(rgba)};tinycolor.readability=function(color1,color2){var c1=tinycolor(color1);var c2=tinycolor(color2);var rgb1=c1.toRgb();var rgb2=c2.toRgb();var brightnessA=c1.getBrightness();var brightnessB=c2.getBrightness();var colorDiff=Math.max(rgb1.r,rgb2.r)-Math.min(rgb1.r,rgb2.r)+Math.max(rgb1.g,rgb2.g)-Math.min(rgb1.g,rgb2.g)+Math.max(rgb1.b,rgb2.b)-Math.min(rgb1.b,rgb2.b);return{brightness:Math.abs(brightnessA-brightnessB),color:colorDiff}};tinycolor.isReadable=function(color1,color2){var readability=tinycolor.readability(color1,color2);return readability.brightness>125&&readability.color>500};tinycolor.mostReadable=function(baseColor,colorList){var bestColor=null;var bestScore=0;var bestIsReadable=false;for(var i=0;i<colorList.length;i++){var readability=tinycolor.readability(baseColor,colorList[i]);var readable=readability.brightness>125&&readability.color>500;var score=3*(readability.brightness/125)+readability.color/500;if(readable&&!bestIsReadable||readable&&bestIsReadable&&score>bestScore||!readable&&!bestIsReadable&&score>bestScore){bestIsReadable=readable;bestScore=score;bestColor=tinycolor(colorList[i])}}return bestColor};var names=tinycolor.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"};
var hexNames=tinycolor.hexNames=flip(names);function flip(o){var flipped={};for(var i in o){if(o.hasOwnProperty(i)){flipped[o[i]]=i}}return flipped}function boundAlpha(a){a=parseFloat(a);if(isNaN(a)||a<0||a>1){a=1}return a}function bound01(n,max){if(isOnePointZero(n)){n="100%"}var processPercent=isPercentage(n);n=mathMin(max,mathMax(0,parseFloat(n)));if(processPercent){n=parseInt(n*max,10)/100}if(math.abs(n-max)<1e-6){return 1}return n%max/parseFloat(max)}function clamp01(val){return mathMin(1,mathMax(0,val))}function parseIntFromHex(val){return parseInt(val,16)}function isOnePointZero(n){return typeof n=="string"&&n.indexOf(".")!=-1&&parseFloat(n)===1}function isPercentage(n){return typeof n==="string"&&n.indexOf("%")!=-1}function pad2(c){return c.length==1?"0"+c:""+c}function convertToPercentage(n){if(n<=1){n=n*100+"%"}return n}function convertDecimalToHex(d){return Math.round(parseFloat(d)*255).toString(16)}function convertHexToDecimal(h){return parseIntFromHex(h)/255}var matchers=function(){var CSS_INTEGER="[-\\+]?\\d+%?";var CSS_NUMBER="[-\\+]?\\d*\\.\\d+%?";var CSS_UNIT="(?:"+CSS_NUMBER+")|(?:"+CSS_INTEGER+")";var PERMISSIVE_MATCH3="[\\s|\\(]+("+CSS_UNIT+")[,|\\s]+("+CSS_UNIT+")[,|\\s]+("+CSS_UNIT+")\\s*\\)?";var PERMISSIVE_MATCH4="[\\s|\\(]+("+CSS_UNIT+")[,|\\s]+("+CSS_UNIT+")[,|\\s]+("+CSS_UNIT+")[,|\\s]+("+CSS_UNIT+")\\s*\\)?";return{rgb:new RegExp("rgb"+PERMISSIVE_MATCH3),rgba:new RegExp("rgba"+PERMISSIVE_MATCH4),hsl:new RegExp("hsl"+PERMISSIVE_MATCH3),hsla:new RegExp("hsla"+PERMISSIVE_MATCH4),hsv:new RegExp("hsv"+PERMISSIVE_MATCH3),hsva:new RegExp("hsva"+PERMISSIVE_MATCH4),hex3:/^([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex8:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function stringInputToObject(color){color=color.replace(trimLeft,"").replace(trimRight,"").toLowerCase();var named=false;if(names[color]){color=names[color];named=true}else if(color=="transparent"){return{r:0,g:0,b:0,a:0,format:"name"}}var match;if(match=matchers.rgb.exec(color)){return{r:match[1],g:match[2],b:match[3]}}if(match=matchers.rgba.exec(color)){return{r:match[1],g:match[2],b:match[3],a:match[4]}}if(match=matchers.hsl.exec(color)){return{h:match[1],s:match[2],l:match[3]}}if(match=matchers.hsla.exec(color)){return{h:match[1],s:match[2],l:match[3],a:match[4]}}if(match=matchers.hsv.exec(color)){return{h:match[1],s:match[2],v:match[3]}}if(match=matchers.hsva.exec(color)){return{h:match[1],s:match[2],v:match[3],a:match[4]}}if(match=matchers.hex8.exec(color)){return{a:convertHexToDecimal(match[1]),r:parseIntFromHex(match[2]),g:parseIntFromHex(match[3]),b:parseIntFromHex(match[4]),format:named?"name":"hex8"}}if(match=matchers.hex6.exec(color)){return{r:parseIntFromHex(match[1]),g:parseIntFromHex(match[2]),b:parseIntFromHex(match[3]),format:named?"name":"hex"}}if(match=matchers.hex3.exec(color)){return{r:parseIntFromHex(match[1]+""+match[1]),g:parseIntFromHex(match[2]+""+match[2]),b:parseIntFromHex(match[3]+""+match[3]),format:named?"name":"hex"}}return false}window.tinycolor=tinycolor})();$(function(){if($.fn.spectrum.load){$.fn.spectrum.processNativeColorInputs()}})})},function(module,exports,__webpack_require__){"use strict";var ansiRegex=__webpack_require__(82)();module.exports=function(str){return typeof str==="string"?str.replace(ansiRegex,""):str}},function(module,exports,__webpack_require__){"use strict";var has=Object.prototype.hasOwnProperty;function decode(input){return decodeURIComponent(input.replace(/\+/g," "))}function querystring(query){var parser=/([^=?&]+)=?([^&]*)/g,result={},part;for(;part=parser.exec(query);result[decode(part[1])]=decode(part[2]));return result}function querystringify(obj,prefix){prefix=prefix||"";var pairs=[];if("string"!==typeof prefix)prefix="?";for(var key in obj){if(has.call(obj,key)){pairs.push(encodeURIComponent(key)+"="+encodeURIComponent(obj[key]))}}return pairs.length?prefix+pairs.join("&"):""}exports.stringify=querystringify;exports.parse=querystring},function(module,exports,__webpack_require__){"use strict";var punycode=__webpack_require__(271);var util=__webpack_require__(306);exports.parse=urlParse;exports.resolve=urlResolve;exports.resolveObject=urlResolveObject;exports.format=urlFormat;exports.Url=Url;function Url(){this.protocol=null;this.slashes=null;this.auth=null;this.host=null;this.port=null;this.hostname=null;this.hash=null;this.search=null;this.query=null;this.pathname=null;this.path=null;this.href=null}var protocolPattern=/^([a-z0-9.+-]+:)/i,portPattern=/:[0-9]*$/,simplePathPattern=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,delims=["<",">",'"',"`"," ","\r","\n","	"],unwise=["{","}","|","\\","^","`"].concat(delims),autoEscape=["'"].concat(unwise),nonHostChars=["%","/","?",";","#"].concat(autoEscape),hostEndingChars=["/","?","#"],hostnameMaxLen=255,hostnamePartPattern=/^[+a-z0-9A-Z_-]{0,63}$/,hostnamePartStart=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,unsafeProtocol={javascript:true,"javascript:":true},hostlessProtocol={javascript:true,"javascript:":true},slashedProtocol={http:true,https:true,ftp:true,gopher:true,file:true,"http:":true,"https:":true,"ftp:":true,"gopher:":true,"file:":true},querystring=__webpack_require__(274);function urlParse(url,parseQueryString,slashesDenoteHost){if(url&&util.isObject(url)&&url instanceof Url)return url;var u=new Url;u.parse(url,parseQueryString,slashesDenoteHost);return u}Url.prototype.parse=function(url,parseQueryString,slashesDenoteHost){if(!util.isString(url)){throw new TypeError("Parameter 'url' must be a string, not "+typeof url)}var queryIndex=url.indexOf("?"),splitter=queryIndex!==-1&&queryIndex<url.indexOf("#")?"?":"#",uSplit=url.split(splitter),slashRegex=/\\/g;uSplit[0]=uSplit[0].replace(slashRegex,"/");url=uSplit.join(splitter);var rest=url;rest=rest.trim();if(!slashesDenoteHost&&url.split("#").length===1){var simplePath=simplePathPattern.exec(rest);if(simplePath){this.path=rest;this.href=rest;this.pathname=simplePath[1];if(simplePath[2]){this.search=simplePath[2];if(parseQueryString){this.query=querystring.parse(this.search.substr(1))}else{this.query=this.search.substr(1)}}else if(parseQueryString){this.search="";this.query={}}return this}}var proto=protocolPattern.exec(rest);if(proto){proto=proto[0];var lowerProto=proto.toLowerCase();this.protocol=lowerProto;rest=rest.substr(proto.length)}if(slashesDenoteHost||proto||rest.match(/^\/\/[^@\/]+@[^@\/]+/)){var slashes=rest.substr(0,2)==="//";if(slashes&&!(proto&&hostlessProtocol[proto])){rest=rest.substr(2);this.slashes=true}}if(!hostlessProtocol[proto]&&(slashes||proto&&!slashedProtocol[proto])){var hostEnd=-1;for(var i=0;i<hostEndingChars.length;i++){var hec=rest.indexOf(hostEndingChars[i]);if(hec!==-1&&(hostEnd===-1||hec<hostEnd))hostEnd=hec}var auth,atSign;if(hostEnd===-1){atSign=rest.lastIndexOf("@")}else{atSign=rest.lastIndexOf("@",hostEnd)}if(atSign!==-1){auth=rest.slice(0,atSign);rest=rest.slice(atSign+1);this.auth=decodeURIComponent(auth)}hostEnd=-1;for(var i=0;i<nonHostChars.length;i++){var hec=rest.indexOf(nonHostChars[i]);if(hec!==-1&&(hostEnd===-1||hec<hostEnd))hostEnd=hec}if(hostEnd===-1)hostEnd=rest.length;this.host=rest.slice(0,hostEnd);rest=rest.slice(hostEnd);this.parseHost();this.hostname=this.hostname||"";var ipv6Hostname=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!ipv6Hostname){var hostparts=this.hostname.split(/\./);for(var i=0,l=hostparts.length;i<l;i++){var part=hostparts[i];if(!part)continue;if(!part.match(hostnamePartPattern)){var newpart="";for(var j=0,k=part.length;j<k;j++){if(part.charCodeAt(j)>127){newpart+="x"}else{newpart+=part[j]}}if(!newpart.match(hostnamePartPattern)){var validParts=hostparts.slice(0,i);var notHost=hostparts.slice(i+1);var bit=part.match(hostnamePartStart);if(bit){validParts.push(bit[1]);notHost.unshift(bit[2])}if(notHost.length){rest="/"+notHost.join(".")+rest}this.hostname=validParts.join(".");break}}}}if(this.hostname.length>hostnameMaxLen){this.hostname=""}else{this.hostname=this.hostname.toLowerCase()}if(!ipv6Hostname){this.hostname=punycode.toASCII(this.hostname)}var p=this.port?":"+this.port:"";var h=this.hostname||"";this.host=h+p;this.href+=this.host;if(ipv6Hostname){this.hostname=this.hostname.substr(1,this.hostname.length-2);if(rest[0]!=="/"){rest="/"+rest}}}if(!unsafeProtocol[lowerProto]){for(var i=0,l=autoEscape.length;i<l;i++){var ae=autoEscape[i];if(rest.indexOf(ae)===-1)continue;var esc=encodeURIComponent(ae);if(esc===ae){esc=escape(ae)}rest=rest.split(ae).join(esc)}}var hash=rest.indexOf("#");if(hash!==-1){this.hash=rest.substr(hash);rest=rest.slice(0,hash)}var qm=rest.indexOf("?");if(qm!==-1){this.search=rest.substr(qm);this.query=rest.substr(qm+1);if(parseQueryString){this.query=querystring.parse(this.query)}rest=rest.slice(0,qm)}else if(parseQueryString){this.search="";this.query={}}if(rest)this.pathname=rest;if(slashedProtocol[lowerProto]&&this.hostname&&!this.pathname){this.pathname="/"}if(this.pathname||this.search){var p=this.pathname||"";var s=this.search||"";this.path=p+s}this.href=this.format();return this};function urlFormat(obj){if(util.isString(obj))obj=urlParse(obj);if(!(obj instanceof Url))return Url.prototype.format.call(obj);return obj.format()}Url.prototype.format=function(){var auth=this.auth||"";if(auth){auth=encodeURIComponent(auth);auth=auth.replace(/%3A/i,":");auth+="@"}var protocol=this.protocol||"",pathname=this.pathname||"",hash=this.hash||"",host=false,query="";if(this.host){host=auth+this.host}else if(this.hostname){host=auth+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]");if(this.port){host+=":"+this.port}}if(this.query&&util.isObject(this.query)&&Object.keys(this.query).length){query=querystring.stringify(this.query)}var search=this.search||query&&"?"+query||"";if(protocol&&protocol.substr(-1)!==":")protocol+=":";if(this.slashes||(!protocol||slashedProtocol[protocol])&&host!==false){host="//"+(host||"");if(pathname&&pathname.charAt(0)!=="/")pathname="/"+pathname}else if(!host){host=""}if(hash&&hash.charAt(0)!=="#")hash="#"+hash;if(search&&search.charAt(0)!=="?")search="?"+search;pathname=pathname.replace(/[?#]/g,function(match){return encodeURIComponent(match)});search=search.replace("#","%23");return protocol+host+pathname+search+hash};function urlResolve(source,relative){return urlParse(source,false,true).resolve(relative)}Url.prototype.resolve=function(relative){return this.resolveObject(urlParse(relative,false,true)).format()};function urlResolveObject(source,relative){if(!source)return relative;return urlParse(source,false,true).resolveObject(relative)}Url.prototype.resolveObject=function(relative){if(util.isString(relative)){var rel=new Url;rel.parse(relative,false,true);relative=rel}var result=new Url;var tkeys=Object.keys(this);for(var tk=0;tk<tkeys.length;tk++){var tkey=tkeys[tk];result[tkey]=this[tkey]}result.hash=relative.hash;if(relative.href===""){result.href=result.format();return result}if(relative.slashes&&!relative.protocol){var rkeys=Object.keys(relative);for(var rk=0;rk<rkeys.length;rk++){var rkey=rkeys[rk];if(rkey!=="protocol")result[rkey]=relative[rkey]}if(slashedProtocol[result.protocol]&&result.hostname&&!result.pathname){result.path=result.pathname="/"}result.href=result.format();return result}if(relative.protocol&&relative.protocol!==result.protocol){if(!slashedProtocol[relative.protocol]){var keys=Object.keys(relative);for(var v=0;v<keys.length;v++){var k=keys[v];result[k]=relative[k]}result.href=result.format();return result}result.protocol=relative.protocol;if(!relative.host&&!hostlessProtocol[relative.protocol]){var relPath=(relative.pathname||"").split("/");while(relPath.length&&!(relative.host=relPath.shift()));if(!relative.host)relative.host="";if(!relative.hostname)relative.hostname="";if(relPath[0]!=="")relPath.unshift("");if(relPath.length<2)relPath.unshift("");result.pathname=relPath.join("/")}else{result.pathname=relative.pathname}result.search=relative.search;result.query=relative.query;result.host=relative.host||"";result.auth=relative.auth;result.hostname=relative.hostname||relative.host;result.port=relative.port;if(result.pathname||result.search){var p=result.pathname||"";var s=result.search||"";result.path=p+s}result.slashes=result.slashes||relative.slashes;result.href=result.format();return result}var isSourceAbs=result.pathname&&result.pathname.charAt(0)==="/",isRelAbs=relative.host||relative.pathname&&relative.pathname.charAt(0)==="/",mustEndAbs=isRelAbs||isSourceAbs||result.host&&relative.pathname,removeAllDots=mustEndAbs,srcPath=result.pathname&&result.pathname.split("/")||[],relPath=relative.pathname&&relative.pathname.split("/")||[],psychotic=result.protocol&&!slashedProtocol[result.protocol];if(psychotic){result.hostname="";result.port=null;if(result.host){if(srcPath[0]==="")srcPath[0]=result.host;else srcPath.unshift(result.host)}result.host="";if(relative.protocol){relative.hostname=null;relative.port=null;if(relative.host){if(relPath[0]==="")relPath[0]=relative.host;else relPath.unshift(relative.host)}relative.host=null}mustEndAbs=mustEndAbs&&(relPath[0]===""||srcPath[0]==="")}if(isRelAbs){result.host=relative.host||relative.host===""?relative.host:result.host;result.hostname=relative.hostname||relative.hostname===""?relative.hostname:result.hostname;result.search=relative.search;result.query=relative.query;srcPath=relPath}else if(relPath.length){if(!srcPath)srcPath=[];srcPath.pop();srcPath=srcPath.concat(relPath);result.search=relative.search;result.query=relative.query}else if(!util.isNullOrUndefined(relative.search)){if(psychotic){result.hostname=result.host=srcPath.shift();var authInHost=result.host&&result.host.indexOf("@")>0?result.host.split("@"):false;if(authInHost){result.auth=authInHost.shift();result.host=result.hostname=authInHost.shift()}}result.search=relative.search;result.query=relative.query;if(!util.isNull(result.pathname)||!util.isNull(result.search)){result.path=(result.pathname?result.pathname:"")+(result.search?result.search:"")}result.href=result.format();return result}if(!srcPath.length){result.pathname=null;if(result.search){result.path="/"+result.search}else{result.path=null}result.href=result.format();return result}var last=srcPath.slice(-1)[0];var hasTrailingSlash=(result.host||relative.host||srcPath.length>1)&&(last==="."||last==="..")||last==="";var up=0;for(var i=srcPath.length;i>=0;i--){last=srcPath[i];if(last==="."){srcPath.splice(i,1)}else if(last===".."){srcPath.splice(i,1);up++}else if(up){srcPath.splice(i,1);up--}}if(!mustEndAbs&&!removeAllDots){for(;up--;up){srcPath.unshift("..")}}if(mustEndAbs&&srcPath[0]!==""&&(!srcPath[0]||srcPath[0].charAt(0)!=="/")){srcPath.unshift("")}if(hasTrailingSlash&&srcPath.join("/").substr(-1)!=="/"){srcPath.push("")}var isAbsolute=srcPath[0]===""||srcPath[0]&&srcPath[0].charAt(0)==="/";if(psychotic){result.hostname=result.host=isAbsolute?"":srcPath.length?srcPath.shift():"";var authInHost=result.host&&result.host.indexOf("@")>0?result.host.split("@"):false;if(authInHost){result.auth=authInHost.shift();result.host=result.hostname=authInHost.shift()}}mustEndAbs=mustEndAbs||result.host&&srcPath.length;if(mustEndAbs&&!isAbsolute){srcPath.unshift("")}if(!srcPath.length){result.pathname=null;result.path=null}else{result.pathname=srcPath.join("/")}if(!util.isNull(result.pathname)||!util.isNull(result.search)){result.path=(result.pathname?result.pathname:"")+(result.search?result.search:"")}result.auth=relative.auth||result.auth;result.slashes=result.slashes||relative.slashes;result.href=result.format();return result};Url.prototype.parseHost=function(){var host=this.host;var port=portPattern.exec(host);if(port){port=port[0];if(port!==":"){this.port=port.substr(1)}host=host.substr(0,host.length-port.length)}if(host)this.hostname=host}},function(module,exports,__webpack_require__){"use strict";module.exports={isString:function(arg){return typeof arg==="string"},isObject:function(arg){return typeof arg==="object"&&arg!==null},isNull:function(arg){return arg===null},isNullOrUndefined:function(arg){return arg==null}}},function(module,exports,__webpack_require__){var ansiHTML=__webpack_require__(81);var Entities=__webpack_require__(267).AllHtmlEntities;var entities=new Entities;var colors={reset:["transparent","transparent"],black:"181818",red:"E36049",green:"B3CB74",yellow:"FFD080",blue:"7CAFC2",magenta:"7FACCA",cyan:"C3C2EF",lightgrey:"EBE7E3",darkgrey:"6D7891"};ansiHTML.setColors(colors);function createOverlayIframe(onIframeLoad){var iframe=document.createElement("iframe");iframe.id="webpack-dev-server-client-overlay";iframe.src="about:blank";iframe.style.position="fixed";iframe.style.left=0;iframe.style.top=0;iframe.style.right=0;iframe.style.bottom=0;iframe.style.width="100vw";iframe.style.height="100vh";iframe.style.border="none";iframe.style.zIndex=9999999999;iframe.onload=onIframeLoad;return iframe}function addOverlayDivTo(iframe){var div=iframe.contentDocument.createElement("div");div.id="webpack-dev-server-client-overlay-div";div.style.position="fixed";div.style.boxSizing="border-box";div.style.left=0;div.style.top=0;div.style.right=0;div.style.bottom=0;div.style.width="100vw";div.style.height="100vh";div.style.backgroundColor="black";div.style.color="#E8E8E8";div.style.fontFamily="Menlo, Consolas, monospace";div.style.fontSize="large";div.style.padding="2rem";div.style.lineHeight="1.2";div.style.whiteSpace="pre-wrap";div.style.overflow="auto";iframe.contentDocument.body.appendChild(div);return div}var overlayIframe=null;var overlayDiv=null;var lastOnOverlayDivReady=null;function ensureOverlayDivExists(onOverlayDivReady){if(overlayDiv){onOverlayDivReady(overlayDiv);return}lastOnOverlayDivReady=onOverlayDivReady;if(overlayIframe){return}overlayIframe=createOverlayIframe(function onIframeLoad(){overlayDiv=addOverlayDivTo(overlayIframe);lastOnOverlayDivReady(overlayDiv)});document.body.appendChild(overlayIframe)}function showMessageOverlay(message){ensureOverlayDivExists(function onOverlayDivReady(overlayDiv){overlayDiv.innerHTML='<span style="color: #'+colors.red+'">Failed to compile.</span><br><br>'+ansiHTML(entities.encode(message))})}function destroyErrorOverlay(){if(!overlayDiv){return}document.body.removeChild(overlayIframe);overlayDiv=null;overlayIframe=null;lastOnOverlayDivReady=null}exports.clear=function handleSuccess(){destroyErrorOverlay()};exports.showMessage=function handleMessage(messages){showMessageOverlay(messages[0])}},function(module,exports,__webpack_require__){var SockJS=__webpack_require__(276);var retries=0;var sock=null;function socket(url,handlers){sock=new SockJS(url);sock.onopen=function(){retries=0};sock.onclose=function(){if(retries===0)handlers.close();sock=null;if(retries<=10){var retryInMs=1e3*Math.pow(2,retries)+Math.random()*100;retries+=1;setTimeout(function(){socket(url,handlers)},retryInMs)}};sock.onmessage=function(e){var msg=JSON.parse(e.data);if(handlers[msg.type])handlers[msg.type](msg.data)}}module.exports=socket},function(module,exports){(function(__webpack_amd_options__){module.exports=__webpack_amd_options__}).call(exports,{})},function(module,exports,__webpack_require__){var EventEmitter=__webpack_require__(266);module.exports=new EventEmitter},function(module,exports,__webpack_require__){__webpack_require__(80);module.exports=__webpack_require__(79)}])});